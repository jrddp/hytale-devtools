var bc=Object.defineProperty;var na=e=>{throw TypeError(e)};var Ec=(e,t,n)=>t in e?bc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Te=(e,t,n)=>Ec(e,typeof t!="symbol"?t+"":t,n),No=(e,t,n)=>t.has(e)||na("Cannot "+n);var g=(e,t,n)=>(No(e,t,"read from private field"),n?n.call(e):t.get(e)),R=(e,t,n)=>t.has(e)?na("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),fe=(e,t,n,r)=>(No(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Xe=(e,t,n)=>(No(e,t,"access private method"),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const Bo=!1;var ii=Array.isArray,Nc=Array.prototype.indexOf,mr=Array.prototype.includes,so=Array.from,Sc=Object.defineProperty,xn=Object.getOwnPropertyDescriptor,sl=Object.getOwnPropertyDescriptors,al=Object.prototype,kc=Array.prototype,ao=Object.getPrototypeOf,ra=Object.isExtensible;function Or(e){return typeof e=="function"}const Qn=()=>{};function Cc(e){return e()}function Vo(e){for(var t=0;t<e.length;t++)e[t]()}function ll(){var e,t,n=new Promise((r,i)=>{e=r,t=i});return{promise:n,resolve:e,reject:t}}function je(e,t,n=!1){return e===void 0?n?t():t:e}function oi(e,t){if(Array.isArray(e))return e;if(t===void 0||!(Symbol.iterator in e))return Array.from(e);const n=[];for(const r of e)if(n.push(r),n.length===t)break;return n}const qe=2,Yr=4,si=8,ys=1<<24,ln=16,Mt=32,An=64,ul=128,mt=512,Be=1024,Ze=2048,_t=4096,ut=8192,rn=16384,ai=32768,kn=65536,ia=1<<17,cl=1<<18,Jn=1<<19,fl=1<<20,en=1<<25,Xn=65536,Ho=1<<21,vs=1<<22,bn=1<<23,Vt=Symbol("$state"),dl=Symbol("legacy props"),Ic=Symbol(""),Mn=new class extends Error{constructor(){super(...arguments);Te(this,"name","StaleReactionError");Te(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};var nl;const hl=((nl=globalThis.document)==null?void 0:nl.contentType.includes("xml"))??!1;function lo(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Ac(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Tc(e,t,n){throw new Error("https://svelte.dev/e/each_key_duplicate")}function Mc(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Pc(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Oc(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Dc(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function zc(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Rc(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Lc(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Fc(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Bc(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Vc=1,Hc=2,gl=4,Kc=8,Yc=16,Xc=1,Wc=2,qc=4,Zc=8,Gc=16,yl=1,Uc=2,He=Symbol(),vl="http://www.w3.org/1999/xhtml",jc="@attach";function Qc(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function Jc(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function ml(e){return e===this.v}function pl(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function _l(e){return!pl(e,this.v)}let Ir=!1,$c=!1;function ef(){Ir=!0}const tf=[];function wl(e,t=!1,n=!1){return Mi(e,new Map,"",tf,null,n)}function Mi(e,t,n,r,i=null,o=!1){if(typeof e=="object"&&e!==null){var s=t.get(e);if(s!==void 0)return s;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(ii(e)){var a=Array(e.length);t.set(e,a),i!==null&&t.set(i,a);for(var l=0;l<e.length;l+=1){var u=e[l];l in e&&(a[l]=Mi(u,t,n,r,null,o))}return a}if(ao(e)===al){a={},t.set(e,a),i!==null&&t.set(i,a);for(var f in e)a[f]=Mi(e[f],t,n,r,null,o);return a}if(e instanceof Date)return structuredClone(e);if(typeof e.toJSON=="function"&&!o)return Mi(e.toJSON(),t,n,r,e)}if(e instanceof EventTarget)return e;try{return structuredClone(e)}catch{return e}}let Ee=null;function pr(e){Ee=e}function ms(e){return _s().get(e)}function ps(e,t){return _s().set(e,t),t}function nf(e){return _s().has(e)}function _e(e,t=!1,n){Ee={p:Ee,i:!1,c:null,e:null,s:e,x:null,l:Ir&&!t?{s:null,u:null,$:[]}:null}}function we(e){var t=Ee,n=t.e;if(n!==null){t.e=null;for(var r of n)Hl(r)}return t.i=!0,Ee=t.p,{}}function li(){return!Ir||Ee!==null&&Ee.l===null}function _s(e){return Ee===null&&lo(),Ee.c??(Ee.c=new Map(rf(Ee)||void 0))}function rf(e){let t=e.p;for(;t!==null;){const n=t.c;if(n!==null)return n;t=t.p}return null}let Pn=[];function xl(){var e=Pn;Pn=[],Vo(e)}function Ht(e){if(Pn.length===0&&!Vr){var t=Pn;queueMicrotask(()=>{t===Pn&&xl()})}Pn.push(e)}function of(){for(;Pn.length>0;)xl()}function bl(e){var t=Ne;if(t===null)return me.f|=bn,e;if(!(t.f&ai)&&!(t.f&Yr))throw e;_r(e,t)}function _r(e,t){for(;t!==null;){if(t.f&ul){if(!(t.f&ai))throw e;try{t.b.error(e);return}catch(n){e=n}}t=t.parent}throw e}const sf=-7169;function ze(e,t){e.f=e.f&sf|t}function ws(e){e.f&mt||e.deps===null?ze(e,Be):ze(e,_t)}function El(e){if(e!==null)for(const t of e)!(t.f&qe)||!(t.f&Xn)||(t.f^=Xn,El(t.deps))}function Nl(e,t,n){e.f&Ze?t.add(e):e.f&_t&&n.add(e),El(e.deps),ze(e,Be)}const bi=new Set;let xe=null,We=null,et=[],uo=null,Ko=!1,Vr=!1;var ur,cr,zn,fr,Qr,Jr,Rn,jt,dr,qt,Yo,Xo,Sl;const Qs=class Qs{constructor(){R(this,qt);Te(this,"committed",!1);Te(this,"current",new Map);Te(this,"previous",new Map);R(this,ur,new Set);R(this,cr,new Set);R(this,zn,0);R(this,fr,0);R(this,Qr,null);R(this,Jr,new Set);R(this,Rn,new Set);R(this,jt,new Map);Te(this,"is_fork",!1);R(this,dr,!1)}is_deferred(){return this.is_fork||g(this,fr)>0}skip_effect(t){g(this,jt).has(t)||g(this,jt).set(t,{d:[],m:[]})}unskip_effect(t){var n=g(this,jt).get(t);if(n){g(this,jt).delete(t);for(var r of n.d)ze(r,Ze),Ct(r);for(r of n.m)ze(r,_t),Ct(r)}}process(t){var i;et=[],this.apply();var n=[],r=[];for(const o of t)Xe(this,qt,Yo).call(this,o,n,r);if(this.is_deferred()){Xe(this,qt,Xo).call(this,r),Xe(this,qt,Xo).call(this,n);for(const[o,s]of g(this,jt))Al(o,s)}else{for(const o of g(this,ur))o();g(this,ur).clear(),g(this,zn)===0&&Xe(this,qt,Sl).call(this),xe=null,oa(r),oa(n),(i=g(this,Qr))==null||i.resolve()}We=null}capture(t,n){n!==He&&!this.previous.has(t)&&this.previous.set(t,n),t.f&bn||(this.current.set(t,t.v),We==null||We.set(t,t.v))}activate(){xe=this,this.apply()}deactivate(){xe===this&&(xe=null,We=null)}flush(){if(this.activate(),et.length>0){if(kl(),xe!==null&&xe!==this)return}else g(this,zn)===0&&this.process([]);this.deactivate()}discard(){for(const t of g(this,cr))t(this);g(this,cr).clear()}increment(t){fe(this,zn,g(this,zn)+1),t&&fe(this,fr,g(this,fr)+1)}decrement(t){fe(this,zn,g(this,zn)-1),t&&fe(this,fr,g(this,fr)-1),!g(this,dr)&&(fe(this,dr,!0),Ht(()=>{fe(this,dr,!1),this.is_deferred()?et.length>0&&this.flush():this.revive()}))}revive(){for(const t of g(this,Jr))g(this,Rn).delete(t),ze(t,Ze),Ct(t);for(const t of g(this,Rn))ze(t,_t),Ct(t);this.flush()}oncommit(t){g(this,ur).add(t)}ondiscard(t){g(this,cr).add(t)}settled(){return(g(this,Qr)??fe(this,Qr,ll())).promise}static ensure(){if(xe===null){const t=xe=new Qs;bi.add(xe),Vr||Ht(()=>{xe===t&&t.flush()})}return xe}apply(){}};ur=new WeakMap,cr=new WeakMap,zn=new WeakMap,fr=new WeakMap,Qr=new WeakMap,Jr=new WeakMap,Rn=new WeakMap,jt=new WeakMap,dr=new WeakMap,qt=new WeakSet,Yo=function(t,n,r){t.f^=Be;for(var i=t.first,o=null;i!==null;){var s=i.f,a=(s&(Mt|An))!==0,l=a&&(s&Be)!==0,u=l||(s&ut)!==0||g(this,jt).has(i);if(!u&&i.fn!==null){a?i.f^=Be:o!==null&&s&(Yr|si|ys)?o.b.defer_effect(i):s&Yr?n.push(i):Ar(i)&&(s&ln&&g(this,Rn).add(i),qn(i));var f=i.first;if(f!==null){i=f;continue}}var d=i.parent;for(i=i.next;i===null&&d!==null;)d===o&&(o=null),i=d.next,d=d.parent}},Xo=function(t){for(var n=0;n<t.length;n+=1)Nl(t[n],g(this,Jr),g(this,Rn))},Sl=function(){var i;if(bi.size>1){this.previous.clear();var t=We,n=!0;for(const o of bi){if(o===this){n=!1;continue}const s=[];for(const[l,u]of this.current){if(o.current.has(l))if(n&&u!==o.current.get(l))o.current.set(l,u);else continue;s.push(l)}if(s.length===0)continue;const a=[...o.current.keys()].filter(l=>!this.current.has(l));if(a.length>0){var r=et;et=[];const l=new Set,u=new Map;for(const f of s)Cl(f,a,l,u);if(et.length>0){xe=o,o.apply();for(const f of et)Xe(i=o,qt,Yo).call(i,f,[],[]);o.deactivate()}et=r}}xe=null,We=t}this.committed=!0,bi.delete(this)};let on=Qs;function af(e){var t=Vr;Vr=!0;try{for(var n;;){if(of(),et.length===0&&(xe==null||xe.flush(),et.length===0))return uo=null,n;kl()}}finally{Vr=t}}function kl(){Ko=!0;var e=null;try{for(var t=0;et.length>0;){var n=on.ensure();if(t++>1e3){var r,i;lf()}n.process(et),En.clear()}}finally{et=[],Ko=!1,uo=null}}function lf(){try{Dc()}catch(e){_r(e,uo)}}let Et=null;function oa(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if(!(r.f&(rn|ut))&&Ar(r)&&(Et=new Set,qn(r),r.deps===null&&r.first===null&&r.nodes===null&&r.teardown===null&&r.ac===null&&ql(r),(Et==null?void 0:Et.size)>0)){En.clear();for(const i of Et){if(i.f&(rn|ut))continue;const o=[i];let s=i.parent;for(;s!==null;)Et.has(s)&&(Et.delete(s),o.push(s)),s=s.parent;for(let a=o.length-1;a>=0;a--){const l=o[a];l.f&(rn|ut)||qn(l)}}Et.clear()}}Et=null}}function Cl(e,t,n,r){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const i of e.reactions){const o=i.f;o&qe?Cl(i,t,n,r):o&(vs|ln)&&!(o&Ze)&&Il(i,t,r)&&(ze(i,Ze),Ct(i))}}function Il(e,t,n){const r=n.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const i of e.deps){if(mr.call(t,i))return!0;if(i.f&qe&&Il(i,t,n))return n.set(i,!0),!0}return n.set(e,!1),!1}function Ct(e){for(var t=uo=e;t.parent!==null;){t=t.parent;var n=t.f;if(Ko&&t===Ne&&n&ln&&!(n&cl))return;if(n&(An|Mt)){if(!(n&Be))return;t.f^=Be}}et.push(t)}function Al(e,t){if(!(e.f&Mt&&e.f&Be)){e.f&Ze?t.d.push(e):e.f&_t&&t.m.push(e),ze(e,Be);for(var n=e.first;n!==null;)Al(n,t),n=n.next}}function Tl(e){let t=0,n=Wn(0),r;return()=>{Ns()&&(h(n),di(()=>(t===0&&(r=rt(()=>e(()=>Hr(n)))),t+=1,()=>{Ht(()=>{t-=1,t===0&&(r==null||r(),r=void 0,Hr(n))})})))}}var uf=kn|Jn|ul;function cf(e,t,n){new ff(e,t,n)}var yt,gs,zt,Ln,Rt,vt,Je,Lt,Qt,mn,Fn,pn,hr,Bn,gr,yr,Jt,no,Ye,df,hf,Wo,Pi,Oi,qo;class ff{constructor(t,n,r){R(this,Ye);Te(this,"parent");Te(this,"is_pending",!1);R(this,yt);R(this,gs,null);R(this,zt);R(this,Ln);R(this,Rt);R(this,vt,null);R(this,Je,null);R(this,Lt,null);R(this,Qt,null);R(this,mn,null);R(this,Fn,0);R(this,pn,0);R(this,hr,!1);R(this,Bn,!1);R(this,gr,new Set);R(this,yr,new Set);R(this,Jt,null);R(this,no,Tl(()=>(fe(this,Jt,Wn(g(this,Fn))),()=>{fe(this,Jt,null)})));fe(this,yt,t),fe(this,zt,n),fe(this,Ln,r),this.parent=Ne.b,this.is_pending=!!g(this,zt).pending,fe(this,Rt,hi(()=>{Ne.b=this;{var i=Xe(this,Ye,Wo).call(this);try{fe(this,vt,nt(()=>r(i)))}catch(o){this.error(o)}g(this,pn)>0?Xe(this,Ye,Oi).call(this):this.is_pending=!1}return()=>{var o;(o=g(this,mn))==null||o.remove()}},uf))}defer_effect(t){Nl(t,g(this,gr),g(this,yr))}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!g(this,zt).pending}update_pending_count(t){Xe(this,Ye,qo).call(this,t),fe(this,Fn,g(this,Fn)+t),!(!g(this,Jt)||g(this,hr))&&(fe(this,hr,!0),Ht(()=>{fe(this,hr,!1),g(this,Jt)&&wr(g(this,Jt),g(this,Fn))}))}get_effect_pending(){return g(this,no).call(this),h(g(this,Jt))}error(t){var n=g(this,zt).onerror;let r=g(this,zt).failed;if(g(this,Bn)||!n&&!r)throw t;g(this,vt)&&(Ke(g(this,vt)),fe(this,vt,null)),g(this,Je)&&(Ke(g(this,Je)),fe(this,Je,null)),g(this,Lt)&&(Ke(g(this,Lt)),fe(this,Lt,null));var i=!1,o=!1;const s=()=>{if(i){Jc();return}i=!0,o&&Bc(),on.ensure(),fe(this,Fn,0),g(this,Lt)!==null&&Hn(g(this,Lt),()=>{fe(this,Lt,null)}),this.is_pending=this.has_pending_snippet(),fe(this,vt,Xe(this,Ye,Pi).call(this,()=>(fe(this,Bn,!1),nt(()=>g(this,Ln).call(this,g(this,yt)))))),g(this,pn)>0?Xe(this,Ye,Oi).call(this):this.is_pending=!1};Ht(()=>{try{o=!0,n==null||n(t,s),o=!1}catch(a){_r(a,g(this,Rt)&&g(this,Rt).parent)}r&&fe(this,Lt,Xe(this,Ye,Pi).call(this,()=>{on.ensure(),fe(this,Bn,!0);try{return nt(()=>{r(g(this,yt),()=>t,()=>s)})}catch(a){return _r(a,g(this,Rt).parent),null}finally{fe(this,Bn,!1)}}))})}}yt=new WeakMap,gs=new WeakMap,zt=new WeakMap,Ln=new WeakMap,Rt=new WeakMap,vt=new WeakMap,Je=new WeakMap,Lt=new WeakMap,Qt=new WeakMap,mn=new WeakMap,Fn=new WeakMap,pn=new WeakMap,hr=new WeakMap,Bn=new WeakMap,gr=new WeakMap,yr=new WeakMap,Jt=new WeakMap,no=new WeakMap,Ye=new WeakSet,df=function(){try{fe(this,vt,nt(()=>g(this,Ln).call(this,g(this,yt))))}catch(t){this.error(t)}},hf=function(){const t=g(this,zt).pending;t&&(fe(this,Je,nt(()=>t(g(this,yt)))),Ht(()=>{var n=Xe(this,Ye,Wo).call(this);fe(this,vt,Xe(this,Ye,Pi).call(this,()=>(on.ensure(),nt(()=>g(this,Ln).call(this,n))))),g(this,pn)>0?Xe(this,Ye,Oi).call(this):(Hn(g(this,Je),()=>{fe(this,Je,null)}),this.is_pending=!1)}))},Wo=function(){var t=g(this,yt);return this.is_pending&&(fe(this,mn,sn()),g(this,yt).before(g(this,mn)),t=g(this,mn)),t},Pi=function(t){var n=Ne,r=me,i=Ee;Xt(g(this,Rt)),wt(g(this,Rt)),pr(g(this,Rt).ctx);try{return t()}catch(o){return bl(o),null}finally{Xt(n),wt(r),pr(i)}},Oi=function(){const t=g(this,zt).pending;g(this,vt)!==null&&(fe(this,Qt,document.createDocumentFragment()),g(this,Qt).append(g(this,mn)),Ul(g(this,vt),g(this,Qt))),g(this,Je)===null&&fe(this,Je,nt(()=>t(g(this,yt))))},qo=function(t){var n;if(!this.has_pending_snippet()){this.parent&&Xe(n=this.parent,Ye,qo).call(n,t);return}if(fe(this,pn,g(this,pn)+t),g(this,pn)===0){this.is_pending=!1;for(const r of g(this,gr))ze(r,Ze),Ct(r);for(const r of g(this,yr))ze(r,_t),Ct(r);g(this,gr).clear(),g(this,yr).clear(),g(this,Je)&&Hn(g(this,Je),()=>{fe(this,Je,null)}),g(this,Qt)&&(g(this,yt).before(g(this,Qt)),fe(this,Qt,null))}};function Ml(e,t,n,r){const i=li()?ui:xs;var o=e.filter(c=>!c.settled);if(n.length===0&&o.length===0){r(t.map(i));return}var s=xe,a=Ne,l=gf(),u=o.length===1?o[0].promise:o.length>1?Promise.all(o.map(c=>c.promise)):null;function f(c){l();try{r(c)}catch(y){a.f&rn||_r(y,a)}s==null||s.deactivate(),Zo()}if(n.length===0){u.then(()=>f(t.map(i)));return}function d(){l(),Promise.all(n.map(c=>yf(c))).then(c=>f([...t.map(i),...c])).catch(c=>_r(c,a))}u?u.then(d):d()}function gf(){var e=Ne,t=me,n=Ee,r=xe;return function(o=!0){Xt(e),wt(t),pr(n),o&&(r==null||r.activate())}}function Zo(){Xt(null),wt(null),pr(null)}function ui(e){var t=qe|Ze,n=me!==null&&me.f&qe?me:null;return Ne!==null&&(Ne.f|=Jn),{ctx:Ee,deps:null,effects:null,equals:ml,f:t,fn:e,reactions:null,rv:0,v:He,wv:0,parent:n??Ne,ac:null}}function yf(e,t,n){let r=Ne;r===null&&Ac();var i=r.b,o=void 0,s=Wn(He),a=!me,l=new Map;return Af(()=>{var y;var u=ll();o=u.promise;try{Promise.resolve(e()).then(u.resolve,u.reject).then(()=>{f===xe&&f.committed&&f.deactivate(),Zo()})}catch(v){u.reject(v),Zo()}var f=xe;if(a){var d=i.is_rendered();i.update_pending_count(1),f.increment(d),(y=l.get(f))==null||y.reject(Mn),l.delete(f),l.set(f,u)}const c=(v,_=void 0)=>{if(f.activate(),_)_!==Mn&&(s.f|=bn,wr(s,_));else{s.f&bn&&(s.f^=bn),wr(s,v);for(const[p,b]of l){if(l.delete(p),p===f)break;b.reject(Mn)}}a&&(i.update_pending_count(-1),f.decrement(d))};u.promise.then(c,v=>c(null,v||"unknown"))}),Ss(()=>{for(const u of l.values())u.reject(Mn)}),new Promise(u=>{function f(d){function c(){d===o?u(s):f(o)}d.then(c,c)}f(o)})}function E(e){const t=ui(e);return jl(t),t}function xs(e){const t=ui(e);return t.equals=_l,t}function vf(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)Ke(t[n])}}function mf(e){for(var t=e.parent;t!==null;){if(!(t.f&qe))return t.f&rn?null:t;t=t.parent}return null}function bs(e){var t,n=Ne;Xt(mf(e));try{e.f&=~Xn,vf(e),t=eu(e)}finally{Xt(n)}return t}function Pl(e){var t=bs(e);if(!e.equals(t)&&(e.wv=Jl(),(!(xe!=null&&xe.is_fork)||e.deps===null)&&(e.v=t,e.deps===null))){ze(e,Be);return}Cn||(We!==null?(Ns()||xe!=null&&xe.is_fork)&&We.set(e,t):ws(e))}function pf(e){var t,n;if(e.effects!==null)for(const r of e.effects)(r.teardown||r.ac)&&((t=r.teardown)==null||t.call(r),(n=r.ac)==null||n.abort(Mn),r.teardown=Qn,r.ac=null,Xr(r,0),ks(r))}function Ol(e){if(e.effects!==null)for(const t of e.effects)t.teardown&&qn(t)}let Go=new Set;const En=new Map;let Dl=!1;function Wn(e,t){var n={f:0,v:e,reactions:null,equals:ml,rv:0,wv:0};return n}function Se(e,t){const n=Wn(e);return jl(n),n}function rr(e,t=!1,n=!0){var i;const r=Wn(e);return t||(r.equals=_l),Ir&&n&&Ee!==null&&Ee.l!==null&&((i=Ee.l).s??(i.s=[])).push(r),r}function X(e,t,n=!1){me!==null&&(!It||me.f&ia)&&li()&&me.f&(qe|ln|vs|ia)&&(pt===null||!mr.call(pt,e))&&Fc();let r=n?wn(t):t;return wr(e,r)}function wr(e,t){if(!e.equals(t)){var n=e.v;Cn?En.set(e,t):En.set(e,n),e.v=t;var r=on.ensure();if(r.capture(e,n),e.f&qe){const i=e;e.f&Ze&&bs(i),ws(i)}e.wv=Jl(),zl(e,Ze),li()&&Ne!==null&&Ne.f&Be&&!(Ne.f&(Mt|An))&&(gt===null?Pf([e]):gt.push(e)),!r.is_fork&&Go.size>0&&!Dl&&_f()}return t}function _f(){Dl=!1;for(const e of Go)e.f&Be&&ze(e,_t),Ar(e)&&qn(e);Go.clear()}function Hr(e){X(e,e.v+1)}function zl(e,t){var n=e.reactions;if(n!==null)for(var r=li(),i=n.length,o=0;o<i;o++){var s=n[o],a=s.f;if(!(!r&&s===Ne)){var l=(a&Ze)===0;if(l&&ze(s,t),a&qe){var u=s;We==null||We.delete(u),a&Xn||(a&mt&&(s.f|=Xn),zl(u,_t))}else l&&(a&ln&&Et!==null&&Et.add(s),Ct(s))}}}function wn(e){if(typeof e!="object"||e===null||Vt in e)return e;const t=ao(e);if(t!==al&&t!==kc)return e;var n=new Map,r=ii(e),i=Se(0),o=Kn,s=a=>{if(Kn===o)return a();var l=me,u=Kn;wt(null),la(o);var f=a();return wt(l),la(u),f};return r&&n.set("length",Se(e.length)),new Proxy(e,{defineProperty(a,l,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&Rc();var f=n.get(l);return f===void 0?s(()=>{var d=Se(u.value);return n.set(l,d),d}):X(f,u.value,!0),!0},deleteProperty(a,l){var u=n.get(l);if(u===void 0){if(l in a){const f=s(()=>Se(He));n.set(l,f),Hr(i)}}else X(u,He),Hr(i);return!0},get(a,l,u){var y;if(l===Vt)return e;var f=n.get(l),d=l in a;if(f===void 0&&(!d||(y=xn(a,l))!=null&&y.writable)&&(f=s(()=>{var v=wn(d?a[l]:He),_=Se(v);return _}),n.set(l,f)),f!==void 0){var c=h(f);return c===He?void 0:c}return Reflect.get(a,l,u)},getOwnPropertyDescriptor(a,l){var u=Reflect.getOwnPropertyDescriptor(a,l);if(u&&"value"in u){var f=n.get(l);f&&(u.value=h(f))}else if(u===void 0){var d=n.get(l),c=d==null?void 0:d.v;if(d!==void 0&&c!==He)return{enumerable:!0,configurable:!0,value:c,writable:!0}}return u},has(a,l){var c;if(l===Vt)return!0;var u=n.get(l),f=u!==void 0&&u.v!==He||Reflect.has(a,l);if(u!==void 0||Ne!==null&&(!f||(c=xn(a,l))!=null&&c.writable)){u===void 0&&(u=s(()=>{var y=f?wn(a[l]):He,v=Se(y);return v}),n.set(l,u));var d=h(u);if(d===He)return!1}return f},set(a,l,u,f){var M;var d=n.get(l),c=l in a;if(r&&l==="length")for(var y=u;y<d.v;y+=1){var v=n.get(y+"");v!==void 0?X(v,He):y in a&&(v=s(()=>Se(He)),n.set(y+"",v))}if(d===void 0)(!c||(M=xn(a,l))!=null&&M.writable)&&(d=s(()=>Se(void 0)),X(d,wn(u)),n.set(l,d));else{c=d.v!==He;var _=s(()=>wn(u));X(d,_)}var p=Reflect.getOwnPropertyDescriptor(a,l);if(p!=null&&p.set&&p.set.call(f,u),!c){if(r&&typeof l=="string"){var b=n.get("length"),A=Number(l);Number.isInteger(A)&&A>=b.v&&X(b,A+1)}Hr(i)}return!0},ownKeys(a){h(i);var l=Reflect.ownKeys(a).filter(d=>{var c=n.get(d);return c===void 0||c.v!==He});for(var[u,f]of n)f.v!==He&&!(u in a)&&l.push(u);return l},setPrototypeOf(){Lc()}})}function sa(e){try{if(e!==null&&typeof e=="object"&&Vt in e)return e[Vt]}catch{}return e}function wf(e,t){return Object.is(sa(e),sa(t))}var Qe,Rl,Ll,Fl;function xf(){if(Qe===void 0){Qe=window,Rl=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;Ll=xn(t,"firstChild").get,Fl=xn(t,"nextSibling").get,ra(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),ra(n)&&(n.__t=void 0)}}function sn(e=""){return document.createTextNode(e)}function $t(e){return Ll.call(e)}function ci(e){return Fl.call(e)}function Pe(e,t){return $t(e)}function Ue(e,t=!1){{var n=$t(e);return n instanceof Comment&&n.data===""?ci(n):n}}function Le(e,t=1,n=!1){let r=e;for(;t--;)r=ci(r);return r}function bf(e){e.textContent=""}function Bl(){return!1}function Ef(e,t,n){return document.createElementNS(vl,e,void 0)}function Nf(e,t){if(t){const n=document.body;e.autofocus=!0,Ht(()=>{document.activeElement===n&&e.focus()})}}function Es(e){var t=me,n=Ne;wt(null),Xt(null);try{return e()}finally{wt(t),Xt(n)}}function Vl(e){Ne===null&&(me===null&&Oc(),Pc()),Cn&&Mc()}function Sf(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function xt(e,t,n){var r=Ne;r!==null&&r.f&ut&&(e|=ut);var i={ctx:Ee,deps:null,nodes:null,f:e|Ze|mt,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(n)try{qn(i)}catch(a){throw Ke(i),a}else t!==null&&Ct(i);var o=i;if(n&&o.deps===null&&o.teardown===null&&o.nodes===null&&o.first===o.last&&!(o.f&Jn)&&(o=o.first,e&ln&&e&kn&&o!==null&&(o.f|=kn)),o!==null&&(o.parent=r,r!==null&&Sf(o,r),me!==null&&me.f&qe&&!(e&An))){var s=me;(s.effects??(s.effects=[])).push(o)}return i}function Ns(){return me!==null&&!It}function Ss(e){const t=xt(si,null,!1);return ze(t,Be),t.teardown=e,t}function Yt(e){Vl();var t=Ne.f,n=!me&&(t&Mt)!==0&&(t&ai)===0;if(n){var r=Ee;(r.e??(r.e=[])).push(e)}else return Hl(e)}function Hl(e){return xt(Yr|fl,e,!1)}function Kl(e){return Vl(),xt(si|fl,e,!0)}function Yl(e){on.ensure();const t=xt(An|Jn,e,!0);return()=>{Ke(t)}}function kf(e){on.ensure();const t=xt(An|Jn,e,!0);return(n={})=>new Promise(r=>{n.outro?Hn(t,()=>{Ke(t),r(void 0)}):(Ke(t),r(void 0))})}function fi(e){return xt(Yr,e,!1)}function Cf(e,t){var n=Ee,r={effect:null,ran:!1,deps:e};n.l.$.push(r),r.effect=di(()=>{e(),!r.ran&&(r.ran=!0,rt(t))})}function If(){var e=Ee;di(()=>{for(var t of e.l.$){t.deps();var n=t.effect;n.f&Be&&n.deps!==null&&ze(n,_t),Ar(n)&&qn(n),t.ran=!1}})}function Af(e){return xt(vs|Jn,e,!0)}function di(e,t=0){return xt(si|t,e,!0)}function Re(e,t=[],n=[],r=[]){Ml(r,t,n,i=>{xt(si,()=>e(...i.map(h)),!0)})}function hi(e,t=0){var n=xt(ln|t,e,!0);return n}function Xl(e,t=0){var n=xt(ys|t,e,!0);return n}function nt(e){return xt(Mt|Jn,e,!0)}function Wl(e){var t=e.teardown;if(t!==null){const n=Cn,r=me;aa(!0),wt(null);try{t.call(null)}finally{aa(n),wt(r)}}}function ks(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const i=n.ac;i!==null&&Es(()=>{i.abort(Mn)});var r=n.next;n.f&An?n.parent=null:Ke(n,t),n=r}}function Tf(e){for(var t=e.first;t!==null;){var n=t.next;t.f&Mt||Ke(t),t=n}}function Ke(e,t=!0){var n=!1;(t||e.f&cl)&&e.nodes!==null&&e.nodes.end!==null&&(Mf(e.nodes.start,e.nodes.end),n=!0),ks(e,t&&!n),Xr(e,0),ze(e,rn);var r=e.nodes&&e.nodes.t;if(r!==null)for(const o of r)o.stop();Wl(e);var i=e.parent;i!==null&&i.first!==null&&ql(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function Mf(e,t){for(;e!==null;){var n=e===t?null:ci(e);e.remove(),e=n}}function ql(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function Hn(e,t,n=!0){var r=[];Zl(e,r,!0);var i=()=>{n&&Ke(e),t&&t()},o=r.length;if(o>0){var s=()=>--o||i();for(var a of r)a.out(s)}else i()}function Zl(e,t,n){if(!(e.f&ut)){e.f^=ut;var r=e.nodes&&e.nodes.t;if(r!==null)for(const a of r)(a.is_global||n)&&t.push(a);for(var i=e.first;i!==null;){var o=i.next,s=(i.f&kn)!==0||(i.f&Mt)!==0&&(e.f&ln)!==0;Zl(i,t,s?n:!1),i=o}}}function Cs(e){Gl(e,!0)}function Gl(e,t){if(e.f&ut){e.f^=ut,e.f&Be||(ze(e,Ze),Ct(e));for(var n=e.first;n!==null;){var r=n.next,i=(n.f&kn)!==0||(n.f&Mt)!==0;Gl(n,i?t:!1),n=r}var o=e.nodes&&e.nodes.t;if(o!==null)for(const s of o)(s.is_global||t)&&s.in()}}function Ul(e,t){if(e.nodes)for(var n=e.nodes.start,r=e.nodes.end;n!==null;){var i=n===r?null:ci(n);t.append(n),n=i}}let Di=!1,Cn=!1;function aa(e){Cn=e}let me=null,It=!1;function wt(e){me=e}let Ne=null;function Xt(e){Ne=e}let pt=null;function jl(e){me!==null&&(pt===null?pt=[e]:pt.push(e))}let tt=null,at=0,gt=null;function Pf(e){gt=e}let Ql=1,On=0,Kn=On;function la(e){Kn=e}function Jl(){return++Ql}function Ar(e){var t=e.f;if(t&Ze)return!0;if(t&qe&&(e.f&=~Xn),t&_t){for(var n=e.deps,r=n.length,i=0;i<r;i++){var o=n[i];if(Ar(o)&&Pl(o),o.wv>e.wv)return!0}t&mt&&We===null&&ze(e,Be)}return!1}function $l(e,t,n=!0){var r=e.reactions;if(r!==null&&!(pt!==null&&mr.call(pt,e)))for(var i=0;i<r.length;i++){var o=r[i];o.f&qe?$l(o,t,!1):t===o&&(n?ze(o,Ze):o.f&Be&&ze(o,_t),Ct(o))}}function eu(e){var _;var t=tt,n=at,r=gt,i=me,o=pt,s=Ee,a=It,l=Kn,u=e.f;tt=null,at=0,gt=null,me=u&(Mt|An)?null:e,pt=null,pr(e.ctx),It=!1,Kn=++On,e.ac!==null&&(Es(()=>{e.ac.abort(Mn)}),e.ac=null);try{e.f|=Ho;var f=e.fn,d=f();e.f|=ai;var c=e.deps,y=xe==null?void 0:xe.is_fork;if(tt!==null){var v;if(y||Xr(e,at),c!==null&&at>0)for(c.length=at+tt.length,v=0;v<tt.length;v++)c[at+v]=tt[v];else e.deps=c=tt;if(Ns()&&e.f&mt)for(v=at;v<c.length;v++)((_=c[v]).reactions??(_.reactions=[])).push(e)}else!y&&c!==null&&at<c.length&&(Xr(e,at),c.length=at);if(li()&&gt!==null&&!It&&c!==null&&!(e.f&(qe|_t|Ze)))for(v=0;v<gt.length;v++)$l(gt[v],e);if(i!==null&&i!==e){if(On++,i.deps!==null)for(let p=0;p<n;p+=1)i.deps[p].rv=On;if(t!==null)for(const p of t)p.rv=On;gt!==null&&(r===null?r=gt:r.push(...gt))}return e.f&bn&&(e.f^=bn),d}catch(p){return bl(p)}finally{e.f^=Ho,tt=t,at=n,gt=r,me=i,pt=o,pr(s),It=a,Kn=l}}function Of(e,t){let n=t.reactions;if(n!==null){var r=Nc.call(n,e);if(r!==-1){var i=n.length-1;i===0?n=t.reactions=null:(n[r]=n[i],n.pop())}}if(n===null&&t.f&qe&&(tt===null||!mr.call(tt,t))){var o=t;o.f&mt&&(o.f^=mt,o.f&=~Xn),ws(o),pf(o),Xr(o,0)}}function Xr(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)Of(e,n[r])}function qn(e){var t=e.f;if(!(t&rn)){ze(e,Be);var n=Ne,r=Di;Ne=e,Di=!0;try{t&(ln|ys)?Tf(e):ks(e),Wl(e);var i=eu(e);e.teardown=typeof i=="function"?i:null,e.wv=Ql;var o;Bo&&$c&&e.f&Ze&&e.deps}finally{Di=r,Ne=n}}}async function Df(){await Promise.resolve(),af()}function h(e){var t=e.f,n=(t&qe)!==0;if(me!==null&&!It){var r=Ne!==null&&(Ne.f&rn)!==0;if(!r&&(pt===null||!mr.call(pt,e))){var i=me.deps;if(me.f&Ho)e.rv<On&&(e.rv=On,tt===null&&i!==null&&i[at]===e?at++:tt===null?tt=[e]:tt.push(e));else{(me.deps??(me.deps=[])).push(e);var o=e.reactions;o===null?e.reactions=[me]:mr.call(o,me)||o.push(me)}}}if(Cn&&En.has(e))return En.get(e);if(n){var s=e;if(Cn){var a=s.v;return(!(s.f&Be)&&s.reactions!==null||nu(s))&&(a=bs(s)),En.set(s,a),a}var l=(s.f&mt)===0&&!It&&me!==null&&(Di||(me.f&mt)!==0),u=(s.f&ai)===0;Ar(s)&&(l&&(s.f|=mt),Pl(s)),l&&!u&&(Ol(s),tu(s))}if(We!=null&&We.has(e))return We.get(e);if(e.f&bn)throw e.v;return e.v}function tu(e){if(e.f|=mt,e.deps!==null)for(const t of e.deps)(t.reactions??(t.reactions=[])).push(e),t.f&qe&&!(t.f&mt)&&(Ol(t),tu(t))}function nu(e){if(e.v===He)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(En.has(t)||t.f&qe&&nu(t))return!0;return!1}function rt(e){var t=It;try{return It=!0,e()}finally{It=t}}function zf(e,t){var n={};for(var r in e)t.includes(r)||(n[r]=e[r]);for(var i of Object.getOwnPropertySymbols(e))Object.propertyIsEnumerable.call(e,i)&&!t.includes(i)&&(n[i]=e[i]);return n}function Is(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Vt in e)Uo(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&Vt in n&&Uo(n)}}}function Uo(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{Uo(e[r],t)}catch{}const n=ao(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=sl(n);for(let i in r){const o=r[i].get;if(o)try{o.call(e)}catch{}}}}}function Rf(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const Lf=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function Ff(e){return Lf.includes(e)}const Bf={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function Vf(e){return e=e.toLowerCase(),Bf[e]??e}const Hf=["touchstart","touchmove"];function Kf(e){return Hf.includes(e)}const ru=new Set,jo=new Set;function As(e,t,n,r={}){function i(o){if(r.capture||Jo.call(t,o),!o.cancelBubble)return Es(()=>n==null?void 0:n.call(this,o))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Ht(()=>{t.addEventListener(e,i,r)}):t.addEventListener(e,i,r),i}function Qo(e,t,n,r={}){var i=As(t,e,n,r);return()=>{e.removeEventListener(t,i,r)}}function Vi(e,t,n,r,i){var o={capture:r,passive:i},s=As(e,t,n,o);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Ss(()=>{t.removeEventListener(e,s,o)})}function Ts(e){for(var t=0;t<e.length;t++)ru.add(e[t]);for(var n of jo)n(e)}let ua=null;function Jo(e){var p;var t=this,n=t.ownerDocument,r=e.type,i=((p=e.composedPath)==null?void 0:p.call(e))||[],o=i[0]||e.target;ua=e;var s=0,a=ua===e&&e.__root;if(a){var l=i.indexOf(a);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var u=i.indexOf(t);if(u===-1)return;l<=u&&(s=l)}if(o=i[s]||e.target,o!==t){Sc(e,"currentTarget",{configurable:!0,get(){return o||n}});var f=me,d=Ne;wt(null),Xt(null);try{for(var c,y=[];o!==null;){var v=o.assignedSlot||o.parentNode||o.host||null;try{var _=o["__"+r];_!=null&&(!o.disabled||e.target===o)&&_.call(o,e)}catch(b){c?y.push(b):c=b}if(e.cancelBubble||v===t||v===null)break;o=v}if(c){for(let b of y)queueMicrotask(()=>{throw b});throw c}}finally{e.__root=t,delete e.currentTarget,wt(f),Xt(d)}}}var rl,il;const So=(il=(rl=globalThis==null?void 0:globalThis.window)==null?void 0:rl.trustedTypes)==null?void 0:il.createPolicy("svelte-trusted-html",{createHTML:e=>e});function Yf(e){return(So==null?void 0:So.createHTML(e))??e}function iu(e,t=!1){var n=Ef("template");return e=e.replaceAll("<!>","<!---->"),n.innerHTML=t?Yf(e):e,n.content}function xr(e,t){var n=Ne;n.nodes===null&&(n.nodes={start:e,end:t,a:null,t:null})}function Oe(e,t){var n=(t&yl)!==0,r=(t&Uc)!==0,i,o=!e.startsWith("<!>");return()=>{i===void 0&&(i=iu(o?e:"<!>"+e,!0),n||(i=$t(i)));var s=r||Rl?document.importNode(i,!0):i.cloneNode(!0);if(n){var a=$t(s),l=s.lastChild;xr(a,l)}else xr(s,s);return s}}function Xf(e,t,n="svg"){var r=!e.startsWith("<!>"),i=(t&yl)!==0,o=`<${n}>${r?e:"<!>"+e}</${n}>`,s;return()=>{if(!s){var a=iu(o,!0),l=$t(a);if(i)for(s=document.createDocumentFragment();$t(l);)s.appendChild($t(l));else s=$t(l)}var u=s.cloneNode(!0);if(i){var f=$t(u),d=u.lastChild;xr(f,d)}else xr(u,u);return u}}function bt(e,t){return Xf(e,t,"svg")}function Wf(e=""){{var t=sn(e+"");return xr(t,t),t}}function In(){var e=document.createDocumentFragment(),t=document.createComment(""),n=sn();return e.append(t,n),xr(t,n),e}function ce(e,t){e!==null&&e.before(t)}function Nn(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n+"")}function qf(e,t){return Zf(e,t)}const Ei=new Map;function Zf(e,{target:t,anchor:n,props:r={},events:i,context:o,intro:s=!0}){xf();var a=new Set,l=d=>{for(var c=0;c<d.length;c++){var y=d[c];if(!a.has(y)){a.add(y);var v=Kf(y);for(const b of[t,document]){var _=Ei.get(b);_===void 0&&(_=new Map,Ei.set(b,_));var p=_.get(y);p===void 0?(b.addEventListener(y,Jo,{passive:v}),_.set(y,1)):_.set(y,p+1)}}}};l(so(ru)),jo.add(l);var u=void 0,f=kf(()=>{var d=n??t.appendChild(sn());return cf(d,{pending:()=>{}},c=>{_e({});var y=Ee;o&&(y.c=o),i&&(r.$$events=i),u=e(c,r)||{},we()}),()=>{var _;for(var c of a)for(const p of[t,document]){var y=Ei.get(p),v=y.get(c);--v==0?(p.removeEventListener(c,Jo),y.delete(c),y.size===0&&Ei.delete(p)):y.set(c,v)}jo.delete(l),d!==n&&((_=d.parentNode)==null||_.removeChild(d))}});return Gf.set(u,f),u}let Gf=new WeakMap;var Nt,Ft,lt,Vn,$r,ei,ro;class Ms{constructor(t,n=!0){Te(this,"anchor");R(this,Nt,new Map);R(this,Ft,new Map);R(this,lt,new Map);R(this,Vn,new Set);R(this,$r,!0);R(this,ei,()=>{var t=xe;if(g(this,Nt).has(t)){var n=g(this,Nt).get(t),r=g(this,Ft).get(n);if(r)Cs(r),g(this,Vn).delete(n);else{var i=g(this,lt).get(n);i&&(g(this,Ft).set(n,i.effect),g(this,lt).delete(n),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),r=i.effect)}for(const[o,s]of g(this,Nt)){if(g(this,Nt).delete(o),o===t)break;const a=g(this,lt).get(s);a&&(Ke(a.effect),g(this,lt).delete(s))}for(const[o,s]of g(this,Ft)){if(o===n||g(this,Vn).has(o))continue;const a=()=>{if(Array.from(g(this,Nt).values()).includes(o)){var u=document.createDocumentFragment();Ul(s,u),u.append(sn()),g(this,lt).set(o,{effect:s,fragment:u})}else Ke(s);g(this,Vn).delete(o),g(this,Ft).delete(o)};g(this,$r)||!r?(g(this,Vn).add(o),Hn(s,a,!1)):a()}}});R(this,ro,t=>{g(this,Nt).delete(t);const n=Array.from(g(this,Nt).values());for(const[r,i]of g(this,lt))n.includes(r)||(Ke(i.effect),g(this,lt).delete(r))});this.anchor=t,fe(this,$r,n)}ensure(t,n){var r=xe,i=Bl();if(n&&!g(this,Ft).has(t)&&!g(this,lt).has(t))if(i){var o=document.createDocumentFragment(),s=sn();o.append(s),g(this,lt).set(t,{effect:nt(()=>n(s)),fragment:o})}else g(this,Ft).set(t,nt(()=>n(this.anchor)));if(g(this,Nt).set(r,t),i){for(const[a,l]of g(this,Ft))a===t?r.unskip_effect(l):r.skip_effect(l);for(const[a,l]of g(this,lt))a===t?r.unskip_effect(l.effect):r.skip_effect(l.effect);r.oncommit(g(this,ei)),r.ondiscard(g(this,ro))}else g(this,ei).call(this)}}Nt=new WeakMap,Ft=new WeakMap,lt=new WeakMap,Vn=new WeakMap,$r=new WeakMap,ei=new WeakMap,ro=new WeakMap;function ct(e,t,n=!1){var r=new Ms(e),i=n?kn:0;function o(s,a){r.ensure(s,a)}hi(()=>{var s=!1;t((a,l=0)=>{s=!0,o(l,a)}),s||o(!1,null)},i)}function Uf(e,t,n){for(var r=[],i=t.length,o,s=t.length,a=0;a<i;a++){let d=t[a];Hn(d,()=>{if(o){if(o.pending.delete(d),o.done.add(d),o.pending.size===0){var c=e.outrogroups;$o(so(o.done)),c.delete(o),c.size===0&&(e.outrogroups=null)}}else s-=1},!1)}if(s===0){var l=r.length===0&&n!==null;if(l){var u=n,f=u.parentNode;bf(f),f.append(u),e.items.clear()}$o(t,!l)}else o={pending:new Set(t),done:new Set},(e.outrogroups??(e.outrogroups=new Set)).add(o)}function $o(e,t=!0){for(var n=0;n<e.length;n++)Ke(e[n],t)}var ca;function Ps(e,t,n,r,i,o=null){var s=e,a=new Map,l=(t&gl)!==0;if(l){var u=e;s=u.appendChild(sn())}var f=null,d=xs(()=>{var b=n();return ii(b)?b:b==null?[]:so(b)}),c,y=!0;function v(){p.fallback=f,jf(p,c,s,t,r),f!==null&&(c.length===0?f.f&en?(f.f^=en,Lr(f,null,s)):Cs(f):Hn(f,()=>{f=null}))}var _=hi(()=>{c=h(d);for(var b=c.length,A=new Set,M=xe,w=Bl(),O=0;O<b;O+=1){var L=c[O],W=r(L,O),P=y?null:a.get(W);P?(P.v&&wr(P.v,L),P.i&&wr(P.i,O),w&&M.unskip_effect(P.e)):(P=Qf(a,y?s:ca??(ca=sn()),L,W,O,i,t,n),y||(P.e.f|=en),a.set(W,P)),A.add(W)}if(b===0&&o&&!f&&(y?f=nt(()=>o(s)):(f=nt(()=>o(ca??(ca=sn()))),f.f|=en)),b>A.size&&Tc(),!y)if(w){for(const[V,J]of a)A.has(V)||M.skip_effect(J.e);M.oncommit(v),M.ondiscard(()=>{})}else v();h(d)}),p={effect:_,items:a,outrogroups:null,fallback:f};y=!1}function Dr(e){for(;e!==null&&!(e.f&Mt);)e=e.next;return e}function jf(e,t,n,r,i){var J,T,x,I,m,C,S,F,H;var o=(r&Kc)!==0,s=t.length,a=e.items,l=Dr(e.effect.first),u,f=null,d,c=[],y=[],v,_,p,b;if(o)for(b=0;b<s;b+=1)v=t[b],_=i(v,b),p=a.get(_).e,p.f&en||((T=(J=p.nodes)==null?void 0:J.a)==null||T.measure(),(d??(d=new Set)).add(p));for(b=0;b<s;b+=1){if(v=t[b],_=i(v,b),p=a.get(_).e,e.outrogroups!==null)for(const z of e.outrogroups)z.pending.delete(p),z.done.delete(p);if(p.f&en)if(p.f^=en,p===l)Lr(p,null,n);else{var A=f?f.next:l;p===e.effect.last&&(e.effect.last=p.prev),p.prev&&(p.prev.next=p.next),p.next&&(p.next.prev=p.prev),hn(e,f,p),hn(e,p,A),Lr(p,A,n),f=p,c=[],y=[],l=Dr(f.next);continue}if(p.f&ut&&(Cs(p),o&&((I=(x=p.nodes)==null?void 0:x.a)==null||I.unfix(),(d??(d=new Set)).delete(p))),p!==l){if(u!==void 0&&u.has(p)){if(c.length<y.length){var M=y[0],w;f=M.prev;var O=c[0],L=c[c.length-1];for(w=0;w<c.length;w+=1)Lr(c[w],M,n);for(w=0;w<y.length;w+=1)u.delete(y[w]);hn(e,O.prev,L.next),hn(e,f,O),hn(e,L,M),l=M,f=L,b-=1,c=[],y=[]}else u.delete(p),Lr(p,l,n),hn(e,p.prev,p.next),hn(e,p,f===null?e.effect.first:f.next),hn(e,f,p),f=p;continue}for(c=[],y=[];l!==null&&l!==p;)(u??(u=new Set)).add(l),y.push(l),l=Dr(l.next);if(l===null)continue}p.f&en||c.push(p),f=p,l=Dr(p.next)}if(e.outrogroups!==null){for(const z of e.outrogroups)z.pending.size===0&&($o(so(z.done)),(m=e.outrogroups)==null||m.delete(z));e.outrogroups.size===0&&(e.outrogroups=null)}if(l!==null||u!==void 0){var W=[];if(u!==void 0)for(p of u)p.f&ut||W.push(p);for(;l!==null;)!(l.f&ut)&&l!==e.fallback&&W.push(l),l=Dr(l.next);var P=W.length;if(P>0){var V=r&gl&&s===0?n:null;if(o){for(b=0;b<P;b+=1)(S=(C=W[b].nodes)==null?void 0:C.a)==null||S.measure();for(b=0;b<P;b+=1)(H=(F=W[b].nodes)==null?void 0:F.a)==null||H.fix()}Uf(e,W,V)}}o&&Ht(()=>{var z,Y;if(d!==void 0)for(p of d)(Y=(z=p.nodes)==null?void 0:z.a)==null||Y.apply()})}function Qf(e,t,n,r,i,o,s,a){var l=s&Vc?s&Yc?Wn(n):rr(n,!1,!1):null,u=s&Hc?Wn(i):null;return{v:l,i:u,e:nt(()=>(o(t,l??n,u??i,a),()=>{e.delete(r)}))}}function Lr(e,t,n){if(e.nodes)for(var r=e.nodes.start,i=e.nodes.end,o=t&&!(t.f&en)?t.nodes.start:n;r!==null;){var s=ci(r);if(o.before(r),r===i)return;r=s}}function hn(e,t,n){t===null?e.effect.first=n:t.next=n,n===null?e.effect.last=t:n.prev=t}function un(e,t,...n){var r=new Ms(e);hi(()=>{const i=t()??null;r.ensure(i,i&&(o=>i(o,...n)))},kn)}function Os(e,t,n){var r=new Ms(e);hi(()=>{var i=t()??null;r.ensure(i,i&&(o=>n(o,i)))},kn)}function $e(e,t,n){fi(()=>{var r=rt(()=>t(e,n==null?void 0:n())||{});if(n&&(r!=null&&r.update)){var i=!1,o={};di(()=>{var s=n();Is(s),i&&pl(o,s)&&(o=s,r.update(s))}),i=!0}if(r!=null&&r.destroy)return()=>r.destroy()})}function Jf(e,t){var n=void 0,r;Xl(()=>{n!==(n=t())&&(r&&(Ke(r),r=null),n&&(r=nt(()=>{fi(()=>n(e))})))})}function ou(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=ou(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function $f(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=ou(e))&&(r&&(r+=" "),r+=t);return r}function $n(e){return typeof e=="object"?$f(e):e??""}const fa=[...` 	
\r\fÂ \v\uFEFF`];function ed(e,t,n){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),n){for(var i in n)if(n[i])r=r?r+" "+i:i;else if(r.length)for(var o=i.length,s=0;(s=r.indexOf(i,s))>=0;){var a=s+o;(s===0||fa.includes(r[s-1]))&&(a===r.length||fa.includes(r[a]))?r=(s===0?"":r.substring(0,s))+r.substring(a+1):s=a}}return r===""?null:r}function da(e,t=!1){var n=t?" !important;":";",r="";for(var i in e){var o=e[i];o!=null&&o!==""&&(r+=" "+i+": "+o+n)}return r}function ko(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function td(e,t){if(t){var n="",r,i;if(Array.isArray(t)?(r=t[0],i=t[1]):r=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var o=!1,s=0,a=!1,l=[];r&&l.push(...Object.keys(r).map(ko)),i&&l.push(...Object.keys(i).map(ko));var u=0,f=-1;const _=e.length;for(var d=0;d<_;d++){var c=e[d];if(a?c==="/"&&e[d-1]==="*"&&(a=!1):o?o===c&&(o=!1):c==="/"&&e[d+1]==="*"?a=!0:c==='"'||c==="'"?o=c:c==="("?s++:c===")"&&s--,!a&&o===!1&&s===0){if(c===":"&&f===-1)f=d;else if(c===";"||d===_-1){if(f!==-1){var y=ko(e.substring(u,f).trim());if(!l.includes(y)){c!==";"&&d++;var v=e.substring(u,d).trim();n+=" "+v+";"}}u=d+1,f=-1}}}}return r&&(n+=da(r)),i&&(n+=da(i,!0)),n=n.trim(),n===""?null:n}return e==null?null:String(e)}function Tn(e,t,n,r,i,o){var s=e.__className;if(s!==n||s===void 0){var a=ed(n,r,o);a==null?e.removeAttribute("class"):t?e.className=a:e.setAttribute("class",a),e.__className=n}else if(o&&i!==o)for(var l in o){var u=!!o[l];(i==null||u!==!!i[l])&&e.classList.toggle(l,u)}return o}function Co(e,t={},n,r){for(var i in n){var o=n[i];t[i]!==o&&(n[i]==null?e.style.removeProperty(i):e.style.setProperty(i,o,r))}}function Tt(e,t,n,r){var i=e.__style;if(i!==t){var o=td(t,r);o==null?e.removeAttribute("style"):e.style.cssText=o,e.__style=t}else r&&(Array.isArray(r)?(Co(e,n==null?void 0:n[0],r[0]),Co(e,n==null?void 0:n[1],r[1],"important")):Co(e,n,r));return r}function es(e,t,n=!1){if(e.multiple){if(t==null)return;if(!ii(t))return Qc();for(var r of e.options)r.selected=t.includes(ha(r));return}for(r of e.options){var i=ha(r);if(wf(i,t)){r.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function nd(e){var t=new MutationObserver(()=>{es(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Ss(()=>{t.disconnect()})}function ha(e){return"__value"in e?e.__value:e.value}const gn=Symbol("class"),yn=Symbol("style"),su=Symbol("is custom element"),au=Symbol("is html"),rd=hl?"option":"OPTION",id=hl?"select":"SELECT";function od(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function pe(e,t,n,r){var i=lu(e);i[t]!==(i[t]=n)&&(t==="loading"&&(e[Ic]=n),n==null?e.removeAttribute(t):typeof n!="string"&&uu(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function sd(e,t,n,r,i=!1,o=!1){var s=lu(e),a=s[su],l=!s[au],u=t||{},f=e.nodeName===rd;for(var d in t)d in n||(n[d]=null);n.class?n.class=$n(n.class):(r||n[gn])&&(n.class=null),n[yn]&&(n.style??(n.style=null));var c=uu(e);for(const w in n){let O=n[w];if(f&&w==="value"&&O==null){e.value=e.__value="",u[w]=O;continue}if(w==="class"){var y=e.namespaceURI==="http://www.w3.org/1999/xhtml";Tn(e,y,O,r,t==null?void 0:t[gn],n[gn]),u[w]=O,u[gn]=n[gn];continue}if(w==="style"){Tt(e,O,t==null?void 0:t[yn],n[yn]),u[w]=O,u[yn]=n[yn];continue}var v=u[w];if(!(O===v&&!(O===void 0&&e.hasAttribute(w)))){u[w]=O;var _=w[0]+w[1];if(_!=="$$")if(_==="on"){const L={},W="$$"+w;let P=w.slice(2);var p=Ff(P);if(Rf(P)&&(P=P.slice(0,-7),L.capture=!0),!p&&v){if(O!=null)continue;e.removeEventListener(P,u[W],L),u[W]=null}if(O!=null)if(p)e[`__${P}`]=O,Ts([P]);else{let V=function(J){u[w].call(this,J)};var M=V;u[W]=As(P,e,V,L)}else p&&(e[`__${P}`]=void 0)}else if(w==="style")pe(e,w,O);else if(w==="autofocus")Nf(e,!!O);else if(!a&&(w==="__value"||w==="value"&&O!=null))e.value=e.__value=O;else if(w==="selected"&&f)od(e,O);else{var b=w;l||(b=Vf(b));var A=b==="defaultValue"||b==="defaultChecked";if(O==null&&!a&&!A)if(s[w]=null,b==="value"||b==="checked"){let L=e;const W=t===void 0;if(b==="value"){let P=L.defaultValue;L.removeAttribute(b),L.defaultValue=P,L.value=L.__value=W?P:null}else{let P=L.defaultChecked;L.removeAttribute(b),L.defaultChecked=P,L.checked=W?P:!1}}else e.removeAttribute(w);else A||c.includes(b)&&(a||typeof O!="string")?(e[b]=O,b in s&&(s[b]=He)):typeof O!="function"&&pe(e,b,O)}}}return u}function er(e,t,n=[],r=[],i=[],o,s=!1,a=!1){Ml(i,n,r,l=>{var u=void 0,f={},d=e.nodeName===id,c=!1;if(Xl(()=>{var v=t(...l.map(h)),_=sd(e,u,v,o,s,a);c&&d&&"value"in v&&es(e,v.value);for(let b of Object.getOwnPropertySymbols(f))v[b]||Ke(f[b]);for(let b of Object.getOwnPropertySymbols(v)){var p=v[b];b.description===jc&&(!u||p!==u[b])&&(f[b]&&Ke(f[b]),f[b]=nt(()=>Jf(e,()=>p))),_[b]=p}u=_}),d){var y=e;fi(()=>{es(y,u.value,!0),nd(y)})}c=!0})}function lu(e){return e.__attributes??(e.__attributes={[su]:e.nodeName.includes("-"),[au]:e.namespaceURI===vl})}var ga=new Map;function uu(e){var t=e.getAttribute("is")||e.nodeName,n=ga.get(t);if(n)return n;ga.set(t,n=[]);for(var r,i=e,o=Element.prototype;o!==i;){r=sl(i);for(var s in r)r[s].set&&n.push(s);i=ao(i)}return n}var _n,vr,ti,io,cu;const oo=class oo{constructor(t){R(this,io);R(this,_n,new WeakMap);R(this,vr);R(this,ti);fe(this,ti,t)}observe(t,n){var r=g(this,_n).get(t)||new Set;return r.add(n),g(this,_n).set(t,r),Xe(this,io,cu).call(this).observe(t,g(this,ti)),()=>{var i=g(this,_n).get(t);i.delete(n),i.size===0&&(g(this,_n).delete(t),g(this,vr).unobserve(t))}}};_n=new WeakMap,vr=new WeakMap,ti=new WeakMap,io=new WeakSet,cu=function(){return g(this,vr)??fe(this,vr,new ResizeObserver(t=>{for(var n of t){oo.entries.set(n.target,n);for(var r of g(this,_n).get(n.target)||[])r(n)}}))},Te(oo,"entries",new WeakMap);let ts=oo;var ad=new ts({box:"border-box"});function ya(e,t,n){var r=ad.observe(e,()=>n(e[t]));fi(()=>(rt(()=>n(e[t])),r))}function va(e,t){return e===t||(e==null?void 0:e[Vt])===t}function gi(e={},t,n,r){return fi(()=>{var i,o;return di(()=>{i=o,o=[],rt(()=>{e!==n(...o)&&(t(e,...o),i&&va(n(...i),e)&&t(null,...i))})}),()=>{Ht(()=>{o&&va(n(...o),e)&&t(null,...o)})}}),e}function Ds(e=!1){const t=Ee,n=t.l.u;if(!n)return;let r=()=>Is(t.s);if(e){let i=0,o={};const s=ui(()=>{let a=!1;const l=t.s;for(const u in l)l[u]!==o[u]&&(o[u]=l[u],a=!0);return a&&i++,i});r=()=>h(s)}n.b.length&&Kl(()=>{ma(t,r),Vo(n.b)}),Yt(()=>{const i=rt(()=>n.m.map(Cc));return()=>{for(const o of i)typeof o=="function"&&o()}}),n.a.length&&Yt(()=>{ma(t,r),Vo(n.a)})}function ma(e,t){if(e.l.s)for(const n of e.l.s)h(n);t()}let Ni=!1;function ld(e){var t=Ni;try{return Ni=!1,[e(),Ni]}finally{Ni=t}}const ud={get(e,t){if(!e.exclude.includes(t))return e.props[t]},set(e,t){return!1},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function yi(e,t,n){return new Proxy({props:e,exclude:t},ud)}const cd={get(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(Or(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r)return r[t]}},set(e,t,n){let r=e.props.length;for(;r--;){let i=e.props[r];Or(i)&&(i=i());const o=xn(i,t);if(o&&o.set)return o.set(n),!0}return!1},getOwnPropertyDescriptor(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(Or(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r){const i=xn(r,t);return i&&!i.configurable&&(i.configurable=!0),i}}},has(e,t){if(t===Vt||t===dl)return!1;for(let n of e.props)if(Or(n)&&(n=n()),n!=null&&t in n)return!0;return!1},ownKeys(e){const t=[];for(let n of e.props)if(Or(n)&&(n=n()),!!n){for(const r in n)t.includes(r)||t.push(r);for(const r of Object.getOwnPropertySymbols(n))t.includes(r)||t.push(r)}return t}};function fd(...e){return new Proxy({props:e},cd)}function Q(e,t,n,r){var M;var i=!Ir||(n&Wc)!==0,o=(n&Zc)!==0,s=(n&Gc)!==0,a=r,l=!0,u=()=>(l&&(l=!1,a=s?rt(r):r),a),f;if(o){var d=Vt in e||dl in e;f=((M=xn(e,t))==null?void 0:M.set)??(d&&t in e?w=>e[t]=w:void 0)}var c,y=!1;o?[c,y]=ld(()=>e[t]):c=e[t],c===void 0&&r!==void 0&&(c=u(),f&&(i&&zc(),f(c)));var v;if(i?v=()=>{var w=e[t];return w===void 0?u():(l=!0,w)}:v=()=>{var w=e[t];return w!==void 0&&(a=void 0),w===void 0?a:w},i&&!(n&qc))return v;if(f){var _=e.$$legacy;return function(w,O){return arguments.length>0?((!i||!O||_||y)&&f(O?v():w),w):v()}}var p=!1,b=(n&Xc?ui:xs)(()=>(p=!1,v()));o&&h(b);var A=Ne;return function(w,O){if(arguments.length>0){const L=O?h(b):i&&o?wn(w):w;return X(b,L),p=!0,a!==void 0&&(a=L),w}return Cn&&p||A.f&rn?b.v:h(b)}}function fu(e){Ee===null&&lo(),Ir&&Ee.l!==null?gd(Ee).m.push(e):Yt(()=>{const t=rt(e);if(typeof t=="function")return t})}function co(e){Ee===null&&lo(),fu(()=>()=>rt(e))}function dd(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}function hd(){const e=Ee;return e===null&&lo(),(t,n,r)=>{var o;const i=(o=e.s.$$events)==null?void 0:o[t];if(i){const s=ii(i)?i.slice():[i],a=dd(t,n,r);for(const l of s)l.call(e.x,a);return!a.defaultPrevented}return!0}}function gd(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const yd="5";var ol;typeof window<"u"&&((ol=window.__svelte??(window.__svelte={})).v??(ol.v=new Set)).add(yd);ef();var vd={value:()=>{}};function fo(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new zi(n)}function zi(e){this._=e}function md(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}zi.prototype=fo.prototype={constructor:zi,on:function(e,t){var n=this._,r=md(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=pd(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=pa(n[i],e.name,t);else if(t==null)for(i in n)n[i]=pa(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new zi(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function pd(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function pa(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=vd,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var ns="http://www.w3.org/1999/xhtml";const _a={svg:"http://www.w3.org/2000/svg",xhtml:ns,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ho(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),_a.hasOwnProperty(t)?{space:_a[t],local:e}:e}function _d(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ns&&t.documentElement.namespaceURI===ns?t.createElement(e):t.createElementNS(n,e)}}function wd(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function du(e){var t=ho(e);return(t.local?wd:_d)(t)}function xd(){}function zs(e){return e==null?xd:function(){return this.querySelector(e)}}function bd(e){typeof e!="function"&&(e=zs(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=new Array(s),l,u,f=0;f<s;++f)(l=o[f])&&(u=e.call(l,l.__data__,f,o))&&("__data__"in l&&(u.__data__=l.__data__),a[f]=u);return new ft(r,this._parents)}function Ed(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Nd(){return[]}function hu(e){return e==null?Nd:function(){return this.querySelectorAll(e)}}function Sd(e){return function(){return Ed(e.apply(this,arguments))}}function kd(e){typeof e=="function"?e=Sd(e):e=hu(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var s=t[o],a=s.length,l,u=0;u<a;++u)(l=s[u])&&(r.push(e.call(l,l.__data__,u,s)),i.push(l));return new ft(r,i)}function gu(e){return function(){return this.matches(e)}}function yu(e){return function(t){return t.matches(e)}}var Cd=Array.prototype.find;function Id(e){return function(){return Cd.call(this.children,e)}}function Ad(){return this.firstElementChild}function Td(e){return this.select(e==null?Ad:Id(typeof e=="function"?e:yu(e)))}var Md=Array.prototype.filter;function Pd(){return Array.from(this.children)}function Od(e){return function(){return Md.call(this.children,e)}}function Dd(e){return this.selectAll(e==null?Pd:Od(typeof e=="function"?e:yu(e)))}function zd(e){typeof e!="function"&&(e=gu(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],l,u=0;u<s;++u)(l=o[u])&&e.call(l,l.__data__,u,o)&&a.push(l);return new ft(r,this._parents)}function vu(e){return new Array(e.length)}function Rd(){return new ft(this._enter||this._groups.map(vu),this._parents)}function Hi(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Hi.prototype={constructor:Hi,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Ld(e){return function(){return e}}function Fd(e,t,n,r,i,o){for(var s=0,a,l=t.length,u=o.length;s<u;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new Hi(e,o[s]);for(;s<l;++s)(a=t[s])&&(i[s]=a)}function Bd(e,t,n,r,i,o,s){var a,l,u=new Map,f=t.length,d=o.length,c=new Array(f),y;for(a=0;a<f;++a)(l=t[a])&&(c[a]=y=s.call(l,l.__data__,a,t)+"",u.has(y)?i[a]=l:u.set(y,l));for(a=0;a<d;++a)y=s.call(e,o[a],a,o)+"",(l=u.get(y))?(r[a]=l,l.__data__=o[a],u.delete(y)):n[a]=new Hi(e,o[a]);for(a=0;a<f;++a)(l=t[a])&&u.get(c[a])===l&&(i[a]=l)}function Vd(e){return e.__data__}function Hd(e,t){if(!arguments.length)return Array.from(this,Vd);var n=t?Bd:Fd,r=this._parents,i=this._groups;typeof e!="function"&&(e=Ld(e));for(var o=i.length,s=new Array(o),a=new Array(o),l=new Array(o),u=0;u<o;++u){var f=r[u],d=i[u],c=d.length,y=Kd(e.call(f,f&&f.__data__,u,r)),v=y.length,_=a[u]=new Array(v),p=s[u]=new Array(v),b=l[u]=new Array(c);n(f,d,_,p,b,y,t);for(var A=0,M=0,w,O;A<v;++A)if(w=_[A]){for(A>=M&&(M=A+1);!(O=p[M])&&++M<v;);w._next=O||null}}return s=new ft(s,r),s._enter=a,s._exit=l,s}function Kd(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Yd(){return new ft(this._exit||this._groups.map(vu),this._parents)}function Xd(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Wd(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),l=0;l<s;++l)for(var u=n[l],f=r[l],d=u.length,c=a[l]=new Array(d),y,v=0;v<d;++v)(y=u[v]||f[v])&&(c[v]=y);for(;l<i;++l)a[l]=n[l];return new ft(a,this._parents)}function qd(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function Zd(e){e||(e=Gd);function t(d,c){return d&&c?e(d.__data__,c.__data__):!d-!c}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,l=i[o]=new Array(a),u,f=0;f<a;++f)(u=s[f])&&(l[f]=u);l.sort(t)}return new ft(i,this._parents).order()}function Gd(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Ud(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function jd(){return Array.from(this)}function Qd(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function Jd(){let e=0;for(const t of this)++e;return e}function $d(){return!this.node()}function eh(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this}function th(e){return function(){this.removeAttribute(e)}}function nh(e){return function(){this.removeAttributeNS(e.space,e.local)}}function rh(e,t){return function(){this.setAttribute(e,t)}}function ih(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function oh(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function sh(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function ah(e,t){var n=ho(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?nh:th:typeof t=="function"?n.local?sh:oh:n.local?ih:rh)(n,t))}function mu(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function lh(e){return function(){this.style.removeProperty(e)}}function uh(e,t,n){return function(){this.style.setProperty(e,t,n)}}function ch(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function fh(e,t,n){return arguments.length>1?this.each((t==null?lh:typeof t=="function"?ch:uh)(e,t,n??"")):br(this.node(),e)}function br(e,t){return e.style.getPropertyValue(t)||mu(e).getComputedStyle(e,null).getPropertyValue(t)}function dh(e){return function(){delete this[e]}}function hh(e,t){return function(){this[e]=t}}function gh(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function yh(e,t){return arguments.length>1?this.each((t==null?dh:typeof t=="function"?gh:hh)(e,t)):this.node()[e]}function pu(e){return e.trim().split(/^|\s+/)}function Rs(e){return e.classList||new _u(e)}function _u(e){this._node=e,this._names=pu(e.getAttribute("class")||"")}_u.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function wu(e,t){for(var n=Rs(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function xu(e,t){for(var n=Rs(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function vh(e){return function(){wu(this,e)}}function mh(e){return function(){xu(this,e)}}function ph(e,t){return function(){(t.apply(this,arguments)?wu:xu)(this,e)}}function _h(e,t){var n=pu(e+"");if(arguments.length<2){for(var r=Rs(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?ph:t?vh:mh)(n,t))}function wh(){this.textContent=""}function xh(e){return function(){this.textContent=e}}function bh(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Eh(e){return arguments.length?this.each(e==null?wh:(typeof e=="function"?bh:xh)(e)):this.node().textContent}function Nh(){this.innerHTML=""}function Sh(e){return function(){this.innerHTML=e}}function kh(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Ch(e){return arguments.length?this.each(e==null?Nh:(typeof e=="function"?kh:Sh)(e)):this.node().innerHTML}function Ih(){this.nextSibling&&this.parentNode.appendChild(this)}function Ah(){return this.each(Ih)}function Th(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Mh(){return this.each(Th)}function Ph(e){var t=typeof e=="function"?e:du(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Oh(){return null}function Dh(e,t){var n=typeof e=="function"?e:du(e),r=t==null?Oh:typeof t=="function"?t:zs(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function zh(){var e=this.parentNode;e&&e.removeChild(this)}function Rh(){return this.each(zh)}function Lh(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Fh(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Bh(e){return this.select(e?Fh:Lh)}function Vh(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Hh(e){return function(t){e.call(this,t,this.__data__)}}function Kh(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Yh(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function Xh(e,t,n){return function(){var r=this.__on,i,o=Hh(t);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Wh(e,t,n){var r=Kh(e+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,f;l<u;++l)for(i=0,f=a[l];i<o;++i)if((s=r[i]).type===f.type&&s.name===f.name)return f.value}return}for(a=t?Xh:Yh,i=0;i<o;++i)this.each(a(r[i],t,n));return this}function bu(e,t,n){var r=mu(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function qh(e,t){return function(){return bu(this,e,t)}}function Zh(e,t){return function(){return bu(this,e,t.apply(this,arguments))}}function Gh(e,t){return this.each((typeof t=="function"?Zh:qh)(e,t))}function*Uh(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var Eu=[null];function ft(e,t){this._groups=e,this._parents=t}function vi(){return new ft([[document.documentElement]],Eu)}function jh(){return this}ft.prototype=vi.prototype={constructor:ft,select:bd,selectAll:kd,selectChild:Td,selectChildren:Dd,filter:zd,data:Hd,enter:Rd,exit:Yd,join:Xd,merge:Wd,selection:jh,order:qd,sort:Zd,call:Ud,nodes:jd,node:Qd,size:Jd,empty:$d,each:eh,attr:ah,style:fh,property:yh,classed:_h,text:Eh,html:Ch,raise:Ah,lower:Mh,append:Ph,insert:Dh,remove:Rh,clone:Bh,datum:Vh,on:Wh,dispatch:Gh,[Symbol.iterator]:Uh};function St(e){return typeof e=="string"?new ft([[document.querySelector(e)]],[document.documentElement]):new ft([[e]],Eu)}function Qh(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Dt(e,t){if(e=Qh(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Jh={passive:!1},Wr={capture:!0,passive:!1};function Io(e){e.stopImmediatePropagation()}function or(e){e.preventDefault(),e.stopImmediatePropagation()}function Nu(e){var t=e.document.documentElement,n=St(e).on("dragstart.drag",or,Wr);"onselectstart"in t?n.on("selectstart.drag",or,Wr):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Su(e,t){var n=e.document.documentElement,r=St(e).on("dragstart.drag",null);t&&(r.on("click.drag",or,Wr),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Si=e=>()=>e;function rs(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:o,x:s,y:a,dx:l,dy:u,dispatch:f}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:f}})}rs.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function $h(e){return!e.ctrlKey&&!e.button}function eg(){return this.parentNode}function tg(e,t){return t??{x:e.x,y:e.y}}function ng(){return navigator.maxTouchPoints||"ontouchstart"in this}function rg(){var e=$h,t=eg,n=tg,r=ng,i={},o=fo("start","drag","end"),s=0,a,l,u,f,d=0;function c(w){w.on("mousedown.drag",y).filter(r).on("touchstart.drag",p).on("touchmove.drag",b,Jh).on("touchend.drag touchcancel.drag",A).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(w,O){if(!(f||!e.call(this,w,O))){var L=M(this,t.call(this,w,O),w,O,"mouse");L&&(St(w.view).on("mousemove.drag",v,Wr).on("mouseup.drag",_,Wr),Nu(w.view),Io(w),u=!1,a=w.clientX,l=w.clientY,L("start",w))}}function v(w){if(or(w),!u){var O=w.clientX-a,L=w.clientY-l;u=O*O+L*L>d}i.mouse("drag",w)}function _(w){St(w.view).on("mousemove.drag mouseup.drag",null),Su(w.view,u),or(w),i.mouse("end",w)}function p(w,O){if(e.call(this,w,O)){var L=w.changedTouches,W=t.call(this,w,O),P=L.length,V,J;for(V=0;V<P;++V)(J=M(this,W,w,O,L[V].identifier,L[V]))&&(Io(w),J("start",w,L[V]))}}function b(w){var O=w.changedTouches,L=O.length,W,P;for(W=0;W<L;++W)(P=i[O[W].identifier])&&(or(w),P("drag",w,O[W]))}function A(w){var O=w.changedTouches,L=O.length,W,P;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),W=0;W<L;++W)(P=i[O[W].identifier])&&(Io(w),P("end",w,O[W]))}function M(w,O,L,W,P,V){var J=o.copy(),T=Dt(V||L,O),x,I,m;if((m=n.call(w,new rs("beforestart",{sourceEvent:L,target:c,identifier:P,active:s,x:T[0],y:T[1],dx:0,dy:0,dispatch:J}),W))!=null)return x=m.x-T[0]||0,I=m.y-T[1]||0,function C(S,F,H){var z=T,Y;switch(S){case"start":i[P]=C,Y=s++;break;case"end":delete i[P],--s;case"drag":T=Dt(H||F,O),Y=s;break}J.call(S,w,new rs(S,{sourceEvent:F,subject:m,target:c,identifier:P,active:Y,x:T[0]+x,y:T[1]+I,dx:T[0]-z[0],dy:T[1]-z[1],dispatch:J}),W)}}return c.filter=function(w){return arguments.length?(e=typeof w=="function"?w:Si(!!w),c):e},c.container=function(w){return arguments.length?(t=typeof w=="function"?w:Si(w),c):t},c.subject=function(w){return arguments.length?(n=typeof w=="function"?w:Si(w),c):n},c.touchable=function(w){return arguments.length?(r=typeof w=="function"?w:Si(!!w),c):r},c.on=function(){var w=o.on.apply(o,arguments);return w===o?c:w},c.clickDistance=function(w){return arguments.length?(d=(w=+w)*w,c):Math.sqrt(d)},c}function Ls(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ku(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function mi(){}var qr=.7,Ki=1/qr,sr="\\s*([+-]?\\d+)\\s*",Zr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Kt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ig=/^#([0-9a-f]{3,8})$/,og=new RegExp(`^rgb\\(${sr},${sr},${sr}\\)$`),sg=new RegExp(`^rgb\\(${Kt},${Kt},${Kt}\\)$`),ag=new RegExp(`^rgba\\(${sr},${sr},${sr},${Zr}\\)$`),lg=new RegExp(`^rgba\\(${Kt},${Kt},${Kt},${Zr}\\)$`),ug=new RegExp(`^hsl\\(${Zr},${Kt},${Kt}\\)$`),cg=new RegExp(`^hsla\\(${Zr},${Kt},${Kt},${Zr}\\)$`),wa={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ls(mi,Zn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:xa,formatHex:xa,formatHex8:fg,formatHsl:dg,formatRgb:ba,toString:ba});function xa(){return this.rgb().formatHex()}function fg(){return this.rgb().formatHex8()}function dg(){return Cu(this).formatHsl()}function ba(){return this.rgb().formatRgb()}function Zn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ig.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Ea(t):n===3?new it(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?ki(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?ki(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=og.exec(e))?new it(t[1],t[2],t[3],1):(t=sg.exec(e))?new it(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ag.exec(e))?ki(t[1],t[2],t[3],t[4]):(t=lg.exec(e))?ki(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ug.exec(e))?ka(t[1],t[2]/100,t[3]/100,1):(t=cg.exec(e))?ka(t[1],t[2]/100,t[3]/100,t[4]):wa.hasOwnProperty(e)?Ea(wa[e]):e==="transparent"?new it(NaN,NaN,NaN,0):null}function Ea(e){return new it(e>>16&255,e>>8&255,e&255,1)}function ki(e,t,n,r){return r<=0&&(e=t=n=NaN),new it(e,t,n,r)}function hg(e){return e instanceof mi||(e=Zn(e)),e?(e=e.rgb(),new it(e.r,e.g,e.b,e.opacity)):new it}function is(e,t,n,r){return arguments.length===1?hg(e):new it(e,t,n,r??1)}function it(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Ls(it,is,ku(mi,{brighter(e){return e=e==null?Ki:Math.pow(Ki,e),new it(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?qr:Math.pow(qr,e),new it(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new it(Yn(this.r),Yn(this.g),Yn(this.b),Yi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Na,formatHex:Na,formatHex8:gg,formatRgb:Sa,toString:Sa}));function Na(){return`#${Dn(this.r)}${Dn(this.g)}${Dn(this.b)}`}function gg(){return`#${Dn(this.r)}${Dn(this.g)}${Dn(this.b)}${Dn((isNaN(this.opacity)?1:this.opacity)*255)}`}function Sa(){const e=Yi(this.opacity);return`${e===1?"rgb(":"rgba("}${Yn(this.r)}, ${Yn(this.g)}, ${Yn(this.b)}${e===1?")":`, ${e})`}`}function Yi(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Yn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Dn(e){return e=Yn(e),(e<16?"0":"")+e.toString(16)}function ka(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new kt(e,t,n,r)}function Cu(e){if(e instanceof kt)return new kt(e.h,e.s,e.l,e.opacity);if(e instanceof mi||(e=Zn(e)),!e)return new kt;if(e instanceof kt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(t===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-t)/a+2:s=(t-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new kt(s,a,l,e.opacity)}function yg(e,t,n,r){return arguments.length===1?Cu(e):new kt(e,t,n,r??1)}function kt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Ls(kt,yg,ku(mi,{brighter(e){return e=e==null?Ki:Math.pow(Ki,e),new kt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?qr:Math.pow(qr,e),new kt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new it(Ao(e>=240?e-240:e+120,i,r),Ao(e,i,r),Ao(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new kt(Ca(this.h),Ci(this.s),Ci(this.l),Yi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Yi(this.opacity);return`${e===1?"hsl(":"hsla("}${Ca(this.h)}, ${Ci(this.s)*100}%, ${Ci(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Ca(e){return e=(e||0)%360,e<0?e+360:e}function Ci(e){return Math.max(0,Math.min(1,e||0))}function Ao(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Fs=e=>()=>e;function vg(e,t){return function(n){return e+n*t}}function mg(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function pg(e){return(e=+e)==1?Iu:function(t,n){return n-t?mg(t,n,e):Fs(isNaN(t)?n:t)}}function Iu(e,t){var n=t-e;return n?vg(e,n):Fs(isNaN(e)?t:e)}const Xi=function e(t){var n=pg(t);function r(i,o){var s=n((i=is(i)).r,(o=is(o)).r),a=n(i.g,o.g),l=n(i.b,o.b),u=Iu(i.opacity,o.opacity);return function(f){return i.r=s(f),i.g=a(f),i.b=l(f),i.opacity=u(f),i+""}}return r.gamma=e,r}(1);function _g(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function wg(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function xg(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=Kr(e[s],t[s]);for(;s<n;++s)o[s]=t[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function bg(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Bt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Eg(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Kr(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var os=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,To=new RegExp(os.source,"g");function Ng(e){return function(){return e}}function Sg(e){return function(t){return e(t)+""}}function Au(e,t){var n=os.lastIndex=To.lastIndex=0,r,i,o,s=-1,a=[],l=[];for(e=e+"",t=t+"";(r=os.exec(e))&&(i=To.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:Bt(r,i)})),n=To.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?Sg(l[0].x):Ng(t):(t=l.length,function(u){for(var f=0,d;f<t;++f)a[(d=l[f]).i]=d.x(u);return a.join("")})}function Kr(e,t){var n=typeof t,r;return t==null||n==="boolean"?Fs(t):(n==="number"?Bt:n==="string"?(r=Zn(t))?(t=r,Xi):Au:t instanceof Zn?Xi:t instanceof Date?bg:wg(t)?_g:Array.isArray(t)?xg:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Eg:Bt)(e,t)}var Ia=180/Math.PI,ss={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Tu(e,t,n,r,i,o){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*Ia,skewX:Math.atan(l)*Ia,scaleX:s,scaleY:a}}var Ii;function kg(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?ss:Tu(t.a,t.b,t.c,t.d,t.e,t.f)}function Cg(e){return e==null||(Ii||(Ii=document.createElementNS("http://www.w3.org/2000/svg","g")),Ii.setAttribute("transform",e),!(e=Ii.transform.baseVal.consolidate()))?ss:(e=e.matrix,Tu(e.a,e.b,e.c,e.d,e.e,e.f))}function Mu(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,f,d,c,y,v){if(u!==d||f!==c){var _=y.push("translate(",null,t,null,n);v.push({i:_-4,x:Bt(u,d)},{i:_-2,x:Bt(f,c)})}else(d||c)&&y.push("translate("+d+t+c+n)}function s(u,f,d,c){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),c.push({i:d.push(i(d)+"rotate(",null,r)-2,x:Bt(u,f)})):f&&d.push(i(d)+"rotate("+f+r)}function a(u,f,d,c){u!==f?c.push({i:d.push(i(d)+"skewX(",null,r)-2,x:Bt(u,f)}):f&&d.push(i(d)+"skewX("+f+r)}function l(u,f,d,c,y,v){if(u!==d||f!==c){var _=y.push(i(y)+"scale(",null,",",null,")");v.push({i:_-4,x:Bt(u,d)},{i:_-2,x:Bt(f,c)})}else(d!==1||c!==1)&&y.push(i(y)+"scale("+d+","+c+")")}return function(u,f){var d=[],c=[];return u=e(u),f=e(f),o(u.translateX,u.translateY,f.translateX,f.translateY,d,c),s(u.rotate,f.rotate,d,c),a(u.skewX,f.skewX,d,c),l(u.scaleX,u.scaleY,f.scaleX,f.scaleY,d,c),u=f=null,function(y){for(var v=-1,_=c.length,p;++v<_;)d[(p=c[v]).i]=p.x(y);return d.join("")}}}var Ig=Mu(kg,"px, ","px)","deg)"),Ag=Mu(Cg,", ",")",")"),Tg=1e-12;function Aa(e){return((e=Math.exp(e))+1/e)/2}function Mg(e){return((e=Math.exp(e))-1/e)/2}function Pg(e){return((e=Math.exp(2*e))-1)/(e+1)}const Ri=function e(t,n,r){function i(o,s){var a=o[0],l=o[1],u=o[2],f=s[0],d=s[1],c=s[2],y=f-a,v=d-l,_=y*y+v*v,p,b;if(_<Tg)b=Math.log(c/u)/t,p=function(W){return[a+W*y,l+W*v,u*Math.exp(t*W*b)]};else{var A=Math.sqrt(_),M=(c*c-u*u+r*_)/(2*u*n*A),w=(c*c-u*u-r*_)/(2*c*n*A),O=Math.log(Math.sqrt(M*M+1)-M),L=Math.log(Math.sqrt(w*w+1)-w);b=(L-O)/t,p=function(W){var P=W*b,V=Aa(O),J=u/(n*A)*(V*Pg(t*P+O)-Mg(O));return[a+J*y,l+J*v,u*V/Aa(t*P+O)]}}return p.duration=b*1e3*t/Math.SQRT2,p}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,l=a*a;return e(s,a,l)},i}(Math.SQRT2,2,4);var Er=0,Fr=0,zr=0,Pu=1e3,Wi,Br,qi=0,Gn=0,go=0,Gr=typeof performance=="object"&&performance.now?performance:Date,Ou=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Bs(){return Gn||(Ou(Og),Gn=Gr.now()+go)}function Og(){Gn=0}function Zi(){this._call=this._time=this._next=null}Zi.prototype=Du.prototype={constructor:Zi,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Bs():+n)+(t==null?0:+t),!this._next&&Br!==this&&(Br?Br._next=this:Wi=this,Br=this),this._call=e,this._time=n,as()},stop:function(){this._call&&(this._call=null,this._time=1/0,as())}};function Du(e,t,n){var r=new Zi;return r.restart(e,t,n),r}function Dg(){Bs(),++Er;for(var e=Wi,t;e;)(t=Gn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Er}function Ta(){Gn=(qi=Gr.now())+go,Er=Fr=0;try{Dg()}finally{Er=0,Rg(),Gn=0}}function zg(){var e=Gr.now(),t=e-qi;t>Pu&&(go-=t,qi=e)}function Rg(){for(var e,t=Wi,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Wi=n);Br=e,as(r)}function as(e){if(!Er){Fr&&(Fr=clearTimeout(Fr));var t=e-Gn;t>24?(e<1/0&&(Fr=setTimeout(Ta,e-Gr.now()-go)),zr&&(zr=clearInterval(zr))):(zr||(qi=Gr.now(),zr=setInterval(zg,Pu)),Er=1,Ou(Ta))}}function Ma(e,t,n){var r=new Zi;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Lg=fo("start","end","cancel","interrupt"),Fg=[],zu=0,Pa=1,ls=2,Li=3,Oa=4,us=5,Fi=6;function yo(e,t,n,r,i,o){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;Bg(e,n,{name:t,index:r,group:i,on:Lg,tween:Fg,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:zu})}function Vs(e,t){var n=Pt(e,t);if(n.state>zu)throw new Error("too late; already scheduled");return n}function Zt(e,t){var n=Pt(e,t);if(n.state>Li)throw new Error("too late; already running");return n}function Pt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Bg(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Du(o,0,n.time);function o(u){n.state=Pa,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var f,d,c,y;if(n.state!==Pa)return l();for(f in r)if(y=r[f],y.name===n.name){if(y.state===Li)return Ma(s);y.state===Oa?(y.state=Fi,y.timer.stop(),y.on.call("interrupt",e,e.__data__,y.index,y.group),delete r[f]):+f<t&&(y.state=Fi,y.timer.stop(),y.on.call("cancel",e,e.__data__,y.index,y.group),delete r[f])}if(Ma(function(){n.state===Li&&(n.state=Oa,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=ls,n.on.call("start",e,e.__data__,n.index,n.group),n.state===ls){for(n.state=Li,i=new Array(c=n.tween.length),f=0,d=-1;f<c;++f)(y=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=y);i.length=d+1}}function a(u){for(var f=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=us,1),d=-1,c=i.length;++d<c;)i[d].call(e,f);n.state===us&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Fi,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function Bi(e,t){var n=e.__transition,r,i,o=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){o=!1;continue}i=r.state>ls&&r.state<us,r.state=Fi,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}o&&delete e.__transition}}function Vg(e){return this.each(function(){Bi(this,e)})}function Hg(e,t){var n,r;return function(){var i=Zt(this,e),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function Kg(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=Zt(this,e),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=a;break}l===u&&i.push(a)}o.tween=i}}function Yg(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Pt(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===e)return s.value;return null}return this.each((t==null?Hg:Kg)(n,e,t))}function Hs(e,t,n){var r=e._id;return e.each(function(){var i=Zt(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Pt(i,r).value[t]}}function Ru(e,t){var n;return(typeof t=="number"?Bt:t instanceof Zn?Xi:(n=Zn(t))?(t=n,Xi):Au)(e,t)}function Xg(e){return function(){this.removeAttribute(e)}}function Wg(e){return function(){this.removeAttributeNS(e.space,e.local)}}function qg(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttribute(e);return s===i?null:s===r?o:o=t(r=s,n)}}function Zg(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===r?o:o=t(r=s,n)}}function Gg(e,t,n){var r,i,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),l=a+"",s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a)))}}function Ug(e,t,n){var r,i,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),l=a+"",s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a)))}}function jg(e,t){var n=ho(e),r=n==="transform"?Ag:Ru;return this.attrTween(e,typeof t=="function"?(n.local?Ug:Gg)(n,r,Hs(this,"attr."+e,t)):t==null?(n.local?Wg:Xg)(n):(n.local?Zg:qg)(n,r,t))}function Qg(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Jg(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function $g(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&Jg(e,o)),n}return i._value=t,i}function ey(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&Qg(e,o)),n}return i._value=t,i}function ty(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=ho(e);return this.tween(n,(r.local?$g:ey)(r,t))}function ny(e,t){return function(){Vs(this,e).delay=+t.apply(this,arguments)}}function ry(e,t){return t=+t,function(){Vs(this,e).delay=t}}function iy(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ny:ry)(t,e)):Pt(this.node(),t).delay}function oy(e,t){return function(){Zt(this,e).duration=+t.apply(this,arguments)}}function sy(e,t){return t=+t,function(){Zt(this,e).duration=t}}function ay(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?oy:sy)(t,e)):Pt(this.node(),t).duration}function ly(e,t){if(typeof t!="function")throw new Error;return function(){Zt(this,e).ease=t}}function uy(e){var t=this._id;return arguments.length?this.each(ly(t,e)):Pt(this.node(),t).ease}function cy(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Zt(this,e).ease=n}}function fy(e){if(typeof e!="function")throw new Error;return this.each(cy(this._id,e))}function dy(e){typeof e!="function"&&(e=gu(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],l,u=0;u<s;++u)(l=o[u])&&e.call(l,l.__data__,u,o)&&a.push(l);return new an(r,this._parents,this._name,this._id)}function hy(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var l=t[a],u=n[a],f=l.length,d=s[a]=new Array(f),c,y=0;y<f;++y)(c=l[y]||u[y])&&(d[y]=c);for(;a<r;++a)s[a]=t[a];return new an(s,this._parents,this._name,this._id)}function gy(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function yy(e,t,n){var r,i,o=gy(t)?Vs:Zt;return function(){var s=o(this,e),a=s.on;a!==r&&(i=(r=a).copy()).on(t,n),s.on=i}}function vy(e,t){var n=this._id;return arguments.length<2?Pt(this.node(),n).on.on(e):this.each(yy(n,e,t))}function my(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function py(){return this.on("end.remove",my(this._id))}function _y(e){var t=this._name,n=this._id;typeof e!="function"&&(e=zs(e));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],l=a.length,u=o[s]=new Array(l),f,d,c=0;c<l;++c)(f=a[c])&&(d=e.call(f,f.__data__,c,a))&&("__data__"in f&&(d.__data__=f.__data__),u[c]=d,yo(u[c],t,n,c,u,Pt(f,n)));return new an(o,this._parents,t,n)}function wy(e){var t=this._name,n=this._id;typeof e!="function"&&(e=hu(e));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var l=r[a],u=l.length,f,d=0;d<u;++d)if(f=l[d]){for(var c=e.call(f,f.__data__,d,l),y,v=Pt(f,n),_=0,p=c.length;_<p;++_)(y=c[_])&&yo(y,t,n,_,c,v);o.push(c),s.push(f)}return new an(o,s,t,n)}var xy=vi.prototype.constructor;function by(){return new xy(this._groups,this._parents)}function Ey(e,t){var n,r,i;return function(){var o=br(this,e),s=(this.style.removeProperty(e),br(this,e));return o===s?null:o===n&&s===r?i:i=t(n=o,r=s)}}function Lu(e){return function(){this.style.removeProperty(e)}}function Ny(e,t,n){var r,i=n+"",o;return function(){var s=br(this,e);return s===i?null:s===r?o:o=t(r=s,n)}}function Sy(e,t,n){var r,i,o;return function(){var s=br(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),br(this,e))),s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a))}}function ky(e,t){var n,r,i,o="style."+t,s="end."+o,a;return function(){var l=Zt(this,e),u=l.on,f=l.value[o]==null?a||(a=Lu(t)):void 0;(u!==n||i!==f)&&(r=(n=u).copy()).on(s,i=f),l.on=r}}function Cy(e,t,n){var r=(e+="")=="transform"?Ig:Ru;return t==null?this.styleTween(e,Ey(e,r)).on("end.style."+e,Lu(e)):typeof t=="function"?this.styleTween(e,Sy(e,r,Hs(this,"style."+e,t))).each(ky(this._id,e)):this.styleTween(e,Ny(e,r,t),n).on("end.style."+e,null)}function Iy(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Ay(e,t,n){var r,i;function o(){var s=t.apply(this,arguments);return s!==i&&(r=(i=s)&&Iy(e,s,n)),r}return o._value=t,o}function Ty(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Ay(e,t,n??""))}function My(e){return function(){this.textContent=e}}function Py(e){return function(){var t=e(this);this.textContent=t??""}}function Oy(e){return this.tween("text",typeof e=="function"?Py(Hs(this,"text",e)):My(e==null?"":e+""))}function Dy(e){return function(t){this.textContent=e.call(this,t)}}function zy(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Dy(i)),t}return r._value=e,r}function Ry(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,zy(e))}function Ly(){for(var e=this._name,t=this._id,n=Fu(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,l,u=0;u<a;++u)if(l=s[u]){var f=Pt(l,t);yo(l,e,n,u,s,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new an(r,this._parents,e,n)}function Fy(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},l={value:function(){--i===0&&o()}};n.each(function(){var u=Zt(this,r),f=u.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),u.on=t}),i===0&&o()})}var By=0;function an(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Fu(){return++By}var Ut=vi.prototype;an.prototype={constructor:an,select:_y,selectAll:wy,selectChild:Ut.selectChild,selectChildren:Ut.selectChildren,filter:dy,merge:hy,selection:by,transition:Ly,call:Ut.call,nodes:Ut.nodes,node:Ut.node,size:Ut.size,empty:Ut.empty,each:Ut.each,on:vy,attr:jg,attrTween:ty,style:Cy,styleTween:Ty,text:Oy,textTween:Ry,remove:py,tween:Yg,delay:iy,duration:ay,ease:uy,easeVarying:fy,end:Fy,[Symbol.iterator]:Ut[Symbol.iterator]};function Vy(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Hy={time:null,delay:0,duration:250,ease:Vy};function Ky(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Yy(e){var t,n;e instanceof an?(t=e._id,e=e._name):(t=Fu(),(n=Hy).time=Bs(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,l,u=0;u<a;++u)(l=s[u])&&yo(l,e,t,u,s,n||Ky(l,t));return new an(r,this._parents,e,t)}vi.prototype.interrupt=Vg;vi.prototype.transition=Yy;const Ai=e=>()=>e;function Xy(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function tn(e,t,n){this.k=e,this.x=t,this.y=n}tn.prototype={constructor:tn,scale:function(e){return e===1?this:new tn(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new tn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var vo=new tn(1,0,0);Bu.prototype=tn.prototype;function Bu(e){for(;!e.__zoom;)if(!(e=e.parentNode))return vo;return e.__zoom}function Mo(e){e.stopImmediatePropagation()}function Rr(e){e.preventDefault(),e.stopImmediatePropagation()}function Wy(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function qy(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Da(){return this.__zoom||vo}function Zy(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Gy(){return navigator.maxTouchPoints||"ontouchstart"in this}function Uy(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function jy(){var e=Wy,t=qy,n=Uy,r=Zy,i=Gy,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,l=Ri,u=fo("start","zoom","end"),f,d,c,y=500,v=150,_=0,p=10;function b(m){m.property("__zoom",Da).on("wheel.zoom",P,{passive:!1}).on("mousedown.zoom",V).on("dblclick.zoom",J).filter(i).on("touchstart.zoom",T).on("touchmove.zoom",x).on("touchend.zoom touchcancel.zoom",I).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(m,C,S,F){var H=m.selection?m.selection():m;H.property("__zoom",Da),m!==H?O(m,C,S,F):H.interrupt().each(function(){L(this,arguments).event(F).start().zoom(null,typeof C=="function"?C.apply(this,arguments):C).end()})},b.scaleBy=function(m,C,S,F){b.scaleTo(m,function(){var H=this.__zoom.k,z=typeof C=="function"?C.apply(this,arguments):C;return H*z},S,F)},b.scaleTo=function(m,C,S,F){b.transform(m,function(){var H=t.apply(this,arguments),z=this.__zoom,Y=S==null?w(H):typeof S=="function"?S.apply(this,arguments):S,U=z.invert(Y),ee=typeof C=="function"?C.apply(this,arguments):C;return n(M(A(z,ee),Y,U),H,s)},S,F)},b.translateBy=function(m,C,S,F){b.transform(m,function(){return n(this.__zoom.translate(typeof C=="function"?C.apply(this,arguments):C,typeof S=="function"?S.apply(this,arguments):S),t.apply(this,arguments),s)},null,F)},b.translateTo=function(m,C,S,F,H){b.transform(m,function(){var z=t.apply(this,arguments),Y=this.__zoom,U=F==null?w(z):typeof F=="function"?F.apply(this,arguments):F;return n(vo.translate(U[0],U[1]).scale(Y.k).translate(typeof C=="function"?-C.apply(this,arguments):-C,typeof S=="function"?-S.apply(this,arguments):-S),z,s)},F,H)};function A(m,C){return C=Math.max(o[0],Math.min(o[1],C)),C===m.k?m:new tn(C,m.x,m.y)}function M(m,C,S){var F=C[0]-S[0]*m.k,H=C[1]-S[1]*m.k;return F===m.x&&H===m.y?m:new tn(m.k,F,H)}function w(m){return[(+m[0][0]+ +m[1][0])/2,(+m[0][1]+ +m[1][1])/2]}function O(m,C,S,F){m.on("start.zoom",function(){L(this,arguments).event(F).start()}).on("interrupt.zoom end.zoom",function(){L(this,arguments).event(F).end()}).tween("zoom",function(){var H=this,z=arguments,Y=L(H,z).event(F),U=t.apply(H,z),ee=S==null?w(U):typeof S=="function"?S.apply(H,z):S,$=Math.max(U[1][0]-U[0][0],U[1][1]-U[0][1]),Z=H.__zoom,de=typeof C=="function"?C.apply(H,z):C,ne=l(Z.invert(ee).concat($/Z.k),de.invert(ee).concat($/de.k));return function(re){if(re===1)re=de;else{var oe=ne(re),N=$/oe[2];re=new tn(N,ee[0]-oe[0]*N,ee[1]-oe[1]*N)}Y.zoom(null,re)}})}function L(m,C,S){return!S&&m.__zooming||new W(m,C)}function W(m,C){this.that=m,this.args=C,this.active=0,this.sourceEvent=null,this.extent=t.apply(m,C),this.taps=0}W.prototype={event:function(m){return m&&(this.sourceEvent=m),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(m,C){return this.mouse&&m!=="mouse"&&(this.mouse[1]=C.invert(this.mouse[0])),this.touch0&&m!=="touch"&&(this.touch0[1]=C.invert(this.touch0[0])),this.touch1&&m!=="touch"&&(this.touch1[1]=C.invert(this.touch1[0])),this.that.__zoom=C,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(m){var C=St(this.that).datum();u.call(m,this.that,new Xy(m,{sourceEvent:this.sourceEvent,target:b,transform:this.that.__zoom,dispatch:u}),C)}};function P(m,...C){if(!e.apply(this,arguments))return;var S=L(this,C).event(m),F=this.__zoom,H=Math.max(o[0],Math.min(o[1],F.k*Math.pow(2,r.apply(this,arguments)))),z=Dt(m);if(S.wheel)(S.mouse[0][0]!==z[0]||S.mouse[0][1]!==z[1])&&(S.mouse[1]=F.invert(S.mouse[0]=z)),clearTimeout(S.wheel);else{if(F.k===H)return;S.mouse=[z,F.invert(z)],Bi(this),S.start()}Rr(m),S.wheel=setTimeout(Y,v),S.zoom("mouse",n(M(A(F,H),S.mouse[0],S.mouse[1]),S.extent,s));function Y(){S.wheel=null,S.end()}}function V(m,...C){if(c||!e.apply(this,arguments))return;var S=m.currentTarget,F=L(this,C,!0).event(m),H=St(m.view).on("mousemove.zoom",ee,!0).on("mouseup.zoom",$,!0),z=Dt(m,S),Y=m.clientX,U=m.clientY;Nu(m.view),Mo(m),F.mouse=[z,this.__zoom.invert(z)],Bi(this),F.start();function ee(Z){if(Rr(Z),!F.moved){var de=Z.clientX-Y,ne=Z.clientY-U;F.moved=de*de+ne*ne>_}F.event(Z).zoom("mouse",n(M(F.that.__zoom,F.mouse[0]=Dt(Z,S),F.mouse[1]),F.extent,s))}function $(Z){H.on("mousemove.zoom mouseup.zoom",null),Su(Z.view,F.moved),Rr(Z),F.event(Z).end()}}function J(m,...C){if(e.apply(this,arguments)){var S=this.__zoom,F=Dt(m.changedTouches?m.changedTouches[0]:m,this),H=S.invert(F),z=S.k*(m.shiftKey?.5:2),Y=n(M(A(S,z),F,H),t.apply(this,C),s);Rr(m),a>0?St(this).transition().duration(a).call(O,Y,F,m):St(this).call(b.transform,Y,F,m)}}function T(m,...C){if(e.apply(this,arguments)){var S=m.touches,F=S.length,H=L(this,C,m.changedTouches.length===F).event(m),z,Y,U,ee;for(Mo(m),Y=0;Y<F;++Y)U=S[Y],ee=Dt(U,this),ee=[ee,this.__zoom.invert(ee),U.identifier],H.touch0?!H.touch1&&H.touch0[2]!==ee[2]&&(H.touch1=ee,H.taps=0):(H.touch0=ee,z=!0,H.taps=1+!!f);f&&(f=clearTimeout(f)),z&&(H.taps<2&&(d=ee[0],f=setTimeout(function(){f=null},y)),Bi(this),H.start())}}function x(m,...C){if(this.__zooming){var S=L(this,C).event(m),F=m.changedTouches,H=F.length,z,Y,U,ee;for(Rr(m),z=0;z<H;++z)Y=F[z],U=Dt(Y,this),S.touch0&&S.touch0[2]===Y.identifier?S.touch0[0]=U:S.touch1&&S.touch1[2]===Y.identifier&&(S.touch1[0]=U);if(Y=S.that.__zoom,S.touch1){var $=S.touch0[0],Z=S.touch0[1],de=S.touch1[0],ne=S.touch1[1],re=(re=de[0]-$[0])*re+(re=de[1]-$[1])*re,oe=(oe=ne[0]-Z[0])*oe+(oe=ne[1]-Z[1])*oe;Y=A(Y,Math.sqrt(re/oe)),U=[($[0]+de[0])/2,($[1]+de[1])/2],ee=[(Z[0]+ne[0])/2,(Z[1]+ne[1])/2]}else if(S.touch0)U=S.touch0[0],ee=S.touch0[1];else return;S.zoom("touch",n(M(Y,U,ee),S.extent,s))}}function I(m,...C){if(this.__zooming){var S=L(this,C).event(m),F=m.changedTouches,H=F.length,z,Y;for(Mo(m),c&&clearTimeout(c),c=setTimeout(function(){c=null},y),z=0;z<H;++z)Y=F[z],S.touch0&&S.touch0[2]===Y.identifier?delete S.touch0:S.touch1&&S.touch1[2]===Y.identifier&&delete S.touch1;if(S.touch1&&!S.touch0&&(S.touch0=S.touch1,delete S.touch1),S.touch0)S.touch0[1]=this.__zoom.invert(S.touch0[0]);else if(S.end(),S.taps===2&&(Y=Dt(Y,this),Math.hypot(d[0]-Y[0],d[1]-Y[1])<p)){var U=St(this).on("dblclick.zoom");U&&U.apply(this,arguments)}}}return b.wheelDelta=function(m){return arguments.length?(r=typeof m=="function"?m:Ai(+m),b):r},b.filter=function(m){return arguments.length?(e=typeof m=="function"?m:Ai(!!m),b):e},b.touchable=function(m){return arguments.length?(i=typeof m=="function"?m:Ai(!!m),b):i},b.extent=function(m){return arguments.length?(t=typeof m=="function"?m:Ai([[+m[0][0],+m[0][1]],[+m[1][0],+m[1][1]]]),b):t},b.scaleExtent=function(m){return arguments.length?(o[0]=+m[0],o[1]=+m[1],b):[o[0],o[1]]},b.translateExtent=function(m){return arguments.length?(s[0][0]=+m[0][0],s[1][0]=+m[1][0],s[0][1]=+m[0][1],s[1][1]=+m[1][1],b):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},b.constrain=function(m){return arguments.length?(n=m,b):n},b.duration=function(m){return arguments.length?(a=+m,b):a},b.interpolate=function(m){return arguments.length?(l=m,b):l},b.on=function(){var m=u.on.apply(u,arguments);return m===u?b:m},b.clickDistance=function(m){return arguments.length?(_=(m=+m)*m,b):Math.sqrt(_)},b.tapDistance=function(m){return arguments.length?(p=+m,b):p},b}const Ur={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},cs=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Vu=["Enter"," ","Escape"],Qy={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Nr;(function(e){e.Strict="strict",e.Loose="loose"})(Nr||(Nr={}));var ar;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(ar||(ar={}));var Gi;(function(e){e.Partial="partial",e.Full="full"})(Gi||(Gi={}));const fs={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var vn;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(vn||(vn={}));var Ui;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Ui||(Ui={}));var he;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(he||(he={}));const za={[he.Left]:he.Right,[he.Right]:he.Left,[he.Top]:he.Bottom,[he.Bottom]:he.Top};function Jy(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}function Ra(e,t,n){if(!n)return;const r=[];e.forEach((i,o)=>{t!=null&&t.has(o)||r.push(i)}),r.length&&n(r)}function $y(e){return e===null?null:e?"valid":"invalid"}const Hu=e=>"id"in e&&"source"in e&&"target"in e,e0=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Ks=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),pi=(e,t=[0,0])=>{const{width:n,height:r}=tr(e),i=e.origin??t,o=n*i[0],s=r*i[1];return{x:e.position.x-o,y:e.position.y-s}},t0=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const o=typeof i=="string";let s=!t.nodeLookup&&!o?i:void 0;t.nodeLookup&&(s=o?t.nodeLookup.get(i):Ks(i)?i:t.nodeLookup.get(i.id));const a=s?ji(s,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return po(r,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return _o(n)},mo=(e,t={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},r=!1;return e.forEach(i=>{(t.filter===void 0||t.filter(i))&&(n=po(n,ji(i)),r=!0)}),r?_o(n):{x:0,y:0,width:0,height:0}},Ys=(e,t,[n,r,i]=[0,0,1],o=!1,s=!1)=>{const a={...wi(t,[n,r,i]),width:t.width/i,height:t.height/i},l=[];for(const u of e.values()){const{measured:f,selectable:d=!0,hidden:c=!1}=u;if(s&&!d||c)continue;const y=f.width??u.width??u.initialWidth??null,v=f.height??u.height??u.initialHeight??null,_=jr(a,kr(u)),p=(y??0)*(v??0),b=o&&_>0;(!u.internals.handleBounds||b||_>=p||u.dragging)&&l.push(u)}return l},n0=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function r0(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(i=>i.id)):null;return e.forEach(i=>{i.measured.width&&i.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function i0({nodes:e,width:t,height:n,panZoom:r,minZoom:i,maxZoom:o},s){if(e.size===0)return Promise.resolve(!0);const a=r0(e,s),l=mo(a),u=Xs(l,t,n,(s==null?void 0:s.minZoom)??i,(s==null?void 0:s.maxZoom)??o,(s==null?void 0:s.padding)??.1);return await r.setViewport(u,{duration:s==null?void 0:s.duration,ease:s==null?void 0:s.ease,interpolate:s==null?void 0:s.interpolate}),Promise.resolve(!0)}function Ku({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:o}){const s=n.get(e),a=s.parentId?n.get(s.parentId):void 0,{x:l,y:u}=a?a.internals.positionAbsolute:{x:0,y:0},f=s.origin??r;let d=s.extent||i;if(s.extent==="parent"&&!s.expandParent)if(!a)o==null||o("005",Ur.error005());else{const y=a.measured.width,v=a.measured.height;y&&v&&(d=[[l,u],[l+y,u+v]])}else a&&Cr(s.extent)&&(d=[[s.extent[0][0]+l,s.extent[0][1]+u],[s.extent[1][0]+l,s.extent[1][1]+u]]);const c=Cr(d)?Un(t,d,s.measured):t;return(s.measured.width===void 0||s.measured.height===void 0)&&(o==null||o("015",Ur.error015())),{position:{x:c.x-l+(s.measured.width??0)*f[0],y:c.y-u+(s.measured.height??0)*f[1]},positionAbsolute:c}}async function o0({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:i}){const o=new Set(e.map(c=>c.id)),s=[];for(const c of n){if(c.deletable===!1)continue;const y=o.has(c.id),v=!y&&c.parentId&&s.find(_=>_.id===c.parentId);(y||v)&&s.push(c)}const a=new Set(t.map(c=>c.id)),l=r.filter(c=>c.deletable!==!1),f=n0(s,l);for(const c of l)a.has(c.id)&&!f.find(v=>v.id===c.id)&&f.push(c);if(!i)return{edges:f,nodes:s};const d=await i({nodes:s,edges:f});return typeof d=="boolean"?d?{edges:f,nodes:s}:{edges:[],nodes:[]}:d}const Sr=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Un=(e={x:0,y:0},t,n)=>({x:Sr(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:Sr(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function Yu(e,t,n){const{width:r,height:i}=tr(n),{x:o,y:s}=n.internals.positionAbsolute;return Un(e,[[o,s],[o+r,s+i]],t)}const La=(e,t,n)=>e<t?Sr(Math.abs(e-t),1,t)/t:e>n?-Sr(Math.abs(e-n),1,t)/t:0,Xu=(e,t,n=15,r=40)=>{const i=La(e.x,r,t.width-r)*n,o=La(e.y,r,t.height-r)*n;return[i,o]},po=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),ds=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),_o=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),kr=(e,t=[0,0])=>{var i,o;const{x:n,y:r}=Ks(e)?e.internals.positionAbsolute:pi(e,t);return{x:n,y:r,width:((i=e.measured)==null?void 0:i.width)??e.width??e.initialWidth??0,height:((o=e.measured)==null?void 0:o.height)??e.height??e.initialHeight??0}},ji=(e,t=[0,0])=>{var i,o;const{x:n,y:r}=Ks(e)?e.internals.positionAbsolute:pi(e,t);return{x:n,y:r,x2:n+(((i=e.measured)==null?void 0:i.width)??e.width??e.initialWidth??0),y2:r+(((o=e.measured)==null?void 0:o.height)??e.height??e.initialHeight??0)}},s0=(e,t)=>_o(po(ds(e),ds(t))),jr=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Fa=e=>nn(e.width)&&nn(e.height)&&nn(e.x)&&nn(e.y),nn=e=>!isNaN(e)&&isFinite(e),a0=(e,t)=>{},_i=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),wi=({x:e,y:t},[n,r,i],o=!1,s=[1,1])=>{const a={x:(e-n)/i,y:(t-r)/i};return o?_i(a,s):a},Qi=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r});function nr(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function l0(e,t,n){if(typeof e=="string"||typeof e=="number"){const r=nr(e,n),i=nr(e,t);return{top:r,right:i,bottom:r,left:i,x:i*2,y:r*2}}if(typeof e=="object"){const r=nr(e.top??e.y??0,n),i=nr(e.bottom??e.y??0,n),o=nr(e.left??e.x??0,t),s=nr(e.right??e.x??0,t);return{top:r,right:s,bottom:i,left:o,x:o+s,y:r+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function u0(e,t,n,r,i,o){const{x:s,y:a}=Qi(e,[t,n,r]),{x:l,y:u}=Qi({x:e.x+e.width,y:e.y+e.height},[t,n,r]),f=i-l,d=o-u;return{left:Math.floor(s),top:Math.floor(a),right:Math.floor(f),bottom:Math.floor(d)}}const Xs=(e,t,n,r,i,o)=>{const s=l0(o,t,n),a=(t-s.x)/e.width,l=(n-s.y)/e.height,u=Math.min(a,l),f=Sr(u,r,i),d=e.x+e.width/2,c=e.y+e.height/2,y=t/2-d*f,v=n/2-c*f,_=u0(e,y,v,f,t,n),p={left:Math.min(_.left-s.left,0),top:Math.min(_.top-s.top,0),right:Math.min(_.right-s.right,0),bottom:Math.min(_.bottom-s.bottom,0)};return{x:y-p.left+p.right,y:v-p.top+p.bottom,zoom:f}},Ji=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Cr(e){return e!=null&&e!=="parent"}function tr(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function c0(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function f0(e,t={width:0,height:0},n,r,i){const o={...e},s=r.get(n);if(s){const a=s.origin||i;o.x+=s.internals.positionAbsolute.x-(t.width??0)*a[0],o.y+=s.internals.positionAbsolute.y-(t.height??0)*a[1]}return o}function d0(e){return{...Qy,...e||{}}}function Po(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){const{x:o,y:s}=At(e),a=wi({x:o-((i==null?void 0:i.left)??0),y:s-((i==null?void 0:i.top)??0)},r),{x:l,y:u}=n?_i(a,t):a;return{xSnapped:l,ySnapped:u,...a}}const Wu=e=>({width:e.offsetWidth,height:e.offsetHeight}),qu=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},h0=["INPUT","SELECT","TEXTAREA"];function Zu(e){var r,i;const t=((i=(r=e.composedPath)==null?void 0:r.call(e))==null?void 0:i[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:h0.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const Gu=e=>"clientX"in e,At=(e,t)=>{var o,s;const n=Gu(e),r=n?e.clientX:(o=e.touches)==null?void 0:o[0].clientX,i=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}},Ba=(e,t,n,r,i)=>{const o=t.querySelectorAll(`.${e}`);return!o||!o.length?null:Array.from(o).map(s=>{const a=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:i,position:s.getAttribute("data-handlepos"),x:(a.left-n.left)/r,y:(a.top-n.top)/r,...Wu(s)}})};function g0({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:o,targetControlX:s,targetControlY:a}){const l=e*.125+i*.375+s*.375+n*.125,u=t*.125+o*.375+a*.375+r*.125,f=Math.abs(l-e),d=Math.abs(u-t);return[l,u,f,d]}function Ti(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Va({pos:e,x1:t,y1:n,x2:r,y2:i,c:o}){switch(e){case he.Left:return[t-Ti(t-r,o),n];case he.Right:return[t+Ti(r-t,o),n];case he.Top:return[t,n-Ti(n-i,o)];case he.Bottom:return[t,n+Ti(i-n,o)]}}function Uu({sourceX:e,sourceY:t,sourcePosition:n=he.Bottom,targetX:r,targetY:i,targetPosition:o=he.Top,curvature:s=.25}){const[a,l]=Va({pos:n,x1:e,y1:t,x2:r,y2:i,c:s}),[u,f]=Va({pos:o,x1:r,y1:i,x2:e,y2:t,c:s}),[d,c,y,v]=g0({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:u,targetControlY:f});return[`M${e},${t} C${a},${l} ${u},${f} ${r},${i}`,d,c,y,v]}function ju({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,o=n<e?n+i:n-i,s=Math.abs(r-t)/2,a=r<t?r+s:r-s;return[o,a,i,s]}function y0({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:i=!1,zIndexMode:o="basic"}){if(o==="manual")return r;const s=i&&n?r+1e3:r,a=Math.max(e.parentId||i&&e.selected?e.internals.z:0,t.parentId||i&&t.selected?t.internals.z:0);return s+a}function v0({sourceNode:e,targetNode:t,width:n,height:r,transform:i}){const o=po(ji(e),ji(t));o.x===o.x2&&(o.x2+=1),o.y===o.y2&&(o.y2+=1);const s={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return jr(s,_o(o))>0}const m0=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,p0=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Qu=(e,t,n={})=>{if(!e.source||!e.target)return t;const r=n.getEdgeId||m0;let i;return Hu(e)?i={...e}:i={...e,id:r(e)},p0(i,t)?t:(i.sourceHandle===null&&delete i.sourceHandle,i.targetHandle===null&&delete i.targetHandle,t.concat(i))};function Ju({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,o,s,a]=ju({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,o,s,a]}const Ha={[he.Left]:{x:-1,y:0},[he.Right]:{x:1,y:0},[he.Top]:{x:0,y:-1},[he.Bottom]:{x:0,y:1}},_0=({source:e,sourcePosition:t=he.Bottom,target:n})=>t===he.Left||t===he.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Ka=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function w0({source:e,sourcePosition:t=he.Bottom,target:n,targetPosition:r=he.Top,center:i,offset:o,stepPosition:s}){const a=Ha[t],l=Ha[r],u={x:e.x+a.x*o,y:e.y+a.y*o},f={x:n.x+l.x*o,y:n.y+l.y*o},d=_0({source:u,sourcePosition:t,target:f}),c=d.x!==0?"x":"y",y=d[c];let v=[],_,p;const b={x:0,y:0},A={x:0,y:0},[,,M,w]=ju({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[c]*l[c]===-1){c==="x"?(_=i.x??u.x+(f.x-u.x)*s,p=i.y??(u.y+f.y)/2):(_=i.x??(u.x+f.x)/2,p=i.y??u.y+(f.y-u.y)*s);const L=[{x:_,y:u.y},{x:_,y:f.y}],W=[{x:u.x,y:p},{x:f.x,y:p}];a[c]===y?v=c==="x"?L:W:v=c==="x"?W:L}else{const L=[{x:u.x,y:f.y}],W=[{x:f.x,y:u.y}];if(c==="x"?v=a.x===y?W:L:v=a.y===y?L:W,t===r){const x=Math.abs(e[c]-n[c]);if(x<=o){const I=Math.min(o-1,o-x);a[c]===y?b[c]=(u[c]>e[c]?-1:1)*I:A[c]=(f[c]>n[c]?-1:1)*I}}if(t!==r){const x=c==="x"?"y":"x",I=a[c]===l[x],m=u[x]>f[x],C=u[x]<f[x];(a[c]===1&&(!I&&m||I&&C)||a[c]!==1&&(!I&&C||I&&m))&&(v=c==="x"?L:W)}const P={x:u.x+b.x,y:u.y+b.y},V={x:f.x+A.x,y:f.y+A.y},J=Math.max(Math.abs(P.x-v[0].x),Math.abs(V.x-v[0].x)),T=Math.max(Math.abs(P.y-v[0].y),Math.abs(V.y-v[0].y));J>=T?(_=(P.x+V.x)/2,p=v[0].y):(_=v[0].x,p=(P.y+V.y)/2)}return[[e,{x:u.x+b.x,y:u.y+b.y},...v,{x:f.x+A.x,y:f.y+A.y},n],_,p,M,w]}function x0(e,t,n,r){const i=Math.min(Ka(e,t)/2,Ka(t,n)/2,r),{x:o,y:s}=t;if(e.x===o&&o===n.x||e.y===s&&s===n.y)return`L${o} ${s}`;if(e.y===s){const u=e.x<n.x?-1:1,f=e.y<n.y?1:-1;return`L ${o+i*u},${s}Q ${o},${s} ${o},${s+i*f}`}const a=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${o},${s+i*l}Q ${o},${s} ${o+i*a},${s}`}function Ws({sourceX:e,sourceY:t,sourcePosition:n=he.Bottom,targetX:r,targetY:i,targetPosition:o=he.Top,borderRadius:s=5,centerX:a,centerY:l,offset:u=20,stepPosition:f=.5}){const[d,c,y,v,_]=w0({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:o,center:{x:a,y:l},offset:u,stepPosition:f});return[d.reduce((b,A,M)=>{let w="";return M>0&&M<d.length-1?w=x0(d[M-1],A,d[M+1],s):w=`${M===0?"M":"L"}${A.x} ${A.y}`,b+=w,b},""),c,y,v,_]}function Ya(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function b0(e){var d;const{sourceNode:t,targetNode:n}=e;if(!Ya(t)||!Ya(n))return null;const r=t.internals.handleBounds||Xa(t.handles),i=n.internals.handleBounds||Xa(n.handles),o=Wa((r==null?void 0:r.source)??[],e.sourceHandle),s=Wa(e.connectionMode===Nr.Strict?(i==null?void 0:i.target)??[]:((i==null?void 0:i.target)??[]).concat((i==null?void 0:i.source)??[]),e.targetHandle);if(!o||!s)return(d=e.onError)==null||d.call(e,"008",Ur.error008(o?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=(o==null?void 0:o.position)||he.Bottom,l=(s==null?void 0:s.position)||he.Top,u=jn(t,o,a),f=jn(n,s,l);return{sourceX:u.x,sourceY:u.y,targetX:f.x,targetY:f.y,sourcePosition:a,targetPosition:l}}function Xa(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function jn(e,t,n=he.Left,r=!1){const i=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,o=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:s,height:a}=t??tr(e);if(r)return{x:i+s/2,y:o+a/2};switch((t==null?void 0:t.position)??n){case he.Top:return{x:i+s/2,y:o};case he.Right:return{x:i+s,y:o+a/2};case he.Bottom:return{x:i+s/2,y:o+a};case he.Left:return{x:i,y:o+a/2}}}function Wa(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function hs(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function E0(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const o=new Set;return e.reduce((s,a)=>([a.markerStart||r,a.markerEnd||i].forEach(l=>{if(l&&typeof l=="object"){const u=hs(l,t);o.has(u)||(s.push({id:u,color:l.color||n,...l}),o.add(u))}}),s),[]).sort((s,a)=>s.id.localeCompare(a.id))}const $u=1e3,N0=10,qs={nodeOrigin:[0,0],nodeExtent:cs,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},S0={...qs,checkEquality:!0};function Zs(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function k0(e,t,n){const r=Zs(qs,n);for(const i of e.values())if(i.parentId)Us(i,e,t,r);else{const o=pi(i,r.nodeOrigin),s=Cr(i.extent)?i.extent:r.nodeExtent,a=Un(o,s,tr(i));i.internals.positionAbsolute=a}}function C0(e,t){if(!e.handles)return e.measured?t==null?void 0:t.internals.handleBounds:void 0;const n=[],r=[];for(const i of e.handles){const o={id:i.id,width:i.width??1,height:i.height??1,nodeId:e.id,x:i.x,y:i.y,position:i.position,type:i.type};i.type==="source"?n.push(o):i.type==="target"&&r.push(o)}return{source:n,target:r}}function Gs(e){return e==="manual"}function I0(e,t,n,r={}){var u,f;const i=Zs(S0,r),o={i:0},s=new Map(t),a=i!=null&&i.elevateNodesOnSelect&&!Gs(i.zIndexMode)?$u:0;let l=e.length>0;t.clear(),n.clear();for(const d of e){let c=s.get(d.id);if(i.checkEquality&&d===(c==null?void 0:c.internals.userNode))t.set(d.id,c);else{const y=pi(d,i.nodeOrigin),v=Cr(d.extent)?d.extent:i.nodeExtent,_=Un(y,v,tr(d));c={...i.defaults,...d,measured:{width:(u=d.measured)==null?void 0:u.width,height:(f=d.measured)==null?void 0:f.height},internals:{positionAbsolute:_,handleBounds:C0(d,c),z:ec(d,a,i.zIndexMode),userNode:d}},t.set(d.id,c)}(c.measured===void 0||c.measured.width===void 0||c.measured.height===void 0)&&!c.hidden&&(l=!1),d.parentId&&Us(c,t,n,r,o)}return l}function A0(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function Us(e,t,n,r,i){const{elevateNodesOnSelect:o,nodeOrigin:s,nodeExtent:a,zIndexMode:l}=Zs(qs,r),u=e.parentId,f=t.get(u);if(!f){console.warn(`Parent node ${u} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}A0(e,n),i&&!f.parentId&&f.internals.rootParentIndex===void 0&&l==="auto"&&(f.internals.rootParentIndex=++i.i,f.internals.z=f.internals.z+i.i*N0),i&&f.internals.rootParentIndex!==void 0&&(i.i=f.internals.rootParentIndex);const d=o&&!Gs(l)?$u:0,{x:c,y,z:v}=T0(e,f,s,a,d,l),{positionAbsolute:_}=e.internals,p=c!==_.x||y!==_.y;(p||v!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:p?{x:c,y}:_,z:v}})}function ec(e,t,n){const r=nn(e.zIndex)?e.zIndex:0;return Gs(n)?r:r+(e.selected?t:0)}function T0(e,t,n,r,i,o){const{x:s,y:a}=t.internals.positionAbsolute,l=tr(e),u=pi(e,n),f=Cr(e.extent)?Un(u,e.extent,l):u;let d=Un({x:s+f.x,y:a+f.y},r,l);e.extent==="parent"&&(d=Yu(d,l,t));const c=ec(e,i,o),y=t.internals.z??0;return{x:d.x,y:d.y,z:y>=c?y+1:c}}function M0(e,t,n,r=[0,0]){var s;const i=[],o=new Map;for(const a of e){const l=t.get(a.parentId);if(!l)continue;const u=((s=o.get(a.parentId))==null?void 0:s.expandedRect)??kr(l),f=s0(u,a.rect);o.set(a.parentId,{expandedRect:f,parent:l})}return o.size>0&&o.forEach(({expandedRect:a,parent:l},u)=>{var M;const f=l.internals.positionAbsolute,d=tr(l),c=l.origin??r,y=a.x<f.x?Math.round(Math.abs(f.x-a.x)):0,v=a.y<f.y?Math.round(Math.abs(f.y-a.y)):0,_=Math.max(d.width,Math.round(a.width)),p=Math.max(d.height,Math.round(a.height)),b=(_-d.width)*c[0],A=(p-d.height)*c[1];(y>0||v>0||b||A)&&(i.push({id:u,type:"position",position:{x:l.position.x-y+b,y:l.position.y-v+A}}),(M=n.get(u))==null||M.forEach(w=>{e.some(O=>O.id===w.id)||i.push({id:w.id,type:"position",position:{x:w.position.x+y,y:w.position.y+v}})})),(d.width<a.width||d.height<a.height||y||v)&&i.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:_+(y?c[0]*y-b:0),height:p+(v?c[1]*v-A:0)}})}),i}function P0(e,t,n,r,i,o,s){const a=r==null?void 0:r.querySelector(".xyflow__viewport");let l=!1;if(!a)return{changes:[],updatedInternals:l};const u=[],f=window.getComputedStyle(a),{m22:d}=new window.DOMMatrixReadOnly(f.transform),c=[];for(const y of e.values()){const v=t.get(y.id);if(!v)continue;if(v.hidden){t.set(v.id,{...v,internals:{...v.internals,handleBounds:void 0}}),l=!0;continue}const _=Wu(y.nodeElement),p=v.measured.width!==_.width||v.measured.height!==_.height;if(!!(_.width&&_.height&&(p||!v.internals.handleBounds||y.force))){const A=y.nodeElement.getBoundingClientRect(),M=Cr(v.extent)?v.extent:o;let{positionAbsolute:w}=v.internals;v.parentId&&v.extent==="parent"?w=Yu(w,_,t.get(v.parentId)):M&&(w=Un(w,M,_));const O={...v,measured:_,internals:{...v.internals,positionAbsolute:w,handleBounds:{source:Ba("source",y.nodeElement,A,d,v.id),target:Ba("target",y.nodeElement,A,d,v.id)}}};t.set(v.id,O),v.parentId&&Us(O,t,n,{nodeOrigin:i,zIndexMode:s}),l=!0,p&&(u.push({id:v.id,type:"dimensions",dimensions:_}),v.expandParent&&v.parentId&&c.push({id:v.id,parentId:v.parentId,rect:kr(O,i)}))}}if(c.length>0){const y=M0(c,t,n,i);u.push(...y)}return{changes:u,updatedInternals:l}}async function O0({delta:e,panZoom:t,transform:n,translateExtent:r,width:i,height:o}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const s=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[i,o]],r),a=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(a)}function qa(e,t,n,r,i,o){let s=i;const a=r.get(s)||new Map;r.set(s,a.set(n,t)),s=`${i}-${e}`;const l=r.get(s)||new Map;if(r.set(s,l.set(n,t)),o){s=`${i}-${e}-${o}`;const u=r.get(s)||new Map;r.set(s,u.set(n,t))}}function D0(e,t,n){e.clear(),t.clear();for(const r of n){const{source:i,target:o,sourceHandle:s=null,targetHandle:a=null}=r,l={edgeId:r.id,source:i,target:o,sourceHandle:s,targetHandle:a},u=`${i}-${s}--${o}-${a}`,f=`${o}-${a}--${i}-${s}`;qa("source",l,f,e,i,s),qa("target",l,u,e,o,a),t.set(r.id,r)}}function tc(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:tc(n,t):!1}function Za(e,t,n){var i;let r=e;do{if((i=r==null?void 0:r.matches)!=null&&i.call(r,t))return!0;if(r===n)return!1;r=r==null?void 0:r.parentElement}while(r);return!1}function z0(e,t,n,r){const i=new Map;for(const[o,s]of e)if((s.selected||s.id===r)&&(!s.parentId||!tc(s,e))&&(s.draggable||t&&typeof s.draggable>"u")){const a=e.get(o);a&&i.set(o,{id:o,position:a.position||{x:0,y:0},distance:{x:n.x-a.internals.positionAbsolute.x,y:n.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return i}function Oo({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var s,a,l;const i=[];for(const[u,f]of t){const d=(s=n.get(u))==null?void 0:s.internals.userNode;d&&i.push({...d,position:f.position,dragging:r})}if(!e)return[i[0],i];const o=(a=n.get(e))==null?void 0:a.internals.userNode;return[o?{...o,position:((l=t.get(e))==null?void 0:l.position)||o.position,dragging:r}:i[0],i]}function R0({dragItems:e,snapGrid:t,x:n,y:r}){const i=e.values().next().value;if(!i)return null;const o={x:n-i.distance.x,y:r-i.distance.y},s=_i(o,t);return{x:s.x-o.x,y:s.y-o.y}}function L0({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:i}){let o={x:null,y:null},s=0,a=new Map,l=!1,u={x:0,y:0},f=null,d=!1,c=null,y=!1,v=!1,_=null;function p({noDragClassName:A,handleSelector:M,domNode:w,isSelectable:O,nodeId:L,nodeClickDistance:W=0}){c=St(w);function P({x,y:I}){const{nodeLookup:m,nodeExtent:C,snapGrid:S,snapToGrid:F,nodeOrigin:H,onNodeDrag:z,onSelectionDrag:Y,onError:U,updateNodePositions:ee}=t();o={x,y:I};let $=!1;const Z=a.size>1,de=Z&&C?ds(mo(a)):null,ne=Z&&F?R0({dragItems:a,snapGrid:S,x,y:I}):null;for(const[re,oe]of a){if(!m.has(re))continue;let N={x:x-oe.distance.x,y:I-oe.distance.y};F&&(N=ne?{x:Math.round(N.x+ne.x),y:Math.round(N.y+ne.y)}:_i(N,S));let D=null;if(Z&&C&&!oe.extent&&de){const{positionAbsolute:G}=oe.internals,j=G.x-de.x+C[0][0],q=G.x+oe.measured.width-de.x2+C[1][0],le=G.y-de.y+C[0][1],ie=G.y+oe.measured.height-de.y2+C[1][1];D=[[j,le],[q,ie]]}const{position:B,positionAbsolute:K}=Ku({nodeId:re,nextPosition:N,nodeLookup:m,nodeExtent:D||C,nodeOrigin:H,onError:U});$=$||oe.position.x!==B.x||oe.position.y!==B.y,oe.position=B,oe.internals.positionAbsolute=K}if(v=v||$,!!$&&(ee(a,!0),_&&(r||z||!L&&Y))){const[re,oe]=Oo({nodeId:L,dragItems:a,nodeLookup:m});r==null||r(_,a,re,oe),z==null||z(_,re,oe),L||Y==null||Y(_,oe)}}async function V(){if(!f)return;const{transform:x,panBy:I,autoPanSpeed:m,autoPanOnNodeDrag:C}=t();if(!C){l=!1,cancelAnimationFrame(s);return}const[S,F]=Xu(u,f,m);(S!==0||F!==0)&&(o.x=(o.x??0)-S/x[2],o.y=(o.y??0)-F/x[2],await I({x:S,y:F})&&P(o)),s=requestAnimationFrame(V)}function J(x){var Z;const{nodeLookup:I,multiSelectionActive:m,nodesDraggable:C,transform:S,snapGrid:F,snapToGrid:H,selectNodesOnDrag:z,onNodeDragStart:Y,onSelectionDragStart:U,unselectNodesAndEdges:ee}=t();d=!0,(!z||!O)&&!m&&L&&((Z=I.get(L))!=null&&Z.selected||ee()),O&&z&&L&&(e==null||e(L));const $=Po(x.sourceEvent,{transform:S,snapGrid:F,snapToGrid:H,containerBounds:f});if(o=$,a=z0(I,C,$,L),a.size>0&&(n||Y||!L&&U)){const[de,ne]=Oo({nodeId:L,dragItems:a,nodeLookup:I});n==null||n(x.sourceEvent,a,de,ne),Y==null||Y(x.sourceEvent,de,ne),L||U==null||U(x.sourceEvent,ne)}}const T=rg().clickDistance(W).on("start",x=>{const{domNode:I,nodeDragThreshold:m,transform:C,snapGrid:S,snapToGrid:F}=t();f=(I==null?void 0:I.getBoundingClientRect())||null,y=!1,v=!1,_=x.sourceEvent,m===0&&J(x),o=Po(x.sourceEvent,{transform:C,snapGrid:S,snapToGrid:F,containerBounds:f}),u=At(x.sourceEvent,f)}).on("drag",x=>{const{autoPanOnNodeDrag:I,transform:m,snapGrid:C,snapToGrid:S,nodeDragThreshold:F,nodeLookup:H}=t(),z=Po(x.sourceEvent,{transform:m,snapGrid:C,snapToGrid:S,containerBounds:f});if(_=x.sourceEvent,(x.sourceEvent.type==="touchmove"&&x.sourceEvent.touches.length>1||L&&!H.has(L))&&(y=!0),!y){if(!l&&I&&d&&(l=!0,V()),!d){const Y=At(x.sourceEvent,f),U=Y.x-u.x,ee=Y.y-u.y;Math.sqrt(U*U+ee*ee)>F&&J(x)}(o.x!==z.xSnapped||o.y!==z.ySnapped)&&a&&d&&(u=At(x.sourceEvent,f),P(z))}}).on("end",x=>{if(!(!d||y)&&(l=!1,d=!1,cancelAnimationFrame(s),a.size>0)){const{nodeLookup:I,updateNodePositions:m,onNodeDragStop:C,onSelectionDragStop:S}=t();if(v&&(m(a,!1),v=!1),i||C||!L&&S){const[F,H]=Oo({nodeId:L,dragItems:a,nodeLookup:I,dragging:!1});i==null||i(x.sourceEvent,a,F,H),C==null||C(x.sourceEvent,F,H),L||S==null||S(x.sourceEvent,H)}}}).filter(x=>{const I=x.target;return!x.button&&(!A||!Za(I,`.${A}`,w))&&(!M||Za(I,M,w))});c.call(T)}function b(){c==null||c.on(".drag",null)}return{update:p,destroy:b}}function F0(e,t,n){const r=[],i={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const o of t.values())jr(i,kr(o))>0&&r.push(o);return r}const B0=250;function V0(e,t,n,r){var a,l;let i=[],o=1/0;const s=F0(e,n,t+B0);for(const u of s){const f=[...((a=u.internals.handleBounds)==null?void 0:a.source)??[],...((l=u.internals.handleBounds)==null?void 0:l.target)??[]];for(const d of f){if(r.nodeId===d.nodeId&&r.type===d.type&&r.id===d.id)continue;const{x:c,y}=jn(u,d,d.position,!0),v=Math.sqrt(Math.pow(c-e.x,2)+Math.pow(y-e.y,2));v>t||(v<o?(i=[{...d,x:c,y}],o=v):v===o&&i.push({...d,x:c,y}))}}if(!i.length)return null;if(i.length>1){const u=r.type==="source"?"target":"source";return i.find(f=>f.type===u)??i[0]}return i[0]}function nc(e,t,n,r,i,o=!1){var u,f,d;const s=r.get(e);if(!s)return null;const a=i==="strict"?(u=s.internals.handleBounds)==null?void 0:u[t]:[...((f=s.internals.handleBounds)==null?void 0:f.source)??[],...((d=s.internals.handleBounds)==null?void 0:d.target)??[]],l=(n?a==null?void 0:a.find(c=>c.id===n):a==null?void 0:a[0])??null;return l&&o?{...l,...jn(s,l,l.position,!0)}:l}function rc(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function H0(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const ic=()=>!0;function K0(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:o,isTarget:s,domNode:a,nodeLookup:l,lib:u,autoPanOnConnect:f,flowId:d,panBy:c,cancelConnection:y,onConnectStart:v,onConnect:_,onConnectEnd:p,isValidConnection:b=ic,onReconnectEnd:A,updateConnection:M,getTransform:w,getFromHandle:O,autoPanSpeed:L,dragThreshold:W=1,handleDomNode:P}){const V=qu(e.target);let J=0,T;const{x,y:I}=At(e),m=rc(o,P),C=a==null?void 0:a.getBoundingClientRect();let S=!1;if(!C||!m)return;const F=nc(i,m,r,l,t);if(!F)return;let H=At(e,C),z=!1,Y=null,U=!1,ee=null;function $(){if(!f||!C)return;const[B,K]=Xu(H,C,L);c({x:B,y:K}),J=requestAnimationFrame($)}const Z={...F,nodeId:i,type:m,position:F.position},de=l.get(i);let re={inProgress:!0,isValid:null,from:jn(de,Z,he.Left,!0),fromHandle:Z,fromPosition:Z.position,fromNode:de,to:H,toHandle:null,toPosition:za[Z.position],toNode:null,pointer:H};function oe(){S=!0,M(re),v==null||v(e,{nodeId:i,handleId:r,handleType:m})}W===0&&oe();function N(B){if(!S){const{x:ie,y:ue}=At(B),ve=ie-x,Ae=ue-I;if(!(ve*ve+Ae*Ae>W*W))return;oe()}if(!O()||!Z){D(B);return}const K=w();H=At(B,C),T=V0(wi(H,K,!1,[1,1]),n,l,Z),z||($(),z=!0);const G=oc(B,{handle:T,connectionMode:t,fromNodeId:i,fromHandleId:r,fromType:s?"target":"source",isValidConnection:b,doc:V,lib:u,flowId:d,nodeLookup:l});ee=G.handleDomNode,Y=G.connection,U=H0(!!T,G.isValid);const j=l.get(i),q=j?jn(j,Z,he.Left,!0):re.from,le={...re,from:q,isValid:U,to:G.toHandle&&U?Qi({x:G.toHandle.x,y:G.toHandle.y},K):H,toHandle:G.toHandle,toPosition:U&&G.toHandle?G.toHandle.position:za[Z.position],toNode:G.toHandle?l.get(G.toHandle.nodeId):null,pointer:H};M(le),re=le}function D(B){if(!("touches"in B&&B.touches.length>0)){if(S){(T||ee)&&Y&&U&&(_==null||_(Y));const{inProgress:K,...G}=re,j={...G,toPosition:re.toHandle?re.toPosition:null};p==null||p(B,j),o&&(A==null||A(B,j))}y(),cancelAnimationFrame(J),z=!1,U=!1,Y=null,ee=null,V.removeEventListener("mousemove",N),V.removeEventListener("mouseup",D),V.removeEventListener("touchmove",N),V.removeEventListener("touchend",D)}}V.addEventListener("mousemove",N),V.addEventListener("mouseup",D),V.addEventListener("touchmove",N),V.addEventListener("touchend",D)}function oc(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:o,doc:s,lib:a,flowId:l,isValidConnection:u=ic,nodeLookup:f}){const d=o==="target",c=t?s.querySelector(`.${a}-flow__handle[data-id="${l}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:y,y:v}=At(e),_=s.elementFromPoint(y,v),p=_!=null&&_.classList.contains(`${a}-flow__handle`)?_:c,b={handleDomNode:p,isValid:!1,connection:null,toHandle:null};if(p){const A=rc(void 0,p),M=p.getAttribute("data-nodeid"),w=p.getAttribute("data-handleid"),O=p.classList.contains("connectable"),L=p.classList.contains("connectableend");if(!M||!A)return b;const W={source:d?M:r,sourceHandle:d?w:i,target:d?r:M,targetHandle:d?i:w};b.connection=W;const V=O&&L&&(n===Nr.Strict?d&&A==="source"||!d&&A==="target":M!==r||w!==i);b.isValid=V&&u(W),b.toHandle=nc(M,A,w,f,n,!0)}return b}const Ga={onPointerDown:K0,isValid:oc},wo=e=>({x:e.x,y:e.y,zoom:e.k}),Do=({x:e,y:t,zoom:n})=>vo.translate(e,t).scale(n),ir=(e,t)=>e.target.closest(`.${t}`),sc=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Y0=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,zo=(e,t=0,n=Y0,r=()=>{})=>{const i=typeof t=="number"&&t>0;return i||r(),i?e.transition().duration(t).ease(n).on("end",r):e},ac=e=>{const t=e.ctrlKey&&Ji()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function X0({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:o,zoomOnPinch:s,onPanZoomStart:a,onPanZoom:l,onPanZoomEnd:u}){return f=>{if(ir(f,t))return f.ctrlKey&&f.preventDefault(),!1;f.preventDefault(),f.stopImmediatePropagation();const d=n.property("__zoom").k||1;if(f.ctrlKey&&s){const p=Dt(f),b=ac(f),A=d*Math.pow(2,b);r.scaleTo(n,A,p,f);return}const c=f.deltaMode===1?20:1;let y=i===ar.Vertical?0:f.deltaX*c,v=i===ar.Horizontal?0:f.deltaY*c;!Ji()&&f.shiftKey&&i!==ar.Vertical&&(y=f.deltaY*c,v=0),r.translateBy(n,-(y/d)*o,-(v/d)*o,{internal:!0});const _=wo(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(l==null||l(f,_),e.panScrollTimeout=setTimeout(()=>{u==null||u(f,_),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,a==null||a(f,_))}}function W0({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,i){const o=r.type==="wheel",s=!t&&o&&!r.ctrlKey,a=ir(r,e);if(r.ctrlKey&&o&&a&&r.preventDefault(),s||a)return null;r.preventDefault(),n.call(this,r,i)}}function q0({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var o,s,a;if((o=r.sourceEvent)!=null&&o.internal)return;const i=wo(r.transform);e.mouseButton=((s=r.sourceEvent)==null?void 0:s.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=i,((a=r.sourceEvent)==null?void 0:a.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,i))}}function Z0({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return o=>{var s,a;e.usedRightMouseButton=!!(n&&sc(t,e.mouseButton??0)),(s=o.sourceEvent)!=null&&s.sync||r([o.transform.x,o.transform.y,o.transform.k]),i&&!((a=o.sourceEvent)!=null&&a.internal)&&(i==null||i(o.sourceEvent,wo(o.transform)))}}function G0({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:o}){return s=>{var a;if(!((a=s.sourceEvent)!=null&&a.internal)&&(e.isZoomingOrPanning=!1,o&&sc(t,e.mouseButton??0)&&!e.usedRightMouseButton&&s.sourceEvent&&o(s.sourceEvent),e.usedRightMouseButton=!1,r(!1),i)){const l=wo(s.transform);e.prevViewport=l,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{i==null||i(s.sourceEvent,l)},n?150:0)}}}function U0({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:o,userSelectionActive:s,noWheelClassName:a,noPanClassName:l,lib:u,connectionInProgress:f}){return d=>{var p;const c=e||t,y=n&&d.ctrlKey,v=d.type==="wheel";if(d.button===1&&d.type==="mousedown"&&(ir(d,`${u}-flow__node`)||ir(d,`${u}-flow__edge`)))return!0;if(!r&&!c&&!i&&!o&&!n||s||f&&!v||ir(d,a)&&v||ir(d,l)&&(!v||i&&v&&!e)||!n&&d.ctrlKey&&v)return!1;if(!n&&d.type==="touchstart"&&((p=d.touches)==null?void 0:p.length)>1)return d.preventDefault(),!1;if(!c&&!i&&!y&&v||!r&&(d.type==="mousedown"||d.type==="touchstart")||Array.isArray(r)&&!r.includes(d.button)&&d.type==="mousedown")return!1;const _=Array.isArray(r)&&r.includes(d.button)||!d.button||d.button<=1;return(!d.ctrlKey||v)&&_}}function j0({domNode:e,minZoom:t,maxZoom:n,translateExtent:r,viewport:i,onPanZoom:o,onPanZoomStart:s,onPanZoomEnd:a,onDraggingChange:l}){const u={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},f=e.getBoundingClientRect(),d=jy().scaleExtent([t,n]).translateExtent(r),c=St(e).call(d);A({x:i.x,y:i.y,zoom:Sr(i.zoom,t,n)},[[0,0],[f.width,f.height]],r);const y=c.on("wheel.zoom"),v=c.on("dblclick.zoom");d.wheelDelta(ac);function _(T,x){return c?new Promise(I=>{d==null||d.interpolate((x==null?void 0:x.interpolate)==="linear"?Kr:Ri).transform(zo(c,x==null?void 0:x.duration,x==null?void 0:x.ease,()=>I(!0)),T)}):Promise.resolve(!1)}function p({noWheelClassName:T,noPanClassName:x,onPaneContextMenu:I,userSelectionActive:m,panOnScroll:C,panOnDrag:S,panOnScrollMode:F,panOnScrollSpeed:H,preventScrolling:z,zoomOnPinch:Y,zoomOnScroll:U,zoomOnDoubleClick:ee,zoomActivationKeyPressed:$,lib:Z,onTransformChange:de,connectionInProgress:ne,paneClickDistance:re,selectionOnDrag:oe}){m&&!u.isZoomingOrPanning&&b();const N=C&&!$&&!m;d.clickDistance(oe?1/0:!nn(re)||re<0?0:re);const D=N?X0({zoomPanValues:u,noWheelClassName:T,d3Selection:c,d3Zoom:d,panOnScrollMode:F,panOnScrollSpeed:H,zoomOnPinch:Y,onPanZoomStart:s,onPanZoom:o,onPanZoomEnd:a}):W0({noWheelClassName:T,preventScrolling:z,d3ZoomHandler:y});if(c.on("wheel.zoom",D,{passive:!1}),!m){const K=q0({zoomPanValues:u,onDraggingChange:l,onPanZoomStart:s});d.on("start",K);const G=Z0({zoomPanValues:u,panOnDrag:S,onPaneContextMenu:!!I,onPanZoom:o,onTransformChange:de});d.on("zoom",G);const j=G0({zoomPanValues:u,panOnDrag:S,panOnScroll:C,onPaneContextMenu:I,onPanZoomEnd:a,onDraggingChange:l});d.on("end",j)}const B=U0({zoomActivationKeyPressed:$,panOnDrag:S,zoomOnScroll:U,panOnScroll:C,zoomOnDoubleClick:ee,zoomOnPinch:Y,userSelectionActive:m,noPanClassName:x,noWheelClassName:T,lib:Z,connectionInProgress:ne});d.filter(B),ee?c.on("dblclick.zoom",v):c.on("dblclick.zoom",null)}function b(){d.on("zoom",null)}async function A(T,x,I){const m=Do(T),C=d==null?void 0:d.constrain()(m,x,I);return C&&await _(C),new Promise(S=>S(C))}async function M(T,x){const I=Do(T);return await _(I,x),new Promise(m=>m(I))}function w(T){if(c){const x=Do(T),I=c.property("__zoom");(I.k!==T.zoom||I.x!==T.x||I.y!==T.y)&&(d==null||d.transform(c,x,null,{sync:!0}))}}function O(){const T=c?Bu(c.node()):{x:0,y:0,k:1};return{x:T.x,y:T.y,zoom:T.k}}function L(T,x){return c?new Promise(I=>{d==null||d.interpolate((x==null?void 0:x.interpolate)==="linear"?Kr:Ri).scaleTo(zo(c,x==null?void 0:x.duration,x==null?void 0:x.ease,()=>I(!0)),T)}):Promise.resolve(!1)}function W(T,x){return c?new Promise(I=>{d==null||d.interpolate((x==null?void 0:x.interpolate)==="linear"?Kr:Ri).scaleBy(zo(c,x==null?void 0:x.duration,x==null?void 0:x.ease,()=>I(!0)),T)}):Promise.resolve(!1)}function P(T){d==null||d.scaleExtent(T)}function V(T){d==null||d.translateExtent(T)}function J(T){const x=!nn(T)||T<0?0:T;d==null||d.clickDistance(x)}return{update:p,destroy:b,setViewport:M,setViewportConstrained:A,getViewport:O,scaleTo:L,scaleBy:W,setScaleExtent:P,setTranslateExtent:V,syncViewport:w,setClickDistance:J}}var Ua;(function(e){e.Line="line",e.Handle="handle"})(Ua||(Ua={}));function js(){const e={};return[t=>{if(t&&!nf(e))throw new Error(t);return ms(e)},t=>ps(e,t)]}const[Q0,J0]=js(),[$0,ev]=js(),[tv,nv]=js();var rv=Oe("<div><!></div>");function $i(e,t){_e(t,!0);let n=Q(t,"id",3,null),r=Q(t,"type",3,"source"),i=Q(t,"position",19,()=>he.Top),o=Q(t,"isConnectableStart",3,!0),s=Q(t,"isConnectableEnd",3,!0),a=yi(t,["$$slots","$$events","$$legacy","id","type","position","style","class","isConnectable","isConnectableStart","isConnectableEnd","isValidConnection","onconnect","ondisconnect","children"]);const l=Q0("Handle must be used within a Custom Node component"),u=$0("Handle must be used within a Custom Node component");let f=E(()=>r()==="target"),d=E(()=>t.isConnectable!==void 0?t.isConnectable:u.value),c=Tr(),y=E(()=>c.ariaLabelConfig),v=null;Kl(()=>{if(t.onconnect||t.ondisconnect){c.edges;let x=c.connectionLookup.get(`${l}-${r()}${n()?`-${n()}`:""}`);if(v&&!Jy(x,v)){const I=x??new Map;Ra(v,I,t.ondisconnect),Ra(I,v,t.onconnect)}v=new Map(x)}});let _=E(()=>{if(!c.connection.inProgress)return[!1,!1,!1,!1,null];const{fromHandle:x,toHandle:I,isValid:m}=c.connection,C=x&&x.nodeId===l&&x.type===r()&&x.id===n(),S=I&&I.nodeId===l&&I.type===r()&&I.id===n(),F=c.connectionMode===Nr.Strict?(x==null?void 0:x.type)!==r():l!==(x==null?void 0:x.nodeId)||n()!==(x==null?void 0:x.id);return[!0,C,S,F,S&&m]}),p=E(()=>oi(h(_),5)),b=E(()=>h(p)[0]),A=E(()=>h(p)[1]),M=E(()=>h(p)[2]),w=E(()=>h(p)[3]),O=E(()=>h(p)[4]);function L(x){var m;const I=c.onbeforeconnect?c.onbeforeconnect(x):x;I&&(c.addEdge(I),(m=c.onconnect)==null||m.call(c,x))}function W(x){const I=Gu(x);x.currentTarget&&(I&&x.button===0||!I)&&Ga.onPointerDown(x,{handleId:n(),nodeId:l,isTarget:h(f),connectionRadius:c.connectionRadius,domNode:c.domNode,nodeLookup:c.nodeLookup,connectionMode:c.connectionMode,lib:"svelte",autoPanOnConnect:c.autoPanOnConnect,autoPanSpeed:c.autoPanSpeed,flowId:c.flowId,isValidConnection:t.isValidConnection??c.isValidConnection,updateConnection:c.updateConnection,cancelConnection:c.cancelConnection,panBy:c.panBy,onConnect:L,onConnectStart:(m,C)=>{var S;(S=c.onconnectstart)==null||S.call(c,m,{nodeId:C.nodeId,handleId:C.handleId,handleType:C.handleType})},onConnectEnd:(m,C)=>{var S;(S=c.onconnectend)==null||S.call(c,m,C)},getTransform:()=>[c.viewport.x,c.viewport.y,c.viewport.zoom],getFromHandle:()=>c.connection.fromHandle,dragThreshold:c.connectionDragThreshold,handleDomNode:x.currentTarget})}function P(x){var ee,$;if(!l||!c.clickConnectStartHandle&&!o())return;if(!c.clickConnectStartHandle){(ee=c.onclickconnectstart)==null||ee.call(c,x,{nodeId:l,handleId:n(),handleType:r()}),c.clickConnectStartHandle={nodeId:l,type:r(),id:n()};return}const I=qu(x.target),m=t.isValidConnection??c.isValidConnection,{connectionMode:C,clickConnectStartHandle:S,flowId:F,nodeLookup:H}=c,{connection:z,isValid:Y}=Ga.isValid(x,{handle:{nodeId:l,id:n(),type:r()},connectionMode:C,fromNodeId:S.nodeId,fromHandleId:S.id??null,fromType:S.type,isValidConnection:m,flowId:F,doc:I,lib:"svelte",nodeLookup:H});Y&&z&&L(z);const U=structuredClone(wl(c.connection));delete U.inProgress,U.toPosition=U.toHandle?U.toHandle.position:null,($=c.onclickconnectend)==null||$.call(c,x,U),c.clickConnectStartHandle=null}var V=rv(),J=()=>{};er(V,()=>({"data-handleid":n(),"data-nodeid":l,"data-handlepos":i(),"data-id":`${c.flowId??""}-${l??""}-${n()??"null"??""}-${r()??""}`,class:["svelte-flow__handle",`svelte-flow__handle-${i()}`,c.noDragClass,c.noPanClass,i(),t.class],onmousedown:W,ontouchstart:W,onclick:c.clickConnect?P:void 0,onkeypress:J,style:t.style,role:"button","aria-label":h(y)["handle.ariaLabel"],tabindex:"-1",...a,[gn]:{valid:h(O),connectingto:h(M),connectingfrom:h(A),source:!h(f),target:h(f),connectablestart:o(),connectableend:s(),connectable:h(d),connectionindicator:h(d)&&(!h(b)||h(w))&&(h(b)||c.clickConnectStartHandle?s():o())}}));var T=Pe(V);un(T,()=>t.children??Qn),ce(e,V),we()}var iv=Oe("<!> <!>",1);function lc(e,t){_e(t,!0);let n=Q(t,"targetPosition",19,()=>he.Top),r=Q(t,"sourcePosition",19,()=>he.Bottom);var i=iv(),o=Ue(i);$i(o,{type:"target",get position(){return n()}});var s=Le(o),a=Le(s);$i(a,{type:"source",get position(){return r()}}),Re(()=>{var l;return Nn(s,` ${((l=t.data)==null?void 0:l.label)??""} `)}),ce(e,i),we()}var ov=Oe(" <!>",1);function sv(e,t){_e(t,!0);let n=Q(t,"data",19,()=>({label:"Node"})),r=Q(t,"sourcePosition",19,()=>he.Bottom);var i=ov(),o=Ue(i),s=Le(o);$i(s,{type:"source",get position(){return r()}}),Re(()=>{var a;return Nn(o,`${((a=n())==null?void 0:a.label)??""} `)}),ce(e,i),we()}var av=Oe(" <!>",1);function lv(e,t){_e(t,!0);let n=Q(t,"data",19,()=>({label:"Node"})),r=Q(t,"targetPosition",19,()=>he.Top);var i=av(),o=Ue(i),s=Le(o);$i(s,{type:"target",get position(){return r()}}),Re(()=>{var a;return Nn(o,`${((a=n())==null?void 0:a.label)??""} `)}),ce(e,i),we()}function uv(e,t){}function Ro(e,t,n){if(!n||!t)return;const r=n==="root"?t:t.querySelector(`.svelte-flow__${n}`);r&&r.appendChild(e)}function Lo(e,t){const n=E(Tr),r=E(()=>h(n).domNode);let i;return h(r)?Ro(e,h(r),t):i=Yl(()=>{Yt(()=>{Ro(e,h(r),t),i==null||i()})}),{async update(o){Ro(e,h(r),o)},destroy(){e.parentNode&&e.parentNode.removeChild(e),i==null||i()}}}function cv(){let e=Se(typeof window>"u");if(h(e)){const t=Yl(()=>{Yt(()=>{X(e,!1),t==null||t()})})}return{get value(){return h(e)}}}const ja=e=>e0(e),fv=e=>Hu(e);function Wt(e){return e===void 0?void 0:`${e}px`}const eo={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var dv=Oe("<div><!></div>");function hv(e,t){_e(t,!0);let n=Q(t,"x",3,0),r=Q(t,"y",3,0),i=Q(t,"selectEdgeOnClick",3,!1),o=Q(t,"transparent",3,!1),s=yi(t,["$$slots","$$events","$$legacy","x","y","width","height","selectEdgeOnClick","transparent","class","children"]);const a=Tr(),l=tv("EdgeLabel must be used within a Custom Edge component");let u=E(()=>{var y;return(y=a.visible.edges.get(l))==null?void 0:y.zIndex});var f=dv(),d=()=>{i()&&l&&a.handleEdgeSelection(l)};er(f,y=>({class:["svelte-flow__edge-label",{transparent:o()},t.class],tabindex:"-1",onclick:d,...s,[yn]:y}),[()=>({display:cv().value?"none":void 0,cursor:i()?"pointer":void 0,transform:`translate(-50%, -50%) translate(${n()??""}px,${r()??""}px)`,"pointer-events":"all",width:Wt(t.width),height:Wt(t.height),"z-index":h(u)})],void 0,void 0,"svelte-1g6l770");var c=Pe(f);un(c,()=>t.children??Qn),$e(f,(y,v)=>Lo==null?void 0:Lo(y,v),()=>"edge-labels"),ce(e,f),we()}var gv=bt("<path></path>"),yv=bt('<path fill="none"></path><!><!>',1);function xo(e,t){let n=Q(t,"interactionWidth",3,20),r=yi(t,["$$slots","$$events","$$legacy","id","path","label","labelX","labelY","labelStyle","markerStart","markerEnd","style","interactionWidth","class"]);var i=yv(),o=Ue(i),s=Le(o);{var a=f=>{var d=gv();er(d,()=>({d:t.path,"stroke-opacity":0,"stroke-width":n(),fill:"none",class:"svelte-flow__edge-interaction",...r})),ce(f,d)};ct(s,f=>{n()>0&&f(a)})}var l=Le(s);{var u=f=>{hv(f,{get x(){return t.labelX},get y(){return t.labelY},get style(){return t.labelStyle},selectEdgeOnClick:!0,children:(d,c)=>{var y=Wf();Re(()=>Nn(y,t.label)),ce(d,y)},$$slots:{default:!0}})};ct(l,f=>{t.label&&f(u)})}Re(()=>{pe(o,"id",t.id),pe(o,"d",t.path),Tn(o,0,$n(["svelte-flow__edge-path",t.class])),pe(o,"marker-start",t.markerStart),pe(o,"marker-end",t.markerEnd),Tt(o,t.style)}),ce(e,i)}function uc(e,t){_e(t,!0);let n=E(()=>{var a;return Uu({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition,curvature:(a=t.pathOptions)==null?void 0:a.curvature})}),r=E(()=>oi(h(n),3)),i=E(()=>h(r)[0]),o=E(()=>h(r)[1]),s=E(()=>h(r)[2]);xo(e,{get id(){return t.id},get path(){return h(i)},get labelX(){return h(o)},get labelY(){return h(s)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),we()}function vv(e,t){_e(t,!0);let n=E(()=>Ws({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition})),r=E(()=>oi(h(n),3)),i=E(()=>h(r)[0]),o=E(()=>h(r)[1]),s=E(()=>h(r)[2]);xo(e,{get path(){return h(i)},get labelX(){return h(o)},get labelY(){return h(s)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),we()}function mv(e,t){_e(t,!0);let n=E(()=>Ju({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY})),r=E(()=>oi(h(n),3)),i=E(()=>h(r)[0]),o=E(()=>h(r)[1]),s=E(()=>h(r)[2]);xo(e,{get path(){return h(i)},get labelX(){return h(o)},get labelY(){return h(s)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),we()}function pv(e,t){_e(t,!0);let n=E(()=>Ws({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition,borderRadius:0})),r=E(()=>oi(h(n),3)),i=E(()=>h(r)[0]),o=E(()=>h(r)[1]),s=E(()=>h(r)[2]);xo(e,{get path(){return h(i)},get labelX(){return h(o)},get labelY(){return h(s)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),we()}var ni,ri;class _v{constructor(t,n){R(this,ni);R(this,ri);fe(this,ni,t),fe(this,ri,Tl(n))}get current(){return g(this,ri).call(this),g(this,ni).call(this)}}ni=new WeakMap,ri=new WeakMap;const wv=/\(.+\)/,xv=new Set(["all","print","screen","and","or","not","only"]);class bv extends _v{constructor(t,n){let r=wv.test(t)||t.split(/[\s,]+/).some(o=>xv.has(o.trim()))?t:`(${t})`;const i=window.matchMedia(r);super(()=>i.matches,o=>Qo(i,"change",o))}}function Ev(e,t,n,r){const i=new Map;return Ys(e,{x:0,y:0,width:n,height:r},t,!0).forEach(o=>{i.set(o.id,o)}),i}function Qa(e){const{edges:t,defaultEdgeOptions:n,nodeLookup:r,previousEdges:i,connectionMode:o,onerror:s,onlyRenderVisible:a,elevateEdgesOnSelect:l,zIndexMode:u}=e,f=new Map;for(const d of t){const c=r.get(d.source),y=r.get(d.target);if(!c||!y)continue;if(a){const{visibleNodes:p,transform:b,width:A,height:M}=e;if(v0({sourceNode:c,targetNode:y,width:A,height:M,transform:b}))p.set(c.id,c),p.set(y.id,y);else continue}const v=i.get(d.id);if(v&&d===v.edge&&c==v.sourceNode&&y==v.targetNode){f.set(d.id,v);continue}const _=b0({id:d.id,sourceNode:c,targetNode:y,sourceHandle:d.sourceHandle||null,targetHandle:d.targetHandle||null,connectionMode:o,onError:s});_&&f.set(d.id,{...n,...d,..._,zIndex:y0({selected:d.selected,zIndex:d.zIndex??n.zIndex,sourceNode:c,targetNode:y,elevateOnSelect:l,zIndexMode:u}),sourceNode:c,targetNode:y,edge:d})}return f}const cc={input:sv,output:lv,default:lc,group:uv},fc={straight:mv,smoothstep:vv,default:uc,step:pv};function Nv(e,t,n,r,i,o){if(t&&!n&&r&&i){const s=mo(o,{filter:a=>!!((a.width||a.initialWidth)&&(a.height||a.initialHeight))});return Xs(s,r,i,.5,2,.1)}else return n??{x:0,y:0,zoom:1}}function Sv(e){var n,r,i,o,s,a,l,u,f,d,c,y,v,_,p,b,A,M,w,O,L,W,P,V,J,T,x,I,m,C,S,F,H,z,Y,U,ee,$,Z,de,ne,re,oe,N,D,B,K,G,j,q,le,ie,ue,ve,Ae,ae,te,ge,ke,Ce,Ge,Me,Ve,ot,cn,fn,dn,ye,se,Ie,Fe,De,st,Gt,Ot,Mr;class t{constructor(){R(this,n,E(()=>e.props.id??"1"));R(this,r,Se(null));R(this,i,Se(null));R(this,o,Se(e.width??0));R(this,s,Se(e.height??0));R(this,a,Se(e.props.zIndexMode??"basic"));R(this,l,E(()=>{var dt;const k=I0(e.nodes,this.nodeLookup,this.parentLookup,{nodeExtent:this.nodeExtent,nodeOrigin:this.nodeOrigin,elevateNodesOnSelect:e.props.elevateNodesOnSelect??!0,checkEquality:!0,zIndexMode:this.zIndexMode});return this.fitViewQueued&&k&&((dt=this.fitViewOptions)!=null&&dt.duration?this.resolveFitView():queueMicrotask(()=>{this.resolveFitView()})),k}));R(this,u,E(()=>this.panZoom!==null));R(this,f,E(()=>(D0(this.connectionLookup,this.edgeLookup,e.edges),e.edges)));Te(this,"_prevSelectedNodes",[]);Te(this,"_prevSelectedNodeIds",new Set);R(this,d,E(()=>{const k=this._prevSelectedNodeIds.size,dt=new Set,Pr=this.nodes.filter(ht=>(ht.selected&&(dt.add(ht.id),this._prevSelectedNodeIds.delete(ht.id)),ht.selected));return(k!==dt.size||this._prevSelectedNodeIds.size>0)&&(this._prevSelectedNodes=Pr),this._prevSelectedNodeIds=dt,this._prevSelectedNodes}));Te(this,"_prevSelectedEdges",[]);Te(this,"_prevSelectedEdgeIds",new Set);R(this,c,E(()=>{const k=this._prevSelectedEdgeIds.size,dt=new Set,Pr=this.edges.filter(ht=>(ht.selected&&(dt.add(ht.id),this._prevSelectedEdgeIds.delete(ht.id)),ht.selected));return(k!==dt.size||this._prevSelectedEdgeIds.size>0)&&(this._prevSelectedEdges=Pr),this._prevSelectedEdgeIds=dt,this._prevSelectedEdges}));Te(this,"selectionChangeHandlers",new Map);Te(this,"nodeLookup",new Map);Te(this,"parentLookup",new Map);Te(this,"connectionLookup",new Map);Te(this,"edgeLookup",new Map);Te(this,"_prevVisibleEdges",new Map);R(this,y,E(()=>{const{nodes:k,_edges:dt,_prevVisibleEdges:Pr,nodeLookup:ht,connectionMode:mc,onerror:pc,onlyRenderVisibleElements:_c,defaultEdgeOptions:wc,zIndexMode:xc}=this;let xi,bo;const Js={edges:dt,defaultEdgeOptions:wc,previousEdges:Pr,nodeLookup:ht,connectionMode:mc,elevateEdgesOnSelect:e.props.elevateEdgesOnSelect??!0,zIndexMode:xc,onerror:pc};if(_c){const{viewport:Eo,width:$s,height:ea}=this,ta=[Eo.x,Eo.y,Eo.zoom];xi=Ev(ht,ta,$s,ea),bo=Qa({...Js,onlyRenderVisible:!0,visibleNodes:xi,transform:ta,width:$s,height:ea})}else xi=this.nodeLookup,bo=Qa(Js);return{nodes:xi,edges:bo}}));R(this,v,E(()=>e.props.nodesDraggable??!0));R(this,_,E(()=>e.props.nodesConnectable??!0));R(this,p,E(()=>e.props.elementsSelectable??!0));R(this,b,E(()=>e.props.nodesFocusable??!0));R(this,A,E(()=>e.props.edgesFocusable??!0));R(this,M,E(()=>e.props.disableKeyboardA11y??!1));R(this,w,E(()=>e.props.minZoom??.5));R(this,O,E(()=>e.props.maxZoom??2));R(this,L,E(()=>e.props.nodeOrigin??[0,0]));R(this,W,E(()=>e.props.nodeExtent??cs));R(this,P,E(()=>e.props.translateExtent??cs));R(this,V,E(()=>e.props.defaultEdgeOptions??{}));R(this,J,E(()=>e.props.nodeDragThreshold??1));R(this,T,E(()=>e.props.autoPanOnNodeDrag??!0));R(this,x,E(()=>e.props.autoPanOnConnect??!0));R(this,I,E(()=>e.props.autoPanOnNodeFocus??!0));R(this,m,E(()=>e.props.autoPanSpeed??15));R(this,C,E(()=>e.props.connectionDragThreshold??1));Te(this,"fitViewQueued",e.props.fitView??!1);Te(this,"fitViewOptions",e.props.fitViewOptions);Te(this,"fitViewResolver",null);R(this,S,E(()=>e.props.snapGrid??null));R(this,F,Se(!1));R(this,H,Se(null));R(this,z,Se(!1));R(this,Y,Se(!1));R(this,U,Se(!1));R(this,ee,Se(!1));R(this,$,Se(!1));R(this,Z,Se(null));R(this,de,Se(""));R(this,ne,E(()=>e.props.selectionMode??Gi.Partial));R(this,re,E(()=>({...cc,...e.props.nodeTypes})));R(this,oe,E(()=>({...fc,...e.props.edgeTypes})));R(this,N,E(()=>e.props.noPanClass??"nopan"));R(this,D,E(()=>e.props.noDragClass??"nodrag"));R(this,B,E(()=>e.props.noWheelClass??"nowheel"));R(this,K,E(()=>d0(e.props.ariaLabelConfig)));R(this,G,Se(Nv(this.nodesInitialized,e.props.fitView,e.props.initialViewport,this.width,this.height,this.nodeLookup)));R(this,j,Se(fs));R(this,q,E(()=>this._connection.inProgress?{...this._connection,to:wi(this._connection.to,[this.viewport.x,this.viewport.y,this.viewport.zoom])}:this._connection));R(this,le,E(()=>e.props.connectionMode??Nr.Strict));R(this,ie,E(()=>e.props.connectionRadius??20));R(this,ue,E(()=>e.props.isValidConnection??(()=>!0)));R(this,ve,E(()=>e.props.selectNodesOnDrag??!0));R(this,Ae,E(()=>e.props.defaultMarkerColor===void 0?"#b1b1b7":e.props.defaultMarkerColor));R(this,ae,E(()=>E0(e.edges,{defaultColor:this.defaultMarkerColor,id:this.flowId,defaultMarkerStart:this.defaultEdgeOptions.markerStart,defaultMarkerEnd:this.defaultEdgeOptions.markerEnd})));R(this,te,E(()=>e.props.onlyRenderVisibleElements??!1));R(this,ge,E(()=>e.props.onflowerror??a0));R(this,ke,E(()=>e.props.ondelete));R(this,Ce,E(()=>e.props.onbeforedelete));R(this,Ge,E(()=>e.props.onbeforeconnect));R(this,Me,E(()=>e.props.onconnect));R(this,Ve,E(()=>e.props.onconnectstart));R(this,ot,E(()=>e.props.onconnectend));R(this,cn,E(()=>e.props.onbeforereconnect));R(this,fn,E(()=>e.props.onreconnect));R(this,dn,E(()=>e.props.onreconnectstart));R(this,ye,E(()=>e.props.onreconnectend));R(this,se,E(()=>e.props.clickConnect??!0));R(this,Ie,E(()=>e.props.onclickconnectstart));R(this,Fe,E(()=>e.props.onclickconnectend));R(this,De,Se(null));R(this,st,E(()=>e.props.onselectiondrag));R(this,Gt,E(()=>e.props.onselectiondragstart));R(this,Ot,E(()=>e.props.onselectiondragstop));Te(this,"resolveFitView",async()=>{var k;this.panZoom&&(await i0({nodes:this.nodeLookup,width:this.width,height:this.height,panZoom:this.panZoom,minZoom:this.minZoom,maxZoom:this.maxZoom},this.fitViewOptions),(k=this.fitViewResolver)==null||k.resolve(!0),this.fitViewQueued=!1,this.fitViewOptions=void 0,this.fitViewResolver=null)});Te(this,"_prefersDark",new bv("(prefers-color-scheme: dark)",e.props.colorModeSSR==="dark"));R(this,Mr,E(()=>e.props.colorMode==="system"?this._prefersDark.current?"dark":"light":e.props.colorMode??"light"))}get flowId(){return h(g(this,n))}set flowId(k){X(g(this,n),k)}get domNode(){return h(g(this,r))}set domNode(k){X(g(this,r),k)}get panZoom(){return h(g(this,i))}set panZoom(k){X(g(this,i),k)}get width(){return h(g(this,o))}set width(k){X(g(this,o),k)}get height(){return h(g(this,s))}set height(k){X(g(this,s),k)}get zIndexMode(){return h(g(this,a))}set zIndexMode(k){X(g(this,a),k)}get nodesInitialized(){return h(g(this,l))}set nodesInitialized(k){X(g(this,l),k)}get viewportInitialized(){return h(g(this,u))}set viewportInitialized(k){X(g(this,u),k)}get _edges(){return h(g(this,f))}set _edges(k){X(g(this,f),k)}get nodes(){return this.nodesInitialized,e.nodes}set nodes(k){e.nodes=k}get edges(){return this._edges}set edges(k){e.edges=k}get selectedNodes(){return h(g(this,d))}set selectedNodes(k){X(g(this,d),k)}get selectedEdges(){return h(g(this,c))}set selectedEdges(k){X(g(this,c),k)}get visible(){return h(g(this,y))}set visible(k){X(g(this,y),k)}get nodesDraggable(){return h(g(this,v))}set nodesDraggable(k){X(g(this,v),k)}get nodesConnectable(){return h(g(this,_))}set nodesConnectable(k){X(g(this,_),k)}get elementsSelectable(){return h(g(this,p))}set elementsSelectable(k){X(g(this,p),k)}get nodesFocusable(){return h(g(this,b))}set nodesFocusable(k){X(g(this,b),k)}get edgesFocusable(){return h(g(this,A))}set edgesFocusable(k){X(g(this,A),k)}get disableKeyboardA11y(){return h(g(this,M))}set disableKeyboardA11y(k){X(g(this,M),k)}get minZoom(){return h(g(this,w))}set minZoom(k){X(g(this,w),k)}get maxZoom(){return h(g(this,O))}set maxZoom(k){X(g(this,O),k)}get nodeOrigin(){return h(g(this,L))}set nodeOrigin(k){X(g(this,L),k)}get nodeExtent(){return h(g(this,W))}set nodeExtent(k){X(g(this,W),k)}get translateExtent(){return h(g(this,P))}set translateExtent(k){X(g(this,P),k)}get defaultEdgeOptions(){return h(g(this,V))}set defaultEdgeOptions(k){X(g(this,V),k)}get nodeDragThreshold(){return h(g(this,J))}set nodeDragThreshold(k){X(g(this,J),k)}get autoPanOnNodeDrag(){return h(g(this,T))}set autoPanOnNodeDrag(k){X(g(this,T),k)}get autoPanOnConnect(){return h(g(this,x))}set autoPanOnConnect(k){X(g(this,x),k)}get autoPanOnNodeFocus(){return h(g(this,I))}set autoPanOnNodeFocus(k){X(g(this,I),k)}get autoPanSpeed(){return h(g(this,m))}set autoPanSpeed(k){X(g(this,m),k)}get connectionDragThreshold(){return h(g(this,C))}set connectionDragThreshold(k){X(g(this,C),k)}get snapGrid(){return h(g(this,S))}set snapGrid(k){X(g(this,S),k)}get dragging(){return h(g(this,F))}set dragging(k){X(g(this,F),k)}get selectionRect(){return h(g(this,H))}set selectionRect(k){X(g(this,H),k)}get selectionKeyPressed(){return h(g(this,z))}set selectionKeyPressed(k){X(g(this,z),k)}get multiselectionKeyPressed(){return h(g(this,Y))}set multiselectionKeyPressed(k){X(g(this,Y),k)}get deleteKeyPressed(){return h(g(this,U))}set deleteKeyPressed(k){X(g(this,U),k)}get panActivationKeyPressed(){return h(g(this,ee))}set panActivationKeyPressed(k){X(g(this,ee),k)}get zoomActivationKeyPressed(){return h(g(this,$))}set zoomActivationKeyPressed(k){X(g(this,$),k)}get selectionRectMode(){return h(g(this,Z))}set selectionRectMode(k){X(g(this,Z),k)}get ariaLiveMessage(){return h(g(this,de))}set ariaLiveMessage(k){X(g(this,de),k)}get selectionMode(){return h(g(this,ne))}set selectionMode(k){X(g(this,ne),k)}get nodeTypes(){return h(g(this,re))}set nodeTypes(k){X(g(this,re),k)}get edgeTypes(){return h(g(this,oe))}set edgeTypes(k){X(g(this,oe),k)}get noPanClass(){return h(g(this,N))}set noPanClass(k){X(g(this,N),k)}get noDragClass(){return h(g(this,D))}set noDragClass(k){X(g(this,D),k)}get noWheelClass(){return h(g(this,B))}set noWheelClass(k){X(g(this,B),k)}get ariaLabelConfig(){return h(g(this,K))}set ariaLabelConfig(k){X(g(this,K),k)}get _viewport(){return h(g(this,G))}set _viewport(k){X(g(this,G),k)}get viewport(){return e.viewport??this._viewport}set viewport(k){e.viewport&&(e.viewport=k),this._viewport=k}get _connection(){return h(g(this,j))}set _connection(k){X(g(this,j),k)}get connection(){return h(g(this,q))}set connection(k){X(g(this,q),k)}get connectionMode(){return h(g(this,le))}set connectionMode(k){X(g(this,le),k)}get connectionRadius(){return h(g(this,ie))}set connectionRadius(k){X(g(this,ie),k)}get isValidConnection(){return h(g(this,ue))}set isValidConnection(k){X(g(this,ue),k)}get selectNodesOnDrag(){return h(g(this,ve))}set selectNodesOnDrag(k){X(g(this,ve),k)}get defaultMarkerColor(){return h(g(this,Ae))}set defaultMarkerColor(k){X(g(this,Ae),k)}get markers(){return h(g(this,ae))}set markers(k){X(g(this,ae),k)}get onlyRenderVisibleElements(){return h(g(this,te))}set onlyRenderVisibleElements(k){X(g(this,te),k)}get onerror(){return h(g(this,ge))}set onerror(k){X(g(this,ge),k)}get ondelete(){return h(g(this,ke))}set ondelete(k){X(g(this,ke),k)}get onbeforedelete(){return h(g(this,Ce))}set onbeforedelete(k){X(g(this,Ce),k)}get onbeforeconnect(){return h(g(this,Ge))}set onbeforeconnect(k){X(g(this,Ge),k)}get onconnect(){return h(g(this,Me))}set onconnect(k){X(g(this,Me),k)}get onconnectstart(){return h(g(this,Ve))}set onconnectstart(k){X(g(this,Ve),k)}get onconnectend(){return h(g(this,ot))}set onconnectend(k){X(g(this,ot),k)}get onbeforereconnect(){return h(g(this,cn))}set onbeforereconnect(k){X(g(this,cn),k)}get onreconnect(){return h(g(this,fn))}set onreconnect(k){X(g(this,fn),k)}get onreconnectstart(){return h(g(this,dn))}set onreconnectstart(k){X(g(this,dn),k)}get onreconnectend(){return h(g(this,ye))}set onreconnectend(k){X(g(this,ye),k)}get clickConnect(){return h(g(this,se))}set clickConnect(k){X(g(this,se),k)}get onclickconnectstart(){return h(g(this,Ie))}set onclickconnectstart(k){X(g(this,Ie),k)}get onclickconnectend(){return h(g(this,Fe))}set onclickconnectend(k){X(g(this,Fe),k)}get clickConnectStartHandle(){return h(g(this,De))}set clickConnectStartHandle(k){X(g(this,De),k)}get onselectiondrag(){return h(g(this,st))}set onselectiondrag(k){X(g(this,st),k)}get onselectiondragstart(){return h(g(this,Gt))}set onselectiondragstart(k){X(g(this,Gt),k)}get onselectiondragstop(){return h(g(this,Ot))}set onselectiondragstop(k){X(g(this,Ot),k)}get colorMode(){return h(g(this,Mr))}set colorMode(k){X(g(this,Mr),k)}resetStoreValues(){this.dragging=!1,this.selectionRect=null,this.selectionRectMode=null,this.selectionKeyPressed=!1,this.multiselectionKeyPressed=!1,this.deleteKeyPressed=!1,this.panActivationKeyPressed=!1,this.zoomActivationKeyPressed=!1,this._connection=fs,this.clickConnectStartHandle=null,this.viewport=e.props.initialViewport??{x:0,y:0,zoom:1},this.ariaLiveMessage=""}}return n=new WeakMap,r=new WeakMap,i=new WeakMap,o=new WeakMap,s=new WeakMap,a=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,d=new WeakMap,c=new WeakMap,y=new WeakMap,v=new WeakMap,_=new WeakMap,p=new WeakMap,b=new WeakMap,A=new WeakMap,M=new WeakMap,w=new WeakMap,O=new WeakMap,L=new WeakMap,W=new WeakMap,P=new WeakMap,V=new WeakMap,J=new WeakMap,T=new WeakMap,x=new WeakMap,I=new WeakMap,m=new WeakMap,C=new WeakMap,S=new WeakMap,F=new WeakMap,H=new WeakMap,z=new WeakMap,Y=new WeakMap,U=new WeakMap,ee=new WeakMap,$=new WeakMap,Z=new WeakMap,de=new WeakMap,ne=new WeakMap,re=new WeakMap,oe=new WeakMap,N=new WeakMap,D=new WeakMap,B=new WeakMap,K=new WeakMap,G=new WeakMap,j=new WeakMap,q=new WeakMap,le=new WeakMap,ie=new WeakMap,ue=new WeakMap,ve=new WeakMap,Ae=new WeakMap,ae=new WeakMap,te=new WeakMap,ge=new WeakMap,ke=new WeakMap,Ce=new WeakMap,Ge=new WeakMap,Me=new WeakMap,Ve=new WeakMap,ot=new WeakMap,cn=new WeakMap,fn=new WeakMap,dn=new WeakMap,ye=new WeakMap,se=new WeakMap,Ie=new WeakMap,Fe=new WeakMap,De=new WeakMap,st=new WeakMap,Gt=new WeakMap,Ot=new WeakMap,Mr=new WeakMap,new t}function Tr(){const e=ms(to);if(!e)throw new Error("To call useStore outside of <SvelteFlow /> you need to wrap your component in a <SvelteFlowProvider />");return e.getStore()}const to=Symbol();function dc(e){const t=Sv(e);function n(T){t.nodeTypes={...cc,...T}}function r(T){t.edgeTypes={...fc,...T}}function i(T){t.edges=Qu(T,t.edges)}const o=(T,x=!1)=>{t.nodes=t.nodes.map(I=>{if(t.connection.inProgress&&t.connection.fromNode.id===I.id){const C=t.nodeLookup.get(I.id);C&&(t.connection={...t.connection,from:jn(C,t.connection.fromHandle,he.Left,!0)})}const m=T.get(I.id);return m?{...I,position:m.position,dragging:x}:I})};function s(T){var C,S,F;const{changes:x,updatedInternals:I}=P0(T,t.nodeLookup,t.parentLookup,t.domNode,t.nodeOrigin,t.nodeExtent,t.zIndexMode);if(!I)return;k0(t.nodeLookup,t.parentLookup,{nodeOrigin:t.nodeOrigin,nodeExtent:t.nodeExtent,zIndexMode:t.zIndexMode}),t.fitViewQueued&&t.resolveFitView();const m=new Map;for(const H of x){const z=(C=t.nodeLookup.get(H.id))==null?void 0:C.internals.userNode;if(!z)continue;const Y={...z};switch(H.type){case"dimensions":{const U={...Y.measured,...H.dimensions};H.setAttributes&&(Y.width=((S=H.dimensions)==null?void 0:S.width)??Y.width,Y.height=((F=H.dimensions)==null?void 0:F.height)??Y.height),Y.measured=U;break}case"position":Y.position=H.position??Y.position;break}m.set(H.id,Y)}t.nodes=t.nodes.map(H=>m.get(H.id)??H)}function a(T){const x=t.fitViewResolver??Promise.withResolvers();return t.fitViewQueued=!0,t.fitViewOptions=T,t.fitViewResolver=x,t.nodes=[...t.nodes],x.promise}async function l(T,x,I){const m=typeof(I==null?void 0:I.zoom)<"u"?I.zoom:t.maxZoom,C=t.panZoom;return C?(await C.setViewport({x:t.width/2-T*m,y:t.height/2-x*m,zoom:m},{duration:I==null?void 0:I.duration,ease:I==null?void 0:I.ease,interpolate:I==null?void 0:I.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)}function u(T,x){const I=t.panZoom;return I?I.scaleBy(T,x):Promise.resolve(!1)}function f(T){return u(1.2,T)}function d(T){return u(1/1.2,T)}function c(T){const x=t.panZoom;x&&(x.setScaleExtent([T,t.maxZoom]),t.minZoom=T)}function y(T){const x=t.panZoom;x&&(x.setScaleExtent([t.minZoom,T]),t.maxZoom=T)}function v(T){const x=t.panZoom;x&&(x.setTranslateExtent(T),t.translateExtent=T)}function _(T,x=null){let I=!1;const m=T.map(C=>(x?x.has(C.id):!0)&&C.selected?(I=!0,{...C,selected:!1}):C);return[I,m]}function p(T){const x=T!=null&&T.nodes?new Set(T.nodes.map(H=>H.id)):null,[I,m]=_(t.nodes,x);I&&(t.nodes=m);const C=T!=null&&T.edges?new Set(T.edges.map(H=>H.id)):null,[S,F]=_(t.edges,C);S&&(t.edges=F)}function b(T){const x=t.multiselectionKeyPressed;t.nodes=t.nodes.map(I=>{const m=T.includes(I.id),C=x&&I.selected||m;return!!I.selected!==C?{...I,selected:C}:I}),x||p({nodes:[]})}function A(T){const x=t.multiselectionKeyPressed;t.edges=t.edges.map(I=>{const m=T.includes(I.id),C=x&&I.selected||m;return!!I.selected!==C?{...I,selected:C}:I}),x||p({edges:[]})}function M(T,x,I){const m=t.nodeLookup.get(T);if(!m){console.warn("012",Ur.error012(T));return}t.selectionRect=null,t.selectionRectMode=null,m.selected?(x||m.selected&&t.multiselectionKeyPressed)&&(p({nodes:[m],edges:[]}),requestAnimationFrame(()=>I==null?void 0:I.blur())):b([T])}function w(T){const x=t.edgeLookup.get(T);if(!x){console.warn("012",Ur.error012(T));return}(x.selectable||t.elementsSelectable&&typeof x.selectable>"u")&&(t.selectionRect=null,t.selectionRectMode=null,x.selected?x.selected&&t.multiselectionKeyPressed&&p({nodes:[],edges:[x]}):A([T]))}function O(T,x){const{nodeExtent:I,snapGrid:m,nodeOrigin:C,nodeLookup:S,nodesDraggable:F,onerror:H}=t,z=new Map,Y=(m==null?void 0:m[0])??5,U=(m==null?void 0:m[1])??5,ee=T.x*Y*x,$=T.y*U*x;for(const Z of S.values()){if(!(Z.selected&&(Z.draggable||F&&typeof Z.draggable>"u")))continue;let ne={x:Z.internals.positionAbsolute.x+ee,y:Z.internals.positionAbsolute.y+$};m&&(ne=_i(ne,m));const{position:re,positionAbsolute:oe}=Ku({nodeId:Z.id,nextPosition:ne,nodeLookup:S,nodeExtent:I,nodeOrigin:C,onError:H});Z.position=re,Z.internals.positionAbsolute=oe,z.set(Z.id,Z)}o(z)}function L(T){return O0({delta:T,panZoom:t.panZoom,transform:[t.viewport.x,t.viewport.y,t.viewport.zoom],translateExtent:t.translateExtent,width:t.width,height:t.height})}const W=T=>{t._connection={...T}};function P(){t._connection=fs}function V(){t.resetStoreValues(),p()}return Object.assign(t,{setNodeTypes:n,setEdgeTypes:r,addEdge:i,updateNodePositions:o,updateNodeInternals:s,zoomIn:f,zoomOut:d,fitView:a,setCenter:l,setMinZoom:c,setMaxZoom:y,setTranslateExtent:v,unselectNodesAndEdges:p,addSelectedNodes:b,addSelectedEdges:A,handleNodeSelection:M,handleEdgeSelection:w,moveSelectedNodes:O,panBy:L,updateConnection:W,cancelConnection:P,reset:V})}function Fo(e,t){const{minZoom:n,maxZoom:r,initialViewport:i,onPanZoomStart:o,onPanZoom:s,onPanZoomEnd:a,translateExtent:l,setPanZoomInstance:u,onDraggingChange:f,onTransformChange:d}=t,c=j0({domNode:e,minZoom:n,maxZoom:r,translateExtent:l,viewport:i,onPanZoom:s,onPanZoomStart:o,onPanZoomEnd:a,onDraggingChange:f}),y=c.getViewport();return(i.x!==y.x||i.y!==y.y||i.zoom!==y.zoom)&&d([y.x,y.y,y.zoom]),u(c),c.update(t),{update(v){c.update(v)}}}var kv=Oe('<div class="svelte-flow__zoom svelte-flow__container"><!></div>');function Cv(e,t){_e(t,!0);let n=Q(t,"store",15),r=E(()=>n().panActivationKeyPressed||t.panOnDrag),i=E(()=>n().panActivationKeyPressed||t.panOnScroll);const{viewport:o}=n();let s=!1;Yt(()=>{var u;!s&&n().viewportInitialized&&((u=t.oninit)==null||u.call(t),s=!0)});var a=kv(),l=Pe(a);un(l,()=>t.children),$e(a,(u,f)=>Fo==null?void 0:Fo(u,f),()=>({viewport:n().viewport,minZoom:n().minZoom,maxZoom:n().maxZoom,initialViewport:o,onDraggingChange:u=>{n(n().dragging=u,!0)},setPanZoomInstance:u=>{n(n().panZoom=u,!0)},onPanZoomStart:t.onmovestart,onPanZoom:t.onmove,onPanZoomEnd:t.onmoveend,zoomOnScroll:t.zoomOnScroll,zoomOnDoubleClick:t.zoomOnDoubleClick,zoomOnPinch:t.zoomOnPinch,panOnScroll:h(i),panOnDrag:h(r),panOnScrollSpeed:t.panOnScrollSpeed,panOnScrollMode:t.panOnScrollMode,zoomActivationKeyPressed:n().zoomActivationKeyPressed,preventScrolling:typeof t.preventScrolling=="boolean"?t.preventScrolling:!0,noPanClassName:n().noPanClass,noWheelClassName:n().noWheelClass,userSelectionActive:!!n().selectionRect,translateExtent:n().translateExtent,lib:"svelte",paneClickDistance:t.paneClickDistance,selectionOnDrag:t.selectionOnDrag,onTransformChange:u=>{n(n().viewport={x:u[0],y:u[1],zoom:u[2]},!0)},connectionInProgress:n().connection.inProgress})),ce(e,a),we()}function Ja(e,t){return n=>{n.target===t&&(e==null||e(n))}}function $a(e){return t=>{const n=e.has(t.id);return!!t.selected!==n?{...t,selected:n}:t}}function el(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}var Iv=Oe("<div><!></div>");function Av(e,t){_e(t,!0);let n=Q(t,"store",15),r=Q(t,"panOnDrag",3,!0),i=Q(t,"paneClickDistance",3,1),o,s=null,a=new Set,l=new Set,u=E(()=>n().panActivationKeyPressed||r()),f=E(()=>n().selectionKeyPressed||!!n().selectionRect||t.selectionOnDrag&&h(u)!==!0),d=E(()=>n().elementsSelectable&&(h(f)||n().selectionRectMode==="user")),c=!1;function y(P){var m,C;if(s=o==null?void 0:o.getBoundingClientRect(),!s)return;const V=P.target===o,J=!V&&!!P.target.closest(".nokey"),T=t.selectionOnDrag&&V||n().selectionKeyPressed;if(J||!h(f)||!T||P.button!==0||!P.isPrimary)return;(C=(m=P.target)==null?void 0:m.setPointerCapture)==null||C.call(m,P.pointerId),c=!1;const{x,y:I}=At(P,s);n(n().selectionRect={width:0,height:0,startX:x,startY:I,x,y:I},!0),V||(P.stopPropagation(),P.preventDefault())}function v(P){var S;if(!h(f)||!s||!n().selectionRect)return;const V=At(P,s),{startX:J=0,startY:T=0}=n().selectionRect;if(!c){const F=n().selectionKeyPressed?0:i();if(Math.hypot(V.x-J,V.y-T)<=F)return;n().unselectNodesAndEdges(),(S=t.onselectionstart)==null||S.call(t,P)}c=!0;const x={...n().selectionRect,x:V.x<J?V.x:J,y:V.y<T?V.y:T,width:Math.abs(V.x-J),height:Math.abs(V.y-T)},I=a,m=l;a=new Set(Ys(n().nodeLookup,x,[n().viewport.x,n().viewport.y,n().viewport.zoom],n().selectionMode===Gi.Partial,!0).map(F=>F.id));const C=n().defaultEdgeOptions.selectable??!0;l=new Set;for(const F of a){const H=n().connectionLookup.get(F);if(H)for(const{edgeId:z}of H.values()){const Y=n().edgeLookup.get(z);Y&&(Y.selectable??C)&&l.add(z)}}el(I,a)||n(n().nodes=n().nodes.map($a(a)),!0),el(m,l)||n(n().edges=n().edges.map($a(l)),!0),n(n().selectionRectMode="user",!0),n(n().selectionRect=x,!0)}function _(P){var V,J,T;P.button===0&&((J=(V=P.target)==null?void 0:V.releasePointerCapture)==null||J.call(V,P.pointerId),!c&&P.target===o&&(A==null||A(P)),n(n().selectionRect=null,!0),c&&n(n().selectionRectMode=a.size>0?"nodes":null,!0),c&&((T=t.onselectionend)==null||T.call(t,P)))}const p=P=>{var V;if(Array.isArray(h(u))&&h(u).includes(2)){P.preventDefault();return}(V=t.onpanecontextmenu)==null||V.call(t,{event:P})},b=P=>{c&&(P.stopPropagation(),c=!1)};function A(P){var V;if(c||n().connection.inProgress){c=!1;return}(V=t.onpaneclick)==null||V.call(t,{event:P}),n().unselectNodesAndEdges(),n(n().selectionRectMode=null,!0),n(n().selectionRect=null,!0)}var M=Iv();let w;var O=E(()=>h(d)?void 0:Ja(A,o));M.__click=function(...P){var V;(V=h(O))==null||V.apply(this,P)},M.__pointermove=function(...P){var V;(V=h(d)?v:void 0)==null||V.apply(this,P)},M.__pointerup=function(...P){var V;(V=h(d)?_:void 0)==null||V.apply(this,P)};var L=E(()=>Ja(p,o));M.__contextmenu=function(...P){var V;(V=h(L))==null||V.apply(this,P)};var W=Pe(M);un(W,()=>t.children),gi(M,P=>o=P,()=>o),Re(P=>w=Tn(M,1,"svelte-flow__pane svelte-flow__container",null,w,P),[()=>({draggable:r()===!0||Array.isArray(r())&&r().includes(0),dragging:n().dragging,selection:h(f)})]),Vi("pointerdown",M,function(...P){var V;(V=h(d)?y:void 0)==null||V.apply(this,P)},!0),Vi("click",M,function(...P){var V;(V=h(d)?b:void 0)==null||V.apply(this,P)},!0),ce(e,M),we()}Ts(["click","pointermove","pointerup","contextmenu"]);var Tv=Oe('<div class="svelte-flow__viewport xyflow__viewport svelte-flow__container"><!></div>');function Mv(e,t){_e(t,!0);var n=Tv();let r;var i=Pe(n);un(i,()=>t.children),Re(()=>r=Tt(n,"",r,{transform:`translate(${t.store.viewport.x??""}px, ${t.store.viewport.y??""}px) scale(${t.store.viewport.zoom??""})`})),ce(e,n),we()}function lr(e,t){const{store:n,onDrag:r,onDragStart:i,onDragStop:o,onNodeMouseDown:s}=t,a=L0({onDrag:r,onDragStart:i,onDragStop:o,onNodeMouseDown:s,getStoreItems:()=>{const{snapGrid:u,viewport:f}=n;return{nodes:n.nodes,nodeLookup:n.nodeLookup,edges:n.edges,nodeExtent:n.nodeExtent,snapGrid:u||[0,0],snapToGrid:!!u,nodeOrigin:n.nodeOrigin,multiSelectionActive:n.multiselectionKeyPressed,domNode:n.domNode,transform:[f.x,f.y,f.zoom],autoPanOnNodeDrag:n.autoPanOnNodeDrag,nodesDraggable:n.nodesDraggable,selectNodesOnDrag:n.selectNodesOnDrag,nodeDragThreshold:n.nodeDragThreshold,unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,onSelectionDrag:n.onselectiondrag,onSelectionDragStart:n.onselectiondragstart,onSelectionDragStop:n.onselectiondragstop,panBy:n.panBy}}});function l(u,f){if(f.disabled){a.destroy();return}a.update({domNode:u,noDragClassName:f.noDragClass,handleSelector:f.handleSelector,nodeId:f.nodeId,isSelectable:f.isSelectable,nodeClickDistance:f.nodeClickDistance})}return l(e,t),{update(u){l(e,u)},destroy(){a.destroy()}}}var Pv=Oe('<div aria-live="assertive" aria-atomic="true" class="a11y-live-msg svelte-1l9nrps"> </div>'),Ov=Oe('<div class="a11y-hidden svelte-1l9nrps"> </div> <div class="a11y-hidden svelte-1l9nrps"> </div> <!>',1);function Dv(e,t){_e(t,!0);var n=Ov(),r=Ue(n),i=Pe(r),o=Le(r,2),s=Pe(o),a=Le(o,2);{var l=u=>{var f=Pv(),d=Pe(f);Re(()=>{pe(f,"id",`${zv}-${t.store.flowId}`),Nn(d,t.store.ariaLiveMessage)}),ce(u,f)};ct(a,u=>{t.store.disableKeyboardA11y||u(l)})}Re(()=>{pe(r,"id",`${hc}-${t.store.flowId}`),Nn(i,t.store.disableKeyboardA11y?t.store.ariaLabelConfig["node.a11yDescription.default"]:t.store.ariaLabelConfig["node.a11yDescription.keyboardDisabled"]),pe(o,"id",`${gc}-${t.store.flowId}`),Nn(s,t.store.ariaLabelConfig["edge.a11yDescription.default"])}),ce(e,n),we()}const hc="svelte-flow__node-desc",gc="svelte-flow__edge-desc",zv="svelte-flow__aria-live";var Rv=Oe("<div><!></div>");function Lv(e,t){_e(t,!0);let n=Q(t,"store",15),r=E(()=>je(t.node.data,()=>({}),!0)),i=E(()=>je(t.node.selected,!1)),o=E(()=>t.node.draggable),s=E(()=>t.node.selectable),a=E(()=>je(t.node.deletable,!0)),l=E(()=>t.node.connectable),u=E(()=>t.node.focusable),f=E(()=>je(t.node.hidden,!1)),d=E(()=>je(t.node.dragging,!1)),c=E(()=>je(t.node.style,"")),y=E(()=>t.node.class),v=E(()=>je(t.node.type,"default")),_=E(()=>t.node.parentId),p=E(()=>t.node.sourcePosition),b=E(()=>t.node.targetPosition),A=E(()=>je(t.node.measured,()=>({width:0,height:0}),!0).width),M=E(()=>je(t.node.measured,()=>({width:0,height:0}),!0).height),w=E(()=>t.node.initialWidth),O=E(()=>t.node.initialHeight),L=E(()=>t.node.width),W=E(()=>t.node.height),P=E(()=>t.node.dragHandle),V=E(()=>je(t.node.internals.z,0)),J=E(()=>t.node.internals.positionAbsolute.x),T=E(()=>t.node.internals.positionAbsolute.y),x=E(()=>t.node.internals.userNode),{id:I}=t.node,m=E(()=>h(o)??n().nodesDraggable),C=E(()=>h(s)??n().elementsSelectable),S=E(()=>h(l)??n().nodesConnectable),F=E(()=>c0(t.node)),H=E(()=>!!t.node.internals.handleBounds),z=E(()=>h(F)&&h(H)),Y=E(()=>h(u)??n().nodesFocusable);function U(ue){return n().parentLookup.has(ue)}let ee=E(()=>U(I)),$=Se(null),Z=null,de=h(v),ne=h(p),re=h(b),oe=E(()=>n().nodeTypes[h(v)]??lc),N=E(()=>n().ariaLabelConfig),D={get value(){return h(S)}};J0(I),ev(D);let B=E(()=>{const ue=h(A)===void 0?h(L)??h(w):h(L),ve=h(M)===void 0?h(W)??h(O):h(W);if(!(ue===void 0&&ve===void 0&&h(c)===void 0))return`${h(c)};${ue?`width:${Wt(ue)};`:""}${ve?`height:${Wt(ve)};`:""}`});Yt(()=>{(h(v)!==de||h(p)!==ne||h(b)!==re)&&h($)!==null&&requestAnimationFrame(()=>{h($)!==null&&n().updateNodeInternals(new Map([[I,{id:I,nodeElement:h($),force:!0}]]))}),de=h(v),ne=h(p),re=h(b)}),Yt(()=>{t.resizeObserver&&(!h(z)||h($)!==Z)&&(Z&&t.resizeObserver.unobserve(Z),h($)&&t.resizeObserver.observe(h($)),Z=h($))}),co(()=>{var ue;Z&&((ue=t.resizeObserver)==null||ue.unobserve(Z))});function K(ue){var ve;h(C)&&(!n().selectNodesOnDrag||!h(m)||n().nodeDragThreshold>0)&&n().handleNodeSelection(I),(ve=t.onnodeclick)==null||ve.call(t,{node:h(x),event:ue})}function G(ue){if(!(Zu(ue)||n().disableKeyboardA11y))if(Vu.includes(ue.key)&&h(C)){const ve=ue.key==="Escape";n().handleNodeSelection(I,ve,h($))}else h(m)&&t.node.selected&&Object.prototype.hasOwnProperty.call(eo,ue.key)&&(ue.preventDefault(),n(n().ariaLiveMessage=h(N)["node.a11yDescription.ariaLiveMessage"]({direction:ue.key.replace("Arrow","").toLowerCase(),x:~~t.node.internals.positionAbsolute.x,y:~~t.node.internals.positionAbsolute.y}),!0),n().moveSelectedNodes(eo[ue.key],ue.shiftKey?4:1))}const j=()=>{var te;if(n().disableKeyboardA11y||!n().autoPanOnNodeFocus||!((te=h($))!=null&&te.matches(":focus-visible")))return;const{width:ue,height:ve,viewport:Ae}=n();Ys(new Map([[I,t.node]]),{x:0,y:0,width:ue,height:ve},[Ae.x,Ae.y,Ae.zoom],!0).length>0||n().setCenter(t.node.position.x+(t.node.measured.width??0)/2,t.node.position.y+(t.node.measured.height??0)/2,{zoom:Ae.zoom})};var q=In(),le=Ue(q);{var ie=ue=>{var ve=Rv();er(ve,()=>({"data-id":I,class:["svelte-flow__node",`svelte-flow__node-${h(v)}`,h(y)],style:h(B),onclick:K,onpointerenter:t.onnodepointerenter?ae=>t.onnodepointerenter({node:h(x),event:ae}):void 0,onpointerleave:t.onnodepointerleave?ae=>t.onnodepointerleave({node:h(x),event:ae}):void 0,onpointermove:t.onnodepointermove?ae=>t.onnodepointermove({node:h(x),event:ae}):void 0,oncontextmenu:t.onnodecontextmenu?ae=>t.onnodecontextmenu({node:h(x),event:ae}):void 0,onkeydown:h(Y)?G:void 0,onfocus:h(Y)?j:void 0,tabIndex:h(Y)?0:void 0,role:t.node.ariaRole??(h(Y)?"group":void 0),"aria-roledescription":"node","aria-describedby":n().disableKeyboardA11y?void 0:`${hc}-${n().flowId}`,...t.node.domAttributes,[gn]:{dragging:h(d),selected:h(i),draggable:h(m),connectable:h(S),selectable:h(C),nopan:h(m),parent:h(ee)},[yn]:{"z-index":h(V),transform:`translate(${h(J)??""}px, ${h(T)??""}px)`,visibility:h(F)?"visible":"hidden"}}));var Ae=Pe(ve);Os(Ae,()=>h(oe),(ae,te)=>{te(ae,{get data(){return h(r)},get id(){return I},get selected(){return h(i)},get selectable(){return h(C)},get deletable(){return h(a)},get sourcePosition(){return h(p)},get targetPosition(){return h(b)},get zIndex(){return h(V)},get dragging(){return h(d)},get draggable(){return h(m)},get dragHandle(){return h(P)},get parentId(){return h(_)},get type(){return h(v)},get isConnectable(){return h(S)},get positionAbsoluteX(){return h(J)},get positionAbsoluteY(){return h(T)},get width(){return h(L)},get height(){return h(W)}})}),$e(ve,(ae,te)=>lr==null?void 0:lr(ae,te),()=>({nodeId:I,isSelectable:h(C),disabled:!h(m),handleSelector:h(P),noDragClass:n().noDragClass,nodeClickDistance:t.nodeClickDistance,onNodeMouseDown:n().handleNodeSelection,onDrag:(ae,te,ge,ke)=>{var Ce;(Ce=t.onnodedrag)==null||Ce.call(t,{event:ae,targetNode:ge,nodes:ke})},onDragStart:(ae,te,ge,ke)=>{var Ce;(Ce=t.onnodedragstart)==null||Ce.call(t,{event:ae,targetNode:ge,nodes:ke})},onDragStop:(ae,te,ge,ke)=>{var Ce;(Ce=t.onnodedragstop)==null||Ce.call(t,{event:ae,targetNode:ge,nodes:ke})},store:n()})),gi(ve,ae=>X($,ae),()=>h($)),ce(ue,ve)};ct(le,ue=>{h(f)||ue(ie)})}ce(e,q),we()}var Fv=Oe('<div class="svelte-flow__nodes"></div>');function Bv(e,t){_e(t,!0);let n=Q(t,"store",15);const r=typeof ResizeObserver>"u"?null:new ResizeObserver(o=>{const s=new Map;o.forEach(a=>{const l=a.target.getAttribute("data-id");s.set(l,{id:l,nodeElement:a.target,force:!0})}),n().updateNodeInternals(s)});co(()=>{r==null||r.disconnect()});var i=Fv();Ps(i,21,()=>n().visible.nodes.values(),o=>o.id,(o,s)=>{Lv(o,{get node(){return h(s)},get resizeObserver(){return r},get nodeClickDistance(){return t.nodeClickDistance},get onnodeclick(){return t.onnodeclick},get onnodepointerenter(){return t.onnodepointerenter},get onnodepointermove(){return t.onnodepointermove},get onnodepointerleave(){return t.onnodepointerleave},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get onnodecontextmenu(){return t.onnodecontextmenu},get store(){return n()},set store(a){n(a)}})}),ce(e,i),we()}var Vv=bt('<svg class="svelte-flow__edge-wrapper"><g><!></g></svg>');function Hv(e,t){_e(t,!0);let n=E(()=>t.edge.id),r=E(()=>t.edge.source),i=E(()=>t.edge.target),o=E(()=>t.edge.sourceX),s=E(()=>t.edge.sourceY),a=E(()=>t.edge.targetX),l=E(()=>t.edge.targetY),u=E(()=>t.edge.sourcePosition),f=E(()=>t.edge.targetPosition),d=E(()=>je(t.edge.animated,!1)),c=E(()=>je(t.edge.selected,!1)),y=E(()=>t.edge.label),v=E(()=>t.edge.labelStyle),_=E(()=>je(t.edge.data,()=>({}),!0)),p=E(()=>t.edge.style),b=E(()=>t.edge.interactionWidth),A=E(()=>je(t.edge.type,"default")),M=E(()=>t.edge.sourceHandle),w=E(()=>t.edge.targetHandle),O=E(()=>t.edge.markerStart),L=E(()=>t.edge.markerEnd),W=E(()=>t.edge.selectable),P=E(()=>t.edge.focusable),V=E(()=>je(t.edge.deletable,!0)),J=E(()=>t.edge.hidden),T=E(()=>t.edge.zIndex),x=E(()=>t.edge.class),I=E(()=>t.edge.ariaLabel);nv(h(n));let m=null,C=E(()=>h(W)??t.store.elementsSelectable),S=E(()=>h(P)??t.store.edgesFocusable),F=E(()=>t.store.edgeTypes[h(A)]??uc),H=E(()=>h(O)?`url('#${hs(h(O),t.store.flowId)}')`:void 0),z=E(()=>h(L)?`url('#${hs(h(L),t.store.flowId)}')`:void 0);function Y(ne){var oe;const re=t.store.edgeLookup.get(h(n));re&&(h(C)&&t.store.handleEdgeSelection(h(n)),(oe=t.onedgeclick)==null||oe.call(t,{event:ne,edge:re}))}function U(ne,re){const oe=t.store.edgeLookup.get(h(n));oe&&re({event:ne,edge:oe})}function ee(ne){if(!t.store.disableKeyboardA11y&&Vu.includes(ne.key)&&h(C)){const{unselectNodesAndEdges:re,addSelectedEdges:oe}=t.store;ne.key==="Escape"?(m==null||m.blur(),re({edges:[t.edge]})):oe([h(n)])}}var $=In(),Z=Ue($);{var de=ne=>{var re=Vv();let oe;var N=Pe(re);er(N,()=>({class:["svelte-flow__edge",h(x)],"data-id":h(n),onclick:Y,oncontextmenu:t.onedgecontextmenu?B=>{U(B,t.onedgecontextmenu)}:void 0,onpointerenter:t.onedgepointerenter?B=>{U(B,t.onedgepointerenter)}:void 0,onpointerleave:t.onedgepointerleave?B=>{U(B,t.onedgepointerleave)}:void 0,"aria-label":h(I)===null?void 0:h(I)?h(I):`Edge from ${h(r)} to ${h(i)}`,"aria-describedby":h(S)?`${gc}-${t.store.flowId}`:void 0,role:t.edge.ariaRole??(h(S)?"group":"img"),"aria-roledescription":"edge",onkeydown:h(S)?ee:void 0,tabindex:h(S)?0:void 0,...t.edge.domAttributes,[gn]:{animated:h(d),selected:h(c),selectable:h(C)}}));var D=Pe(N);Os(D,()=>h(F),(B,K)=>{K(B,{get id(){return h(n)},get source(){return h(r)},get target(){return h(i)},get sourceX(){return h(o)},get sourceY(){return h(s)},get targetX(){return h(a)},get targetY(){return h(l)},get sourcePosition(){return h(u)},get targetPosition(){return h(f)},get animated(){return h(d)},get selected(){return h(c)},get label(){return h(y)},get labelStyle(){return h(v)},get data(){return h(_)},get style(){return h(p)},get interactionWidth(){return h(b)},get selectable(){return h(C)},get deletable(){return h(V)},get type(){return h(A)},get sourceHandleId(){return h(M)},get targetHandleId(){return h(w)},get markerStart(){return h(H)},get markerEnd(){return h(z)}})}),gi(N,B=>m=B,()=>m),Re(()=>oe=Tt(re,"",oe,{"z-index":h(T)})),ce(ne,re)};ct(Z,ne=>{h(J)||ne(de)})}ce(e,$),we()}var Kv=bt("<defs></defs>");function Yv(e,t){_e(t,!1);const n=Tr();Ds();var r=Kv();Ps(r,5,()=>n.markers,i=>i.id,(i,o)=>{Zv(i,fd(()=>h(o)))}),ce(e,r),we()}var Xv=bt('<polyline class="arrow" fill="none" stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4"></polyline>'),Wv=bt('<polyline class="arrowclosed" stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4 -5,-4"></polyline>'),qv=bt('<marker class="svelte-flow__arrowhead" viewBox="-10 -10 20 20" refX="0" refY="0"><!></marker>');function Zv(e,t){_e(t,!0);let n=Q(t,"width",3,12.5),r=Q(t,"height",3,12.5),i=Q(t,"markerUnits",3,"strokeWidth"),o=Q(t,"orient",3,"auto-start-reverse"),s=Q(t,"color",3,"none");var a=qv(),l=Pe(a);{var u=d=>{var c=Xv();let y;Re(()=>{pe(c,"stroke-width",t.strokeWidth),y=Tt(c,"",y,{stroke:s()})}),ce(d,c)},f=d=>{var c=Wv();let y;Re(()=>{pe(c,"stroke-width",t.strokeWidth),y=Tt(c,"",y,{stroke:s(),fill:s()})}),ce(d,c)};ct(l,d=>{t.type===Ui.Arrow?d(u):t.type===Ui.ArrowClosed&&d(f,1)})}Re(()=>{pe(a,"id",t.id),pe(a,"markerWidth",`${n()}`),pe(a,"markerHeight",`${r()}`),pe(a,"markerUnits",i()),pe(a,"orient",o())}),ce(e,a),we()}var Gv=Oe('<div class="svelte-flow__edges"><svg class="svelte-flow__marker"><!></svg> <!></div>');function Uv(e,t){_e(t,!0);let n=Q(t,"store",15);var r=Gv(),i=Pe(r),o=Pe(i);Yv(o,{});var s=Le(i,2);Ps(s,17,()=>n().visible.edges.values(),a=>a.id,(a,l)=>{Hv(a,{get edge(){return h(l)},get onedgeclick(){return t.onedgeclick},get onedgecontextmenu(){return t.onedgecontextmenu},get onedgepointerenter(){return t.onedgepointerenter},get onedgepointerleave(){return t.onedgepointerleave},get store(){return n()},set store(u){n(u)}})}),ce(e,r),we()}var jv=Oe('<div class="svelte-flow__selection svelte-1f9lbg4"></div>');function yc(e,t){_e(t,!0);let n=Q(t,"x",3,0),r=Q(t,"y",3,0),i=Q(t,"width",3,0),o=Q(t,"height",3,0),s=Q(t,"isVisible",3,!0);var a=In(),l=Ue(a);{var u=f=>{var d=jv();let c;Re(y=>c=Tt(d,"",c,y),[()=>({width:typeof i()=="string"?i():Wt(i()),height:typeof o()=="string"?o():Wt(o()),transform:`translate(${n()}px, ${r()}px)`})]),ce(f,d)};ct(l,f=>{s()&&f(u)})}ce(e,a),we()}var Qv=Oe("<div><!></div>");function Jv(e,t){_e(t,!0);let n=Se(void 0);Yt(()=>{var d;t.store.disableKeyboardA11y||(d=h(n))==null||d.focus({preventScroll:!0})});let r=E(()=>{if(t.store.selectionRectMode==="nodes"){t.store.nodes;const d=mo(t.store.nodeLookup,{filter:c=>!!c.selected});if(d.width>0&&d.height>0)return d}return null});function i(d){var y;const c=t.store.nodes.filter(v=>v.selected);(y=t.onselectioncontextmenu)==null||y.call(t,{nodes:c,event:d})}function o(d){var y;const c=t.store.nodes.filter(v=>v.selected);(y=t.onselectionclick)==null||y.call(t,{nodes:c,event:d})}function s(d){Object.prototype.hasOwnProperty.call(eo,d.key)&&(d.preventDefault(),t.store.moveSelectedNodes(eo[d.key],d.shiftKey?4:1))}var a=In(),l=Ue(a);{var u=d=>{var c=Qv();c.__contextmenu=i,c.__click=o,c.__keydown=function(..._){var p;(p=t.store.disableKeyboardA11y?void 0:s)==null||p.apply(this,_)};let y;var v=Pe(c);yc(v,{width:"100%",height:"100%",x:0,y:0}),$e(c,(_,p)=>lr==null?void 0:lr(_,p),()=>({disabled:!1,store:t.store,onDrag:(_,p,b,A)=>{var M;(M=t.onnodedrag)==null||M.call(t,{event:_,targetNode:null,nodes:A})},onDragStart:(_,p,b,A)=>{var M;(M=t.onnodedragstart)==null||M.call(t,{event:_,targetNode:null,nodes:A})},onDragStop:(_,p,b,A)=>{var M;(M=t.onnodedragstop)==null||M.call(t,{event:_,targetNode:null,nodes:A})}})),gi(c,_=>X(n,_),()=>h(n)),Re(_=>{Tn(c,1,$n(["svelte-flow__selection-wrapper",t.store.noPanClass]),"svelte-5rnsv4"),pe(c,"role",t.store.disableKeyboardA11y?void 0:"button"),pe(c,"tabindex",t.store.disableKeyboardA11y?void 0:-1),y=Tt(c,"",y,_)},[()=>({width:Wt(h(r).width),height:Wt(h(r).height),transform:`translate(${h(r).x??""}px, ${h(r).y??""}px)`})]),ce(d,c)},f=E(()=>t.store.selectionRectMode==="nodes"&&h(r)&&nn(h(r).x)&&nn(h(r).y));ct(l,d=>{h(f)&&d(u)})}ce(e,a),we()}Ts(["contextmenu","click","keydown"]);function $v(e){switch(e){case"ctrl":return 8;case"shift":return 4;case"alt":return 2;case"meta":return 1}}function be(e,t){let{enabled:n=!0,trigger:r,type:i="keydown"}=t;function o(a){var f;const l=Array.isArray(r)?r:[r],u=[a.metaKey,a.altKey,a.shiftKey,a.ctrlKey].reduce((d,c,y)=>c?d|1<<y:d,0);for(const d of l){const c={preventDefault:!1,enabled:!0,...d},{modifier:y,key:v,callback:_,preventDefault:p,enabled:b}=c;if(b){if(a.key!==v)continue;if(y===null||y===!1){if(u!==0)continue}else if(y!==void 0&&((f=y==null?void 0:y[0])==null?void 0:f.length)>0){const M=Array.isArray(y)?y:[y];let w=!1;for(const O of M)if((Array.isArray(O)?O:[O]).reduce((W,P)=>W|$v(P),0)===u){w=!0;break}if(!w)continue}p&&a.preventDefault();const A={node:e,trigger:c,originalEvent:a};e.dispatchEvent(new CustomEvent("shortcut",{detail:A})),_==null||_(A)}}}let s;return n&&(s=Qo(e,i,o)),{update:a=>{const{enabled:l=!0,type:u="keydown"}=a;n&&(!l||i!==u)?s==null||s():!n&&l&&(s=Qo(e,u,o)),n=l,i=u,r=a.trigger},destroy:()=>{s==null||s()}}}function vc(){const e=E(Tr),t=o=>{var u,f;const s=ja(o)?o:h(e).nodeLookup.get(o.id),a=s.parentId?f0(s.position,s.measured,s.parentId,h(e).nodeLookup,h(e).nodeOrigin):s.position,l={...s,position:a,width:((u=s.measured)==null?void 0:u.width)??s.width,height:((f=s.measured)==null?void 0:f.height)??s.height};return kr(l)};function n(o,s,a={replace:!1}){h(e).nodes=rt(()=>h(e).nodes).map(l=>{if(l.id===o){const u=typeof s=="function"?s(l):s;return a!=null&&a.replace&&ja(u)?u:{...l,...u}}return l})}function r(o,s,a={replace:!1}){h(e).edges=rt(()=>h(e).edges).map(l=>{if(l.id===o){const u=typeof s=="function"?s(l):s;return a.replace&&fv(u)?u:{...l,...u}}return l})}const i=o=>h(e).nodeLookup.get(o);return{zoomIn:h(e).zoomIn,zoomOut:h(e).zoomOut,getInternalNode:i,getNode:o=>{var s;return(s=i(o))==null?void 0:s.internals.userNode},getNodes:o=>o===void 0?h(e).nodes:tl(h(e).nodeLookup,o),getEdge:o=>h(e).edgeLookup.get(o),getEdges:o=>o===void 0?h(e).edges:tl(h(e).edgeLookup,o),setZoom:(o,s)=>{const a=h(e).panZoom;return a?a.scaleTo(o,{duration:s==null?void 0:s.duration}):Promise.resolve(!1)},getZoom:()=>h(e).viewport.zoom,setViewport:async(o,s)=>{const a=h(e).viewport;return h(e).panZoom?(await h(e).panZoom.setViewport({x:o.x??a.x,y:o.y??a.y,zoom:o.zoom??a.zoom},s),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>wl(h(e).viewport),setCenter:async(o,s,a)=>h(e).setCenter(o,s,a),fitView:o=>h(e).fitView(o),fitBounds:async(o,s)=>{if(!h(e).panZoom)return Promise.resolve(!1);const a=Xs(o,h(e).width,h(e).height,h(e).minZoom,h(e).maxZoom,(s==null?void 0:s.padding)??.1);return await h(e).panZoom.setViewport(a,{duration:s==null?void 0:s.duration,ease:s==null?void 0:s.ease,interpolate:s==null?void 0:s.interpolate}),Promise.resolve(!0)},getIntersectingNodes:(o,s=!0,a)=>{const l=Fa(o),u=l?o:t(o);return u?(a||h(e).nodes).filter(f=>{const d=h(e).nodeLookup.get(f.id);if(!d||!l&&f.id===o.id)return!1;const c=kr(d),y=jr(c,u);return s&&y>0||y>=c.width*c.height||y>=u.width*u.height}):[]},isNodeIntersecting:(o,s,a=!0)=>{const u=Fa(o)?o:t(o);if(!u)return!1;const f=jr(u,s);return a&&f>0||f>=s.width*s.height||f>=u.width*u.height},deleteElements:async({nodes:o=[],edges:s=[]})=>{var u,f;const{nodes:a,edges:l}=await o0({nodesToRemove:o,edgesToRemove:s,nodes:h(e).nodes,edges:h(e).edges,onBeforeDelete:h(e).onbeforedelete});return a&&(h(e).nodes=rt(()=>h(e).nodes).filter(d=>!a.some(({id:c})=>c===d.id))),l&&(h(e).edges=rt(()=>h(e).edges).filter(d=>!l.some(({id:c})=>c===d.id))),(a.length>0||l.length>0)&&((f=(u=h(e)).ondelete)==null||f.call(u,{nodes:a,edges:l})),{deletedNodes:a,deletedEdges:l}},screenToFlowPosition:(o,s={snapToGrid:!0})=>{if(!h(e).domNode)return o;const a=s.snapToGrid?h(e).snapGrid:!1,{x:l,y:u,zoom:f}=h(e).viewport,{x:d,y:c}=h(e).domNode.getBoundingClientRect(),y={x:o.x-d,y:o.y-c};return wi(y,[l,u,f],a!==null,a||[1,1])},flowToScreenPosition:o=>{if(!h(e).domNode)return o;const{x:s,y:a,zoom:l}=h(e).viewport,{x:u,y:f}=h(e).domNode.getBoundingClientRect(),d=Qi(o,[s,a,l]);return{x:d.x+u,y:d.y+f}},toObject:()=>structuredClone({nodes:[...h(e).nodes],edges:[...h(e).edges],viewport:{...h(e).viewport}}),updateNode:n,updateNodeData:(o,s,a)=>{var f;const l=(f=h(e).nodeLookup.get(o))==null?void 0:f.internals.userNode;if(!l)return;const u=typeof s=="function"?s(l):s;n(o,d=>({...d,data:a!=null&&a.replace?u:{...d.data,...u}}))},updateEdge:r,getNodesBounds:o=>t0(o,{nodeLookup:h(e).nodeLookup,nodeOrigin:h(e).nodeOrigin}),getHandleConnections:({type:o,id:s,nodeId:a})=>{var l;return Array.from(((l=h(e).connectionLookup.get(`${a}-${o}-${s??null}`))==null?void 0:l.values())??[])}}}function tl(e,t){var r;const n=[];for(const i of t){const o=e.get(i);if(o){const s="internals"in o?(r=o.internals)==null?void 0:r.userNode:o;n.push(s)}}return n}function em(e,t){_e(t,!0);let n=Q(t,"store",15),r=Q(t,"selectionKey",3,"Shift"),i=Q(t,"multiSelectionKey",19,()=>Ji()?"Meta":"Control"),o=Q(t,"deleteKey",3,"Backspace"),s=Q(t,"panActivationKey",3," "),a=Q(t,"zoomActivationKey",19,()=>Ji()?"Meta":"Control"),{deleteElements:l}=vc();function u(_){return _!==null&&typeof _=="object"}function f(_){return u(_)?_.modifier||[]:[]}function d(_){return _==null?"":u(_)?_.key:_}function c(_,p){return(Array.isArray(_)?_:[_]).map(A=>{const M=d(A);return{key:M,modifier:f(A),enabled:M!==null,callback:p}})}function y(){n(n().selectionRect=null,!0),n(n().selectionKeyPressed=!1,!0),n(n().multiselectionKeyPressed=!1,!0),n(n().deleteKeyPressed=!1,!0),n(n().panActivationKeyPressed=!1,!0),n(n().zoomActivationKeyPressed=!1,!0)}function v(){const _=n().nodes.filter(b=>b.selected),p=n().edges.filter(b=>b.selected);l({nodes:_,edges:p})}Vi("blur",Qe,y),Vi("contextmenu",Qe,y),$e(Qe,(_,p)=>be==null?void 0:be(_,p),()=>({trigger:c(r(),()=>n(n().selectionKeyPressed=!0,!0)),type:"keydown"})),$e(Qe,(_,p)=>be==null?void 0:be(_,p),()=>({trigger:c(r(),()=>n(n().selectionKeyPressed=!1,!0)),type:"keyup"})),$e(Qe,(_,p)=>be==null?void 0:be(_,p),()=>({trigger:c(i(),()=>{n(n().multiselectionKeyPressed=!0,!0)}),type:"keydown"})),$e(Qe,(_,p)=>be==null?void 0:be(_,p),()=>({trigger:c(i(),()=>n(n().multiselectionKeyPressed=!1,!0)),type:"keyup"})),$e(Qe,(_,p)=>be==null?void 0:be(_,p),()=>({trigger:c(o(),_=>{!(_.originalEvent.ctrlKey||_.originalEvent.metaKey||_.originalEvent.shiftKey)&&!Zu(_.originalEvent)&&(n(n().deleteKeyPressed=!0,!0),v())}),type:"keydown"})),$e(Qe,(_,p)=>be==null?void 0:be(_,p),()=>({trigger:c(o(),()=>n(n().deleteKeyPressed=!1,!0)),type:"keyup"})),$e(Qe,(_,p)=>be==null?void 0:be(_,p),()=>({trigger:c(s(),()=>n(n().panActivationKeyPressed=!0,!0)),type:"keydown"})),$e(Qe,(_,p)=>be==null?void 0:be(_,p),()=>({trigger:c(s(),()=>n(n().panActivationKeyPressed=!1,!0)),type:"keyup"})),$e(Qe,(_,p)=>be==null?void 0:be(_,p),()=>({trigger:c(a(),()=>n(n().zoomActivationKeyPressed=!0,!0)),type:"keydown"})),$e(Qe,(_,p)=>be==null?void 0:be(_,p),()=>({trigger:c(a(),()=>n(n().zoomActivationKeyPressed=!1,!0)),type:"keyup"})),we()}var tm=bt('<path fill="none" class="svelte-flow__connection-path"></path>'),nm=bt('<svg class="svelte-flow__connectionline"><g><!></g></svg>');function rm(e,t){_e(t,!0);let n=E(()=>{if(!t.store.connection.inProgress)return"";const s={sourceX:t.store.connection.from.x,sourceY:t.store.connection.from.y,sourcePosition:t.store.connection.fromPosition,targetX:t.store.connection.to.x,targetY:t.store.connection.to.y,targetPosition:t.store.connection.toPosition};switch(t.type){case vn.Bezier:{const[a]=Uu(s);return a}case vn.Straight:{const[a]=Ju(s);return a}case vn.Step:case vn.SmoothStep:{const[a]=Ws({...s,borderRadius:t.type===vn.Step?0:void 0});return a}}});var r=In(),i=Ue(r);{var o=s=>{var a=nm(),l=Pe(a),u=Pe(l);{var f=c=>{var y=In(),v=Ue(y);Os(v,()=>t.LineComponent,(_,p)=>{p(_,{})}),ce(c,y)},d=c=>{var y=tm();Re(()=>{pe(y,"d",h(n)),Tt(y,t.style)}),ce(c,y)};ct(u,c=>{t.LineComponent?c(f):c(d,!1)})}Re(c=>{pe(a,"width",t.store.width),pe(a,"height",t.store.height),Tt(a,t.containerStyle),Tn(l,0,c)},[()=>$n(["svelte-flow__connection",$y(t.store.connection.isValid)])]),ce(s,a)};ct(i,s=>{t.store.connection.inProgress&&s(o)})}ce(e,r),we()}var im=Oe("<div><!></div>");function om(e,t){_e(t,!0);let n=Q(t,"position",3,"top-right"),r=yi(t,["$$slots","$$events","$$legacy","position","style","class","children"]),i=E(()=>`${n()}`.split("-"));var o=im();er(o,a=>({class:a,style:t.style,...r}),[()=>["svelte-flow__panel",t.class,...h(i)]]);var s=Pe(o);un(s,()=>t.children??Qn),ce(e,o),we()}var sm=Oe('<a href="https://svelteflow.dev" target="_blank" rel="noopener noreferrer" aria-label="Svelte Flow attribution">Svelte Flow</a>');function am(e,t){_e(t,!0);let n=Q(t,"position",3,"bottom-right");var r=In(),i=Ue(r);{var o=s=>{om(s,{get position(){return n()},class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",children:(a,l)=>{var u=sm();ce(a,u)},$$slots:{default:!0}})};ct(i,s=>{var a;(a=t.proOptions)!=null&&a.hideAttribution||s(o)})}ce(e,r),we()}var lm=Oe("<div><!></div>");function um(e,t){_e(t,!0);let n=Q(t,"domNode",15),r=Q(t,"clientWidth",15),i=Q(t,"clientHeight",15),o=E(()=>t.rest.class),s=E(()=>zf(t.rest,["id","class","nodeTypes","edgeTypes","colorMode","isValidConnection","onmove","onmovestart","onmoveend","onflowerror","ondelete","onbeforedelete","onbeforeconnect","onconnect","onconnectstart","onconnectend","onbeforereconnect","onreconnect","onreconnectstart","onreconnectend","onclickconnectstart","onclickconnectend","oninit","onselectionchange","onselectiondragstart","onselectiondrag","onselectiondragstop","onselectionstart","onselectionend","clickConnect","fitView","fitViewOptions","nodeOrigin","nodeDragThreshold","connectionDragThreshold","minZoom","maxZoom","initialViewport","connectionRadius","connectionMode","selectionMode","selectNodesOnDrag","snapGrid","defaultMarkerColor","translateExtent","nodeExtent","onlyRenderVisibleElements","autoPanOnConnect","autoPanOnNodeDrag","colorModeSSR","defaultEdgeOptions","elevateNodesOnSelect","elevateEdgesOnSelect","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","elementsSelectable","nodesFocusable","edgesFocusable","disableKeyboardA11y","noDragClass","noPanClass","noWheelClass","ariaLabelConfig","autoPanSpeed","panOnScrollSpeed","zIndexMode"]));function a(f){f.currentTarget.scrollTo({top:0,left:0,behavior:"auto"}),t.rest.onscroll&&t.rest.onscroll(f)}var l=lm();er(l,f=>({class:["svelte-flow","svelte-flow__container",h(o),t.colorMode],"data-testid":"svelte-flow__wrapper",role:"application",onscroll:a,...h(s),[yn]:f}),[()=>({width:Wt(t.width),height:Wt(t.height)})],void 0,void 0,"svelte-rhpwh");var u=Pe(l);un(u,()=>t.children??Qn),gi(l,f=>n(f),()=>n()),ya(l,"clientHeight",i),ya(l,"clientWidth",r),ce(e,l),we()}var cm=Oe('<div class="svelte-flow__viewport-back svelte-flow__container"></div> <!> <div class="svelte-flow__edge-labels svelte-flow__container"></div> <!> <!> <!> <div class="svelte-flow__viewport-front svelte-flow__container"></div>',1),fm=Oe("<!> <!>",1),dm=Oe("<!> <!> <!> <!> <!>",1);function hm(e,t){_e(t,!0);let n=Q(t,"paneClickDistance",3,1),r=Q(t,"nodeClickDistance",3,1),i=Q(t,"panOnScrollMode",19,()=>ar.Free),o=Q(t,"preventScrolling",3,!0),s=Q(t,"zoomOnScroll",3,!0),a=Q(t,"zoomOnDoubleClick",3,!0),l=Q(t,"zoomOnPinch",3,!0),u=Q(t,"panOnScroll",3,!1),f=Q(t,"panOnScrollSpeed",3,.5),d=Q(t,"panOnDrag",3,!0),c=Q(t,"selectionOnDrag",3,!1),y=Q(t,"connectionLineType",19,()=>vn.Bezier),v=Q(t,"nodes",31,()=>wn([])),_=Q(t,"edges",31,()=>wn([])),p=Q(t,"viewport",15,void 0),b=yi(t,["$$slots","$$events","$$legacy","width","height","proOptions","selectionKey","deleteKey","panActivationKey","multiSelectionKey","zoomActivationKey","paneClickDistance","nodeClickDistance","onmovestart","onmoveend","onmove","oninit","onnodeclick","onnodecontextmenu","onnodedrag","onnodedragstart","onnodedragstop","onnodepointerenter","onnodepointermove","onnodepointerleave","onselectionclick","onselectioncontextmenu","onselectionstart","onselectionend","onedgeclick","onedgecontextmenu","onedgepointerenter","onedgepointerleave","onpaneclick","onpanecontextmenu","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnDrag","selectionOnDrag","connectionLineComponent","connectionLineStyle","connectionLineContainerStyle","connectionLineType","attributionPosition","children","nodes","edges","viewport"]),A=dc({props:b,width:t.width,height:t.height,get nodes(){return v()},set nodes(w){v(w)},get edges(){return _()},set edges(w){_(w)},get viewport(){return p()},set viewport(w){p(w)}});const M=ms(to);M&&M.setStore&&M.setStore(A),ps(to,{provider:!1,getStore(){return A}}),Yt(()=>{var O;const w={nodes:A.selectedNodes,edges:A.selectedEdges};(O=rt(()=>t.onselectionchange))==null||O(w);for(const L of A.selectionChangeHandlers.values())L(w)}),co(()=>{A.reset()}),um(e,{get colorMode(){return A.colorMode},get width(){return t.width},get height(){return t.height},get rest(){return b},get domNode(){return A.domNode},set domNode(w){A.domNode=w},get clientWidth(){return A.width},set clientWidth(w){A.width=w},get clientHeight(){return A.height},set clientHeight(w){A.height=w},children:(w,O)=>{var L=dm(),W=Ue(L);em(W,{get selectionKey(){return t.selectionKey},get deleteKey(){return t.deleteKey},get panActivationKey(){return t.panActivationKey},get multiSelectionKey(){return t.multiSelectionKey},get zoomActivationKey(){return t.zoomActivationKey},get store(){return A},set store(x){A=x}});var P=Le(W,2);Cv(P,{get panOnScrollMode(){return i()},get preventScrolling(){return o()},get zoomOnScroll(){return s()},get zoomOnDoubleClick(){return a()},get zoomOnPinch(){return l()},get panOnScroll(){return u()},get panOnScrollSpeed(){return f()},get panOnDrag(){return d()},get paneClickDistance(){return n()},get selectionOnDrag(){return c()},get onmovestart(){return t.onmovestart},get onmove(){return t.onmove},get onmoveend(){return t.onmoveend},get oninit(){return t.oninit},get store(){return A},set store(x){A=x},children:(x,I)=>{Av(x,{get onpaneclick(){return t.onpaneclick},get onpanecontextmenu(){return t.onpanecontextmenu},get onselectionstart(){return t.onselectionstart},get onselectionend(){return t.onselectionend},get panOnDrag(){return d()},get paneClickDistance(){return n()},get selectionOnDrag(){return c()},get store(){return A},set store(m){A=m},children:(m,C)=>{var S=fm(),F=Ue(S);Mv(F,{get store(){return A},set store(z){A=z},children:(z,Y)=>{var U=cm(),ee=Le(Ue(U),2);Uv(ee,{get onedgeclick(){return t.onedgeclick},get onedgecontextmenu(){return t.onedgecontextmenu},get onedgepointerenter(){return t.onedgepointerenter},get onedgepointerleave(){return t.onedgepointerleave},get store(){return A},set store(ne){A=ne}});var $=Le(ee,4);rm($,{get type(){return y()},get LineComponent(){return t.connectionLineComponent},get containerStyle(){return t.connectionLineContainerStyle},get style(){return t.connectionLineStyle},get store(){return A},set store(ne){A=ne}});var Z=Le($,2);Bv(Z,{get nodeClickDistance(){return r()},get onnodeclick(){return t.onnodeclick},get onnodecontextmenu(){return t.onnodecontextmenu},get onnodepointerenter(){return t.onnodepointerenter},get onnodepointermove(){return t.onnodepointermove},get onnodepointerleave(){return t.onnodepointerleave},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get store(){return A},set store(ne){A=ne}});var de=Le(Z,2);Jv(de,{get onselectionclick(){return t.onselectionclick},get onselectioncontextmenu(){return t.onselectioncontextmenu},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get store(){return A},set store(ne){A=ne}}),ce(z,U)},$$slots:{default:!0}});var H=Le(F,2);{let z=E(()=>!!(A.selectionRect&&A.selectionRectMode==="user")),Y=E(()=>{var Z;return(Z=A.selectionRect)==null?void 0:Z.width}),U=E(()=>{var Z;return(Z=A.selectionRect)==null?void 0:Z.height}),ee=E(()=>{var Z;return(Z=A.selectionRect)==null?void 0:Z.x}),$=E(()=>{var Z;return(Z=A.selectionRect)==null?void 0:Z.y});yc(H,{get isVisible(){return h(z)},get width(){return h(Y)},get height(){return h(U)},get x(){return h(ee)},get y(){return h($)}})}ce(m,S)},$$slots:{default:!0}})},$$slots:{default:!0}});var V=Le(P,2);am(V,{get proOptions(){return t.proOptions},get position(){return t.attributionPosition}});var J=Le(V,2);Dv(J,{get store(){return A}});var T=Le(J,2);un(T,()=>t.children??Qn),ce(w,L)},$$slots:{default:!0}}),we()}function gm(e,t){_e(t,!0);let n=Se(dc({props:{},nodes:[],edges:[]}));ps(to,{provider:!0,getStore(){return h(n)},setStore:o=>{X(n,o)}}),co(()=>{h(n).reset()});var r=In(),i=Ue(r);un(i,()=>t.children??Qn),ce(e,r),we()}var Sn;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Sn||(Sn={}));var ym=bt("<circle></circle>");function vm(e,t){var n=ym();Re(()=>{pe(n,"cx",t.radius),pe(n,"cy",t.radius),pe(n,"r",t.radius),Tn(n,0,$n(["svelte-flow__background-pattern","dots",t.class]))}),ce(e,n)}var mm=bt("<path></path>");function pm(e,t){_e(t,!0);var n=mm();Re(()=>{pe(n,"stroke-width",t.lineWidth),pe(n,"d",`M${t.dimensions[0]/2} 0 V${t.dimensions[1]} M0 ${t.dimensions[1]/2} H${t.dimensions[0]}`),Tn(n,0,$n(["svelte-flow__background-pattern",t.variant,t.class]))}),ce(e,n),we()}const _m={[Sn.Dots]:1,[Sn.Lines]:1,[Sn.Cross]:6};var wm=bt('<svg data-testid="svelte-flow__background"><pattern patternUnits="userSpaceOnUse"><!></pattern><rect x="0" y="0" width="100%" height="100%"></rect></svg>');function xm(e,t){_e(t,!0);let n=Q(t,"variant",19,()=>Sn.Dots),r=Q(t,"gap",3,20),i=Q(t,"lineWidth",3,1),o=E(Tr),s=E(()=>n()===Sn.Dots),a=E(()=>n()===Sn.Cross),l=E(()=>Array.isArray(r())?r():[r(),r()]),u=E(()=>`background-pattern-${h(o).flowId}-${t.id??""}`),f=E(()=>[h(l)[0]*h(o).viewport.zoom||1,h(l)[1]*h(o).viewport.zoom||1]),d=E(()=>(t.size??_m[n()])*h(o).viewport.zoom),c=E(()=>h(a)?[h(d),h(d)]:h(f)),y=E(()=>h(s)?[h(d)/2,h(d)/2]:[h(c)[0]/2,h(c)[1]/2]);var v=wm();let _;var p=Pe(v),b=Pe(p);{var A=O=>{{let L=E(()=>h(d)/2);vm(O,{get radius(){return h(L)},get class(){return t.patternClass}})}},M=O=>{pm(O,{get dimensions(){return h(c)},get variant(){return n()},get lineWidth(){return i()},get class(){return t.patternClass}})};ct(b,O=>{h(s)?O(A):O(M,!1)})}var w=Le(p);Re(()=>{Tn(v,0,$n(["svelte-flow__background","svelte-flow__container",t.class])),_=Tt(v,"",_,{"--xy-background-color-props":t.bgColor,"--xy-background-pattern-color-props":t.patternColor}),pe(p,"id",h(u)),pe(p,"x",h(o).viewport.x%h(f)[0]),pe(p,"y",h(o).viewport.y%h(f)[1]),pe(p,"width",h(f)[0]),pe(p,"height",h(f)[1]),pe(p,"patternTransform",`translate(-${h(y)[0]},-${h(y)[1]})`),pe(w,"fill",`url(#${h(u)})`)}),ce(e,v),we()}var bm=Oe('<div class="h-full w-full"><!></div>');function Em(e,t){_e(t,!1);let n=Q(t,"nodes",28,y),r=Q(t,"edges",28,()=>[]),i=Q(t,"loadVersion",8,0);const o=hd(),{screenToFlowPosition:s,fitView:a}=vc();let l=rr(-1);const u=M=>{o("flowchange",{reason:M,nodes:n(),edges:r()})},f=M=>{r(Qu(M,r())),u("edge-created")},d=()=>{u("node-moved")},c=(M,w)=>{var T,x,I;if(w.isValid)return;const O=((T=w.fromNode)==null?void 0:T.id)??((x=n()[0])==null?void 0:x.id)??"Node-00000000-0000-0000-0000-000000000000",L=v((I=w.fromNode)==null?void 0:I.type),W=`${L}-${_()}`,{clientX:P,clientY:V}="changedTouches"in M?M.changedTouches[0]:M,J={id:W,data:{label:L},position:s({x:P,y:V}),origin:[.5,0]};n([...n(),J]),r([...r(),{source:O,target:W,id:`${O}--${W}`}]),u("node-created")};function y(){return[{id:"Node-00000000-0000-0000-0000-000000000000",type:"input",data:{label:"Node"},position:{x:0,y:50}}]}function v(M){if(typeof M=="string"){const w=M.trim().replace(/[^A-Za-z0-9_]/g,"");if(w)return w}return"Node"}function _(){return typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`${Date.now().toString(16)}${Math.random().toString(16).slice(2)}`}async function p(){await Df(),n().length&&a({padding:.2,duration:200})}Cf(()=>(Is(i()),h(l)),()=>{i()!==h(l)&&(X(l,i()),p())}),If(),Ds();var b=bm(),A=Pe(b);hm(A,{fitView:!0,onconnect:f,onconnectend:c,onnodedragstop:d,get nodes(){return n()},set nodes(M){n(M)},get edges(){return r()},set edges(M){r(M)},children:(M,w)=>{xm(M,{})},$$slots:{default:!0},$$legacy:!0}),ce(e,b),we()}var Nm=Oe('<div class="mb-2 text-sm text-[var(--vscode-errorForeground)]"> </div>'),Sm=Oe('<main class="flex flex-col h-screen min-h-0 p-3"><!> <!></main>');function km(e,t){_e(t,!1);let n=Q(t,"vscode",8);const r="$NodeEditorMetadata",i=["$WorkspaceID","$Nodes","$FloatingNodes","$Links","$Groups","$Comments"],o=["$WorkspaceID","$Groups","$Comments"],s=A("");let a=rr(s.nodes),l=rr(s.edges),u=s.runtimeFields,f=s.metadataContext,d=s.serializedText,c=-1,y=rr(0),v=rr("");function _(N){const D=N.data;if(!(!D||typeof D.type!="string")){if(D.type==="update"){c=typeof D.version=="number"?D.version:c;const B=typeof D.text=="string"?D.text:"";try{const K=A(B);X(a,K.nodes),X(l,K.edges),u=K.runtimeFields,f=K.metadataContext,d=K.serializedText,X(y,h(y)+1),X(v,"")}catch(K){X(v,K instanceof Error?K.message:"Could not parse flow JSON.")}return}D.type==="error"&&X(v,typeof D.message=="string"?D.message:"Unknown editor error.")}}function p(N){const D=N.detail??{};b(D.nodes,D.edges)}function b(N,D){const B=J({nodes:Array.isArray(N)?N:[],edges:Array.isArray(D)?D:[],runtimeFields:u,metadataContext:f});B.text!==d&&(X(a,B.nodes),X(l,B.edges),f=B.metadataContext,n().postMessage({type:"apply",text:B.text,sourceVersion:c}))}fu(()=>(window.addEventListener("message",_),n().postMessage({type:"ready"}),()=>{window.removeEventListener("message",_)}));function A(N){if(!N.trim())return M({},{});let D;try{D=JSON.parse(N)}catch{throw new Error("The underlying file is not valid JSON.")}if(!z(D))throw new Error("The flow file must be a JSON object.");const B=z(D[r]);if(!B&&(Array.isArray(D.nodes)||Array.isArray(D.edges)))return w(D);if(!B&&U(D))return O(D);const K=B?D[r]:{},G=H(D,[r]);return M(G,K)}function M(N,D){const B=ee(N),K=new Set(Object.keys(B)),G=V(D,B,K);let j=P(G);j.nodes.length===0&&(j=P(W(G)));const q=J({nodes:j.nodes,edges:j.edges,runtimeFields:N,metadataContext:G});return{nodes:q.nodes,edges:q.edges,runtimeFields:N,metadataContext:q.metadataContext,serializedText:q.text}}function w(N){var ue,ve,Ae;const D=H(N,["nodes","edges",r]),B=x(),K=[],G=[],j=new Set,q=Array.isArray(N.nodes)?N.nodes:[];for(let ae=0;ae<q.length;ae+=1){const te=q[ae],ge=S(te==null?void 0:te.id,te==null?void 0:te.type);if(j.has(ge))continue;j.add(ge);const ke=F(te==null?void 0:te.position,ae),Ce=typeof((ue=te==null?void 0:te.data)==null?void 0:ue.label)=="string"&&te.data.label.trim()?te.data.label.trim():C(ge),Ge=typeof((ve=te==null?void 0:te.data)==null?void 0:ve.$comment)=="string"&&te.data.$comment.trim()?te.data.$comment.trim():void 0;B.nodeMetadataById[ge]={$Position:{$x:ke.x,$y:ke.y}},Ce!==C(ge)&&(B.nodeMetadataById[ge].$Title=Ce);const Me=z((Ae=te==null?void 0:te.data)==null?void 0:Ae.$nodePayload)?{...te.data.$nodePayload}:{};Me.$NodeId=ge,Ge!==void 0&&(Me.$Comment=Ge),B.nodePayloadById[ge]=Me,K.push({id:ge,data:{label:Ce,...Ge!==void 0?{$comment:Ge}:{}},position:ke})}const le=Array.isArray(N.edges)?N.edges:[];for(let ae=0;ae<le.length;ae+=1){const te=le[ae],ge=typeof(te==null?void 0:te.source)=="string"?te.source:void 0,ke=typeof(te==null?void 0:te.target)=="string"?te.target:void 0;if(!ge||!ke||!j.has(ge)||!j.has(ke))continue;const Ce=typeof(te==null?void 0:te.id)=="string"&&te.id.trim()?te.id.trim():`${ge}--${ke}`;B.linkById[Ce]={$SourceNodeId:ge,$TargetNodeId:ke},G.push({id:Ce,source:ge,target:ke})}if(K.length===0){const ae=I();K.push(ae),B.nodeMetadataById[ae.id]={$Position:{$x:ae.position.x,$y:ae.position.y}},B.nodePayloadById[ae.id]={$NodeId:ae.id}}const ie=J({nodes:K,edges:G,runtimeFields:D,metadataContext:B});return{nodes:ie.nodes,edges:ie.edges,runtimeFields:D,metadataContext:ie.metadataContext,serializedText:ie.text}}function O(N){const D=x();D.workspaceId=typeof N.$WorkspaceID=="string"?N.$WorkspaceID:void 0,D.groups=Array.isArray(N.$Groups)?N.$Groups:[],D.comments=Array.isArray(N.$Comments)?N.$Comments:[];const B=H(N,o),K=L(B);D.nodeMetadataById=K.nodeMetadataById,D.nodePayloadById=K.nodePayloadById,D.runtimeTreeNodeIds=K.runtimeTreeNodeIds;const G=z(K.runtimeRoot)?K.runtimeRoot:{},j={nodes:K.flowNodes,edges:[]},q=J({nodes:j.nodes,edges:j.edges,runtimeFields:G,metadataContext:D});return{nodes:q.nodes,edges:q.edges,runtimeFields:G,metadataContext:q.metadataContext,serializedText:q.text}}function L(N){const D={},B={},K=new Set,G=[];let j=0;const q=(ie,ue,ve=!1)=>{if(Array.isArray(ie))return ie.map((Ve,ot)=>q(Ve,`${ue}${ot}`,!1));if(!z(ie))return ie;if(!(ve||typeof ie.$NodeId=="string"&&ie.$NodeId.trim()||Y(ie.$Position)))return Object.fromEntries(Object.entries(ie).map(([Ve,ot])=>[Ve,q(ot,Ve,!1)]));const ae=j;j+=1;const te=typeof ie.Type=="string"&&ie.Type.trim()?ie.Type.trim():ue,ge=S(ie.$NodeId,te),ke=F(ie.$Position,ae),Ce=typeof ie.$Title=="string"&&ie.$Title.trim()?ie.$Title.trim():void 0,Ge=typeof ie.$Comment=="string"&&ie.$Comment.trim()?ie.$Comment.trim():void 0,Me={};for(const[Ve,ot]of Object.entries(ie))Ve==="$NodeId"||Ve==="$Position"||Ve==="$Title"||(Me[Ve]=q(ot,Ve,!1));return Me.$NodeId=ge,D[ge]={$Position:{$x:ke.x,$y:ke.y},...Ce?{$Title:Ce}:{}},B[ge]=Me,K.add(ge),G.push({id:ge,data:{label:m(ge,D[ge],void 0,Me),...Ge!==void 0?{$comment:Ge}:{}},position:ke}),Me},le=q(N,"Root",!0);if(G.length===0){const ie=I();K.add(ie.id),D[ie.id]={$Position:{$x:ie.position.x,$y:ie.position.y}},B[ie.id]={$NodeId:ie.id},G.push(ie)}return{runtimeRoot:le,nodeMetadataById:D,nodePayloadById:B,runtimeTreeNodeIds:K,flowNodes:G}}function W(N){const D={...N,nodeMetadataById:{...N.nodeMetadataById},nodePayloadById:{...N.nodePayloadById}},B=I();return D.nodeMetadataById[B.id]={$Position:{$x:B.position.x,$y:B.position.y}},D.nodePayloadById[B.id]={$NodeId:B.id},D}function P(N){const D=new Set([...Object.keys(N.nodeMetadataById),...Object.keys(N.nodePayloadById)]),B=[];for(const[j,q]of Object.entries(N.linkById)){const le=T(j,q);le&&(B.push(le),D.add(le.source),D.add(le.target))}const K=[],G=Array.from(D).sort();for(let j=0;j<G.length;j+=1){const q=G[j],le=z(N.nodeMetadataById[q])?N.nodeMetadataById[q]:{},ie=z(N.nodePayloadById[q])?N.nodePayloadById[q]:{},ue=F(le==null?void 0:le.$Position,j),ve=m(q,le,void 0,ie),Ae=typeof ie.$Comment=="string"&&ie.$Comment.trim()?ie.$Comment.trim():void 0;K.push({id:q,data:{label:ve,...Ae!==void 0?{$comment:Ae}:{}},position:ue})}return{nodes:K,edges:B}}function V(N,D={},B=new Set){const K=x();K.workspaceId=N.$WorkspaceID,K.groups=Array.isArray(N.$Groups)?N.$Groups:[],K.comments=Array.isArray(N.$Comments)?N.$Comments:[],K.floatingNodes=Array.isArray(N.$FloatingNodes)?N.$FloatingNodes:[],K.metadataExtraFields=H(N,i),K.nodePayloadById={...D},K.runtimeTreeNodeIds=B;const G=z(N.$Nodes)?N.$Nodes:{};for(const[q,le]of Object.entries(G))typeof q!="string"||!q||!z(le)||(K.nodeMetadataById[q]={...le});for(const q of K.floatingNodes)!z(q)||typeof q.$NodeId!="string"||!q.$NodeId||(K.nodePayloadById[q.$NodeId]={...z(K.nodePayloadById[q.$NodeId])?K.nodePayloadById[q.$NodeId]:{},...q});const j=z(N.$Links)?N.$Links:{};for(const[q,le]of Object.entries(j))typeof q!="string"||!q||!z(le)||(K.linkById[q]={...le});return K}function J(N){var cn,fn,dn;const D=N.metadataContext.nodeMetadataById,B=N.metadataContext.nodePayloadById,K=N.metadataContext.linkById,G=N.metadataContext.runtimeTreeNodeIds instanceof Set?N.metadataContext.runtimeTreeNodeIds:new Set,j=[],q={},le={},ie=new Set,ue=Array.isArray(N.nodes)?N.nodes:[];for(let ye=0;ye<ue.length;ye+=1){const se=ue[ye],Ie=S(se==null?void 0:se.id,se==null?void 0:se.type);if(ie.has(Ie))continue;ie.add(Ie);const Fe=z(D[Ie])?{...D[Ie]}:{},De=z(B[Ie])?{...B[Ie]}:{},st=F(se==null?void 0:se.position,ye),Gt=m(Ie,Fe,(cn=se==null?void 0:se.data)==null?void 0:cn.label),Ot=typeof((fn=se==null?void 0:se.data)==null?void 0:fn.$comment)=="string"&&se.data.$comment.trim()?se.data.$comment.trim():void 0;Fe.$Position={$x:st.x,$y:st.y},Gt!==C(Ie)||typeof Fe.$Title=="string"?Fe.$Title=Gt:delete Fe.$Title,De.$NodeId=Ie,Ot!==void 0?De.$Comment=Ot:delete De.$Comment,q[Ie]=Fe,le[Ie]=De,j.push({id:Ie,data:{label:Gt,...Ot!==void 0?{$comment:Ot}:{}},position:st})}if(j.length===0){const ye=I(),se={...N.metadataContext,nodeMetadataById:{...q,[ye.id]:{$Position:{$x:ye.position.x,$y:ye.position.y}}},nodePayloadById:{...le,[ye.id]:{$NodeId:ye.id}}};return J({...N,nodes:[ye],metadataContext:se})}const ve=new Set(j.map(ye=>ye.id)),Ae=[],ae=new Set,te=Array.isArray(N.metadataContext.floatingNodes)?N.metadataContext.floatingNodes:[];for(const ye of te){if(!z(ye))continue;const se=typeof ye.$NodeId=="string"&&ye.$NodeId.trim()?ye.$NodeId.trim():void 0;!se||!ve.has(se)||(Ae.push(ye),$(ye,ae))}for(const ye of j){const se=ye.id;if(G.has(se)||ae.has(se))continue;const Ie=typeof((dn=ye==null?void 0:ye.data)==null?void 0:dn.label)=="string"&&ye.data.label.trim()?ye.data.label.trim():C(se),De={...z(le[se])?le[se]:{},$NodeId:se};typeof De.Type!="string"&&Ie&&(De.Type=Ie),Ae.push(De),$(De,ae),le[se]=De}const ge=[],ke={},Ce=new Set,Ge=Array.isArray(N.edges)?N.edges:[];for(let ye=0;ye<Ge.length;ye+=1){const se=Ge[ye],Ie=typeof(se==null?void 0:se.source)=="string"?se.source:void 0,Fe=typeof(se==null?void 0:se.target)=="string"?se.target:void 0;if(!Ie||!Fe||!ve.has(Ie)||!ve.has(Fe))continue;const De=typeof(se==null?void 0:se.id)=="string"&&se.id.trim()?se.id.trim():`${Ie}--${Fe}`;if(Ce.has(De))continue;Ce.add(De);const st=z(K[De])?{...K[De]}:{};st.$SourceNodeId=Ie,st.$TargetNodeId=Fe,ke[De]=st,ge.push({id:De,source:Ie,target:Fe})}const Me={workspaceId:N.metadataContext.workspaceId,groups:Array.isArray(N.metadataContext.groups)?N.metadataContext.groups:[],comments:Array.isArray(N.metadataContext.comments)?N.metadataContext.comments:[],floatingNodes:Ae,runtimeTreeNodeIds:G,metadataExtraFields:z(N.metadataContext.metadataExtraFields)?N.metadataContext.metadataExtraFields:{},nodeMetadataById:q,nodePayloadById:le,linkById:ke},Ve={...Me.metadataExtraFields,...Me.workspaceId!==void 0?{$WorkspaceID:Me.workspaceId}:{},$Nodes:Me.nodeMetadataById,$FloatingNodes:Me.floatingNodes,$Links:Me.linkById,$Groups:Me.groups,$Comments:Me.comments},ot={...N.runtimeFields,[r]:Ve};return{nodes:j,edges:ge,metadataContext:Me,text:`${JSON.stringify(ot,null,2)}
`}}function T(N,D){const B=[D.$SourceNodeId,D.source,D.Source,D.from,D.From],K=[D.$TargetNodeId,D.target,D.Target,D.to,D.To];let G=B.find(q=>typeof q=="string"&&q.trim()),j=K.find(q=>typeof q=="string"&&q.trim());if((!G||!j)&&N.includes("--")){const[q,le]=N.split("--");G=G??q,j=j??le}if(!(!G||!j))return{id:N,source:G,target:j}}function x(){return{workspaceId:void 0,groups:[],comments:[],floatingNodes:[],runtimeTreeNodeIds:new Set,metadataExtraFields:{},nodeMetadataById:{},nodePayloadById:{},linkById:{}}}function I(){const N="Node-00000000-0000-0000-0000-000000000000";return{id:N,data:{label:C(N)},position:{x:0,y:50}}}function m(N,D,B,K){const G=typeof B=="string"&&B.trim()?B.trim():void 0;if(G!==void 0)return G;const j=typeof(D==null?void 0:D.$Title)=="string"&&D.$Title.trim()?D.$Title.trim():void 0;if(j!==void 0)return j;const q=typeof(K==null?void 0:K.Type)=="string"&&K.Type.trim()?K.Type.trim():void 0;return q!==void 0?q:C(N)}function C(N){if(typeof N!="string"||!N.trim())return"Node";const[D,B]=N.split("-",2);return D&&B?D:N}function S(N,D,B){return typeof N=="string"&&N.trim()?N.trim():typeof N=="number"&&Number.isFinite(N)?String(N):`${(typeof D=="string"&&D.trim()?D.trim().replace(/[^A-Za-z0-9_]/g,""):"Node")||"Node"}-${Z()}`}function F(N,D){const B=D*180,K=100,G=Number(N==null?void 0:N.x),j=Number(N==null?void 0:N.y),q=Number(N==null?void 0:N.$x),le=Number(N==null?void 0:N.$y);return{x:Number.isFinite(G)?G:Number.isFinite(q)?q:B,y:Number.isFinite(j)?j:Number.isFinite(le)?le:K}}function H(N,D){if(!z(N))return{};const B=new Set(D);return Object.fromEntries(Object.entries(N).filter(([K])=>!B.has(K)))}function z(N){return N!==null&&typeof N=="object"&&!Array.isArray(N)}function Y(N){return z(N)?Number.isFinite(Number(N.$x))||Number.isFinite(Number(N.$y)):!1}function U(N){var K,G;if(!z(N))return!1;if(Number.isFinite(Number((K=N==null?void 0:N.$Position)==null?void 0:K.$x))||Number.isFinite(Number((G=N==null?void 0:N.$Position)==null?void 0:G.$y))||typeof N.$Title=="string"&&N.$Title.trim())return!0;let D=!1;const B=j=>{if(!D){if(Array.isArray(j)){for(const q of j)if(B(q),D)return;return}if(z(j)){if(Y(j.$Position)){D=!0;return}for(const[q,le]of Object.entries(j))if(!(q===r||q==="$Groups")&&(B(le),D))return}}};return B(N),D}function ee(N){const D={},B=K=>{if(Array.isArray(K)){for(const j of K)B(j);return}if(!z(K))return;const G=typeof K.$NodeId=="string"&&K.$NodeId.trim()?K.$NodeId.trim():void 0;G&&!z(D[G])&&(D[G]=K);for(const[j,q]of Object.entries(K))j!==r&&B(q)};return B(N),D}function $(N,D){const B=K=>{if(Array.isArray(K)){for(const j of K)B(j);return}if(!z(K))return;const G=typeof K.$NodeId=="string"&&K.$NodeId.trim()?K.$NodeId.trim():void 0;G&&D.add(G);for(const[j,q]of Object.entries(K))j!==r&&B(q)};B(N)}function Z(){return typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():Math.random().toString(16).slice(2)}Ds();var de=Sm(),ne=Pe(de);{var re=N=>{var D=Nm(),B=Pe(D);Re(()=>Nn(B,h(v))),ce(N,D)};ct(ne,N=>{h(v)&&N(re)})}var oe=Le(ne,2);gm(oe,{children:(N,D)=>{Em(N,{get loadVersion(){return h(y)},get nodes(){return h(a)},set nodes(B){X(a,B)},get edges(){return h(l)},set edges(B){X(l,B)},$$events:{flowchange:p},$$legacy:!0})},$$slots:{default:!0}}),ce(e,de),we()}const Cm=acquireVsCodeApi();qf(km,{target:document.getElementById("app"),props:{vscode:Cm}});
//# sourceMappingURL=main.js.map
