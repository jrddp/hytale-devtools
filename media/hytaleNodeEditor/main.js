var pd=Object.defineProperty;var Xa=e=>{throw TypeError(e)};var md=(e,t,n)=>t in e?pd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var He=(e,t,n)=>md(e,typeof t!="symbol"?t+"":t,n),us=(e,t,n)=>t.has(e)||Xa("Cannot "+n);var y=(e,t,n)=>(us(e,t,"read from private field"),n?n.call(e):t.get(e)),X=(e,t,n)=>t.has(e)?Xa("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Te=(e,t,n,r)=>(us(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),rt=(e,t,n)=>(us(e,t,"access private method"),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const Ss=!1;var Bi=Array.isArray,_d=Array.prototype.indexOf,Ur=Array.prototype.includes,Ho=Array.from,bd=Object.defineProperty,Un=Object.getOwnPropertyDescriptor,eu=Object.getOwnPropertyDescriptors,tu=Object.prototype,xd=Array.prototype,Ko=Object.getPrototypeOf,Wa=Object.isExtensible;function fi(e){return typeof e=="function"}const Sr=()=>{};function wd(e){return e()}function Ts(e){for(var t=0;t<e.length;t++)e[t]()}function nu(){var e,t,n=new Promise((r,i)=>{e=r,t=i});return{promise:n,resolve:e,reject:t}}function ct(e,t,n=!1){return e===void 0?n?t():t:e}function ii(e,t){if(Array.isArray(e))return e;if(t===void 0||!(Symbol.iterator in e))return Array.from(e);const n=[];for(const r of e)if(n.push(r),n.length===t)break;return n}const st=2,Ei=4,Hi=8,aa=1<<24,Mn=16,qt=32,er=64,ru=128,Mt=512,Qe=1024,at=2048,Dt=4096,It=8192,Sn=16384,Ki=32768,kn=65536,Ga=1<<17,iu=1<<18,Tr=1<<19,ou=1<<20,En=1<<25,pr=65536,ks=1<<21,la=1<<22,qn=1<<23,nn=Symbol("$state"),su=Symbol("legacy props"),Ed=Symbol(""),rr=new class extends Error{constructor(){super(...arguments);He(this,"name","StaleReactionError");He(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};var jl;const ua=((jl=globalThis.document)==null?void 0:jl.contentType.includes("xml"))??!1;function Yo(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Nd(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Id(e,t,n){throw new Error("https://svelte.dev/e/each_key_duplicate")}function Sd(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Td(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function kd(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Ad(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Cd(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Md(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Pd(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Dd(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Od(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Ld=1,zd=2,au=4,Fd=8,Rd=16,Vd=1,Bd=2,lu=4,Hd=8,Kd=16,uu=1,Yd=2,$e=Symbol(),cu="http://www.w3.org/1999/xhtml",Xd="http://www.w3.org/2000/svg",Wd="@attach";function Gd(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function Ud(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function du(e){return e===this.v}function fu(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function hu(e){return!fu(e,this.v)}let oi=!1,qd=!1;function Zd(){oi=!0}const jd=[];function gu(e,t=!1,n=!1){return ho(e,new Map,"",jd,null,n)}function ho(e,t,n,r,i=null,o=!1){if(typeof e=="object"&&e!==null){var s=t.get(e);if(s!==void 0)return s;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(Bi(e)){var a=Array(e.length);t.set(e,a),i!==null&&t.set(i,a);for(var u=0;u<e.length;u+=1){var c=e[u];u in e&&(a[u]=ho(c,t,n,r,null,o))}return a}if(Ko(e)===tu){a={},t.set(e,a),i!==null&&t.set(i,a);for(var f in e)a[f]=ho(e[f],t,n,r,null,o);return a}if(e instanceof Date)return structuredClone(e);if(typeof e.toJSON=="function"&&!o)return ho(e.toJSON(),t,n,r,e)}if(e instanceof EventTarget)return e;try{return structuredClone(e)}catch{return e}}let Re=null;function qr(e){Re=e}function ca(e){return fa().get(e)}function da(e,t){return fa().set(e,t),t}function Jd(e){return fa().has(e)}function Ne(e,t=!1,n){Re={p:Re,i:!1,c:null,e:null,s:e,x:null,l:oi&&!t?{s:null,u:null,$:[]}:null}}function Ie(e){var t=Re,n=t.e;if(n!==null){t.e=null;for(var r of n)zu(r)}return t.i=!0,Re=t.p,{}}function Yi(){return!oi||Re!==null&&Re.l===null}function fa(e){return Re===null&&Yo(),Re.c??(Re.c=new Map(Qd(Re)||void 0))}function Qd(e){let t=e.p;for(;t!==null;){const n=t.c;if(n!==null)return n;t=t.p}return null}let ir=[];function vu(){var e=ir;ir=[],Ts(e)}function rn(e){if(ir.length===0&&!_i){var t=ir;queueMicrotask(()=>{t===ir&&vu()})}ir.push(e)}function $d(){for(;ir.length>0;)vu()}function yu(e){var t=ze;if(t===null)return Ce.f|=qn,e;if(!(t.f&Ki)&&!(t.f&Ei))throw e;Zr(e,t)}function Zr(e,t){for(;t!==null;){if(t.f&ru){if(!(t.f&Ki))throw e;try{t.b.error(e);return}catch(n){e=n}}t=t.parent}throw e}const ef=-7169;function qe(e,t){e.f=e.f&ef|t}function ha(e){e.f&Mt||e.deps===null?qe(e,Qe):qe(e,Dt)}function pu(e){if(e!==null)for(const t of e)!(t.f&st)||!(t.f&pr)||(t.f^=pr,pu(t.deps))}function mu(e,t,n){e.f&at?t.add(e):e.f&Dt&&n.add(e),pu(e.deps),qe(e,Qe)}const eo=new Set;let Ae=null,As=null,it=null,pt=[],Xo=null,Cs=!1,_i=!1;var Vr,Br,lr,Hr,Di,Oi,ur,mn,Kr,cn,Ms,Ps,_u;const Va=class Va{constructor(){X(this,cn);He(this,"committed",!1);He(this,"current",new Map);He(this,"previous",new Map);X(this,Vr,new Set);X(this,Br,new Set);X(this,lr,0);X(this,Hr,0);X(this,Di,null);X(this,Oi,new Set);X(this,ur,new Set);X(this,mn,new Map);He(this,"is_fork",!1);X(this,Kr,!1)}is_deferred(){return this.is_fork||y(this,Hr)>0}skip_effect(t){y(this,mn).has(t)||y(this,mn).set(t,{d:[],m:[]})}unskip_effect(t){var n=y(this,mn).get(t);if(n){y(this,mn).delete(t);for(var r of n.d)qe(r,at),Xt(r);for(r of n.m)qe(r,Dt),Xt(r)}}process(t){var i;pt=[],this.apply();var n=[],r=[];for(const o of t)rt(this,cn,Ms).call(this,o,n,r);if(this.is_deferred()){rt(this,cn,Ps).call(this,r),rt(this,cn,Ps).call(this,n);for(const[o,s]of y(this,mn))Eu(o,s)}else{for(const o of y(this,Vr))o();y(this,Vr).clear(),y(this,lr)===0&&rt(this,cn,_u).call(this),As=this,Ae=null,Ua(r),Ua(n),As=null,(i=y(this,Di))==null||i.resolve()}it=null}capture(t,n){n!==$e&&!this.previous.has(t)&&this.previous.set(t,n),t.f&qn||(this.current.set(t,t.v),it==null||it.set(t,t.v))}activate(){Ae=this,this.apply()}deactivate(){Ae===this&&(Ae=null,it=null)}flush(){if(this.activate(),pt.length>0){if(bu(),Ae!==null&&Ae!==this)return}else y(this,lr)===0&&this.process([]);this.deactivate()}discard(){for(const t of y(this,Br))t(this);y(this,Br).clear()}increment(t){Te(this,lr,y(this,lr)+1),t&&Te(this,Hr,y(this,Hr)+1)}decrement(t){Te(this,lr,y(this,lr)-1),t&&Te(this,Hr,y(this,Hr)-1),!y(this,Kr)&&(Te(this,Kr,!0),rn(()=>{Te(this,Kr,!1),this.is_deferred()?pt.length>0&&this.flush():this.revive()}))}revive(){for(const t of y(this,Oi))y(this,ur).delete(t),qe(t,at),Xt(t);for(const t of y(this,ur))qe(t,Dt),Xt(t);this.flush()}oncommit(t){y(this,Vr).add(t)}ondiscard(t){y(this,Br).add(t)}settled(){return(y(this,Di)??Te(this,Di,nu())).promise}static ensure(){if(Ae===null){const t=Ae=new Va;eo.add(Ae),_i||rn(()=>{Ae===t&&t.flush()})}return Ae}apply(){}};Vr=new WeakMap,Br=new WeakMap,lr=new WeakMap,Hr=new WeakMap,Di=new WeakMap,Oi=new WeakMap,ur=new WeakMap,mn=new WeakMap,Kr=new WeakMap,cn=new WeakSet,Ms=function(t,n,r){t.f^=Qe;for(var i=t.first,o=null;i!==null;){var s=i.f,a=(s&(qt|er))!==0,u=a&&(s&Qe)!==0,c=u||(s&It)!==0||y(this,mn).has(i);if(!c&&i.fn!==null){a?i.f^=Qe:o!==null&&s&(Ei|Hi|aa)?o.b.defer_effect(i):s&Ei?n.push(i):li(i)&&(s&Mn&&y(this,ur).add(i),mr(i));var f=i.first;if(f!==null){i=f;continue}}var h=i.parent;for(i=i.next;i===null&&h!==null;)h===o&&(o=null),i=h.next,h=h.parent}},Ps=function(t){for(var n=0;n<t.length;n+=1)mu(t[n],y(this,Oi),y(this,ur))},_u=function(){var i;if(eo.size>1){this.previous.clear();var t=it,n=!0;for(const o of eo){if(o===this){n=!1;continue}const s=[];for(const[u,c]of this.current){if(o.current.has(u))if(n&&c!==o.current.get(u))o.current.set(u,c);else continue;s.push(u)}if(s.length===0)continue;const a=[...o.current.keys()].filter(u=>!this.current.has(u));if(a.length>0){var r=pt;pt=[];const u=new Set,c=new Map;for(const f of s)xu(f,a,u,c);if(pt.length>0){Ae=o,o.apply();for(const f of pt)rt(i=o,cn,Ms).call(i,f,[],[]);o.deactivate()}pt=r}}Ae=null,it=t}this.committed=!0,eo.delete(this)};let Tn=Va;function tf(e){var t=_i;_i=!0;try{for(var n;;){if($d(),pt.length===0&&(Ae==null||Ae.flush(),pt.length===0))return Xo=null,n;bu()}}finally{_i=t}}function bu(){Cs=!0;var e=null;try{for(var t=0;pt.length>0;){var n=Tn.ensure();if(t++>1e3){var r,i;nf()}n.process(pt),Zn.clear()}}finally{pt=[],Cs=!1,Xo=null}}function nf(){try{Ad()}catch(e){Zr(e,Xo)}}let Bt=null;function Ua(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if(!(r.f&(Sn|It))&&li(r)&&(Bt=new Set,mr(r),r.deps===null&&r.first===null&&r.nodes===null&&r.teardown===null&&r.ac===null&&Hu(r),(Bt==null?void 0:Bt.size)>0)){Zn.clear();for(const i of Bt){if(i.f&(Sn|It))continue;const o=[i];let s=i.parent;for(;s!==null;)Bt.has(s)&&(Bt.delete(s),o.push(s)),s=s.parent;for(let a=o.length-1;a>=0;a--){const u=o[a];u.f&(Sn|It)||mr(u)}}Bt.clear()}}Bt=null}}function xu(e,t,n,r){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const i of e.reactions){const o=i.f;o&st?xu(i,t,n,r):o&(la|Mn)&&!(o&at)&&wu(i,t,r)&&(qe(i,at),Xt(i))}}function wu(e,t,n){const r=n.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const i of e.deps){if(Ur.call(t,i))return!0;if(i.f&st&&wu(i,t,n))return n.set(i,!0),!0}return n.set(e,!1),!1}function Xt(e){for(var t=Xo=e;t.parent!==null;){t=t.parent;var n=t.f;if(Cs&&t===ze&&n&Mn&&!(n&iu))return;if(n&(er|qt)){if(!(n&Qe))return;t.f^=Qe}}pt.push(t)}function Eu(e,t){if(!(e.f&qt&&e.f&Qe)){e.f&at?t.d.push(e):e.f&Dt&&t.m.push(e),qe(e,Qe);for(var n=e.first;n!==null;)Eu(n,t),n=n.next}}function Nu(e){let t=0,n=Jn(0),r;return()=>{va()&&(l(n),si(()=>(t===0&&(r=xe(()=>e(()=>bi(n)))),t+=1,()=>{rn(()=>{t-=1,t===0&&(r==null||r(),r=void 0,bi(n))})})))}}var rf=kn|Tr|ru;function of(e,t,n){new sf(e,t,n)}var At,sa,Jt,cr,Qt,Ct,vt,$t,_n,Yn,dr,Xn,Yr,fr,Xr,Wr,bn,Fo,tt,af,lf,Ds,go,vo,Os;class sf{constructor(t,n,r){X(this,tt);He(this,"parent");He(this,"is_pending",!1);X(this,At);X(this,sa,null);X(this,Jt);X(this,cr);X(this,Qt);X(this,Ct,null);X(this,vt,null);X(this,$t,null);X(this,_n,null);X(this,Yn,null);X(this,dr,0);X(this,Xn,0);X(this,Yr,!1);X(this,fr,!1);X(this,Xr,new Set);X(this,Wr,new Set);X(this,bn,null);X(this,Fo,Nu(()=>(Te(this,bn,Jn(y(this,dr))),()=>{Te(this,bn,null)})));Te(this,At,t),Te(this,Jt,n),Te(this,cr,r),this.parent=ze.b,this.is_pending=!!y(this,Jt).pending,Te(this,Qt,ai(()=>{ze.b=this;{var i=rt(this,tt,Ds).call(this);try{Te(this,Ct,_t(()=>r(i)))}catch(o){this.error(o)}y(this,Xn)>0?rt(this,tt,vo).call(this):this.is_pending=!1}return()=>{var o;(o=y(this,Yn))==null||o.remove()}},rf))}defer_effect(t){mu(t,y(this,Xr),y(this,Wr))}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!y(this,Jt).pending}update_pending_count(t){rt(this,tt,Os).call(this,t),Te(this,dr,y(this,dr)+t),!(!y(this,bn)||y(this,Yr))&&(Te(this,Yr,!0),rn(()=>{Te(this,Yr,!1),y(this,bn)&&jr(y(this,bn),y(this,dr))}))}get_effect_pending(){return y(this,Fo).call(this),l(y(this,bn))}error(t){var n=y(this,Jt).onerror;let r=y(this,Jt).failed;if(y(this,fr)||!n&&!r)throw t;y(this,Ct)&&(et(y(this,Ct)),Te(this,Ct,null)),y(this,vt)&&(et(y(this,vt)),Te(this,vt,null)),y(this,$t)&&(et(y(this,$t)),Te(this,$t,null));var i=!1,o=!1;const s=()=>{if(i){Ud();return}i=!0,o&&Od(),Tn.ensure(),Te(this,dr,0),y(this,$t)!==null&&gr(y(this,$t),()=>{Te(this,$t,null)}),this.is_pending=this.has_pending_snippet(),Te(this,Ct,rt(this,tt,go).call(this,()=>(Te(this,fr,!1),_t(()=>y(this,cr).call(this,y(this,At)))))),y(this,Xn)>0?rt(this,tt,vo).call(this):this.is_pending=!1};rn(()=>{try{o=!0,n==null||n(t,s),o=!1}catch(a){Zr(a,y(this,Qt)&&y(this,Qt).parent)}r&&Te(this,$t,rt(this,tt,go).call(this,()=>{Tn.ensure(),Te(this,fr,!0);try{return _t(()=>{r(y(this,At),()=>t,()=>s)})}catch(a){return Zr(a,y(this,Qt).parent),null}finally{Te(this,fr,!1)}}))})}}At=new WeakMap,sa=new WeakMap,Jt=new WeakMap,cr=new WeakMap,Qt=new WeakMap,Ct=new WeakMap,vt=new WeakMap,$t=new WeakMap,_n=new WeakMap,Yn=new WeakMap,dr=new WeakMap,Xn=new WeakMap,Yr=new WeakMap,fr=new WeakMap,Xr=new WeakMap,Wr=new WeakMap,bn=new WeakMap,Fo=new WeakMap,tt=new WeakSet,af=function(){try{Te(this,Ct,_t(()=>y(this,cr).call(this,y(this,At))))}catch(t){this.error(t)}},lf=function(){const t=y(this,Jt).pending;t&&(Te(this,vt,_t(()=>t(y(this,At)))),rn(()=>{var n=rt(this,tt,Ds).call(this);Te(this,Ct,rt(this,tt,go).call(this,()=>(Tn.ensure(),_t(()=>y(this,cr).call(this,n))))),y(this,Xn)>0?rt(this,tt,vo).call(this):(gr(y(this,vt),()=>{Te(this,vt,null)}),this.is_pending=!1)}))},Ds=function(){var t=y(this,At);return this.is_pending&&(Te(this,Yn,on()),y(this,At).before(y(this,Yn)),t=y(this,Yn)),t},go=function(t){var n=ze,r=Ce,i=Re;Lt(y(this,Qt)),Ot(y(this,Qt)),qr(y(this,Qt).ctx);try{return t()}catch(o){return yu(o),null}finally{Lt(n),Ot(r),qr(i)}},vo=function(){const t=y(this,Jt).pending;y(this,Ct)!==null&&(Te(this,_n,document.createDocumentFragment()),y(this,_n).append(y(this,Yn)),Xu(y(this,Ct),y(this,_n))),y(this,vt)===null&&Te(this,vt,_t(()=>t(y(this,At))))},Os=function(t){var n;if(!this.has_pending_snippet()){this.parent&&rt(n=this.parent,tt,Os).call(n,t);return}if(Te(this,Xn,y(this,Xn)+t),y(this,Xn)===0){this.is_pending=!1;for(const r of y(this,Xr))qe(r,at),Xt(r);for(const r of y(this,Wr))qe(r,Dt),Xt(r);y(this,Xr).clear(),y(this,Wr).clear(),y(this,vt)&&gr(y(this,vt),()=>{Te(this,vt,null)}),y(this,_n)&&(y(this,At).before(y(this,_n)),Te(this,_n,null))}};function Iu(e,t,n,r){const i=Yi()?Xi:Wi;var o=e.filter(d=>!d.settled);if(n.length===0&&o.length===0){r(t.map(i));return}var s=Ae,a=ze,u=uf(),c=o.length===1?o[0].promise:o.length>1?Promise.all(o.map(d=>d.promise)):null;function f(d){u();try{r(d)}catch(g){a.f&Sn||Zr(g,a)}s==null||s.deactivate(),Ls()}if(n.length===0){c.then(()=>f(t.map(i)));return}function h(){u(),Promise.all(n.map(d=>cf(d))).then(d=>f([...t.map(i),...d])).catch(d=>Zr(d,a))}c?c.then(h):h()}function uf(){var e=ze,t=Ce,n=Re,r=Ae;return function(o=!0){Lt(e),Ot(t),qr(n),o&&(r==null||r.activate())}}function Ls(){Lt(null),Ot(null),qr(null)}function Xi(e){var t=st|at,n=Ce!==null&&Ce.f&st?Ce:null;return ze!==null&&(ze.f|=Tr),{ctx:Re,deps:null,effects:null,equals:du,f:t,fn:e,reactions:null,rv:0,v:$e,wv:0,parent:n??ze,ac:null}}function cf(e,t,n){let r=ze;r===null&&Nd();var i=r.b,o=void 0,s=Jn($e),a=!Ce,u=new Map;return Ef(()=>{var g;var c=nu();o=c.promise;try{Promise.resolve(e()).then(c.resolve,c.reject).then(()=>{f===Ae&&f.committed&&f.deactivate(),Ls()})}catch(v){c.reject(v),Ls()}var f=Ae;if(a){var h=i.is_rendered();i.update_pending_count(1),f.increment(h),(g=u.get(f))==null||g.reject(rr),u.delete(f),u.set(f,c)}const d=(v,m=void 0)=>{if(f.activate(),m)m!==rr&&(s.f|=qn,jr(s,m));else{s.f&qn&&(s.f^=qn),jr(s,v);for(const[_,x]of u){if(u.delete(_),_===f)break;x.reject(rr)}}a&&(i.update_pending_count(-1),f.decrement(h))};c.promise.then(d,v=>d(null,v||"unknown"))}),Go(()=>{for(const c of u.values())c.reject(rr)}),new Promise(c=>{function f(h){function d(){h===o?c(s):f(o)}h.then(d,d)}f(o)})}function S(e){const t=Xi(e);return Wu(t),t}function Wi(e){const t=Xi(e);return t.equals=hu,t}function df(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)et(t[n])}}function ff(e){for(var t=e.parent;t!==null;){if(!(t.f&st))return t.f&Sn?null:t;t=t.parent}return null}function ga(e){var t,n=ze;Lt(ff(e));try{e.f&=~pr,df(e),t=Zu(e)}finally{Lt(n)}return t}function Su(e){var t=ga(e);if(!e.equals(t)&&(e.wv=Uu(),(!(Ae!=null&&Ae.is_fork)||e.deps===null)&&(e.v=t,e.deps===null))){qe(e,Qe);return}Qn||(it!==null?(va()||Ae!=null&&Ae.is_fork)&&it.set(e,t):ha(e))}function hf(e){var t,n;if(e.effects!==null)for(const r of e.effects)(r.teardown||r.ac)&&((t=r.teardown)==null||t.call(r),(n=r.ac)==null||n.abort(rr),r.teardown=Sr,r.ac=null,Ni(r,0),ya(r))}function Tu(e){if(e.effects!==null)for(const t of e.effects)t.teardown&&mr(t)}let zs=new Set;const Zn=new Map;let ku=!1;function Jn(e,t){var n={f:0,v:e,reactions:null,equals:du,rv:0,wv:0};return n}function Ve(e,t){const n=Jn(e);return Wu(n),n}function ue(e,t=!1,n=!0){var i;const r=Jn(e);return t||(r.equals=hu),oi&&n&&Re!==null&&Re.l!==null&&((i=Re.l).s??(i.s=[])).push(r),r}function I(e,t,n=!1){Ce!==null&&(!Wt||Ce.f&Ga)&&Yi()&&Ce.f&(st|Mn|la|Ga)&&(Pt===null||!Ur.call(Pt,e))&&Dd();let r=n?Gn(t):t;return jr(e,r)}function jr(e,t){if(!e.equals(t)){var n=e.v;Qn?Zn.set(e,t):Zn.set(e,n),e.v=t;var r=Tn.ensure();if(r.capture(e,n),e.f&st){const i=e;e.f&at&&ga(i),ha(i)}e.wv=Uu(),Au(e,at),Yi()&&ze!==null&&ze.f&Qe&&!(ze.f&(qt|er))&&(kt===null?Sf([e]):kt.push(e)),!r.is_fork&&zs.size>0&&!ku&&gf()}return t}function gf(){ku=!1;for(const e of zs)e.f&Qe&&qe(e,Dt),li(e)&&mr(e);zs.clear()}function qa(e,t=1){var n=l(e),r=t===1?n++:n--;return I(e,n),r}function bi(e){I(e,e.v+1)}function Au(e,t){var n=e.reactions;if(n!==null)for(var r=Yi(),i=n.length,o=0;o<i;o++){var s=n[o],a=s.f;if(!(!r&&s===ze)){var u=(a&at)===0;if(u&&qe(s,t),a&st){var c=s;it==null||it.delete(c),a&pr||(a&Mt&&(s.f|=pr),Au(c,Dt))}else u&&(a&Mn&&Bt!==null&&Bt.add(s),Xt(s))}}}function Gn(e){if(typeof e!="object"||e===null||nn in e)return e;const t=Ko(e);if(t!==tu&&t!==xd)return e;var n=new Map,r=Bi(e),i=Ve(0),o=vr,s=a=>{if(vr===o)return a();var u=Ce,c=vr;Ot(null),Qa(o);var f=a();return Ot(u),Qa(c),f};return r&&n.set("length",Ve(e.length)),new Proxy(e,{defineProperty(a,u,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&Md();var f=n.get(u);return f===void 0?s(()=>{var h=Ve(c.value);return n.set(u,h),h}):I(f,c.value,!0),!0},deleteProperty(a,u){var c=n.get(u);if(c===void 0){if(u in a){const f=s(()=>Ve($e));n.set(u,f),bi(i)}}else I(c,$e),bi(i);return!0},get(a,u,c){var g;if(u===nn)return e;var f=n.get(u),h=u in a;if(f===void 0&&(!h||(g=Un(a,u))!=null&&g.writable)&&(f=s(()=>{var v=Gn(h?a[u]:$e),m=Ve(v);return m}),n.set(u,f)),f!==void 0){var d=l(f);return d===$e?void 0:d}return Reflect.get(a,u,c)},getOwnPropertyDescriptor(a,u){var c=Reflect.getOwnPropertyDescriptor(a,u);if(c&&"value"in c){var f=n.get(u);f&&(c.value=l(f))}else if(c===void 0){var h=n.get(u),d=h==null?void 0:h.v;if(h!==void 0&&d!==$e)return{enumerable:!0,configurable:!0,value:d,writable:!0}}return c},has(a,u){var d;if(u===nn)return!0;var c=n.get(u),f=c!==void 0&&c.v!==$e||Reflect.has(a,u);if(c!==void 0||ze!==null&&(!f||(d=Un(a,u))!=null&&d.writable)){c===void 0&&(c=s(()=>{var g=f?Gn(a[u]):$e,v=Ve(g);return v}),n.set(u,c));var h=l(c);if(h===$e)return!1}return f},set(a,u,c,f){var P;var h=n.get(u),d=u in a;if(r&&u==="length")for(var g=c;g<h.v;g+=1){var v=n.get(g+"");v!==void 0?I(v,$e):g in a&&(v=s(()=>Ve($e)),n.set(g+"",v))}if(h===void 0)(!d||(P=Un(a,u))!=null&&P.writable)&&(h=s(()=>Ve(void 0)),I(h,Gn(c)),n.set(u,h));else{d=h.v!==$e;var m=s(()=>Gn(c));I(h,m)}var _=Reflect.getOwnPropertyDescriptor(a,u);if(_!=null&&_.set&&_.set.call(f,c),!d){if(r&&typeof u=="string"){var x=n.get("length"),C=Number(u);Number.isInteger(C)&&C>=x.v&&I(x,C+1)}bi(i)}return!0},ownKeys(a){l(i);var u=Reflect.ownKeys(a).filter(h=>{var d=n.get(h);return d===void 0||d.v!==$e});for(var[c,f]of n)f.v!==$e&&!(c in a)&&u.push(c);return u},setPrototypeOf(){Pd()}})}function Za(e){try{if(e!==null&&typeof e=="object"&&nn in e)return e[nn]}catch{}return e}function vf(e,t){return Object.is(Za(e),Za(t))}var gt,Cu,Mu,Pu;function yf(){if(gt===void 0){gt=window,Cu=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;Mu=Un(t,"firstChild").get,Pu=Un(t,"nextSibling").get,Wa(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Wa(n)&&(n.__t=void 0)}}function on(e=""){return document.createTextNode(e)}function xn(e){return Mu.call(e)}function Gi(e){return Pu.call(e)}function ce(e,t){return xn(e)}function Ke(e,t=!1){{var n=xn(e);return n instanceof Comment&&n.data===""?Gi(n):n}}function Se(e,t=1,n=!1){let r=e;for(;t--;)r=Gi(r);return r}function pf(e){e.textContent=""}function Du(){return!1}function Ou(e,t,n){return document.createElementNS(t??cu,e,void 0)}function mf(e,t){if(t){const n=document.body;e.autofocus=!0,rn(()=>{document.activeElement===n&&e.focus()})}}let ja=!1;function _f(){ja||(ja=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function Wo(e){var t=Ce,n=ze;Ot(null),Lt(null);try{return e()}finally{Ot(t),Lt(n)}}function bf(e,t,n,r=n){e.addEventListener(t,()=>Wo(n));const i=e.__on_r;i?e.__on_r=()=>{i(),r(!0)}:e.__on_r=()=>r(!0),_f()}function Lu(e){ze===null&&(Ce===null&&kd(),Td()),Qn&&Sd()}function xf(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Ft(e,t,n){var r=ze;r!==null&&r.f&It&&(e|=It);var i={ctx:Re,deps:null,nodes:null,f:e|at|Mt,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(n)try{mr(i)}catch(a){throw et(i),a}else t!==null&&Xt(i);var o=i;if(n&&o.deps===null&&o.teardown===null&&o.nodes===null&&o.first===o.last&&!(o.f&Tr)&&(o=o.first,e&Mn&&e&kn&&o!==null&&(o.f|=kn)),o!==null&&(o.parent=r,r!==null&&xf(o,r),Ce!==null&&Ce.f&st&&!(e&er))){var s=Ce;(s.effects??(s.effects=[])).push(o)}return i}function va(){return Ce!==null&&!Wt}function Go(e){const t=Ft(Hi,null,!1);return qe(t,Qe),t.teardown=e,t}function an(e){Lu();var t=ze.f,n=!Ce&&(t&qt)!==0&&(t&Ki)===0;if(n){var r=Re;(r.e??(r.e=[])).push(e)}else return zu(e)}function zu(e){return Ft(Ei|ou,e,!1)}function Fu(e){return Lu(),Ft(Hi|ou,e,!0)}function Ru(e){Tn.ensure();const t=Ft(er|Tr,e,!0);return()=>{et(t)}}function wf(e){Tn.ensure();const t=Ft(er|Tr,e,!0);return(n={})=>new Promise(r=>{n.outro?gr(t,()=>{et(t),r(void 0)}):(et(t),r(void 0))})}function Ui(e){return Ft(Ei,e,!1)}function ve(e,t){var n=Re,r={effect:null,ran:!1,deps:e};n.l.$.push(r),r.effect=si(()=>{e(),!r.ran&&(r.ran=!0,xe(t))})}function Rt(){var e=Re;si(()=>{for(var t of e.l.$){t.deps();var n=t.effect;n.f&Qe&&n.deps!==null&&qe(n,Dt),li(n)&&mr(n),t.ran=!1}})}function Ef(e){return Ft(la|Tr,e,!0)}function si(e,t=0){return Ft(Hi|t,e,!0)}function Ee(e,t=[],n=[],r=[]){Iu(r,t,n,i=>{Ft(Hi,()=>e(...i.map(l)),!0)})}function ai(e,t=0){var n=Ft(Mn|t,e,!0);return n}function Vu(e,t=0){var n=Ft(aa|t,e,!0);return n}function _t(e){return Ft(qt|Tr,e,!0)}function Bu(e){var t=e.teardown;if(t!==null){const n=Qn,r=Ce;Ja(!0),Ot(null);try{t.call(null)}finally{Ja(n),Ot(r)}}}function ya(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const i=n.ac;i!==null&&Wo(()=>{i.abort(rr)});var r=n.next;n.f&er?n.parent=null:et(n,t),n=r}}function Nf(e){for(var t=e.first;t!==null;){var n=t.next;t.f&qt||et(t),t=n}}function et(e,t=!0){var n=!1;(t||e.f&iu)&&e.nodes!==null&&e.nodes.end!==null&&(If(e.nodes.start,e.nodes.end),n=!0),ya(e,t&&!n),Ni(e,0),qe(e,Sn);var r=e.nodes&&e.nodes.t;if(r!==null)for(const o of r)o.stop();Bu(e);var i=e.parent;i!==null&&i.first!==null&&Hu(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function If(e,t){for(;e!==null;){var n=e===t?null:Gi(e);e.remove(),e=n}}function Hu(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function gr(e,t,n=!0){var r=[];Ku(e,r,!0);var i=()=>{n&&et(e),t&&t()},o=r.length;if(o>0){var s=()=>--o||i();for(var a of r)a.out(s)}else i()}function Ku(e,t,n){if(!(e.f&It)){e.f^=It;var r=e.nodes&&e.nodes.t;if(r!==null)for(const a of r)(a.is_global||n)&&t.push(a);for(var i=e.first;i!==null;){var o=i.next,s=(i.f&kn)!==0||(i.f&qt)!==0&&(e.f&Mn)!==0;Ku(i,t,s?n:!1),i=o}}}function pa(e){Yu(e,!0)}function Yu(e,t){if(e.f&It){e.f^=It,e.f&Qe||(qe(e,at),Xt(e));for(var n=e.first;n!==null;){var r=n.next,i=(n.f&kn)!==0||(n.f&qt)!==0;Yu(n,i?t:!1),n=r}var o=e.nodes&&e.nodes.t;if(o!==null)for(const s of o)(s.is_global||t)&&s.in()}}function Xu(e,t){if(e.nodes)for(var n=e.nodes.start,r=e.nodes.end;n!==null;){var i=n===r?null:Gi(n);t.append(n),n=i}}let yo=!1,Qn=!1;function Ja(e){Qn=e}let Ce=null,Wt=!1;function Ot(e){Ce=e}let ze=null;function Lt(e){ze=e}let Pt=null;function Wu(e){Ce!==null&&(Pt===null?Pt=[e]:Pt.push(e))}let mt=null,Et=0,kt=null;function Sf(e){kt=e}let Gu=1,or=0,vr=or;function Qa(e){vr=e}function Uu(){return++Gu}function li(e){var t=e.f;if(t&at)return!0;if(t&st&&(e.f&=~pr),t&Dt){for(var n=e.deps,r=n.length,i=0;i<r;i++){var o=n[i];if(li(o)&&Su(o),o.wv>e.wv)return!0}t&Mt&&it===null&&qe(e,Qe)}return!1}function qu(e,t,n=!0){var r=e.reactions;if(r!==null&&!(Pt!==null&&Ur.call(Pt,e)))for(var i=0;i<r.length;i++){var o=r[i];o.f&st?qu(o,t,!1):t===o&&(n?qe(o,at):o.f&Qe&&qe(o,Dt),Xt(o))}}function Zu(e){var m;var t=mt,n=Et,r=kt,i=Ce,o=Pt,s=Re,a=Wt,u=vr,c=e.f;mt=null,Et=0,kt=null,Ce=c&(qt|er)?null:e,Pt=null,qr(e.ctx),Wt=!1,vr=++or,e.ac!==null&&(Wo(()=>{e.ac.abort(rr)}),e.ac=null);try{e.f|=ks;var f=e.fn,h=f();e.f|=Ki;var d=e.deps,g=Ae==null?void 0:Ae.is_fork;if(mt!==null){var v;if(g||Ni(e,Et),d!==null&&Et>0)for(d.length=Et+mt.length,v=0;v<mt.length;v++)d[Et+v]=mt[v];else e.deps=d=mt;if(va()&&e.f&Mt)for(v=Et;v<d.length;v++)((m=d[v]).reactions??(m.reactions=[])).push(e)}else!g&&d!==null&&Et<d.length&&(Ni(e,Et),d.length=Et);if(Yi()&&kt!==null&&!Wt&&d!==null&&!(e.f&(st|Dt|at)))for(v=0;v<kt.length;v++)qu(kt[v],e);if(i!==null&&i!==e){if(or++,i.deps!==null)for(let _=0;_<n;_+=1)i.deps[_].rv=or;if(t!==null)for(const _ of t)_.rv=or;kt!==null&&(r===null?r=kt:r.push(...kt))}return e.f&qn&&(e.f^=qn),h}catch(_){return yu(_)}finally{e.f^=ks,mt=t,Et=n,kt=r,Ce=i,Pt=o,qr(s),Wt=a,vr=u}}function Tf(e,t){let n=t.reactions;if(n!==null){var r=_d.call(n,e);if(r!==-1){var i=n.length-1;i===0?n=t.reactions=null:(n[r]=n[i],n.pop())}}if(n===null&&t.f&st&&(mt===null||!Ur.call(mt,t))){var o=t;o.f&Mt&&(o.f^=Mt,o.f&=~pr),ha(o),hf(o),Ni(o,0)}}function Ni(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)Tf(e,n[r])}function mr(e){var t=e.f;if(!(t&Sn)){qe(e,Qe);var n=ze,r=yo;ze=e,yo=!0;try{t&(Mn|aa)?Nf(e):ya(e),Bu(e);var i=Zu(e);e.teardown=typeof i=="function"?i:null,e.wv=Gu;var o;Ss&&qd&&e.f&at&&e.deps}finally{yo=r,ze=n}}}async function Uo(){await Promise.resolve(),tf()}function l(e){var t=e.f,n=(t&st)!==0;if(Ce!==null&&!Wt){var r=ze!==null&&(ze.f&Sn)!==0;if(!r&&(Pt===null||!Ur.call(Pt,e))){var i=Ce.deps;if(Ce.f&ks)e.rv<or&&(e.rv=or,mt===null&&i!==null&&i[Et]===e?Et++:mt===null?mt=[e]:mt.push(e));else{(Ce.deps??(Ce.deps=[])).push(e);var o=e.reactions;o===null?e.reactions=[Ce]:Ur.call(o,Ce)||o.push(Ce)}}}if(Qn&&Zn.has(e))return Zn.get(e);if(n){var s=e;if(Qn){var a=s.v;return(!(s.f&Qe)&&s.reactions!==null||Ju(s))&&(a=ga(s)),Zn.set(s,a),a}var u=(s.f&Mt)===0&&!Wt&&Ce!==null&&(yo||(Ce.f&Mt)!==0),c=(s.f&Ki)===0;li(s)&&(u&&(s.f|=Mt),Su(s)),u&&!c&&(Tu(s),ju(s))}if(it!=null&&it.has(e))return it.get(e);if(e.f&qn)throw e.v;return e.v}function ju(e){if(e.f|=Mt,e.deps!==null)for(const t of e.deps)(t.reactions??(t.reactions=[])).push(e),t.f&st&&!(t.f&Mt)&&(Tu(t),ju(t))}function Ju(e){if(e.v===$e)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Zn.has(t)||t.f&st&&Ju(t))return!0;return!1}function xe(e){var t=Wt;try{return Wt=!0,e()}finally{Wt=t}}function kf(e,t){var n={};for(var r in e)t.includes(r)||(n[r]=e[r]);for(var i of Object.getOwnPropertySymbols(e))Object.propertyIsEnumerable.call(e,i)&&!t.includes(i)&&(n[i]=e[i]);return n}function fe(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(nn in e)Fs(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&nn in n&&Fs(n)}}}function Fs(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{Fs(e[r],t)}catch{}const n=Ko(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=eu(n);for(let i in r){const o=r[i].get;if(o)try{o.call(e)}catch{}}}}}function Af(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const Cf=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function Mf(e){return Cf.includes(e)}const Pf={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function Df(e){return e=e.toLowerCase(),Pf[e]??e}const Of=["touchstart","touchmove"];function Lf(e){return Of.includes(e)}const Qu=new Set,Rs=new Set;function ma(e,t,n,r={}){function i(o){if(r.capture||Bs.call(t,o),!o.cancelBubble)return Wo(()=>n==null?void 0:n.call(this,o))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?rn(()=>{t.addEventListener(e,i,r)}):t.addEventListener(e,i,r),i}function Vs(e,t,n,r={}){var i=ma(t,e,n,r);return()=>{e.removeEventListener(t,i,r)}}function $n(e,t,n,r,i){var o={capture:r,passive:i},s=ma(e,t,n,o);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Go(()=>{t.removeEventListener(e,s,o)})}function Vt(e){for(var t=0;t<e.length;t++)Qu.add(e[t]);for(var n of Rs)n(e)}let $a=null;function Bs(e){var _;var t=this,n=t.ownerDocument,r=e.type,i=((_=e.composedPath)==null?void 0:_.call(e))||[],o=i[0]||e.target;$a=e;var s=0,a=$a===e&&e.__root;if(a){var u=i.indexOf(a);if(u!==-1&&(t===document||t===window)){e.__root=t;return}var c=i.indexOf(t);if(c===-1)return;u<=c&&(s=u)}if(o=i[s]||e.target,o!==t){bd(e,"currentTarget",{configurable:!0,get(){return o||n}});var f=Ce,h=ze;Ot(null),Lt(null);try{for(var d,g=[];o!==null;){var v=o.assignedSlot||o.parentNode||o.host||null;try{var m=o["__"+r];m!=null&&(!o.disabled||e.target===o)&&m.call(o,e)}catch(x){d?g.push(x):d=x}if(e.cancelBubble||v===t||v===null)break;o=v}if(d){for(let x of g)queueMicrotask(()=>{throw x});throw d}}finally{e.__root=t,delete e.currentTarget,Ot(f),Lt(h)}}}var Jl,Ql;const cs=(Ql=(Jl=globalThis==null?void 0:globalThis.window)==null?void 0:Jl.trustedTypes)==null?void 0:Ql.createPolicy("svelte-trusted-html",{createHTML:e=>e});function zf(e){return(cs==null?void 0:cs.createHTML(e))??e}function $u(e,t=!1){var n=Ou("template");return e=e.replaceAll("<!>","<!---->"),n.innerHTML=t?zf(e):e,n.content}function _r(e,t){var n=ze;n.nodes===null&&(n.nodes={start:e,end:t,a:null,t:null})}function me(e,t){var n=(t&uu)!==0,r=(t&Yd)!==0,i,o=!e.startsWith("<!>");return()=>{i===void 0&&(i=$u(o?e:"<!>"+e,!0),n||(i=xn(i)));var s=r||Cu?document.importNode(i,!0):i.cloneNode(!0);if(n){var a=xn(s),u=s.lastChild;_r(a,u)}else _r(s,s);return s}}function Ff(e,t,n="svg"){var r=!e.startsWith("<!>"),i=(t&uu)!==0,o=`<${n}>${r?e:"<!>"+e}</${n}>`,s;return()=>{if(!s){var a=$u(o,!0),u=xn(a);if(i)for(s=document.createDocumentFragment();xn(u);)s.appendChild(xn(u));else s=xn(u)}var c=s.cloneNode(!0);if(i){var f=xn(c),h=c.lastChild;_r(f,h)}else _r(c,c);return c}}function Tt(e,t){return Ff(e,t,"svg")}function Rf(e=""){{var t=on(e+"");return _r(t,t),t}}function ot(){var e=document.createDocumentFragment(),t=document.createComment(""),n=on();return e.append(t,n),_r(t,n),e}function oe(e,t){e!==null&&e.before(t)}function We(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n+"")}function Vf(e,t){return Bf(e,t)}const to=new Map;function Bf(e,{target:t,anchor:n,props:r={},events:i,context:o,intro:s=!0}){yf();var a=new Set,u=h=>{for(var d=0;d<h.length;d++){var g=h[d];if(!a.has(g)){a.add(g);var v=Lf(g);for(const x of[t,document]){var m=to.get(x);m===void 0&&(m=new Map,to.set(x,m));var _=m.get(g);_===void 0?(x.addEventListener(g,Bs,{passive:v}),m.set(g,1)):m.set(g,_+1)}}}};u(Ho(Qu)),Rs.add(u);var c=void 0,f=wf(()=>{var h=n??t.appendChild(on());return of(h,{pending:()=>{}},d=>{Ne({});var g=Re;o&&(g.c=o),i&&(r.$$events=i),c=e(d,r)||{},Ie()}),()=>{var m;for(var d of a)for(const _ of[t,document]){var g=to.get(_),v=g.get(d);--v==0?(_.removeEventListener(d,Bs),g.delete(d),g.size===0&&to.delete(_)):g.set(d,v)}Rs.delete(u),h!==n&&((m=h.parentNode)==null||m.removeChild(h))}});return Hf.set(c,f),c}let Hf=new WeakMap;var Ht,en,Nt,hr,Li,zi,Ro;class qo{constructor(t,n=!0){He(this,"anchor");X(this,Ht,new Map);X(this,en,new Map);X(this,Nt,new Map);X(this,hr,new Set);X(this,Li,!0);X(this,zi,()=>{var t=Ae;if(y(this,Ht).has(t)){var n=y(this,Ht).get(t),r=y(this,en).get(n);if(r)pa(r),y(this,hr).delete(n);else{var i=y(this,Nt).get(n);i&&(y(this,en).set(n,i.effect),y(this,Nt).delete(n),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),r=i.effect)}for(const[o,s]of y(this,Ht)){if(y(this,Ht).delete(o),o===t)break;const a=y(this,Nt).get(s);a&&(et(a.effect),y(this,Nt).delete(s))}for(const[o,s]of y(this,en)){if(o===n||y(this,hr).has(o))continue;const a=()=>{if(Array.from(y(this,Ht).values()).includes(o)){var c=document.createDocumentFragment();Xu(s,c),c.append(on()),y(this,Nt).set(o,{effect:s,fragment:c})}else et(s);y(this,hr).delete(o),y(this,en).delete(o)};y(this,Li)||!r?(y(this,hr).add(o),gr(s,a,!1)):a()}}});X(this,Ro,t=>{y(this,Ht).delete(t);const n=Array.from(y(this,Ht).values());for(const[r,i]of y(this,Nt))n.includes(r)||(et(i.effect),y(this,Nt).delete(r))});this.anchor=t,Te(this,Li,n)}ensure(t,n){var r=Ae,i=Du();if(n&&!y(this,en).has(t)&&!y(this,Nt).has(t))if(i){var o=document.createDocumentFragment(),s=on();o.append(s),y(this,Nt).set(t,{effect:_t(()=>n(s)),fragment:o})}else y(this,en).set(t,_t(()=>n(this.anchor)));if(y(this,Ht).set(r,t),i){for(const[a,u]of y(this,en))a===t?r.unskip_effect(u):r.skip_effect(u);for(const[a,u]of y(this,Nt))a===t?r.unskip_effect(u.effect):r.skip_effect(u.effect);r.oncommit(y(this,zi)),r.ondiscard(y(this,Ro))}else y(this,zi).call(this)}}Ht=new WeakMap,en=new WeakMap,Nt=new WeakMap,hr=new WeakMap,Li=new WeakMap,zi=new WeakMap,Ro=new WeakMap;function Ye(e,t,n=!1){var r=new qo(e),i=n?kn:0;function o(s,a){r.ensure(s,a)}ai(()=>{var s=!1;t((a,u=0)=>{s=!0,o(u,a)}),s||o(!1,null)},i)}function br(e,t){return t}function Kf(e,t,n){for(var r=[],i=t.length,o,s=t.length,a=0;a<i;a++){let h=t[a];gr(h,()=>{if(o){if(o.pending.delete(h),o.done.add(h),o.pending.size===0){var d=e.outrogroups;Hs(Ho(o.done)),d.delete(o),d.size===0&&(e.outrogroups=null)}}else s-=1},!1)}if(s===0){var u=r.length===0&&n!==null;if(u){var c=n,f=c.parentNode;pf(f),f.append(c),e.items.clear()}Hs(t,!u)}else o={pending:new Set(t),done:new Set},(e.outrogroups??(e.outrogroups=new Set)).add(o)}function Hs(e,t=!0){for(var n=0;n<e.length;n++)et(e[n],t)}var el;function ln(e,t,n,r,i,o=null){var s=e,a=new Map,u=(t&au)!==0;if(u){var c=e;s=c.appendChild(on())}var f=null,h=Wi(()=>{var x=n();return Bi(x)?x:x==null?[]:Ho(x)}),d,g=!0;function v(){_.fallback=f,Yf(_,d,s,t,r),f!==null&&(d.length===0?f.f&En?(f.f^=En,yi(f,null,s)):pa(f):gr(f,()=>{f=null}))}var m=ai(()=>{d=l(h);for(var x=d.length,C=new Set,P=Ae,b=Du(),k=0;k<x;k+=1){var L=d[k],j=r(L,k),D=g?null:a.get(j);D?(D.v&&jr(D.v,L),D.i&&jr(D.i,k),b&&P.unskip_effect(D.e)):(D=Xf(a,g?s:el??(el=on()),L,j,k,i,t,n),g||(D.e.f|=En),a.set(j,D)),C.add(j)}if(x===0&&o&&!f&&(g?f=_t(()=>o(s)):(f=_t(()=>o(el??(el=on()))),f.f|=En)),x>C.size&&Id(),!g)if(b){for(const[R,$]of a)C.has(R)||P.skip_effect($.e);P.oncommit(v),P.ondiscard(()=>{})}else v();l(h)}),_={effect:m,items:a,outrogroups:null,fallback:f};g=!1}function hi(e){for(;e!==null&&!(e.f&qt);)e=e.next;return e}function Yf(e,t,n,r,i){var $,M,E,O,p,A,N,z,V;var o=(r&Fd)!==0,s=t.length,a=e.items,u=hi(e.effect.first),c,f=null,h,d=[],g=[],v,m,_,x;if(o)for(x=0;x<s;x+=1)v=t[x],m=i(v,x),_=a.get(m).e,_.f&En||((M=($=_.nodes)==null?void 0:$.a)==null||M.measure(),(h??(h=new Set)).add(_));for(x=0;x<s;x+=1){if(v=t[x],m=i(v,x),_=a.get(m).e,e.outrogroups!==null)for(const G of e.outrogroups)G.pending.delete(_),G.done.delete(_);if(_.f&En)if(_.f^=En,_===u)yi(_,null,n);else{var C=f?f.next:u;_===e.effect.last&&(e.effect.last=_.prev),_.prev&&(_.prev.next=_.next),_.next&&(_.next.prev=_.prev),Rn(e,f,_),Rn(e,_,C),yi(_,C,n),f=_,d=[],g=[],u=hi(f.next);continue}if(_.f&It&&(pa(_),o&&((O=(E=_.nodes)==null?void 0:E.a)==null||O.unfix(),(h??(h=new Set)).delete(_))),_!==u){if(c!==void 0&&c.has(_)){if(d.length<g.length){var P=g[0],b;f=P.prev;var k=d[0],L=d[d.length-1];for(b=0;b<d.length;b+=1)yi(d[b],P,n);for(b=0;b<g.length;b+=1)c.delete(g[b]);Rn(e,k.prev,L.next),Rn(e,f,k),Rn(e,L,P),u=P,f=L,x-=1,d=[],g=[]}else c.delete(_),yi(_,u,n),Rn(e,_.prev,_.next),Rn(e,_,f===null?e.effect.first:f.next),Rn(e,f,_),f=_;continue}for(d=[],g=[];u!==null&&u!==_;)(c??(c=new Set)).add(u),g.push(u),u=hi(u.next);if(u===null)continue}_.f&En||d.push(_),f=_,u=hi(_.next)}if(e.outrogroups!==null){for(const G of e.outrogroups)G.pending.size===0&&(Hs(Ho(G.done)),(p=e.outrogroups)==null||p.delete(G));e.outrogroups.size===0&&(e.outrogroups=null)}if(u!==null||c!==void 0){var j=[];if(c!==void 0)for(_ of c)_.f&It||j.push(_);for(;u!==null;)!(u.f&It)&&u!==e.fallback&&j.push(u),u=hi(u.next);var D=j.length;if(D>0){var R=r&au&&s===0?n:null;if(o){for(x=0;x<D;x+=1)(N=(A=j[x].nodes)==null?void 0:A.a)==null||N.measure();for(x=0;x<D;x+=1)(V=(z=j[x].nodes)==null?void 0:z.a)==null||V.fix()}Kf(e,j,R)}}o&&rn(()=>{var G,H;if(h!==void 0)for(_ of h)(H=(G=_.nodes)==null?void 0:G.a)==null||H.apply()})}function Xf(e,t,n,r,i,o,s,a){var u=s&Ld?s&Rd?Jn(n):ue(n,!1,!1):null,c=s&zd?Jn(i):null;return{v:u,i:c,e:_t(()=>(o(t,u??n,c??i,a),()=>{e.delete(r)}))}}function yi(e,t,n){if(e.nodes)for(var r=e.nodes.start,i=e.nodes.end,o=t&&!(t.f&En)?t.nodes.start:n;r!==null;){var s=Gi(r);if(o.before(r),r===i)return;r=s}}function Rn(e,t,n){t===null?e.effect.first=n:t.next=n,n===null?e.effect.last=t:n.prev=t}function _a(e,t,n,r,i){var a;var o=(a=t.$$slots)==null?void 0:a[n],s=!1;o===!0&&(o=t.children,s=!0),o===void 0||o(e,s?()=>r:r)}function Pn(e,t,...n){var r=new qo(e);ai(()=>{const i=t()??null;r.ensure(i,i&&(o=>i(o,...n)))},kn)}function ba(e,t,n){var r=new qo(e);ai(()=>{var i=t()??null;r.ensure(i,i&&(o=>n(o,i)))},kn)}function Wf(e,t,n,r,i,o){var s=null,a=e,u=new qo(a,!1);ai(()=>{const c=t()||null;var f=Xd;if(c===null){u.ensure(null,null);return}return u.ensure(c,h=>{if(c){if(s=Ou(c,f),_r(s,s),r){var d=s.appendChild(on());r(s,d)}ze.nodes.end=s,h.before(s)}}),()=>{}},kn),Go(()=>{})}function yt(e,t,n){Ui(()=>{var r=xe(()=>t(e,n==null?void 0:n())||{});if(n&&(r!=null&&r.update)){var i=!1,o={};si(()=>{var s=n();fe(s),i&&fu(o,s)&&(o=s,r.update(s))}),i=!0}if(r!=null&&r.destroy)return()=>r.destroy()})}function Gf(e,t){var n=void 0,r;Vu(()=>{n!==(n=t())&&(r&&(et(r),r=null),n&&(r=_t(()=>{Ui(()=>n(e))})))})}function ec(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=ec(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Uf(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=ec(e))&&(r&&(r+=" "),r+=t);return r}function kr(e){return typeof e=="object"?Uf(e):e??""}const tl=[...` 	
\r\fÂ \v\uFEFF`];function qf(e,t,n){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),n){for(var i in n)if(n[i])r=r?r+" "+i:i;else if(r.length)for(var o=i.length,s=0;(s=r.indexOf(i,s))>=0;){var a=s+o;(s===0||tl.includes(r[s-1]))&&(a===r.length||tl.includes(r[a]))?r=(s===0?"":r.substring(0,s))+r.substring(a+1):s=a}}return r===""?null:r}function nl(e,t=!1){var n=t?" !important;":";",r="";for(var i in e){var o=e[i];o!=null&&o!==""&&(r+=" "+i+": "+o+n)}return r}function ds(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function Zf(e,t){if(t){var n="",r,i;if(Array.isArray(t)?(r=t[0],i=t[1]):r=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var o=!1,s=0,a=!1,u=[];r&&u.push(...Object.keys(r).map(ds)),i&&u.push(...Object.keys(i).map(ds));var c=0,f=-1;const m=e.length;for(var h=0;h<m;h++){var d=e[h];if(a?d==="/"&&e[h-1]==="*"&&(a=!1):o?o===d&&(o=!1):d==="/"&&e[h+1]==="*"?a=!0:d==='"'||d==="'"?o=d:d==="("?s++:d===")"&&s--,!a&&o===!1&&s===0){if(d===":"&&f===-1)f=h;else if(d===";"||h===m-1){if(f!==-1){var g=ds(e.substring(c,f).trim());if(!u.includes(g)){d!==";"&&h++;var v=e.substring(c,h).trim();n+=" "+v+";"}}c=h+1,f=-1}}}}return r&&(n+=nl(r)),i&&(n+=nl(i,!0)),n=n.trim(),n===""?null:n}return e==null?null:String(e)}function Dn(e,t,n,r,i,o){var s=e.__className;if(s!==n||s===void 0){var a=qf(n,r,o);a==null?e.removeAttribute("class"):t?e.className=a:e.setAttribute("class",a),e.__className=n}else if(o&&i!==o)for(var u in o){var c=!!o[u];(i==null||c!==!!i[u])&&e.classList.toggle(u,c)}return o}function fs(e,t={},n,r){for(var i in n){var o=n[i];t[i]!==o&&(n[i]==null?e.style.removeProperty(i):e.style.setProperty(i,o,r))}}function zt(e,t,n,r){var i=e.__style;if(i!==t){var o=Zf(t,r);o==null?e.removeAttribute("style"):e.style.cssText=o,e.__style=t}else r&&(Array.isArray(r)?(fs(e,n==null?void 0:n[0],r[0]),fs(e,n==null?void 0:n[1],r[1],"important")):fs(e,n,r));return r}function Ks(e,t,n=!1){if(e.multiple){if(t==null)return;if(!Bi(t))return Gd();for(var r of e.options)r.selected=t.includes(rl(r));return}for(r of e.options){var i=rl(r);if(vf(i,t)){r.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function jf(e){var t=new MutationObserver(()=>{Ks(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Go(()=>{t.disconnect()})}function rl(e){return"__value"in e?e.__value:e.value}const Bn=Symbol("class"),Hn=Symbol("style"),tc=Symbol("is custom element"),nc=Symbol("is html"),Jf=ua?"option":"OPTION",Qf=ua?"select":"SELECT",$f=ua?"progress":"PROGRESS";function Ut(e,t){var n=Zo(e);n.value===(n.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!==$f)||(e.value=t??"")}function rc(e,t){var n=Zo(e);n.checked!==(n.checked=t??void 0)&&(e.checked=t)}function eh(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function he(e,t,n,r){var i=Zo(e);i[t]!==(i[t]=n)&&(t==="loading"&&(e[Ed]=n),n==null?e.removeAttribute(t):typeof n!="string"&&ic(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function th(e,t,n,r,i=!1,o=!1){var s=Zo(e),a=s[tc],u=!s[nc],c=t||{},f=e.nodeName===Jf;for(var h in t)h in n||(n[h]=null);n.class?n.class=kr(n.class):(r||n[Bn])&&(n.class=null),n[Hn]&&(n.style??(n.style=null));var d=ic(e);for(const b in n){let k=n[b];if(f&&b==="value"&&k==null){e.value=e.__value="",c[b]=k;continue}if(b==="class"){var g=e.namespaceURI==="http://www.w3.org/1999/xhtml";Dn(e,g,k,r,t==null?void 0:t[Bn],n[Bn]),c[b]=k,c[Bn]=n[Bn];continue}if(b==="style"){zt(e,k,t==null?void 0:t[Hn],n[Hn]),c[b]=k,c[Hn]=n[Hn];continue}var v=c[b];if(!(k===v&&!(k===void 0&&e.hasAttribute(b)))){c[b]=k;var m=b[0]+b[1];if(m!=="$$")if(m==="on"){const L={},j="$$"+b;let D=b.slice(2);var _=Mf(D);if(Af(D)&&(D=D.slice(0,-7),L.capture=!0),!_&&v){if(k!=null)continue;e.removeEventListener(D,c[j],L),c[j]=null}if(k!=null)if(_)e[`__${D}`]=k,Vt([D]);else{let R=function($){c[b].call(this,$)};var P=R;c[j]=ma(D,e,R,L)}else _&&(e[`__${D}`]=void 0)}else if(b==="style")he(e,b,k);else if(b==="autofocus")mf(e,!!k);else if(!a&&(b==="__value"||b==="value"&&k!=null))e.value=e.__value=k;else if(b==="selected"&&f)eh(e,k);else{var x=b;u||(x=Df(x));var C=x==="defaultValue"||x==="defaultChecked";if(k==null&&!a&&!C)if(s[b]=null,x==="value"||x==="checked"){let L=e;const j=t===void 0;if(x==="value"){let D=L.defaultValue;L.removeAttribute(x),L.defaultValue=D,L.value=L.__value=j?D:null}else{let D=L.defaultChecked;L.removeAttribute(x),L.defaultChecked=D,L.checked=j?D:!1}}else e.removeAttribute(b);else C||d.includes(x)&&(a||typeof k!="string")?(e[x]=k,x in s&&(s[x]=$e)):typeof k!="function"&&he(e,x,k)}}}return c}function An(e,t,n=[],r=[],i=[],o,s=!1,a=!1){Iu(i,n,r,u=>{var c=void 0,f={},h=e.nodeName===Qf,d=!1;if(Vu(()=>{var v=t(...u.map(l)),m=th(e,c,v,o,s,a);d&&h&&"value"in v&&Ks(e,v.value);for(let x of Object.getOwnPropertySymbols(f))v[x]||et(f[x]);for(let x of Object.getOwnPropertySymbols(v)){var _=v[x];x.description===Wd&&(!c||_!==c[x])&&(f[x]&&et(f[x]),f[x]=_t(()=>Gf(e,()=>_))),m[x]=_}c=m}),h){var g=e;Ui(()=>{Ks(g,c.value,!0),jf(g)})}d=!0})}function Zo(e){return e.__attributes??(e.__attributes={[tc]:e.nodeName.includes("-"),[nc]:e.namespaceURI===cu})}var il=new Map;function ic(e){var t=e.getAttribute("is")||e.nodeName,n=il.get(t);if(n)return n;il.set(t,n=[]);for(var r,i=e,o=Element.prototype;o!==i;){r=eu(i);for(var s in r)r[s].set&&n.push(s);i=Ko(i)}return n}function nh(e,t,n=t){var r=new WeakSet;bf(e,"input",async i=>{var o=i?e.defaultValue:e.value;if(o=hs(e)?gs(o):o,n(o),Ae!==null&&r.add(Ae),await Uo(),o!==(o=t())){var s=e.selectionStart,a=e.selectionEnd,u=e.value.length;if(e.value=o??"",a!==null){var c=e.value.length;s===a&&a===u&&c>u?(e.selectionStart=c,e.selectionEnd=c):(e.selectionStart=s,e.selectionEnd=Math.min(a,c))}}}),xe(t)==null&&e.value&&(n(hs(e)?gs(e.value):e.value),Ae!==null&&r.add(Ae)),si(()=>{var i=t();if(e===document.activeElement){var o=As??Ae;if(r.has(o))return}hs(e)&&i===gs(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function hs(e){var t=e.type;return t==="number"||t==="range"}function gs(e){return e===""?null:+e}var Wn,Gr,Fi,Vo,oc;const Bo=class Bo{constructor(t){X(this,Vo);X(this,Wn,new WeakMap);X(this,Gr);X(this,Fi);Te(this,Fi,t)}observe(t,n){var r=y(this,Wn).get(t)||new Set;return r.add(n),y(this,Wn).set(t,r),rt(this,Vo,oc).call(this).observe(t,y(this,Fi)),()=>{var i=y(this,Wn).get(t);i.delete(n),i.size===0&&(y(this,Wn).delete(t),y(this,Gr).unobserve(t))}}};Wn=new WeakMap,Gr=new WeakMap,Fi=new WeakMap,Vo=new WeakSet,oc=function(){return y(this,Gr)??Te(this,Gr,new ResizeObserver(t=>{for(var n of t){Bo.entries.set(n.target,n);for(var r of y(this,Wn).get(n.target)||[])r(n)}}))},He(Bo,"entries",new WeakMap);let Ys=Bo;var rh=new Ys({box:"border-box"});function ol(e,t,n){var r=rh.observe(e,()=>n(e[t]));Ui(()=>(xe(()=>n(e[t])),r))}function sl(e,t){return e===t||(e==null?void 0:e[nn])===t}function On(e={},t,n,r){return Ui(()=>{var i,o;return si(()=>{i=o,o=[],xe(()=>{e!==n(...o)&&(t(e,...o),i&&sl(n(...i),e)&&t(null,...i))})}),()=>{rn(()=>{o&&sl(n(...o),e)&&t(null,...o)})}}),e}function dt(e=!1){const t=Re,n=t.l.u;if(!n)return;let r=()=>fe(t.s);if(e){let i=0,o={};const s=Xi(()=>{let a=!1;const u=t.s;for(const c in u)u[c]!==o[c]&&(o[c]=u[c],a=!0);return a&&i++,i});r=()=>l(s)}n.b.length&&Fu(()=>{al(t,r),Ts(n.b)}),an(()=>{const i=xe(()=>n.m.map(wd));return()=>{for(const o of i)typeof o=="function"&&o()}}),n.a.length&&an(()=>{al(t,r),Ts(n.a)})}function al(e,t){if(e.l.s)for(const n of e.l.s)l(n);t()}let no=!1;function ih(e){var t=no;try{return no=!1,[e(),no]}finally{no=t}}const oh={get(e,t){if(!e.exclude.includes(t))return e.props[t]},set(e,t){return!1},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function qi(e,t,n){return new Proxy({props:e,exclude:t},oh)}const sh={get(e,t){if(!e.exclude.includes(t))return l(e.version),t in e.special?e.special[t]():e.props[t]},set(e,t,n){if(!(t in e.special)){var r=ze;try{Lt(e.parent_effect),e.special[t]=Q({get[t](){return e.props[t]}},t,lu)}finally{Lt(r)}}return e.special[t](n),qa(e.version),!0},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},deleteProperty(e,t){return e.exclude.includes(t)||(e.exclude.push(t),qa(e.version)),!0},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function Xs(e,t){return new Proxy({props:e,exclude:t,special:{},version:Jn(0),parent_effect:ze},sh)}const ah={get(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(fi(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r)return r[t]}},set(e,t,n){let r=e.props.length;for(;r--;){let i=e.props[r];fi(i)&&(i=i());const o=Un(i,t);if(o&&o.set)return o.set(n),!0}return!1},getOwnPropertyDescriptor(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(fi(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r){const i=Un(r,t);return i&&!i.configurable&&(i.configurable=!0),i}}},has(e,t){if(t===nn||t===su)return!1;for(let n of e.props)if(fi(n)&&(n=n()),n!=null&&t in n)return!0;return!1},ownKeys(e){const t=[];for(let n of e.props)if(fi(n)&&(n=n()),!!n){for(const r in n)t.includes(r)||t.push(r);for(const r of Object.getOwnPropertySymbols(n))t.includes(r)||t.push(r)}return t}};function sc(...e){return new Proxy({props:e},ah)}function Q(e,t,n,r){var P;var i=!oi||(n&Bd)!==0,o=(n&Hd)!==0,s=(n&Kd)!==0,a=r,u=!0,c=()=>(u&&(u=!1,a=s?xe(r):r),a),f;if(o){var h=nn in e||su in e;f=((P=Un(e,t))==null?void 0:P.set)??(h&&t in e?b=>e[t]=b:void 0)}var d,g=!1;o?[d,g]=ih(()=>e[t]):d=e[t],d===void 0&&r!==void 0&&(d=c(),f&&(i&&Cd(),f(d)));var v;if(i?v=()=>{var b=e[t];return b===void 0?c():(u=!0,b)}:v=()=>{var b=e[t];return b!==void 0&&(a=void 0),b===void 0?a:b},i&&!(n&lu))return v;if(f){var m=e.$$legacy;return function(b,k){return arguments.length>0?((!i||!k||m||g)&&f(k?v():b),b):v()}}var _=!1,x=(n&Vd?Xi:Wi)(()=>(_=!1,v()));o&&l(x);var C=ze;return function(b,k){if(arguments.length>0){const L=k?l(x):i&&o?Gn(b):b;return I(x,L),_=!0,a!==void 0&&(a=L),b}return Qn&&_||C.f&Sn?x.v:l(x)}}function ac(e){Re===null&&Yo(),oi&&Re.l!==null?uh(Re).m.push(e):an(()=>{const t=xe(e);if(typeof t=="function")return t})}function jo(e){Re===null&&Yo(),ac(()=>()=>xe(e))}function lh(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}function dn(){const e=Re;return e===null&&Yo(),(t,n,r)=>{var o;const i=(o=e.s.$$events)==null?void 0:o[t];if(i){const s=Bi(i)?i.slice():[i],a=lh(t,n,r);for(const u of s)u.call(e.x,a);return!a.defaultPrevented}return!0}}function uh(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const ch="5";var $l;typeof window<"u"&&(($l=window.__svelte??(window.__svelte={})).v??($l.v=new Set)).add(ch);Zd();var dh={value:()=>{}};function Jo(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new po(n)}function po(e){this._=e}function fh(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}po.prototype=Jo.prototype={constructor:po,on:function(e,t){var n=this._,r=fh(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=hh(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=ll(n[i],e.name,t);else if(t==null)for(i in n)n[i]=ll(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new po(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function hh(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function ll(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=dh,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Ws="http://www.w3.org/1999/xhtml";const ul={svg:"http://www.w3.org/2000/svg",xhtml:Ws,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Qo(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ul.hasOwnProperty(t)?{space:ul[t],local:e}:e}function gh(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ws&&t.documentElement.namespaceURI===Ws?t.createElement(e):t.createElementNS(n,e)}}function vh(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function lc(e){var t=Qo(e);return(t.local?vh:gh)(t)}function yh(){}function xa(e){return e==null?yh:function(){return this.querySelector(e)}}function ph(e){typeof e!="function"&&(e=xa(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=new Array(s),u,c,f=0;f<s;++f)(u=o[f])&&(c=e.call(u,u.__data__,f,o))&&("__data__"in u&&(c.__data__=u.__data__),a[f]=c);return new St(r,this._parents)}function mh(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function _h(){return[]}function uc(e){return e==null?_h:function(){return this.querySelectorAll(e)}}function bh(e){return function(){return mh(e.apply(this,arguments))}}function xh(e){typeof e=="function"?e=bh(e):e=uc(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var s=t[o],a=s.length,u,c=0;c<a;++c)(u=s[c])&&(r.push(e.call(u,u.__data__,c,s)),i.push(u));return new St(r,i)}function cc(e){return function(){return this.matches(e)}}function dc(e){return function(t){return t.matches(e)}}var wh=Array.prototype.find;function Eh(e){return function(){return wh.call(this.children,e)}}function Nh(){return this.firstElementChild}function Ih(e){return this.select(e==null?Nh:Eh(typeof e=="function"?e:dc(e)))}var Sh=Array.prototype.filter;function Th(){return Array.from(this.children)}function kh(e){return function(){return Sh.call(this.children,e)}}function Ah(e){return this.selectAll(e==null?Th:kh(typeof e=="function"?e:dc(e)))}function Ch(e){typeof e!="function"&&(e=cc(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],u,c=0;c<s;++c)(u=o[c])&&e.call(u,u.__data__,c,o)&&a.push(u);return new St(r,this._parents)}function fc(e){return new Array(e.length)}function Mh(){return new St(this._enter||this._groups.map(fc),this._parents)}function wo(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}wo.prototype={constructor:wo,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Ph(e){return function(){return e}}function Dh(e,t,n,r,i,o){for(var s=0,a,u=t.length,c=o.length;s<c;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new wo(e,o[s]);for(;s<u;++s)(a=t[s])&&(i[s]=a)}function Oh(e,t,n,r,i,o,s){var a,u,c=new Map,f=t.length,h=o.length,d=new Array(f),g;for(a=0;a<f;++a)(u=t[a])&&(d[a]=g=s.call(u,u.__data__,a,t)+"",c.has(g)?i[a]=u:c.set(g,u));for(a=0;a<h;++a)g=s.call(e,o[a],a,o)+"",(u=c.get(g))?(r[a]=u,u.__data__=o[a],c.delete(g)):n[a]=new wo(e,o[a]);for(a=0;a<f;++a)(u=t[a])&&c.get(d[a])===u&&(i[a]=u)}function Lh(e){return e.__data__}function zh(e,t){if(!arguments.length)return Array.from(this,Lh);var n=t?Oh:Dh,r=this._parents,i=this._groups;typeof e!="function"&&(e=Ph(e));for(var o=i.length,s=new Array(o),a=new Array(o),u=new Array(o),c=0;c<o;++c){var f=r[c],h=i[c],d=h.length,g=Fh(e.call(f,f&&f.__data__,c,r)),v=g.length,m=a[c]=new Array(v),_=s[c]=new Array(v),x=u[c]=new Array(d);n(f,h,m,_,x,g,t);for(var C=0,P=0,b,k;C<v;++C)if(b=m[C]){for(C>=P&&(P=C+1);!(k=_[P])&&++P<v;);b._next=k||null}}return s=new St(s,r),s._enter=a,s._exit=u,s}function Fh(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Rh(){return new St(this._exit||this._groups.map(fc),this._parents)}function Vh(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Bh(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),u=0;u<s;++u)for(var c=n[u],f=r[u],h=c.length,d=a[u]=new Array(h),g,v=0;v<h;++v)(g=c[v]||f[v])&&(d[v]=g);for(;u<i;++u)a[u]=n[u];return new St(a,this._parents)}function Hh(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function Kh(e){e||(e=Yh);function t(h,d){return h&&d?e(h.__data__,d.__data__):!h-!d}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,u=i[o]=new Array(a),c,f=0;f<a;++f)(c=s[f])&&(u[f]=c);u.sort(t)}return new St(i,this._parents).order()}function Yh(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Xh(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Wh(){return Array.from(this)}function Gh(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function Uh(){let e=0;for(const t of this)++e;return e}function qh(){return!this.node()}function Zh(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this}function jh(e){return function(){this.removeAttribute(e)}}function Jh(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Qh(e,t){return function(){this.setAttribute(e,t)}}function $h(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function eg(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function tg(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function ng(e,t){var n=Qo(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Jh:jh:typeof t=="function"?n.local?tg:eg:n.local?$h:Qh)(n,t))}function hc(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function rg(e){return function(){this.style.removeProperty(e)}}function ig(e,t,n){return function(){this.style.setProperty(e,t,n)}}function og(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function sg(e,t,n){return arguments.length>1?this.each((t==null?rg:typeof t=="function"?og:ig)(e,t,n??"")):Jr(this.node(),e)}function Jr(e,t){return e.style.getPropertyValue(t)||hc(e).getComputedStyle(e,null).getPropertyValue(t)}function ag(e){return function(){delete this[e]}}function lg(e,t){return function(){this[e]=t}}function ug(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function cg(e,t){return arguments.length>1?this.each((t==null?ag:typeof t=="function"?ug:lg)(e,t)):this.node()[e]}function gc(e){return e.trim().split(/^|\s+/)}function wa(e){return e.classList||new vc(e)}function vc(e){this._node=e,this._names=gc(e.getAttribute("class")||"")}vc.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function yc(e,t){for(var n=wa(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function pc(e,t){for(var n=wa(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function dg(e){return function(){yc(this,e)}}function fg(e){return function(){pc(this,e)}}function hg(e,t){return function(){(t.apply(this,arguments)?yc:pc)(this,e)}}function gg(e,t){var n=gc(e+"");if(arguments.length<2){for(var r=wa(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?hg:t?dg:fg)(n,t))}function vg(){this.textContent=""}function yg(e){return function(){this.textContent=e}}function pg(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function mg(e){return arguments.length?this.each(e==null?vg:(typeof e=="function"?pg:yg)(e)):this.node().textContent}function _g(){this.innerHTML=""}function bg(e){return function(){this.innerHTML=e}}function xg(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function wg(e){return arguments.length?this.each(e==null?_g:(typeof e=="function"?xg:bg)(e)):this.node().innerHTML}function Eg(){this.nextSibling&&this.parentNode.appendChild(this)}function Ng(){return this.each(Eg)}function Ig(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Sg(){return this.each(Ig)}function Tg(e){var t=typeof e=="function"?e:lc(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function kg(){return null}function Ag(e,t){var n=typeof e=="function"?e:lc(e),r=t==null?kg:typeof t=="function"?t:xa(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Cg(){var e=this.parentNode;e&&e.removeChild(this)}function Mg(){return this.each(Cg)}function Pg(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Dg(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Og(e){return this.select(e?Dg:Pg)}function Lg(e){return arguments.length?this.property("__data__",e):this.node().__data__}function zg(e){return function(t){e.call(this,t,this.__data__)}}function Fg(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Rg(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function Vg(e,t,n){return function(){var r=this.__on,i,o=zg(t);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Bg(e,t,n){var r=Fg(e+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,c=a.length,f;u<c;++u)for(i=0,f=a[u];i<o;++i)if((s=r[i]).type===f.type&&s.name===f.name)return f.value}return}for(a=t?Vg:Rg,i=0;i<o;++i)this.each(a(r[i],t,n));return this}function mc(e,t,n){var r=hc(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Hg(e,t){return function(){return mc(this,e,t)}}function Kg(e,t){return function(){return mc(this,e,t.apply(this,arguments))}}function Yg(e,t){return this.each((typeof t=="function"?Kg:Hg)(e,t))}function*Xg(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var _c=[null];function St(e,t){this._groups=e,this._parents=t}function Zi(){return new St([[document.documentElement]],_c)}function Wg(){return this}St.prototype=Zi.prototype={constructor:St,select:ph,selectAll:xh,selectChild:Ih,selectChildren:Ah,filter:Ch,data:zh,enter:Mh,exit:Rh,join:Vh,merge:Bh,selection:Wg,order:Hh,sort:Kh,call:Xh,nodes:Wh,node:Gh,size:Uh,empty:qh,each:Zh,attr:ng,style:sg,property:cg,classed:gg,text:mg,html:wg,raise:Ng,lower:Sg,append:Tg,insert:Ag,remove:Mg,clone:Og,datum:Lg,on:Bg,dispatch:Yg,[Symbol.iterator]:Xg};function Kt(e){return typeof e=="string"?new St([[document.querySelector(e)]],[document.documentElement]):new St([[e]],_c)}function Gg(e){let t;for(;t=e.sourceEvent;)e=t;return e}function jt(e,t){if(e=Gg(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Ug={passive:!1},Ii={capture:!0,passive:!1};function vs(e){e.stopImmediatePropagation()}function Lr(e){e.preventDefault(),e.stopImmediatePropagation()}function bc(e){var t=e.document.documentElement,n=Kt(e).on("dragstart.drag",Lr,Ii);"onselectstart"in t?n.on("selectstart.drag",Lr,Ii):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function xc(e,t){var n=e.document.documentElement,r=Kt(e).on("dragstart.drag",null);t&&(r.on("click.drag",Lr,Ii),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const ro=e=>()=>e;function Gs(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:o,x:s,y:a,dx:u,dy:c,dispatch:f}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:f}})}Gs.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function qg(e){return!e.ctrlKey&&!e.button}function Zg(){return this.parentNode}function jg(e,t){return t??{x:e.x,y:e.y}}function Jg(){return navigator.maxTouchPoints||"ontouchstart"in this}function Qg(){var e=qg,t=Zg,n=jg,r=Jg,i={},o=Jo("start","drag","end"),s=0,a,u,c,f,h=0;function d(b){b.on("mousedown.drag",g).filter(r).on("touchstart.drag",_).on("touchmove.drag",x,Ug).on("touchend.drag touchcancel.drag",C).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(b,k){if(!(f||!e.call(this,b,k))){var L=P(this,t.call(this,b,k),b,k,"mouse");L&&(Kt(b.view).on("mousemove.drag",v,Ii).on("mouseup.drag",m,Ii),bc(b.view),vs(b),c=!1,a=b.clientX,u=b.clientY,L("start",b))}}function v(b){if(Lr(b),!c){var k=b.clientX-a,L=b.clientY-u;c=k*k+L*L>h}i.mouse("drag",b)}function m(b){Kt(b.view).on("mousemove.drag mouseup.drag",null),xc(b.view,c),Lr(b),i.mouse("end",b)}function _(b,k){if(e.call(this,b,k)){var L=b.changedTouches,j=t.call(this,b,k),D=L.length,R,$;for(R=0;R<D;++R)($=P(this,j,b,k,L[R].identifier,L[R]))&&(vs(b),$("start",b,L[R]))}}function x(b){var k=b.changedTouches,L=k.length,j,D;for(j=0;j<L;++j)(D=i[k[j].identifier])&&(Lr(b),D("drag",b,k[j]))}function C(b){var k=b.changedTouches,L=k.length,j,D;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),j=0;j<L;++j)(D=i[k[j].identifier])&&(vs(b),D("end",b,k[j]))}function P(b,k,L,j,D,R){var $=o.copy(),M=jt(R||L,k),E,O,p;if((p=n.call(b,new Gs("beforestart",{sourceEvent:L,target:d,identifier:D,active:s,x:M[0],y:M[1],dx:0,dy:0,dispatch:$}),j))!=null)return E=p.x-M[0]||0,O=p.y-M[1]||0,function A(N,z,V){var G=M,H;switch(N){case"start":i[D]=A,H=s++;break;case"end":delete i[D],--s;case"drag":M=jt(V||z,k),H=s;break}$.call(N,b,new Gs(N,{sourceEvent:z,subject:p,target:d,identifier:D,active:H,x:M[0]+E,y:M[1]+O,dx:M[0]-G[0],dy:M[1]-G[1],dispatch:$}),j)}}return d.filter=function(b){return arguments.length?(e=typeof b=="function"?b:ro(!!b),d):e},d.container=function(b){return arguments.length?(t=typeof b=="function"?b:ro(b),d):t},d.subject=function(b){return arguments.length?(n=typeof b=="function"?b:ro(b),d):n},d.touchable=function(b){return arguments.length?(r=typeof b=="function"?b:ro(!!b),d):r},d.on=function(){var b=o.on.apply(o,arguments);return b===o?d:b},d.clickDistance=function(b){return arguments.length?(h=(b=+b)*b,d):Math.sqrt(h)},d}function Ea(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function wc(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function ji(){}var Si=.7,Eo=1/Si,zr="\\s*([+-]?\\d+)\\s*",Ti="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",sn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$g=/^#([0-9a-f]{3,8})$/,ev=new RegExp(`^rgb\\(${zr},${zr},${zr}\\)$`),tv=new RegExp(`^rgb\\(${sn},${sn},${sn}\\)$`),nv=new RegExp(`^rgba\\(${zr},${zr},${zr},${Ti}\\)$`),rv=new RegExp(`^rgba\\(${sn},${sn},${sn},${Ti}\\)$`),iv=new RegExp(`^hsl\\(${Ti},${sn},${sn}\\)$`),ov=new RegExp(`^hsla\\(${Ti},${sn},${sn},${Ti}\\)$`),cl={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ea(ji,xr,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:dl,formatHex:dl,formatHex8:sv,formatHsl:av,formatRgb:fl,toString:fl});function dl(){return this.rgb().formatHex()}function sv(){return this.rgb().formatHex8()}function av(){return Ec(this).formatHsl()}function fl(){return this.rgb().formatRgb()}function xr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=$g.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?hl(t):n===3?new bt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?io(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?io(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ev.exec(e))?new bt(t[1],t[2],t[3],1):(t=tv.exec(e))?new bt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=nv.exec(e))?io(t[1],t[2],t[3],t[4]):(t=rv.exec(e))?io(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=iv.exec(e))?yl(t[1],t[2]/100,t[3]/100,1):(t=ov.exec(e))?yl(t[1],t[2]/100,t[3]/100,t[4]):cl.hasOwnProperty(e)?hl(cl[e]):e==="transparent"?new bt(NaN,NaN,NaN,0):null}function hl(e){return new bt(e>>16&255,e>>8&255,e&255,1)}function io(e,t,n,r){return r<=0&&(e=t=n=NaN),new bt(e,t,n,r)}function lv(e){return e instanceof ji||(e=xr(e)),e?(e=e.rgb(),new bt(e.r,e.g,e.b,e.opacity)):new bt}function Us(e,t,n,r){return arguments.length===1?lv(e):new bt(e,t,n,r??1)}function bt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Ea(bt,Us,wc(ji,{brighter(e){return e=e==null?Eo:Math.pow(Eo,e),new bt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Si:Math.pow(Si,e),new bt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new bt(yr(this.r),yr(this.g),yr(this.b),No(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:gl,formatHex:gl,formatHex8:uv,formatRgb:vl,toString:vl}));function gl(){return`#${sr(this.r)}${sr(this.g)}${sr(this.b)}`}function uv(){return`#${sr(this.r)}${sr(this.g)}${sr(this.b)}${sr((isNaN(this.opacity)?1:this.opacity)*255)}`}function vl(){const e=No(this.opacity);return`${e===1?"rgb(":"rgba("}${yr(this.r)}, ${yr(this.g)}, ${yr(this.b)}${e===1?")":`, ${e})`}`}function No(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function yr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function sr(e){return e=yr(e),(e<16?"0":"")+e.toString(16)}function yl(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Yt(e,t,n,r)}function Ec(e){if(e instanceof Yt)return new Yt(e.h,e.s,e.l,e.opacity);if(e instanceof ji||(e=xr(e)),!e)return new Yt;if(e instanceof Yt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,u=(o+i)/2;return a?(t===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-t)/a+2:s=(t-n)/a+4,a/=u<.5?o+i:2-o-i,s*=60):a=u>0&&u<1?0:s,new Yt(s,a,u,e.opacity)}function cv(e,t,n,r){return arguments.length===1?Ec(e):new Yt(e,t,n,r??1)}function Yt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Ea(Yt,cv,wc(ji,{brighter(e){return e=e==null?Eo:Math.pow(Eo,e),new Yt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Si:Math.pow(Si,e),new Yt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new bt(ys(e>=240?e-240:e+120,i,r),ys(e,i,r),ys(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Yt(pl(this.h),oo(this.s),oo(this.l),No(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=No(this.opacity);return`${e===1?"hsl(":"hsla("}${pl(this.h)}, ${oo(this.s)*100}%, ${oo(this.l)*100}%${e===1?")":`, ${e})`}`}}));function pl(e){return e=(e||0)%360,e<0?e+360:e}function oo(e){return Math.max(0,Math.min(1,e||0))}function ys(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Na=e=>()=>e;function dv(e,t){return function(n){return e+n*t}}function fv(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function hv(e){return(e=+e)==1?Nc:function(t,n){return n-t?fv(t,n,e):Na(isNaN(t)?n:t)}}function Nc(e,t){var n=t-e;return n?dv(e,n):Na(isNaN(e)?t:e)}const Io=function e(t){var n=hv(t);function r(i,o){var s=n((i=Us(i)).r,(o=Us(o)).r),a=n(i.g,o.g),u=n(i.b,o.b),c=Nc(i.opacity,o.opacity);return function(f){return i.r=s(f),i.g=a(f),i.b=u(f),i.opacity=c(f),i+""}}return r.gamma=e,r}(1);function gv(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function vv(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function yv(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=xi(e[s],t[s]);for(;s<n;++s)o[s]=t[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function pv(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function tn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function mv(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=xi(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var qs=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ps=new RegExp(qs.source,"g");function _v(e){return function(){return e}}function bv(e){return function(t){return e(t)+""}}function Ic(e,t){var n=qs.lastIndex=ps.lastIndex=0,r,i,o,s=-1,a=[],u=[];for(e=e+"",t=t+"";(r=qs.exec(e))&&(i=ps.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,u.push({i:s,x:tn(r,i)})),n=ps.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?u[0]?bv(u[0].x):_v(t):(t=u.length,function(c){for(var f=0,h;f<t;++f)a[(h=u[f]).i]=h.x(c);return a.join("")})}function xi(e,t){var n=typeof t,r;return t==null||n==="boolean"?Na(t):(n==="number"?tn:n==="string"?(r=xr(t))?(t=r,Io):Ic:t instanceof xr?Io:t instanceof Date?pv:vv(t)?gv:Array.isArray(t)?yv:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?mv:tn)(e,t)}var ml=180/Math.PI,Zs={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Sc(e,t,n,r,i,o){var s,a,u;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*ml,skewX:Math.atan(u)*ml,scaleX:s,scaleY:a}}var so;function xv(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Zs:Sc(t.a,t.b,t.c,t.d,t.e,t.f)}function wv(e){return e==null||(so||(so=document.createElementNS("http://www.w3.org/2000/svg","g")),so.setAttribute("transform",e),!(e=so.transform.baseVal.consolidate()))?Zs:(e=e.matrix,Sc(e.a,e.b,e.c,e.d,e.e,e.f))}function Tc(e,t,n,r){function i(c){return c.length?c.pop()+" ":""}function o(c,f,h,d,g,v){if(c!==h||f!==d){var m=g.push("translate(",null,t,null,n);v.push({i:m-4,x:tn(c,h)},{i:m-2,x:tn(f,d)})}else(h||d)&&g.push("translate("+h+t+d+n)}function s(c,f,h,d){c!==f?(c-f>180?f+=360:f-c>180&&(c+=360),d.push({i:h.push(i(h)+"rotate(",null,r)-2,x:tn(c,f)})):f&&h.push(i(h)+"rotate("+f+r)}function a(c,f,h,d){c!==f?d.push({i:h.push(i(h)+"skewX(",null,r)-2,x:tn(c,f)}):f&&h.push(i(h)+"skewX("+f+r)}function u(c,f,h,d,g,v){if(c!==h||f!==d){var m=g.push(i(g)+"scale(",null,",",null,")");v.push({i:m-4,x:tn(c,h)},{i:m-2,x:tn(f,d)})}else(h!==1||d!==1)&&g.push(i(g)+"scale("+h+","+d+")")}return function(c,f){var h=[],d=[];return c=e(c),f=e(f),o(c.translateX,c.translateY,f.translateX,f.translateY,h,d),s(c.rotate,f.rotate,h,d),a(c.skewX,f.skewX,h,d),u(c.scaleX,c.scaleY,f.scaleX,f.scaleY,h,d),c=f=null,function(g){for(var v=-1,m=d.length,_;++v<m;)h[(_=d[v]).i]=_.x(g);return h.join("")}}}var Ev=Tc(xv,"px, ","px)","deg)"),Nv=Tc(wv,", ",")",")"),Iv=1e-12;function _l(e){return((e=Math.exp(e))+1/e)/2}function Sv(e){return((e=Math.exp(e))-1/e)/2}function Tv(e){return((e=Math.exp(2*e))-1)/(e+1)}const mo=function e(t,n,r){function i(o,s){var a=o[0],u=o[1],c=o[2],f=s[0],h=s[1],d=s[2],g=f-a,v=h-u,m=g*g+v*v,_,x;if(m<Iv)x=Math.log(d/c)/t,_=function(j){return[a+j*g,u+j*v,c*Math.exp(t*j*x)]};else{var C=Math.sqrt(m),P=(d*d-c*c+r*m)/(2*c*n*C),b=(d*d-c*c-r*m)/(2*d*n*C),k=Math.log(Math.sqrt(P*P+1)-P),L=Math.log(Math.sqrt(b*b+1)-b);x=(L-k)/t,_=function(j){var D=j*x,R=_l(k),$=c/(n*C)*(R*Tv(t*D+k)-Sv(k));return[a+$*g,u+$*v,c*R/_l(t*D+k)]}}return _.duration=x*1e3*t/Math.SQRT2,_}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,u=a*a;return e(s,a,u)},i}(Math.SQRT2,2,4);var Qr=0,pi=0,gi=0,kc=1e3,So,mi,To=0,wr=0,$o=0,ki=typeof performance=="object"&&performance.now?performance:Date,Ac=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Ia(){return wr||(Ac(kv),wr=ki.now()+$o)}function kv(){wr=0}function ko(){this._call=this._time=this._next=null}ko.prototype=Cc.prototype={constructor:ko,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Ia():+n)+(t==null?0:+t),!this._next&&mi!==this&&(mi?mi._next=this:So=this,mi=this),this._call=e,this._time=n,js()},stop:function(){this._call&&(this._call=null,this._time=1/0,js())}};function Cc(e,t,n){var r=new ko;return r.restart(e,t,n),r}function Av(){Ia(),++Qr;for(var e=So,t;e;)(t=wr-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Qr}function bl(){wr=(To=ki.now())+$o,Qr=pi=0;try{Av()}finally{Qr=0,Mv(),wr=0}}function Cv(){var e=ki.now(),t=e-To;t>kc&&($o-=t,To=e)}function Mv(){for(var e,t=So,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:So=n);mi=e,js(r)}function js(e){if(!Qr){pi&&(pi=clearTimeout(pi));var t=e-wr;t>24?(e<1/0&&(pi=setTimeout(bl,e-ki.now()-$o)),gi&&(gi=clearInterval(gi))):(gi||(To=ki.now(),gi=setInterval(Cv,kc)),Qr=1,Ac(bl))}}function xl(e,t,n){var r=new ko;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Pv=Jo("start","end","cancel","interrupt"),Dv=[],Mc=0,wl=1,Js=2,_o=3,El=4,Qs=5,bo=6;function es(e,t,n,r,i,o){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;Ov(e,n,{name:t,index:r,group:i,on:Pv,tween:Dv,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Mc})}function Sa(e,t){var n=Zt(e,t);if(n.state>Mc)throw new Error("too late; already scheduled");return n}function fn(e,t){var n=Zt(e,t);if(n.state>_o)throw new Error("too late; already running");return n}function Zt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Ov(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Cc(o,0,n.time);function o(c){n.state=wl,n.timer.restart(s,n.delay,n.time),n.delay<=c&&s(c-n.delay)}function s(c){var f,h,d,g;if(n.state!==wl)return u();for(f in r)if(g=r[f],g.name===n.name){if(g.state===_o)return xl(s);g.state===El?(g.state=bo,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete r[f]):+f<t&&(g.state=bo,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete r[f])}if(xl(function(){n.state===_o&&(n.state=El,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=Js,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Js){for(n.state=_o,i=new Array(d=n.tween.length),f=0,h=-1;f<d;++f)(g=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(i[++h]=g);i.length=h+1}}function a(c){for(var f=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(u),n.state=Qs,1),h=-1,d=i.length;++h<d;)i[h].call(e,f);n.state===Qs&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=bo,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function xo(e,t){var n=e.__transition,r,i,o=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){o=!1;continue}i=r.state>Js&&r.state<Qs,r.state=bo,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}o&&delete e.__transition}}function Lv(e){return this.each(function(){xo(this,e)})}function zv(e,t){var n,r;return function(){var i=fn(this,e),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function Fv(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=fn(this,e),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:t,value:n},u=0,c=i.length;u<c;++u)if(i[u].name===t){i[u]=a;break}u===c&&i.push(a)}o.tween=i}}function Rv(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Zt(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===e)return s.value;return null}return this.each((t==null?zv:Fv)(n,e,t))}function Ta(e,t,n){var r=e._id;return e.each(function(){var i=fn(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Zt(i,r).value[t]}}function Pc(e,t){var n;return(typeof t=="number"?tn:t instanceof xr?Io:(n=xr(t))?(t=n,Io):Ic)(e,t)}function Vv(e){return function(){this.removeAttribute(e)}}function Bv(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Hv(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttribute(e);return s===i?null:s===r?o:o=t(r=s,n)}}function Kv(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===r?o:o=t(r=s,n)}}function Yv(e,t,n){var r,i,o;return function(){var s,a=n(this),u;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),u=a+"",s===u?null:s===r&&u===i?o:(i=u,o=t(r=s,a)))}}function Xv(e,t,n){var r,i,o;return function(){var s,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),u=a+"",s===u?null:s===r&&u===i?o:(i=u,o=t(r=s,a)))}}function Wv(e,t){var n=Qo(e),r=n==="transform"?Nv:Pc;return this.attrTween(e,typeof t=="function"?(n.local?Xv:Yv)(n,r,Ta(this,"attr."+e,t)):t==null?(n.local?Bv:Vv)(n):(n.local?Kv:Hv)(n,r,t))}function Gv(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Uv(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function qv(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&Uv(e,o)),n}return i._value=t,i}function Zv(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&Gv(e,o)),n}return i._value=t,i}function jv(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Qo(e);return this.tween(n,(r.local?qv:Zv)(r,t))}function Jv(e,t){return function(){Sa(this,e).delay=+t.apply(this,arguments)}}function Qv(e,t){return t=+t,function(){Sa(this,e).delay=t}}function $v(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Jv:Qv)(t,e)):Zt(this.node(),t).delay}function ey(e,t){return function(){fn(this,e).duration=+t.apply(this,arguments)}}function ty(e,t){return t=+t,function(){fn(this,e).duration=t}}function ny(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ey:ty)(t,e)):Zt(this.node(),t).duration}function ry(e,t){if(typeof t!="function")throw new Error;return function(){fn(this,e).ease=t}}function iy(e){var t=this._id;return arguments.length?this.each(ry(t,e)):Zt(this.node(),t).ease}function oy(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;fn(this,e).ease=n}}function sy(e){if(typeof e!="function")throw new Error;return this.each(oy(this._id,e))}function ay(e){typeof e!="function"&&(e=cc(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],u,c=0;c<s;++c)(u=o[c])&&e.call(u,u.__data__,c,o)&&a.push(u);return new Cn(r,this._parents,this._name,this._id)}function ly(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var u=t[a],c=n[a],f=u.length,h=s[a]=new Array(f),d,g=0;g<f;++g)(d=u[g]||c[g])&&(h[g]=d);for(;a<r;++a)s[a]=t[a];return new Cn(s,this._parents,this._name,this._id)}function uy(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function cy(e,t,n){var r,i,o=uy(t)?Sa:fn;return function(){var s=o(this,e),a=s.on;a!==r&&(i=(r=a).copy()).on(t,n),s.on=i}}function dy(e,t){var n=this._id;return arguments.length<2?Zt(this.node(),n).on.on(e):this.each(cy(n,e,t))}function fy(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function hy(){return this.on("end.remove",fy(this._id))}function gy(e){var t=this._name,n=this._id;typeof e!="function"&&(e=xa(e));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],u=a.length,c=o[s]=new Array(u),f,h,d=0;d<u;++d)(f=a[d])&&(h=e.call(f,f.__data__,d,a))&&("__data__"in f&&(h.__data__=f.__data__),c[d]=h,es(c[d],t,n,d,c,Zt(f,n)));return new Cn(o,this._parents,t,n)}function vy(e){var t=this._name,n=this._id;typeof e!="function"&&(e=uc(e));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var u=r[a],c=u.length,f,h=0;h<c;++h)if(f=u[h]){for(var d=e.call(f,f.__data__,h,u),g,v=Zt(f,n),m=0,_=d.length;m<_;++m)(g=d[m])&&es(g,t,n,m,d,v);o.push(d),s.push(f)}return new Cn(o,s,t,n)}var yy=Zi.prototype.constructor;function py(){return new yy(this._groups,this._parents)}function my(e,t){var n,r,i;return function(){var o=Jr(this,e),s=(this.style.removeProperty(e),Jr(this,e));return o===s?null:o===n&&s===r?i:i=t(n=o,r=s)}}function Dc(e){return function(){this.style.removeProperty(e)}}function _y(e,t,n){var r,i=n+"",o;return function(){var s=Jr(this,e);return s===i?null:s===r?o:o=t(r=s,n)}}function by(e,t,n){var r,i,o;return function(){var s=Jr(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),Jr(this,e))),s===u?null:s===r&&u===i?o:(i=u,o=t(r=s,a))}}function xy(e,t){var n,r,i,o="style."+t,s="end."+o,a;return function(){var u=fn(this,e),c=u.on,f=u.value[o]==null?a||(a=Dc(t)):void 0;(c!==n||i!==f)&&(r=(n=c).copy()).on(s,i=f),u.on=r}}function wy(e,t,n){var r=(e+="")=="transform"?Ev:Pc;return t==null?this.styleTween(e,my(e,r)).on("end.style."+e,Dc(e)):typeof t=="function"?this.styleTween(e,by(e,r,Ta(this,"style."+e,t))).each(xy(this._id,e)):this.styleTween(e,_y(e,r,t),n).on("end.style."+e,null)}function Ey(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Ny(e,t,n){var r,i;function o(){var s=t.apply(this,arguments);return s!==i&&(r=(i=s)&&Ey(e,s,n)),r}return o._value=t,o}function Iy(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Ny(e,t,n??""))}function Sy(e){return function(){this.textContent=e}}function Ty(e){return function(){var t=e(this);this.textContent=t??""}}function ky(e){return this.tween("text",typeof e=="function"?Ty(Ta(this,"text",e)):Sy(e==null?"":e+""))}function Ay(e){return function(t){this.textContent=e.call(this,t)}}function Cy(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Ay(i)),t}return r._value=e,r}function My(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Cy(e))}function Py(){for(var e=this._name,t=this._id,n=Oc(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,u,c=0;c<a;++c)if(u=s[c]){var f=Zt(u,t);es(u,e,n,c,s,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Cn(r,this._parents,e,n)}function Dy(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},u={value:function(){--i===0&&o()}};n.each(function(){var c=fn(this,r),f=c.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),c.on=t}),i===0&&o()})}var Oy=0;function Cn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Oc(){return++Oy}var vn=Zi.prototype;Cn.prototype={constructor:Cn,select:gy,selectAll:vy,selectChild:vn.selectChild,selectChildren:vn.selectChildren,filter:ay,merge:ly,selection:py,transition:Py,call:vn.call,nodes:vn.nodes,node:vn.node,size:vn.size,empty:vn.empty,each:vn.each,on:dy,attr:Wv,attrTween:jv,style:wy,styleTween:Iy,text:ky,textTween:My,remove:hy,tween:Rv,delay:$v,duration:ny,ease:iy,easeVarying:sy,end:Dy,[Symbol.iterator]:vn[Symbol.iterator]};function Ly(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var zy={time:null,delay:0,duration:250,ease:Ly};function Fy(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Ry(e){var t,n;e instanceof Cn?(t=e._id,e=e._name):(t=Oc(),(n=zy).time=Ia(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,u,c=0;c<a;++c)(u=s[c])&&es(u,e,t,c,s,n||Fy(u,t));return new Cn(r,this._parents,e,t)}Zi.prototype.interrupt=Lv;Zi.prototype.transition=Ry;const ao=e=>()=>e;function Vy(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Nn(e,t,n){this.k=e,this.x=t,this.y=n}Nn.prototype={constructor:Nn,scale:function(e){return e===1?this:new Nn(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Nn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ts=new Nn(1,0,0);Lc.prototype=Nn.prototype;function Lc(e){for(;!e.__zoom;)if(!(e=e.parentNode))return ts;return e.__zoom}function ms(e){e.stopImmediatePropagation()}function vi(e){e.preventDefault(),e.stopImmediatePropagation()}function By(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Hy(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Nl(){return this.__zoom||ts}function Ky(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Yy(){return navigator.maxTouchPoints||"ontouchstart"in this}function Xy(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function Wy(){var e=By,t=Hy,n=Xy,r=Ky,i=Yy,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,u=mo,c=Jo("start","zoom","end"),f,h,d,g=500,v=150,m=0,_=10;function x(p){p.property("__zoom",Nl).on("wheel.zoom",D,{passive:!1}).on("mousedown.zoom",R).on("dblclick.zoom",$).filter(i).on("touchstart.zoom",M).on("touchmove.zoom",E).on("touchend.zoom touchcancel.zoom",O).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}x.transform=function(p,A,N,z){var V=p.selection?p.selection():p;V.property("__zoom",Nl),p!==V?k(p,A,N,z):V.interrupt().each(function(){L(this,arguments).event(z).start().zoom(null,typeof A=="function"?A.apply(this,arguments):A).end()})},x.scaleBy=function(p,A,N,z){x.scaleTo(p,function(){var V=this.__zoom.k,G=typeof A=="function"?A.apply(this,arguments):A;return V*G},N,z)},x.scaleTo=function(p,A,N,z){x.transform(p,function(){var V=t.apply(this,arguments),G=this.__zoom,H=N==null?b(V):typeof N=="function"?N.apply(this,arguments):N,B=G.invert(H),ne=typeof A=="function"?A.apply(this,arguments):A;return n(P(C(G,ne),H,B),V,s)},N,z)},x.translateBy=function(p,A,N,z){x.transform(p,function(){return n(this.__zoom.translate(typeof A=="function"?A.apply(this,arguments):A,typeof N=="function"?N.apply(this,arguments):N),t.apply(this,arguments),s)},null,z)},x.translateTo=function(p,A,N,z,V){x.transform(p,function(){var G=t.apply(this,arguments),H=this.__zoom,B=z==null?b(G):typeof z=="function"?z.apply(this,arguments):z;return n(ts.translate(B[0],B[1]).scale(H.k).translate(typeof A=="function"?-A.apply(this,arguments):-A,typeof N=="function"?-N.apply(this,arguments):-N),G,s)},z,V)};function C(p,A){return A=Math.max(o[0],Math.min(o[1],A)),A===p.k?p:new Nn(A,p.x,p.y)}function P(p,A,N){var z=A[0]-N[0]*p.k,V=A[1]-N[1]*p.k;return z===p.x&&V===p.y?p:new Nn(p.k,z,V)}function b(p){return[(+p[0][0]+ +p[1][0])/2,(+p[0][1]+ +p[1][1])/2]}function k(p,A,N,z){p.on("start.zoom",function(){L(this,arguments).event(z).start()}).on("interrupt.zoom end.zoom",function(){L(this,arguments).event(z).end()}).tween("zoom",function(){var V=this,G=arguments,H=L(V,G).event(z),B=t.apply(V,G),ne=N==null?b(B):typeof N=="function"?N.apply(V,G):N,se=Math.max(B[1][0]-B[0][0],B[1][1]-B[0][1]),Y=V.__zoom,W=typeof A=="function"?A.apply(V,G):A,K=u(Y.invert(ne).concat(se/Y.k),W.invert(ne).concat(se/W.k));return function(Z){if(Z===1)Z=W;else{var re=K(Z),ge=se/re[2];Z=new Nn(ge,ne[0]-re[0]*ge,ne[1]-re[1]*ge)}H.zoom(null,Z)}})}function L(p,A,N){return!N&&p.__zooming||new j(p,A)}function j(p,A){this.that=p,this.args=A,this.active=0,this.sourceEvent=null,this.extent=t.apply(p,A),this.taps=0}j.prototype={event:function(p){return p&&(this.sourceEvent=p),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(p,A){return this.mouse&&p!=="mouse"&&(this.mouse[1]=A.invert(this.mouse[0])),this.touch0&&p!=="touch"&&(this.touch0[1]=A.invert(this.touch0[0])),this.touch1&&p!=="touch"&&(this.touch1[1]=A.invert(this.touch1[0])),this.that.__zoom=A,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(p){var A=Kt(this.that).datum();c.call(p,this.that,new Vy(p,{sourceEvent:this.sourceEvent,target:x,transform:this.that.__zoom,dispatch:c}),A)}};function D(p,...A){if(!e.apply(this,arguments))return;var N=L(this,A).event(p),z=this.__zoom,V=Math.max(o[0],Math.min(o[1],z.k*Math.pow(2,r.apply(this,arguments)))),G=jt(p);if(N.wheel)(N.mouse[0][0]!==G[0]||N.mouse[0][1]!==G[1])&&(N.mouse[1]=z.invert(N.mouse[0]=G)),clearTimeout(N.wheel);else{if(z.k===V)return;N.mouse=[G,z.invert(G)],xo(this),N.start()}vi(p),N.wheel=setTimeout(H,v),N.zoom("mouse",n(P(C(z,V),N.mouse[0],N.mouse[1]),N.extent,s));function H(){N.wheel=null,N.end()}}function R(p,...A){if(d||!e.apply(this,arguments))return;var N=p.currentTarget,z=L(this,A,!0).event(p),V=Kt(p.view).on("mousemove.zoom",ne,!0).on("mouseup.zoom",se,!0),G=jt(p,N),H=p.clientX,B=p.clientY;bc(p.view),ms(p),z.mouse=[G,this.__zoom.invert(G)],xo(this),z.start();function ne(Y){if(vi(Y),!z.moved){var W=Y.clientX-H,K=Y.clientY-B;z.moved=W*W+K*K>m}z.event(Y).zoom("mouse",n(P(z.that.__zoom,z.mouse[0]=jt(Y,N),z.mouse[1]),z.extent,s))}function se(Y){V.on("mousemove.zoom mouseup.zoom",null),xc(Y.view,z.moved),vi(Y),z.event(Y).end()}}function $(p,...A){if(e.apply(this,arguments)){var N=this.__zoom,z=jt(p.changedTouches?p.changedTouches[0]:p,this),V=N.invert(z),G=N.k*(p.shiftKey?.5:2),H=n(P(C(N,G),z,V),t.apply(this,A),s);vi(p),a>0?Kt(this).transition().duration(a).call(k,H,z,p):Kt(this).call(x.transform,H,z,p)}}function M(p,...A){if(e.apply(this,arguments)){var N=p.touches,z=N.length,V=L(this,A,p.changedTouches.length===z).event(p),G,H,B,ne;for(ms(p),H=0;H<z;++H)B=N[H],ne=jt(B,this),ne=[ne,this.__zoom.invert(ne),B.identifier],V.touch0?!V.touch1&&V.touch0[2]!==ne[2]&&(V.touch1=ne,V.taps=0):(V.touch0=ne,G=!0,V.taps=1+!!f);f&&(f=clearTimeout(f)),G&&(V.taps<2&&(h=ne[0],f=setTimeout(function(){f=null},g)),xo(this),V.start())}}function E(p,...A){if(this.__zooming){var N=L(this,A).event(p),z=p.changedTouches,V=z.length,G,H,B,ne;for(vi(p),G=0;G<V;++G)H=z[G],B=jt(H,this),N.touch0&&N.touch0[2]===H.identifier?N.touch0[0]=B:N.touch1&&N.touch1[2]===H.identifier&&(N.touch1[0]=B);if(H=N.that.__zoom,N.touch1){var se=N.touch0[0],Y=N.touch0[1],W=N.touch1[0],K=N.touch1[1],Z=(Z=W[0]-se[0])*Z+(Z=W[1]-se[1])*Z,re=(re=K[0]-Y[0])*re+(re=K[1]-Y[1])*re;H=C(H,Math.sqrt(Z/re)),B=[(se[0]+W[0])/2,(se[1]+W[1])/2],ne=[(Y[0]+K[0])/2,(Y[1]+K[1])/2]}else if(N.touch0)B=N.touch0[0],ne=N.touch0[1];else return;N.zoom("touch",n(P(H,B,ne),N.extent,s))}}function O(p,...A){if(this.__zooming){var N=L(this,A).event(p),z=p.changedTouches,V=z.length,G,H;for(ms(p),d&&clearTimeout(d),d=setTimeout(function(){d=null},g),G=0;G<V;++G)H=z[G],N.touch0&&N.touch0[2]===H.identifier?delete N.touch0:N.touch1&&N.touch1[2]===H.identifier&&delete N.touch1;if(N.touch1&&!N.touch0&&(N.touch0=N.touch1,delete N.touch1),N.touch0)N.touch0[1]=this.__zoom.invert(N.touch0[0]);else if(N.end(),N.taps===2&&(H=jt(H,this),Math.hypot(h[0]-H[0],h[1]-H[1])<_)){var B=Kt(this).on("dblclick.zoom");B&&B.apply(this,arguments)}}}return x.wheelDelta=function(p){return arguments.length?(r=typeof p=="function"?p:ao(+p),x):r},x.filter=function(p){return arguments.length?(e=typeof p=="function"?p:ao(!!p),x):e},x.touchable=function(p){return arguments.length?(i=typeof p=="function"?p:ao(!!p),x):i},x.extent=function(p){return arguments.length?(t=typeof p=="function"?p:ao([[+p[0][0],+p[0][1]],[+p[1][0],+p[1][1]]]),x):t},x.scaleExtent=function(p){return arguments.length?(o[0]=+p[0],o[1]=+p[1],x):[o[0],o[1]]},x.translateExtent=function(p){return arguments.length?(s[0][0]=+p[0][0],s[1][0]=+p[1][0],s[0][1]=+p[0][1],s[1][1]=+p[1][1],x):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},x.constrain=function(p){return arguments.length?(n=p,x):n},x.duration=function(p){return arguments.length?(a=+p,x):a},x.interpolate=function(p){return arguments.length?(u=p,x):u},x.on=function(){var p=c.on.apply(c,arguments);return p===c?x:p},x.clickDistance=function(p){return arguments.length?(m=(p=+p)*p,x):Math.sqrt(m)},x.tapDistance=function(p){return arguments.length?(_=+p,x):_},x}const Ai={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},$s=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],zc=["Enter"," ","Escape"],Gy={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var $r;(function(e){e.Strict="strict",e.Loose="loose"})($r||($r={}));var Fr;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Fr||(Fr={}));var Ao;(function(e){e.Partial="partial",e.Full="full"})(Ao||(Ao={}));const ea={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var Kn;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Kn||(Kn={}));var Co;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Co||(Co={}));var we;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(we||(we={}));const Il={[we.Left]:we.Right,[we.Right]:we.Left,[we.Top]:we.Bottom,[we.Bottom]:we.Top};function Uy(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}function Sl(e,t,n){if(!n)return;const r=[];e.forEach((i,o)=>{t!=null&&t.has(o)||r.push(i)}),r.length&&n(r)}function qy(e){return e===null?null:e?"valid":"invalid"}const Fc=e=>"id"in e&&"source"in e&&"target"in e,Zy=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),ka=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Ji=(e,t=[0,0])=>{const{width:n,height:r}=Ar(e),i=e.origin??t,o=n*i[0],s=r*i[1];return{x:e.position.x-o,y:e.position.y-s}},jy=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const o=typeof i=="string";let s=!t.nodeLookup&&!o?i:void 0;t.nodeLookup&&(s=o?t.nodeLookup.get(i):ka(i)?i:t.nodeLookup.get(i.id));const a=s?Mo(s,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return rs(r,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return is(n)},ns=(e,t={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},r=!1;return e.forEach(i=>{(t.filter===void 0||t.filter(i))&&(n=rs(n,Mo(i)),r=!0)}),r?is(n):{x:0,y:0,width:0,height:0}},Aa=(e,t,[n,r,i]=[0,0,1],o=!1,s=!1)=>{const a={...$i(t,[n,r,i]),width:t.width/i,height:t.height/i},u=[];for(const c of e.values()){const{measured:f,selectable:h=!0,hidden:d=!1}=c;if(s&&!h||d)continue;const g=f.width??c.width??c.initialWidth??null,v=f.height??c.height??c.initialHeight??null,m=Ci(a,ti(c)),_=(g??0)*(v??0),x=o&&m>0;(!c.internals.handleBounds||x||m>=_||c.dragging)&&u.push(c)}return u},Jy=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function Qy(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(i=>i.id)):null;return e.forEach(i=>{i.measured.width&&i.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function $y({nodes:e,width:t,height:n,panZoom:r,minZoom:i,maxZoom:o},s){if(e.size===0)return Promise.resolve(!0);const a=Qy(e,s),u=ns(a),c=Ca(u,t,n,(s==null?void 0:s.minZoom)??i,(s==null?void 0:s.maxZoom)??o,(s==null?void 0:s.padding)??.1);return await r.setViewport(c,{duration:s==null?void 0:s.duration,ease:s==null?void 0:s.ease,interpolate:s==null?void 0:s.interpolate}),Promise.resolve(!0)}function Rc({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:o}){const s=n.get(e),a=s.parentId?n.get(s.parentId):void 0,{x:u,y:c}=a?a.internals.positionAbsolute:{x:0,y:0},f=s.origin??r;let h=s.extent||i;if(s.extent==="parent"&&!s.expandParent)if(!a)o==null||o("005",Ai.error005());else{const g=a.measured.width,v=a.measured.height;g&&v&&(h=[[u,c],[u+g,c+v]])}else a&&ni(s.extent)&&(h=[[s.extent[0][0]+u,s.extent[0][1]+c],[s.extent[1][0]+u,s.extent[1][1]+c]]);const d=ni(h)?Er(t,h,s.measured):t;return(s.measured.width===void 0||s.measured.height===void 0)&&(o==null||o("015",Ai.error015())),{position:{x:d.x-u+(s.measured.width??0)*f[0],y:d.y-c+(s.measured.height??0)*f[1]},positionAbsolute:d}}async function ep({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:i}){const o=new Set(e.map(d=>d.id)),s=[];for(const d of n){if(d.deletable===!1)continue;const g=o.has(d.id),v=!g&&d.parentId&&s.find(m=>m.id===d.parentId);(g||v)&&s.push(d)}const a=new Set(t.map(d=>d.id)),u=r.filter(d=>d.deletable!==!1),f=Jy(s,u);for(const d of u)a.has(d.id)&&!f.find(v=>v.id===d.id)&&f.push(d);if(!i)return{edges:f,nodes:s};const h=await i({nodes:s,edges:f});return typeof h=="boolean"?h?{edges:f,nodes:s}:{edges:[],nodes:[]}:h}const ei=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Er=(e={x:0,y:0},t,n)=>({x:ei(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:ei(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function Vc(e,t,n){const{width:r,height:i}=Ar(n),{x:o,y:s}=n.internals.positionAbsolute;return Er(e,[[o,s],[o+r,s+i]],t)}const Tl=(e,t,n)=>e<t?ei(Math.abs(e-t),1,t)/t:e>n?-ei(Math.abs(e-n),1,t)/t:0,Bc=(e,t,n=15,r=40)=>{const i=Tl(e.x,r,t.width-r)*n,o=Tl(e.y,r,t.height-r)*n;return[i,o]},rs=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),ta=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),is=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),ti=(e,t=[0,0])=>{var i,o;const{x:n,y:r}=ka(e)?e.internals.positionAbsolute:Ji(e,t);return{x:n,y:r,width:((i=e.measured)==null?void 0:i.width)??e.width??e.initialWidth??0,height:((o=e.measured)==null?void 0:o.height)??e.height??e.initialHeight??0}},Mo=(e,t=[0,0])=>{var i,o;const{x:n,y:r}=ka(e)?e.internals.positionAbsolute:Ji(e,t);return{x:n,y:r,x2:n+(((i=e.measured)==null?void 0:i.width)??e.width??e.initialWidth??0),y2:r+(((o=e.measured)==null?void 0:o.height)??e.height??e.initialHeight??0)}},tp=(e,t)=>is(rs(ta(e),ta(t))),Ci=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},kl=e=>In(e.width)&&In(e.height)&&In(e.x)&&In(e.y),In=e=>!isNaN(e)&&isFinite(e),np=(e,t)=>{},Qi=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),$i=({x:e,y:t},[n,r,i],o=!1,s=[1,1])=>{const a={x:(e-n)/i,y:(t-r)/i};return o?Qi(a,s):a},Po=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r});function Dr(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function rp(e,t,n){if(typeof e=="string"||typeof e=="number"){const r=Dr(e,n),i=Dr(e,t);return{top:r,right:i,bottom:r,left:i,x:i*2,y:r*2}}if(typeof e=="object"){const r=Dr(e.top??e.y??0,n),i=Dr(e.bottom??e.y??0,n),o=Dr(e.left??e.x??0,t),s=Dr(e.right??e.x??0,t);return{top:r,right:s,bottom:i,left:o,x:o+s,y:r+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function ip(e,t,n,r,i,o){const{x:s,y:a}=Po(e,[t,n,r]),{x:u,y:c}=Po({x:e.x+e.width,y:e.y+e.height},[t,n,r]),f=i-u,h=o-c;return{left:Math.floor(s),top:Math.floor(a),right:Math.floor(f),bottom:Math.floor(h)}}const Ca=(e,t,n,r,i,o)=>{const s=rp(o,t,n),a=(t-s.x)/e.width,u=(n-s.y)/e.height,c=Math.min(a,u),f=ei(c,r,i),h=e.x+e.width/2,d=e.y+e.height/2,g=t/2-h*f,v=n/2-d*f,m=ip(e,g,v,f,t,n),_={left:Math.min(m.left-s.left,0),top:Math.min(m.top-s.top,0),right:Math.min(m.right-s.right,0),bottom:Math.min(m.bottom-s.bottom,0)};return{x:g-_.left+_.right,y:v-_.top+_.bottom,zoom:f}},Do=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function ni(e){return e!=null&&e!=="parent"}function Ar(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function op(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function sp(e,t={width:0,height:0},n,r,i){const o={...e},s=r.get(n);if(s){const a=s.origin||i;o.x+=s.internals.positionAbsolute.x-(t.width??0)*a[0],o.y+=s.internals.positionAbsolute.y-(t.height??0)*a[1]}return o}function ap(e){return{...Gy,...e||{}}}function _s(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){const{x:o,y:s}=Gt(e),a=$i({x:o-((i==null?void 0:i.left)??0),y:s-((i==null?void 0:i.top)??0)},r),{x:u,y:c}=n?Qi(a,t):a;return{xSnapped:u,ySnapped:c,...a}}const Hc=e=>({width:e.offsetWidth,height:e.offsetHeight}),Kc=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},lp=["INPUT","SELECT","TEXTAREA"];function Yc(e){var r,i;const t=((i=(r=e.composedPath)==null?void 0:r.call(e))==null?void 0:i[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:lp.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const Xc=e=>"clientX"in e,Gt=(e,t)=>{var o,s;const n=Xc(e),r=n?e.clientX:(o=e.touches)==null?void 0:o[0].clientX,i=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}},Al=(e,t,n,r,i)=>{const o=t.querySelectorAll(`.${e}`);return!o||!o.length?null:Array.from(o).map(s=>{const a=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:i,position:s.getAttribute("data-handlepos"),x:(a.left-n.left)/r,y:(a.top-n.top)/r,...Hc(s)}})};function up({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:o,targetControlX:s,targetControlY:a}){const u=e*.125+i*.375+s*.375+n*.125,c=t*.125+o*.375+a*.375+r*.125,f=Math.abs(u-e),h=Math.abs(c-t);return[u,c,f,h]}function lo(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Cl({pos:e,x1:t,y1:n,x2:r,y2:i,c:o}){switch(e){case we.Left:return[t-lo(t-r,o),n];case we.Right:return[t+lo(r-t,o),n];case we.Top:return[t,n-lo(n-i,o)];case we.Bottom:return[t,n+lo(i-n,o)]}}function Wc({sourceX:e,sourceY:t,sourcePosition:n=we.Bottom,targetX:r,targetY:i,targetPosition:o=we.Top,curvature:s=.25}){const[a,u]=Cl({pos:n,x1:e,y1:t,x2:r,y2:i,c:s}),[c,f]=Cl({pos:o,x1:r,y1:i,x2:e,y2:t,c:s}),[h,d,g,v]=up({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:a,sourceControlY:u,targetControlX:c,targetControlY:f});return[`M${e},${t} C${a},${u} ${c},${f} ${r},${i}`,h,d,g,v]}function Gc({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,o=n<e?n+i:n-i,s=Math.abs(r-t)/2,a=r<t?r+s:r-s;return[o,a,i,s]}function cp({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:i=!1,zIndexMode:o="basic"}){if(o==="manual")return r;const s=i&&n?r+1e3:r,a=Math.max(e.parentId||i&&e.selected?e.internals.z:0,t.parentId||i&&t.selected?t.internals.z:0);return s+a}function dp({sourceNode:e,targetNode:t,width:n,height:r,transform:i}){const o=rs(Mo(e),Mo(t));o.x===o.x2&&(o.x2+=1),o.y===o.y2&&(o.y2+=1);const s={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return Ci(s,is(o))>0}const fp=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,hp=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Uc=(e,t,n={})=>{if(!e.source||!e.target)return t;const r=n.getEdgeId||fp;let i;return Fc(e)?i={...e}:i={...e,id:r(e)},hp(i,t)?t:(i.sourceHandle===null&&delete i.sourceHandle,i.targetHandle===null&&delete i.targetHandle,t.concat(i))};function qc({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,o,s,a]=Gc({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,o,s,a]}const Ml={[we.Left]:{x:-1,y:0},[we.Right]:{x:1,y:0},[we.Top]:{x:0,y:-1},[we.Bottom]:{x:0,y:1}},gp=({source:e,sourcePosition:t=we.Bottom,target:n})=>t===we.Left||t===we.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Pl=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function vp({source:e,sourcePosition:t=we.Bottom,target:n,targetPosition:r=we.Top,center:i,offset:o,stepPosition:s}){const a=Ml[t],u=Ml[r],c={x:e.x+a.x*o,y:e.y+a.y*o},f={x:n.x+u.x*o,y:n.y+u.y*o},h=gp({source:c,sourcePosition:t,target:f}),d=h.x!==0?"x":"y",g=h[d];let v=[],m,_;const x={x:0,y:0},C={x:0,y:0},[,,P,b]=Gc({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[d]*u[d]===-1){d==="x"?(m=i.x??c.x+(f.x-c.x)*s,_=i.y??(c.y+f.y)/2):(m=i.x??(c.x+f.x)/2,_=i.y??c.y+(f.y-c.y)*s);const L=[{x:m,y:c.y},{x:m,y:f.y}],j=[{x:c.x,y:_},{x:f.x,y:_}];a[d]===g?v=d==="x"?L:j:v=d==="x"?j:L}else{const L=[{x:c.x,y:f.y}],j=[{x:f.x,y:c.y}];if(d==="x"?v=a.x===g?j:L:v=a.y===g?L:j,t===r){const E=Math.abs(e[d]-n[d]);if(E<=o){const O=Math.min(o-1,o-E);a[d]===g?x[d]=(c[d]>e[d]?-1:1)*O:C[d]=(f[d]>n[d]?-1:1)*O}}if(t!==r){const E=d==="x"?"y":"x",O=a[d]===u[E],p=c[E]>f[E],A=c[E]<f[E];(a[d]===1&&(!O&&p||O&&A)||a[d]!==1&&(!O&&A||O&&p))&&(v=d==="x"?L:j)}const D={x:c.x+x.x,y:c.y+x.y},R={x:f.x+C.x,y:f.y+C.y},$=Math.max(Math.abs(D.x-v[0].x),Math.abs(R.x-v[0].x)),M=Math.max(Math.abs(D.y-v[0].y),Math.abs(R.y-v[0].y));$>=M?(m=(D.x+R.x)/2,_=v[0].y):(m=v[0].x,_=(D.y+R.y)/2)}return[[e,{x:c.x+x.x,y:c.y+x.y},...v,{x:f.x+C.x,y:f.y+C.y},n],m,_,P,b]}function yp(e,t,n,r){const i=Math.min(Pl(e,t)/2,Pl(t,n)/2,r),{x:o,y:s}=t;if(e.x===o&&o===n.x||e.y===s&&s===n.y)return`L${o} ${s}`;if(e.y===s){const c=e.x<n.x?-1:1,f=e.y<n.y?1:-1;return`L ${o+i*c},${s}Q ${o},${s} ${o},${s+i*f}`}const a=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return`L ${o},${s+i*u}Q ${o},${s} ${o+i*a},${s}`}function Ma({sourceX:e,sourceY:t,sourcePosition:n=we.Bottom,targetX:r,targetY:i,targetPosition:o=we.Top,borderRadius:s=5,centerX:a,centerY:u,offset:c=20,stepPosition:f=.5}){const[h,d,g,v,m]=vp({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:o,center:{x:a,y:u},offset:c,stepPosition:f});return[h.reduce((x,C,P)=>{let b="";return P>0&&P<h.length-1?b=yp(h[P-1],C,h[P+1],s):b=`${P===0?"M":"L"}${C.x} ${C.y}`,x+=b,x},""),d,g,v,m]}function Dl(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function pp(e){var h;const{sourceNode:t,targetNode:n}=e;if(!Dl(t)||!Dl(n))return null;const r=t.internals.handleBounds||Ol(t.handles),i=n.internals.handleBounds||Ol(n.handles),o=Ll((r==null?void 0:r.source)??[],e.sourceHandle),s=Ll(e.connectionMode===$r.Strict?(i==null?void 0:i.target)??[]:((i==null?void 0:i.target)??[]).concat((i==null?void 0:i.source)??[]),e.targetHandle);if(!o||!s)return(h=e.onError)==null||h.call(e,"008",Ai.error008(o?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=(o==null?void 0:o.position)||we.Bottom,u=(s==null?void 0:s.position)||we.Top,c=Nr(t,o,a),f=Nr(n,s,u);return{sourceX:c.x,sourceY:c.y,targetX:f.x,targetY:f.y,sourcePosition:a,targetPosition:u}}function Ol(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function Nr(e,t,n=we.Left,r=!1){const i=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,o=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:s,height:a}=t??Ar(e);if(r)return{x:i+s/2,y:o+a/2};switch((t==null?void 0:t.position)??n){case we.Top:return{x:i+s/2,y:o};case we.Right:return{x:i+s,y:o+a/2};case we.Bottom:return{x:i+s/2,y:o+a};case we.Left:return{x:i,y:o+a/2}}}function Ll(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function na(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function mp(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const o=new Set;return e.reduce((s,a)=>([a.markerStart||r,a.markerEnd||i].forEach(u=>{if(u&&typeof u=="object"){const c=na(u,t);o.has(c)||(s.push({id:c,color:u.color||n,...u}),o.add(c))}}),s),[]).sort((s,a)=>s.id.localeCompare(a.id))}const Zc=1e3,_p=10,Pa={nodeOrigin:[0,0],nodeExtent:$s,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},bp={...Pa,checkEquality:!0};function Da(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function xp(e,t,n){const r=Da(Pa,n);for(const i of e.values())if(i.parentId)La(i,e,t,r);else{const o=Ji(i,r.nodeOrigin),s=ni(i.extent)?i.extent:r.nodeExtent,a=Er(o,s,Ar(i));i.internals.positionAbsolute=a}}function wp(e,t){if(!e.handles)return e.measured?t==null?void 0:t.internals.handleBounds:void 0;const n=[],r=[];for(const i of e.handles){const o={id:i.id,width:i.width??1,height:i.height??1,nodeId:e.id,x:i.x,y:i.y,position:i.position,type:i.type};i.type==="source"?n.push(o):i.type==="target"&&r.push(o)}return{source:n,target:r}}function Oa(e){return e==="manual"}function Ep(e,t,n,r={}){var c,f;const i=Da(bp,r),o={i:0},s=new Map(t),a=i!=null&&i.elevateNodesOnSelect&&!Oa(i.zIndexMode)?Zc:0;let u=e.length>0;t.clear(),n.clear();for(const h of e){let d=s.get(h.id);if(i.checkEquality&&h===(d==null?void 0:d.internals.userNode))t.set(h.id,d);else{const g=Ji(h,i.nodeOrigin),v=ni(h.extent)?h.extent:i.nodeExtent,m=Er(g,v,Ar(h));d={...i.defaults,...h,measured:{width:(c=h.measured)==null?void 0:c.width,height:(f=h.measured)==null?void 0:f.height},internals:{positionAbsolute:m,handleBounds:wp(h,d),z:jc(h,a,i.zIndexMode),userNode:h}},t.set(h.id,d)}(d.measured===void 0||d.measured.width===void 0||d.measured.height===void 0)&&!d.hidden&&(u=!1),h.parentId&&La(d,t,n,r,o)}return u}function Np(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function La(e,t,n,r,i){const{elevateNodesOnSelect:o,nodeOrigin:s,nodeExtent:a,zIndexMode:u}=Da(Pa,r),c=e.parentId,f=t.get(c);if(!f){console.warn(`Parent node ${c} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Np(e,n),i&&!f.parentId&&f.internals.rootParentIndex===void 0&&u==="auto"&&(f.internals.rootParentIndex=++i.i,f.internals.z=f.internals.z+i.i*_p),i&&f.internals.rootParentIndex!==void 0&&(i.i=f.internals.rootParentIndex);const h=o&&!Oa(u)?Zc:0,{x:d,y:g,z:v}=Ip(e,f,s,a,h,u),{positionAbsolute:m}=e.internals,_=d!==m.x||g!==m.y;(_||v!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:_?{x:d,y:g}:m,z:v}})}function jc(e,t,n){const r=In(e.zIndex)?e.zIndex:0;return Oa(n)?r:r+(e.selected?t:0)}function Ip(e,t,n,r,i,o){const{x:s,y:a}=t.internals.positionAbsolute,u=Ar(e),c=Ji(e,n),f=ni(e.extent)?Er(c,e.extent,u):c;let h=Er({x:s+f.x,y:a+f.y},r,u);e.extent==="parent"&&(h=Vc(h,u,t));const d=jc(e,i,o),g=t.internals.z??0;return{x:h.x,y:h.y,z:g>=d?g+1:d}}function Sp(e,t,n,r=[0,0]){var s;const i=[],o=new Map;for(const a of e){const u=t.get(a.parentId);if(!u)continue;const c=((s=o.get(a.parentId))==null?void 0:s.expandedRect)??ti(u),f=tp(c,a.rect);o.set(a.parentId,{expandedRect:f,parent:u})}return o.size>0&&o.forEach(({expandedRect:a,parent:u},c)=>{var P;const f=u.internals.positionAbsolute,h=Ar(u),d=u.origin??r,g=a.x<f.x?Math.round(Math.abs(f.x-a.x)):0,v=a.y<f.y?Math.round(Math.abs(f.y-a.y)):0,m=Math.max(h.width,Math.round(a.width)),_=Math.max(h.height,Math.round(a.height)),x=(m-h.width)*d[0],C=(_-h.height)*d[1];(g>0||v>0||x||C)&&(i.push({id:c,type:"position",position:{x:u.position.x-g+x,y:u.position.y-v+C}}),(P=n.get(c))==null||P.forEach(b=>{e.some(k=>k.id===b.id)||i.push({id:b.id,type:"position",position:{x:b.position.x+g,y:b.position.y+v}})})),(h.width<a.width||h.height<a.height||g||v)&&i.push({id:c,type:"dimensions",setAttributes:!0,dimensions:{width:m+(g?d[0]*g-x:0),height:_+(v?d[1]*v-C:0)}})}),i}function Tp(e,t,n,r,i,o,s){const a=r==null?void 0:r.querySelector(".xyflow__viewport");let u=!1;if(!a)return{changes:[],updatedInternals:u};const c=[],f=window.getComputedStyle(a),{m22:h}=new window.DOMMatrixReadOnly(f.transform),d=[];for(const g of e.values()){const v=t.get(g.id);if(!v)continue;if(v.hidden){t.set(v.id,{...v,internals:{...v.internals,handleBounds:void 0}}),u=!0;continue}const m=Hc(g.nodeElement),_=v.measured.width!==m.width||v.measured.height!==m.height;if(!!(m.width&&m.height&&(_||!v.internals.handleBounds||g.force))){const C=g.nodeElement.getBoundingClientRect(),P=ni(v.extent)?v.extent:o;let{positionAbsolute:b}=v.internals;v.parentId&&v.extent==="parent"?b=Vc(b,m,t.get(v.parentId)):P&&(b=Er(b,P,m));const k={...v,measured:m,internals:{...v.internals,positionAbsolute:b,handleBounds:{source:Al("source",g.nodeElement,C,h,v.id),target:Al("target",g.nodeElement,C,h,v.id)}}};t.set(v.id,k),v.parentId&&La(k,t,n,{nodeOrigin:i,zIndexMode:s}),u=!0,_&&(c.push({id:v.id,type:"dimensions",dimensions:m}),v.expandParent&&v.parentId&&d.push({id:v.id,parentId:v.parentId,rect:ti(k,i)}))}}if(d.length>0){const g=Sp(d,t,n,i);c.push(...g)}return{changes:c,updatedInternals:u}}async function kp({delta:e,panZoom:t,transform:n,translateExtent:r,width:i,height:o}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const s=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[i,o]],r),a=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(a)}function zl(e,t,n,r,i,o){let s=i;const a=r.get(s)||new Map;r.set(s,a.set(n,t)),s=`${i}-${e}`;const u=r.get(s)||new Map;if(r.set(s,u.set(n,t)),o){s=`${i}-${e}-${o}`;const c=r.get(s)||new Map;r.set(s,c.set(n,t))}}function Ap(e,t,n){e.clear(),t.clear();for(const r of n){const{source:i,target:o,sourceHandle:s=null,targetHandle:a=null}=r,u={edgeId:r.id,source:i,target:o,sourceHandle:s,targetHandle:a},c=`${i}-${s}--${o}-${a}`,f=`${o}-${a}--${i}-${s}`;zl("source",u,f,e,i,s),zl("target",u,c,e,o,a),t.set(r.id,r)}}function Jc(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:Jc(n,t):!1}function Fl(e,t,n){var i;let r=e;do{if((i=r==null?void 0:r.matches)!=null&&i.call(r,t))return!0;if(r===n)return!1;r=r==null?void 0:r.parentElement}while(r);return!1}function Cp(e,t,n,r){const i=new Map;for(const[o,s]of e)if((s.selected||s.id===r)&&(!s.parentId||!Jc(s,e))&&(s.draggable||t&&typeof s.draggable>"u")){const a=e.get(o);a&&i.set(o,{id:o,position:a.position||{x:0,y:0},distance:{x:n.x-a.internals.positionAbsolute.x,y:n.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return i}function bs({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var s,a,u;const i=[];for(const[c,f]of t){const h=(s=n.get(c))==null?void 0:s.internals.userNode;h&&i.push({...h,position:f.position,dragging:r})}if(!e)return[i[0],i];const o=(a=n.get(e))==null?void 0:a.internals.userNode;return[o?{...o,position:((u=t.get(e))==null?void 0:u.position)||o.position,dragging:r}:i[0],i]}function Mp({dragItems:e,snapGrid:t,x:n,y:r}){const i=e.values().next().value;if(!i)return null;const o={x:n-i.distance.x,y:r-i.distance.y},s=Qi(o,t);return{x:s.x-o.x,y:s.y-o.y}}function Pp({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:i}){let o={x:null,y:null},s=0,a=new Map,u=!1,c={x:0,y:0},f=null,h=!1,d=null,g=!1,v=!1,m=null;function _({noDragClassName:C,handleSelector:P,domNode:b,isSelectable:k,nodeId:L,nodeClickDistance:j=0}){d=Kt(b);function D({x:E,y:O}){const{nodeLookup:p,nodeExtent:A,snapGrid:N,snapToGrid:z,nodeOrigin:V,onNodeDrag:G,onSelectionDrag:H,onError:B,updateNodePositions:ne}=t();o={x:E,y:O};let se=!1;const Y=a.size>1,W=Y&&A?ta(ns(a)):null,K=Y&&z?Mp({dragItems:a,snapGrid:N,x:E,y:O}):null;for(const[Z,re]of a){if(!p.has(Z))continue;let ge={x:E-re.distance.x,y:O-re.distance.y};z&&(ge=K?{x:Math.round(ge.x+K.x),y:Math.round(ge.y+K.y)}:Qi(ge,N));let U=null;if(Y&&A&&!re.extent&&W){const{positionAbsolute:ye}=re.internals,T=ye.x-W.x+A[0][0],F=ye.x+re.measured.width-W.x2+A[1][0],J=ye.y-W.y+A[0][1],q=ye.y+re.measured.height-W.y2+A[1][1];U=[[T,J],[F,q]]}const{position:ae,positionAbsolute:be}=Rc({nodeId:Z,nextPosition:ge,nodeLookup:p,nodeExtent:U||A,nodeOrigin:V,onError:B});se=se||re.position.x!==ae.x||re.position.y!==ae.y,re.position=ae,re.internals.positionAbsolute=be}if(v=v||se,!!se&&(ne(a,!0),m&&(r||G||!L&&H))){const[Z,re]=bs({nodeId:L,dragItems:a,nodeLookup:p});r==null||r(m,a,Z,re),G==null||G(m,Z,re),L||H==null||H(m,re)}}async function R(){if(!f)return;const{transform:E,panBy:O,autoPanSpeed:p,autoPanOnNodeDrag:A}=t();if(!A){u=!1,cancelAnimationFrame(s);return}const[N,z]=Bc(c,f,p);(N!==0||z!==0)&&(o.x=(o.x??0)-N/E[2],o.y=(o.y??0)-z/E[2],await O({x:N,y:z})&&D(o)),s=requestAnimationFrame(R)}function $(E){var Y;const{nodeLookup:O,multiSelectionActive:p,nodesDraggable:A,transform:N,snapGrid:z,snapToGrid:V,selectNodesOnDrag:G,onNodeDragStart:H,onSelectionDragStart:B,unselectNodesAndEdges:ne}=t();h=!0,(!G||!k)&&!p&&L&&((Y=O.get(L))!=null&&Y.selected||ne()),k&&G&&L&&(e==null||e(L));const se=_s(E.sourceEvent,{transform:N,snapGrid:z,snapToGrid:V,containerBounds:f});if(o=se,a=Cp(O,A,se,L),a.size>0&&(n||H||!L&&B)){const[W,K]=bs({nodeId:L,dragItems:a,nodeLookup:O});n==null||n(E.sourceEvent,a,W,K),H==null||H(E.sourceEvent,W,K),L||B==null||B(E.sourceEvent,K)}}const M=Qg().clickDistance(j).on("start",E=>{const{domNode:O,nodeDragThreshold:p,transform:A,snapGrid:N,snapToGrid:z}=t();f=(O==null?void 0:O.getBoundingClientRect())||null,g=!1,v=!1,m=E.sourceEvent,p===0&&$(E),o=_s(E.sourceEvent,{transform:A,snapGrid:N,snapToGrid:z,containerBounds:f}),c=Gt(E.sourceEvent,f)}).on("drag",E=>{const{autoPanOnNodeDrag:O,transform:p,snapGrid:A,snapToGrid:N,nodeDragThreshold:z,nodeLookup:V}=t(),G=_s(E.sourceEvent,{transform:p,snapGrid:A,snapToGrid:N,containerBounds:f});if(m=E.sourceEvent,(E.sourceEvent.type==="touchmove"&&E.sourceEvent.touches.length>1||L&&!V.has(L))&&(g=!0),!g){if(!u&&O&&h&&(u=!0,R()),!h){const H=Gt(E.sourceEvent,f),B=H.x-c.x,ne=H.y-c.y;Math.sqrt(B*B+ne*ne)>z&&$(E)}(o.x!==G.xSnapped||o.y!==G.ySnapped)&&a&&h&&(c=Gt(E.sourceEvent,f),D(G))}}).on("end",E=>{if(!(!h||g)&&(u=!1,h=!1,cancelAnimationFrame(s),a.size>0)){const{nodeLookup:O,updateNodePositions:p,onNodeDragStop:A,onSelectionDragStop:N}=t();if(v&&(p(a,!1),v=!1),i||A||!L&&N){const[z,V]=bs({nodeId:L,dragItems:a,nodeLookup:O,dragging:!1});i==null||i(E.sourceEvent,a,z,V),A==null||A(E.sourceEvent,z,V),L||N==null||N(E.sourceEvent,V)}}}).filter(E=>{const O=E.target;return!E.button&&(!C||!Fl(O,`.${C}`,b))&&(!P||Fl(O,P,b))});d.call(M)}function x(){d==null||d.on(".drag",null)}return{update:_,destroy:x}}function Dp(e,t,n){const r=[],i={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const o of t.values())Ci(i,ti(o))>0&&r.push(o);return r}const Op=250;function Lp(e,t,n,r){var a,u;let i=[],o=1/0;const s=Dp(e,n,t+Op);for(const c of s){const f=[...((a=c.internals.handleBounds)==null?void 0:a.source)??[],...((u=c.internals.handleBounds)==null?void 0:u.target)??[]];for(const h of f){if(r.nodeId===h.nodeId&&r.type===h.type&&r.id===h.id)continue;const{x:d,y:g}=Nr(c,h,h.position,!0),v=Math.sqrt(Math.pow(d-e.x,2)+Math.pow(g-e.y,2));v>t||(v<o?(i=[{...h,x:d,y:g}],o=v):v===o&&i.push({...h,x:d,y:g}))}}if(!i.length)return null;if(i.length>1){const c=r.type==="source"?"target":"source";return i.find(f=>f.type===c)??i[0]}return i[0]}function Qc(e,t,n,r,i,o=!1){var c,f,h;const s=r.get(e);if(!s)return null;const a=i==="strict"?(c=s.internals.handleBounds)==null?void 0:c[t]:[...((f=s.internals.handleBounds)==null?void 0:f.source)??[],...((h=s.internals.handleBounds)==null?void 0:h.target)??[]],u=(n?a==null?void 0:a.find(d=>d.id===n):a==null?void 0:a[0])??null;return u&&o?{...u,...Nr(s,u,u.position,!0)}:u}function $c(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function zp(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const ed=()=>!0;function Fp(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:o,isTarget:s,domNode:a,nodeLookup:u,lib:c,autoPanOnConnect:f,flowId:h,panBy:d,cancelConnection:g,onConnectStart:v,onConnect:m,onConnectEnd:_,isValidConnection:x=ed,onReconnectEnd:C,updateConnection:P,getTransform:b,getFromHandle:k,autoPanSpeed:L,dragThreshold:j=1,handleDomNode:D}){const R=Kc(e.target);let $=0,M;const{x:E,y:O}=Gt(e),p=$c(o,D),A=a==null?void 0:a.getBoundingClientRect();let N=!1;if(!A||!p)return;const z=Qc(i,p,r,u,t);if(!z)return;let V=Gt(e,A),G=!1,H=null,B=!1,ne=null;function se(){if(!f||!A)return;const[ae,be]=Bc(V,A,L);d({x:ae,y:be}),$=requestAnimationFrame(se)}const Y={...z,nodeId:i,type:p,position:z.position},W=u.get(i);let Z={inProgress:!0,isValid:null,from:Nr(W,Y,we.Left,!0),fromHandle:Y,fromPosition:Y.position,fromNode:W,to:V,toHandle:null,toPosition:Il[Y.position],toNode:null,pointer:V};function re(){N=!0,P(Z),v==null||v(e,{nodeId:i,handleId:r,handleType:p})}j===0&&re();function ge(ae){if(!N){const{x:q,y:ee}=Gt(ae),te=q-E,ie=ee-O;if(!(te*te+ie*ie>j*j))return;re()}if(!k()||!Y){U(ae);return}const be=b();V=Gt(ae,A),M=Lp($i(V,be,!1,[1,1]),n,u,Y),G||(se(),G=!0);const ye=td(ae,{handle:M,connectionMode:t,fromNodeId:i,fromHandleId:r,fromType:s?"target":"source",isValidConnection:x,doc:R,lib:c,flowId:h,nodeLookup:u});ne=ye.handleDomNode,H=ye.connection,B=zp(!!M,ye.isValid);const T=u.get(i),F=T?Nr(T,Y,we.Left,!0):Z.from,J={...Z,from:F,isValid:B,to:ye.toHandle&&B?Po({x:ye.toHandle.x,y:ye.toHandle.y},be):V,toHandle:ye.toHandle,toPosition:B&&ye.toHandle?ye.toHandle.position:Il[Y.position],toNode:ye.toHandle?u.get(ye.toHandle.nodeId):null,pointer:V};P(J),Z=J}function U(ae){if(!("touches"in ae&&ae.touches.length>0)){if(N){(M||ne)&&H&&B&&(m==null||m(H));const{inProgress:be,...ye}=Z,T={...ye,toPosition:Z.toHandle?Z.toPosition:null};_==null||_(ae,T),o&&(C==null||C(ae,T))}g(),cancelAnimationFrame($),G=!1,B=!1,H=null,ne=null,R.removeEventListener("mousemove",ge),R.removeEventListener("mouseup",U),R.removeEventListener("touchmove",ge),R.removeEventListener("touchend",U)}}R.addEventListener("mousemove",ge),R.addEventListener("mouseup",U),R.addEventListener("touchmove",ge),R.addEventListener("touchend",U)}function td(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:o,doc:s,lib:a,flowId:u,isValidConnection:c=ed,nodeLookup:f}){const h=o==="target",d=t?s.querySelector(`.${a}-flow__handle[data-id="${u}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:g,y:v}=Gt(e),m=s.elementFromPoint(g,v),_=m!=null&&m.classList.contains(`${a}-flow__handle`)?m:d,x={handleDomNode:_,isValid:!1,connection:null,toHandle:null};if(_){const C=$c(void 0,_),P=_.getAttribute("data-nodeid"),b=_.getAttribute("data-handleid"),k=_.classList.contains("connectable"),L=_.classList.contains("connectableend");if(!P||!C)return x;const j={source:h?P:r,sourceHandle:h?b:i,target:h?r:P,targetHandle:h?i:b};x.connection=j;const R=k&&L&&(n===$r.Strict?h&&C==="source"||!h&&C==="target":P!==r||b!==i);x.isValid=R&&c(j),x.toHandle=Qc(P,C,b,f,n,!0)}return x}const Rl={onPointerDown:Fp,isValid:td},os=e=>({x:e.x,y:e.y,zoom:e.k}),xs=({x:e,y:t,zoom:n})=>ts.translate(e,t).scale(n),Or=(e,t)=>e.target.closest(`.${t}`),nd=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Rp=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,ws=(e,t=0,n=Rp,r=()=>{})=>{const i=typeof t=="number"&&t>0;return i||r(),i?e.transition().duration(t).ease(n).on("end",r):e},rd=e=>{const t=e.ctrlKey&&Do()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function Vp({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:o,zoomOnPinch:s,onPanZoomStart:a,onPanZoom:u,onPanZoomEnd:c}){return f=>{if(Or(f,t))return f.ctrlKey&&f.preventDefault(),!1;f.preventDefault(),f.stopImmediatePropagation();const h=n.property("__zoom").k||1;if(f.ctrlKey&&s){const _=jt(f),x=rd(f),C=h*Math.pow(2,x);r.scaleTo(n,C,_,f);return}const d=f.deltaMode===1?20:1;let g=i===Fr.Vertical?0:f.deltaX*d,v=i===Fr.Horizontal?0:f.deltaY*d;!Do()&&f.shiftKey&&i!==Fr.Vertical&&(g=f.deltaY*d,v=0),r.translateBy(n,-(g/h)*o,-(v/h)*o,{internal:!0});const m=os(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(u==null||u(f,m),e.panScrollTimeout=setTimeout(()=>{c==null||c(f,m),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,a==null||a(f,m))}}function Bp({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,i){const o=r.type==="wheel",s=!t&&o&&!r.ctrlKey,a=Or(r,e);if(r.ctrlKey&&o&&a&&r.preventDefault(),s||a)return null;r.preventDefault(),n.call(this,r,i)}}function Hp({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var o,s,a;if((o=r.sourceEvent)!=null&&o.internal)return;const i=os(r.transform);e.mouseButton=((s=r.sourceEvent)==null?void 0:s.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=i,((a=r.sourceEvent)==null?void 0:a.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,i))}}function Kp({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return o=>{var s,a;e.usedRightMouseButton=!!(n&&nd(t,e.mouseButton??0)),(s=o.sourceEvent)!=null&&s.sync||r([o.transform.x,o.transform.y,o.transform.k]),i&&!((a=o.sourceEvent)!=null&&a.internal)&&(i==null||i(o.sourceEvent,os(o.transform)))}}function Yp({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:o}){return s=>{var a;if(!((a=s.sourceEvent)!=null&&a.internal)&&(e.isZoomingOrPanning=!1,o&&nd(t,e.mouseButton??0)&&!e.usedRightMouseButton&&s.sourceEvent&&o(s.sourceEvent),e.usedRightMouseButton=!1,r(!1),i)){const u=os(s.transform);e.prevViewport=u,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{i==null||i(s.sourceEvent,u)},n?150:0)}}}function Xp({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:o,userSelectionActive:s,noWheelClassName:a,noPanClassName:u,lib:c,connectionInProgress:f}){return h=>{var _;const d=e||t,g=n&&h.ctrlKey,v=h.type==="wheel";if(h.button===1&&h.type==="mousedown"&&(Or(h,`${c}-flow__node`)||Or(h,`${c}-flow__edge`)))return!0;if(!r&&!d&&!i&&!o&&!n||s||f&&!v||Or(h,a)&&v||Or(h,u)&&(!v||i&&v&&!e)||!n&&h.ctrlKey&&v)return!1;if(!n&&h.type==="touchstart"&&((_=h.touches)==null?void 0:_.length)>1)return h.preventDefault(),!1;if(!d&&!i&&!g&&v||!r&&(h.type==="mousedown"||h.type==="touchstart")||Array.isArray(r)&&!r.includes(h.button)&&h.type==="mousedown")return!1;const m=Array.isArray(r)&&r.includes(h.button)||!h.button||h.button<=1;return(!h.ctrlKey||v)&&m}}function Wp({domNode:e,minZoom:t,maxZoom:n,translateExtent:r,viewport:i,onPanZoom:o,onPanZoomStart:s,onPanZoomEnd:a,onDraggingChange:u}){const c={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},f=e.getBoundingClientRect(),h=Wy().scaleExtent([t,n]).translateExtent(r),d=Kt(e).call(h);C({x:i.x,y:i.y,zoom:ei(i.zoom,t,n)},[[0,0],[f.width,f.height]],r);const g=d.on("wheel.zoom"),v=d.on("dblclick.zoom");h.wheelDelta(rd);function m(M,E){return d?new Promise(O=>{h==null||h.interpolate((E==null?void 0:E.interpolate)==="linear"?xi:mo).transform(ws(d,E==null?void 0:E.duration,E==null?void 0:E.ease,()=>O(!0)),M)}):Promise.resolve(!1)}function _({noWheelClassName:M,noPanClassName:E,onPaneContextMenu:O,userSelectionActive:p,panOnScroll:A,panOnDrag:N,panOnScrollMode:z,panOnScrollSpeed:V,preventScrolling:G,zoomOnPinch:H,zoomOnScroll:B,zoomOnDoubleClick:ne,zoomActivationKeyPressed:se,lib:Y,onTransformChange:W,connectionInProgress:K,paneClickDistance:Z,selectionOnDrag:re}){p&&!c.isZoomingOrPanning&&x();const ge=A&&!se&&!p;h.clickDistance(re?1/0:!In(Z)||Z<0?0:Z);const U=ge?Vp({zoomPanValues:c,noWheelClassName:M,d3Selection:d,d3Zoom:h,panOnScrollMode:z,panOnScrollSpeed:V,zoomOnPinch:H,onPanZoomStart:s,onPanZoom:o,onPanZoomEnd:a}):Bp({noWheelClassName:M,preventScrolling:G,d3ZoomHandler:g});if(d.on("wheel.zoom",U,{passive:!1}),!p){const be=Hp({zoomPanValues:c,onDraggingChange:u,onPanZoomStart:s});h.on("start",be);const ye=Kp({zoomPanValues:c,panOnDrag:N,onPaneContextMenu:!!O,onPanZoom:o,onTransformChange:W});h.on("zoom",ye);const T=Yp({zoomPanValues:c,panOnDrag:N,panOnScroll:A,onPaneContextMenu:O,onPanZoomEnd:a,onDraggingChange:u});h.on("end",T)}const ae=Xp({zoomActivationKeyPressed:se,panOnDrag:N,zoomOnScroll:B,panOnScroll:A,zoomOnDoubleClick:ne,zoomOnPinch:H,userSelectionActive:p,noPanClassName:E,noWheelClassName:M,lib:Y,connectionInProgress:K});h.filter(ae),ne?d.on("dblclick.zoom",v):d.on("dblclick.zoom",null)}function x(){h.on("zoom",null)}async function C(M,E,O){const p=xs(M),A=h==null?void 0:h.constrain()(p,E,O);return A&&await m(A),new Promise(N=>N(A))}async function P(M,E){const O=xs(M);return await m(O,E),new Promise(p=>p(O))}function b(M){if(d){const E=xs(M),O=d.property("__zoom");(O.k!==M.zoom||O.x!==M.x||O.y!==M.y)&&(h==null||h.transform(d,E,null,{sync:!0}))}}function k(){const M=d?Lc(d.node()):{x:0,y:0,k:1};return{x:M.x,y:M.y,zoom:M.k}}function L(M,E){return d?new Promise(O=>{h==null||h.interpolate((E==null?void 0:E.interpolate)==="linear"?xi:mo).scaleTo(ws(d,E==null?void 0:E.duration,E==null?void 0:E.ease,()=>O(!0)),M)}):Promise.resolve(!1)}function j(M,E){return d?new Promise(O=>{h==null||h.interpolate((E==null?void 0:E.interpolate)==="linear"?xi:mo).scaleBy(ws(d,E==null?void 0:E.duration,E==null?void 0:E.ease,()=>O(!0)),M)}):Promise.resolve(!1)}function D(M){h==null||h.scaleExtent(M)}function R(M){h==null||h.translateExtent(M)}function $(M){const E=!In(M)||M<0?0:M;h==null||h.clickDistance(E)}return{update:_,destroy:x,setViewport:P,setViewportConstrained:C,getViewport:k,scaleTo:L,scaleBy:j,setScaleExtent:D,setTranslateExtent:R,syncViewport:b,setClickDistance:$}}var Vl;(function(e){e.Line="line",e.Handle="handle"})(Vl||(Vl={}));function za(){const e={};return[t=>{if(t&&!Jd(e))throw new Error(t);return ca(e)},t=>da(e,t)]}const[Gp,Up]=za(),[qp,Zp]=za(),[jp,Jp]=za();var Qp=me("<div><!></div>");function ri(e,t){Ne(t,!0);let n=Q(t,"id",3,null),r=Q(t,"type",3,"source"),i=Q(t,"position",19,()=>we.Top),o=Q(t,"isConnectableStart",3,!0),s=Q(t,"isConnectableEnd",3,!0),a=qi(t,["$$slots","$$events","$$legacy","id","type","position","style","class","isConnectable","isConnectableStart","isConnectableEnd","isValidConnection","onconnect","ondisconnect","children"]);const u=Gp("Handle must be used within a Custom Node component"),c=qp("Handle must be used within a Custom Node component");let f=S(()=>r()==="target"),h=S(()=>t.isConnectable!==void 0?t.isConnectable:c.value),d=ui(),g=S(()=>d.ariaLabelConfig),v=null;Fu(()=>{if(t.onconnect||t.ondisconnect){d.edges;let E=d.connectionLookup.get(`${u}-${r()}${n()?`-${n()}`:""}`);if(v&&!Uy(E,v)){const O=E??new Map;Sl(v,O,t.ondisconnect),Sl(O,v,t.onconnect)}v=new Map(E)}});let m=S(()=>{if(!d.connection.inProgress)return[!1,!1,!1,!1,null];const{fromHandle:E,toHandle:O,isValid:p}=d.connection,A=E&&E.nodeId===u&&E.type===r()&&E.id===n(),N=O&&O.nodeId===u&&O.type===r()&&O.id===n(),z=d.connectionMode===$r.Strict?(E==null?void 0:E.type)!==r():u!==(E==null?void 0:E.nodeId)||n()!==(E==null?void 0:E.id);return[!0,A,N,z,N&&p]}),_=S(()=>ii(l(m),5)),x=S(()=>l(_)[0]),C=S(()=>l(_)[1]),P=S(()=>l(_)[2]),b=S(()=>l(_)[3]),k=S(()=>l(_)[4]);function L(E){var p;const O=d.onbeforeconnect?d.onbeforeconnect(E):E;O&&(d.addEdge(O),(p=d.onconnect)==null||p.call(d,E))}function j(E){const O=Xc(E);E.currentTarget&&(O&&E.button===0||!O)&&Rl.onPointerDown(E,{handleId:n(),nodeId:u,isTarget:l(f),connectionRadius:d.connectionRadius,domNode:d.domNode,nodeLookup:d.nodeLookup,connectionMode:d.connectionMode,lib:"svelte",autoPanOnConnect:d.autoPanOnConnect,autoPanSpeed:d.autoPanSpeed,flowId:d.flowId,isValidConnection:t.isValidConnection??d.isValidConnection,updateConnection:d.updateConnection,cancelConnection:d.cancelConnection,panBy:d.panBy,onConnect:L,onConnectStart:(p,A)=>{var N;(N=d.onconnectstart)==null||N.call(d,p,{nodeId:A.nodeId,handleId:A.handleId,handleType:A.handleType})},onConnectEnd:(p,A)=>{var N;(N=d.onconnectend)==null||N.call(d,p,A)},getTransform:()=>[d.viewport.x,d.viewport.y,d.viewport.zoom],getFromHandle:()=>d.connection.fromHandle,dragThreshold:d.connectionDragThreshold,handleDomNode:E.currentTarget})}function D(E){var ne,se;if(!u||!d.clickConnectStartHandle&&!o())return;if(!d.clickConnectStartHandle){(ne=d.onclickconnectstart)==null||ne.call(d,E,{nodeId:u,handleId:n(),handleType:r()}),d.clickConnectStartHandle={nodeId:u,type:r(),id:n()};return}const O=Kc(E.target),p=t.isValidConnection??d.isValidConnection,{connectionMode:A,clickConnectStartHandle:N,flowId:z,nodeLookup:V}=d,{connection:G,isValid:H}=Rl.isValid(E,{handle:{nodeId:u,id:n(),type:r()},connectionMode:A,fromNodeId:N.nodeId,fromHandleId:N.id??null,fromType:N.type,isValidConnection:p,flowId:z,doc:O,lib:"svelte",nodeLookup:V});H&&G&&L(G);const B=structuredClone(gu(d.connection));delete B.inProgress,B.toPosition=B.toHandle?B.toHandle.position:null,(se=d.onclickconnectend)==null||se.call(d,E,B),d.clickConnectStartHandle=null}var R=Qp(),$=()=>{};An(R,()=>({"data-handleid":n(),"data-nodeid":u,"data-handlepos":i(),"data-id":`${d.flowId??""}-${u??""}-${n()??"null"??""}-${r()??""}`,class:["svelte-flow__handle",`svelte-flow__handle-${i()}`,d.noDragClass,d.noPanClass,i(),t.class],onmousedown:j,ontouchstart:j,onclick:d.clickConnect?D:void 0,onkeypress:$,style:t.style,role:"button","aria-label":l(g)["handle.ariaLabel"],tabindex:"-1",...a,[Bn]:{valid:l(k),connectingto:l(P),connectingfrom:l(C),source:!l(f),target:l(f),connectablestart:o(),connectableend:s(),connectable:l(h),connectionindicator:l(h)&&(!l(x)||l(b))&&(l(x)||d.clickConnectStartHandle?s():o())}}));var M=ce(R);Pn(M,()=>t.children??Sr),oe(e,R),Ie()}var $p=me("<!> <!>",1);function id(e,t){Ne(t,!0);let n=Q(t,"targetPosition",19,()=>we.Top),r=Q(t,"sourcePosition",19,()=>we.Bottom);var i=$p(),o=Ke(i);ri(o,{type:"target",get position(){return n()}});var s=Se(o),a=Se(s);ri(a,{type:"source",get position(){return r()}}),Ee(()=>{var u;return We(s,` ${((u=t.data)==null?void 0:u.label)??""} `)}),oe(e,i),Ie()}var em=me(" <!>",1);function tm(e,t){Ne(t,!0);let n=Q(t,"data",19,()=>({label:"Node"})),r=Q(t,"sourcePosition",19,()=>we.Bottom);var i=em(),o=Ke(i),s=Se(o);ri(s,{type:"source",get position(){return r()}}),Ee(()=>{var a;return We(o,`${((a=n())==null?void 0:a.label)??""} `)}),oe(e,i),Ie()}var nm=me(" <!>",1);function rm(e,t){Ne(t,!0);let n=Q(t,"data",19,()=>({label:"Node"})),r=Q(t,"targetPosition",19,()=>we.Top);var i=nm(),o=Ke(i),s=Se(o);ri(s,{type:"target",get position(){return r()}}),Ee(()=>{var a;return We(o,`${((a=n())==null?void 0:a.label)??""} `)}),oe(e,i),Ie()}function im(e,t){}function Es(e,t,n){if(!n||!t)return;const r=n==="root"?t:t.querySelector(`.svelte-flow__${n}`);r&&r.appendChild(e)}function Ns(e,t){const n=S(ui),r=S(()=>l(n).domNode);let i;return l(r)?Es(e,l(r),t):i=Ru(()=>{an(()=>{Es(e,l(r),t),i==null||i()})}),{async update(o){Es(e,l(r),o)},destroy(){e.parentNode&&e.parentNode.removeChild(e),i==null||i()}}}function om(){let e=Ve(typeof window>"u");if(l(e)){const t=Ru(()=>{an(()=>{I(e,!1),t==null||t()})})}return{get value(){return l(e)}}}const Bl=e=>Zy(e),sm=e=>Fc(e);function un(e){return e===void 0?void 0:`${e}px`}const Oo={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var am=me("<div><!></div>");function lm(e,t){Ne(t,!0);let n=Q(t,"x",3,0),r=Q(t,"y",3,0),i=Q(t,"selectEdgeOnClick",3,!1),o=Q(t,"transparent",3,!1),s=qi(t,["$$slots","$$events","$$legacy","x","y","width","height","selectEdgeOnClick","transparent","class","children"]);const a=ui(),u=jp("EdgeLabel must be used within a Custom Edge component");let c=S(()=>{var g;return(g=a.visible.edges.get(u))==null?void 0:g.zIndex});var f=am(),h=()=>{i()&&u&&a.handleEdgeSelection(u)};An(f,g=>({class:["svelte-flow__edge-label",{transparent:o()},t.class],tabindex:"-1",onclick:h,...s,[Hn]:g}),[()=>({display:om().value?"none":void 0,cursor:i()?"pointer":void 0,transform:`translate(-50%, -50%) translate(${n()??""}px,${r()??""}px)`,"pointer-events":"all",width:un(t.width),height:un(t.height),"z-index":l(c)})],void 0,void 0,"svelte-1g6l770");var d=ce(f);Pn(d,()=>t.children??Sr),yt(f,(g,v)=>Ns==null?void 0:Ns(g,v),()=>"edge-labels"),oe(e,f),Ie()}var um=Tt("<path></path>"),cm=Tt('<path fill="none"></path><!><!>',1);function ss(e,t){let n=Q(t,"interactionWidth",3,20),r=qi(t,["$$slots","$$events","$$legacy","id","path","label","labelX","labelY","labelStyle","markerStart","markerEnd","style","interactionWidth","class"]);var i=cm(),o=Ke(i),s=Se(o);{var a=f=>{var h=um();An(h,()=>({d:t.path,"stroke-opacity":0,"stroke-width":n(),fill:"none",class:"svelte-flow__edge-interaction",...r})),oe(f,h)};Ye(s,f=>{n()>0&&f(a)})}var u=Se(s);{var c=f=>{lm(f,{get x(){return t.labelX},get y(){return t.labelY},get style(){return t.labelStyle},selectEdgeOnClick:!0,children:(h,d)=>{var g=Rf();Ee(()=>We(g,t.label)),oe(h,g)},$$slots:{default:!0}})};Ye(u,f=>{t.label&&f(c)})}Ee(()=>{he(o,"id",t.id),he(o,"d",t.path),Dn(o,0,kr(["svelte-flow__edge-path",t.class])),he(o,"marker-start",t.markerStart),he(o,"marker-end",t.markerEnd),zt(o,t.style)}),oe(e,i)}function od(e,t){Ne(t,!0);let n=S(()=>{var a;return Wc({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition,curvature:(a=t.pathOptions)==null?void 0:a.curvature})}),r=S(()=>ii(l(n),3)),i=S(()=>l(r)[0]),o=S(()=>l(r)[1]),s=S(()=>l(r)[2]);ss(e,{get id(){return t.id},get path(){return l(i)},get labelX(){return l(o)},get labelY(){return l(s)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),Ie()}function dm(e,t){Ne(t,!0);let n=S(()=>Ma({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition})),r=S(()=>ii(l(n),3)),i=S(()=>l(r)[0]),o=S(()=>l(r)[1]),s=S(()=>l(r)[2]);ss(e,{get path(){return l(i)},get labelX(){return l(o)},get labelY(){return l(s)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),Ie()}function fm(e,t){Ne(t,!0);let n=S(()=>qc({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY})),r=S(()=>ii(l(n),3)),i=S(()=>l(r)[0]),o=S(()=>l(r)[1]),s=S(()=>l(r)[2]);ss(e,{get path(){return l(i)},get labelX(){return l(o)},get labelY(){return l(s)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),Ie()}function hm(e,t){Ne(t,!0);let n=S(()=>Ma({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition,borderRadius:0})),r=S(()=>ii(l(n),3)),i=S(()=>l(r)[0]),o=S(()=>l(r)[1]),s=S(()=>l(r)[2]);ss(e,{get path(){return l(i)},get labelX(){return l(o)},get labelY(){return l(s)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),Ie()}var Ri,Vi;class gm{constructor(t,n){X(this,Ri);X(this,Vi);Te(this,Ri,t),Te(this,Vi,Nu(n))}get current(){return y(this,Vi).call(this),y(this,Ri).call(this)}}Ri=new WeakMap,Vi=new WeakMap;const vm=/\(.+\)/,ym=new Set(["all","print","screen","and","or","not","only"]);class pm extends gm{constructor(t,n){let r=vm.test(t)||t.split(/[\s,]+/).some(o=>ym.has(o.trim()))?t:`(${t})`;const i=window.matchMedia(r);super(()=>i.matches,o=>Vs(i,"change",o))}}function mm(e,t,n,r){const i=new Map;return Aa(e,{x:0,y:0,width:n,height:r},t,!0).forEach(o=>{i.set(o.id,o)}),i}function Hl(e){const{edges:t,defaultEdgeOptions:n,nodeLookup:r,previousEdges:i,connectionMode:o,onerror:s,onlyRenderVisible:a,elevateEdgesOnSelect:u,zIndexMode:c}=e,f=new Map;for(const h of t){const d=r.get(h.source),g=r.get(h.target);if(!d||!g)continue;if(a){const{visibleNodes:_,transform:x,width:C,height:P}=e;if(dp({sourceNode:d,targetNode:g,width:C,height:P,transform:x}))_.set(d.id,d),_.set(g.id,g);else continue}const v=i.get(h.id);if(v&&h===v.edge&&d==v.sourceNode&&g==v.targetNode){f.set(h.id,v);continue}const m=pp({id:h.id,sourceNode:d,targetNode:g,sourceHandle:h.sourceHandle||null,targetHandle:h.targetHandle||null,connectionMode:o,onError:s});m&&f.set(h.id,{...n,...h,...m,zIndex:cp({selected:h.selected,zIndex:h.zIndex??n.zIndex,sourceNode:d,targetNode:g,elevateOnSelect:u,zIndexMode:c}),sourceNode:d,targetNode:g,edge:h})}return f}const sd={input:tm,output:rm,default:id,group:im},ad={straight:fm,smoothstep:dm,default:od,step:hm};function _m(e,t,n,r,i,o){if(t&&!n&&r&&i){const s=ns(o,{filter:a=>!!((a.width||a.initialWidth)&&(a.height||a.initialHeight))});return Ca(s,r,i,.5,2,.1)}else return n??{x:0,y:0,zoom:1}}function bm(e){var n,r,i,o,s,a,u,c,f,h,d,g,v,m,_,x,C,P,b,k,L,j,D,R,$,M,E,O,p,A,N,z,V,G,H,B,ne,se,Y,W,K,Z,re,ge,U,ae,be,ye,T,F,J,q,ee,te,ie,de,Le,Ge,_e,Be,nt,ft,xt,wt,Me,pe,Pe,Ze,Ue,lt,ut,Xe,je,ht,Ln,zn;class t{constructor(){X(this,n,S(()=>e.props.id??"1"));X(this,r,Ve(null));X(this,i,Ve(null));X(this,o,Ve(e.width??0));X(this,s,Ve(e.height??0));X(this,a,Ve(e.props.zIndexMode??"basic"));X(this,u,S(()=>{var Oe;const w=Ep(e.nodes,this.nodeLookup,this.parentLookup,{nodeExtent:this.nodeExtent,nodeOrigin:this.nodeOrigin,elevateNodesOnSelect:e.props.elevateNodesOnSelect??!0,checkEquality:!0,zIndexMode:this.zIndexMode});return this.fitViewQueued&&w&&((Oe=this.fitViewOptions)!=null&&Oe.duration?this.resolveFitView():queueMicrotask(()=>{this.resolveFitView()})),w}));X(this,c,S(()=>this.panZoom!==null));X(this,f,S(()=>(Ap(this.connectionLookup,this.edgeLookup,e.edges),e.edges)));He(this,"_prevSelectedNodes",[]);He(this,"_prevSelectedNodeIds",new Set);X(this,h,S(()=>{const w=this._prevSelectedNodeIds.size,Oe=new Set,Je=this.nodes.filter(ke=>(ke.selected&&(Oe.add(ke.id),this._prevSelectedNodeIds.delete(ke.id)),ke.selected));return(w!==Oe.size||this._prevSelectedNodeIds.size>0)&&(this._prevSelectedNodes=Je),this._prevSelectedNodeIds=Oe,this._prevSelectedNodes}));He(this,"_prevSelectedEdges",[]);He(this,"_prevSelectedEdgeIds",new Set);X(this,d,S(()=>{const w=this._prevSelectedEdgeIds.size,Oe=new Set,Je=this.edges.filter(ke=>(ke.selected&&(Oe.add(ke.id),this._prevSelectedEdgeIds.delete(ke.id)),ke.selected));return(w!==Oe.size||this._prevSelectedEdgeIds.size>0)&&(this._prevSelectedEdges=Je),this._prevSelectedEdgeIds=Oe,this._prevSelectedEdges}));He(this,"selectionChangeHandlers",new Map);He(this,"nodeLookup",new Map);He(this,"parentLookup",new Map);He(this,"connectionLookup",new Map);He(this,"edgeLookup",new Map);He(this,"_prevVisibleEdges",new Map);X(this,g,S(()=>{const{nodes:w,_edges:Oe,_prevVisibleEdges:Je,nodeLookup:ke,connectionMode:gn,onerror:Cr,onlyRenderVisibleElements:Mr,defaultEdgeOptions:Fn,zIndexMode:Pr}=this;let nr,as;const Ba={edges:Oe,defaultEdgeOptions:Fn,previousEdges:Je,nodeLookup:ke,connectionMode:gn,elevateEdgesOnSelect:e.props.elevateEdgesOnSelect??!0,zIndexMode:Pr,onerror:Cr};if(Mr){const{viewport:ls,width:Ha,height:Ka}=this,Ya=[ls.x,ls.y,ls.zoom];nr=mm(ke,Ya,Ha,Ka),as=Hl({...Ba,onlyRenderVisible:!0,visibleNodes:nr,transform:Ya,width:Ha,height:Ka})}else nr=this.nodeLookup,as=Hl(Ba);return{nodes:nr,edges:as}}));X(this,v,S(()=>e.props.nodesDraggable??!0));X(this,m,S(()=>e.props.nodesConnectable??!0));X(this,_,S(()=>e.props.elementsSelectable??!0));X(this,x,S(()=>e.props.nodesFocusable??!0));X(this,C,S(()=>e.props.edgesFocusable??!0));X(this,P,S(()=>e.props.disableKeyboardA11y??!1));X(this,b,S(()=>e.props.minZoom??.5));X(this,k,S(()=>e.props.maxZoom??2));X(this,L,S(()=>e.props.nodeOrigin??[0,0]));X(this,j,S(()=>e.props.nodeExtent??$s));X(this,D,S(()=>e.props.translateExtent??$s));X(this,R,S(()=>e.props.defaultEdgeOptions??{}));X(this,$,S(()=>e.props.nodeDragThreshold??1));X(this,M,S(()=>e.props.autoPanOnNodeDrag??!0));X(this,E,S(()=>e.props.autoPanOnConnect??!0));X(this,O,S(()=>e.props.autoPanOnNodeFocus??!0));X(this,p,S(()=>e.props.autoPanSpeed??15));X(this,A,S(()=>e.props.connectionDragThreshold??1));He(this,"fitViewQueued",e.props.fitView??!1);He(this,"fitViewOptions",e.props.fitViewOptions);He(this,"fitViewResolver",null);X(this,N,S(()=>e.props.snapGrid??null));X(this,z,Ve(!1));X(this,V,Ve(null));X(this,G,Ve(!1));X(this,H,Ve(!1));X(this,B,Ve(!1));X(this,ne,Ve(!1));X(this,se,Ve(!1));X(this,Y,Ve(null));X(this,W,Ve(""));X(this,K,S(()=>e.props.selectionMode??Ao.Partial));X(this,Z,S(()=>({...sd,...e.props.nodeTypes})));X(this,re,S(()=>({...ad,...e.props.edgeTypes})));X(this,ge,S(()=>e.props.noPanClass??"nopan"));X(this,U,S(()=>e.props.noDragClass??"nodrag"));X(this,ae,S(()=>e.props.noWheelClass??"nowheel"));X(this,be,S(()=>ap(e.props.ariaLabelConfig)));X(this,ye,Ve(_m(this.nodesInitialized,e.props.fitView,e.props.initialViewport,this.width,this.height,this.nodeLookup)));X(this,T,Ve(ea));X(this,F,S(()=>this._connection.inProgress?{...this._connection,to:$i(this._connection.to,[this.viewport.x,this.viewport.y,this.viewport.zoom])}:this._connection));X(this,J,S(()=>e.props.connectionMode??$r.Strict));X(this,q,S(()=>e.props.connectionRadius??20));X(this,ee,S(()=>e.props.isValidConnection??(()=>!0)));X(this,te,S(()=>e.props.selectNodesOnDrag??!0));X(this,ie,S(()=>e.props.defaultMarkerColor===void 0?"#b1b1b7":e.props.defaultMarkerColor));X(this,de,S(()=>mp(e.edges,{defaultColor:this.defaultMarkerColor,id:this.flowId,defaultMarkerStart:this.defaultEdgeOptions.markerStart,defaultMarkerEnd:this.defaultEdgeOptions.markerEnd})));X(this,Le,S(()=>e.props.onlyRenderVisibleElements??!1));X(this,Ge,S(()=>e.props.onflowerror??np));X(this,_e,S(()=>e.props.ondelete));X(this,Be,S(()=>e.props.onbeforedelete));X(this,nt,S(()=>e.props.onbeforeconnect));X(this,ft,S(()=>e.props.onconnect));X(this,xt,S(()=>e.props.onconnectstart));X(this,wt,S(()=>e.props.onconnectend));X(this,Me,S(()=>e.props.onbeforereconnect));X(this,pe,S(()=>e.props.onreconnect));X(this,Pe,S(()=>e.props.onreconnectstart));X(this,Ze,S(()=>e.props.onreconnectend));X(this,Ue,S(()=>e.props.clickConnect??!0));X(this,lt,S(()=>e.props.onclickconnectstart));X(this,ut,S(()=>e.props.onclickconnectend));X(this,Xe,Ve(null));X(this,je,S(()=>e.props.onselectiondrag));X(this,ht,S(()=>e.props.onselectiondragstart));X(this,Ln,S(()=>e.props.onselectiondragstop));He(this,"resolveFitView",async()=>{var w;this.panZoom&&(await $y({nodes:this.nodeLookup,width:this.width,height:this.height,panZoom:this.panZoom,minZoom:this.minZoom,maxZoom:this.maxZoom},this.fitViewOptions),(w=this.fitViewResolver)==null||w.resolve(!0),this.fitViewQueued=!1,this.fitViewOptions=void 0,this.fitViewResolver=null)});He(this,"_prefersDark",new pm("(prefers-color-scheme: dark)",e.props.colorModeSSR==="dark"));X(this,zn,S(()=>e.props.colorMode==="system"?this._prefersDark.current?"dark":"light":e.props.colorMode??"light"))}get flowId(){return l(y(this,n))}set flowId(w){I(y(this,n),w)}get domNode(){return l(y(this,r))}set domNode(w){I(y(this,r),w)}get panZoom(){return l(y(this,i))}set panZoom(w){I(y(this,i),w)}get width(){return l(y(this,o))}set width(w){I(y(this,o),w)}get height(){return l(y(this,s))}set height(w){I(y(this,s),w)}get zIndexMode(){return l(y(this,a))}set zIndexMode(w){I(y(this,a),w)}get nodesInitialized(){return l(y(this,u))}set nodesInitialized(w){I(y(this,u),w)}get viewportInitialized(){return l(y(this,c))}set viewportInitialized(w){I(y(this,c),w)}get _edges(){return l(y(this,f))}set _edges(w){I(y(this,f),w)}get nodes(){return this.nodesInitialized,e.nodes}set nodes(w){e.nodes=w}get edges(){return this._edges}set edges(w){e.edges=w}get selectedNodes(){return l(y(this,h))}set selectedNodes(w){I(y(this,h),w)}get selectedEdges(){return l(y(this,d))}set selectedEdges(w){I(y(this,d),w)}get visible(){return l(y(this,g))}set visible(w){I(y(this,g),w)}get nodesDraggable(){return l(y(this,v))}set nodesDraggable(w){I(y(this,v),w)}get nodesConnectable(){return l(y(this,m))}set nodesConnectable(w){I(y(this,m),w)}get elementsSelectable(){return l(y(this,_))}set elementsSelectable(w){I(y(this,_),w)}get nodesFocusable(){return l(y(this,x))}set nodesFocusable(w){I(y(this,x),w)}get edgesFocusable(){return l(y(this,C))}set edgesFocusable(w){I(y(this,C),w)}get disableKeyboardA11y(){return l(y(this,P))}set disableKeyboardA11y(w){I(y(this,P),w)}get minZoom(){return l(y(this,b))}set minZoom(w){I(y(this,b),w)}get maxZoom(){return l(y(this,k))}set maxZoom(w){I(y(this,k),w)}get nodeOrigin(){return l(y(this,L))}set nodeOrigin(w){I(y(this,L),w)}get nodeExtent(){return l(y(this,j))}set nodeExtent(w){I(y(this,j),w)}get translateExtent(){return l(y(this,D))}set translateExtent(w){I(y(this,D),w)}get defaultEdgeOptions(){return l(y(this,R))}set defaultEdgeOptions(w){I(y(this,R),w)}get nodeDragThreshold(){return l(y(this,$))}set nodeDragThreshold(w){I(y(this,$),w)}get autoPanOnNodeDrag(){return l(y(this,M))}set autoPanOnNodeDrag(w){I(y(this,M),w)}get autoPanOnConnect(){return l(y(this,E))}set autoPanOnConnect(w){I(y(this,E),w)}get autoPanOnNodeFocus(){return l(y(this,O))}set autoPanOnNodeFocus(w){I(y(this,O),w)}get autoPanSpeed(){return l(y(this,p))}set autoPanSpeed(w){I(y(this,p),w)}get connectionDragThreshold(){return l(y(this,A))}set connectionDragThreshold(w){I(y(this,A),w)}get snapGrid(){return l(y(this,N))}set snapGrid(w){I(y(this,N),w)}get dragging(){return l(y(this,z))}set dragging(w){I(y(this,z),w)}get selectionRect(){return l(y(this,V))}set selectionRect(w){I(y(this,V),w)}get selectionKeyPressed(){return l(y(this,G))}set selectionKeyPressed(w){I(y(this,G),w)}get multiselectionKeyPressed(){return l(y(this,H))}set multiselectionKeyPressed(w){I(y(this,H),w)}get deleteKeyPressed(){return l(y(this,B))}set deleteKeyPressed(w){I(y(this,B),w)}get panActivationKeyPressed(){return l(y(this,ne))}set panActivationKeyPressed(w){I(y(this,ne),w)}get zoomActivationKeyPressed(){return l(y(this,se))}set zoomActivationKeyPressed(w){I(y(this,se),w)}get selectionRectMode(){return l(y(this,Y))}set selectionRectMode(w){I(y(this,Y),w)}get ariaLiveMessage(){return l(y(this,W))}set ariaLiveMessage(w){I(y(this,W),w)}get selectionMode(){return l(y(this,K))}set selectionMode(w){I(y(this,K),w)}get nodeTypes(){return l(y(this,Z))}set nodeTypes(w){I(y(this,Z),w)}get edgeTypes(){return l(y(this,re))}set edgeTypes(w){I(y(this,re),w)}get noPanClass(){return l(y(this,ge))}set noPanClass(w){I(y(this,ge),w)}get noDragClass(){return l(y(this,U))}set noDragClass(w){I(y(this,U),w)}get noWheelClass(){return l(y(this,ae))}set noWheelClass(w){I(y(this,ae),w)}get ariaLabelConfig(){return l(y(this,be))}set ariaLabelConfig(w){I(y(this,be),w)}get _viewport(){return l(y(this,ye))}set _viewport(w){I(y(this,ye),w)}get viewport(){return e.viewport??this._viewport}set viewport(w){e.viewport&&(e.viewport=w),this._viewport=w}get _connection(){return l(y(this,T))}set _connection(w){I(y(this,T),w)}get connection(){return l(y(this,F))}set connection(w){I(y(this,F),w)}get connectionMode(){return l(y(this,J))}set connectionMode(w){I(y(this,J),w)}get connectionRadius(){return l(y(this,q))}set connectionRadius(w){I(y(this,q),w)}get isValidConnection(){return l(y(this,ee))}set isValidConnection(w){I(y(this,ee),w)}get selectNodesOnDrag(){return l(y(this,te))}set selectNodesOnDrag(w){I(y(this,te),w)}get defaultMarkerColor(){return l(y(this,ie))}set defaultMarkerColor(w){I(y(this,ie),w)}get markers(){return l(y(this,de))}set markers(w){I(y(this,de),w)}get onlyRenderVisibleElements(){return l(y(this,Le))}set onlyRenderVisibleElements(w){I(y(this,Le),w)}get onerror(){return l(y(this,Ge))}set onerror(w){I(y(this,Ge),w)}get ondelete(){return l(y(this,_e))}set ondelete(w){I(y(this,_e),w)}get onbeforedelete(){return l(y(this,Be))}set onbeforedelete(w){I(y(this,Be),w)}get onbeforeconnect(){return l(y(this,nt))}set onbeforeconnect(w){I(y(this,nt),w)}get onconnect(){return l(y(this,ft))}set onconnect(w){I(y(this,ft),w)}get onconnectstart(){return l(y(this,xt))}set onconnectstart(w){I(y(this,xt),w)}get onconnectend(){return l(y(this,wt))}set onconnectend(w){I(y(this,wt),w)}get onbeforereconnect(){return l(y(this,Me))}set onbeforereconnect(w){I(y(this,Me),w)}get onreconnect(){return l(y(this,pe))}set onreconnect(w){I(y(this,pe),w)}get onreconnectstart(){return l(y(this,Pe))}set onreconnectstart(w){I(y(this,Pe),w)}get onreconnectend(){return l(y(this,Ze))}set onreconnectend(w){I(y(this,Ze),w)}get clickConnect(){return l(y(this,Ue))}set clickConnect(w){I(y(this,Ue),w)}get onclickconnectstart(){return l(y(this,lt))}set onclickconnectstart(w){I(y(this,lt),w)}get onclickconnectend(){return l(y(this,ut))}set onclickconnectend(w){I(y(this,ut),w)}get clickConnectStartHandle(){return l(y(this,Xe))}set clickConnectStartHandle(w){I(y(this,Xe),w)}get onselectiondrag(){return l(y(this,je))}set onselectiondrag(w){I(y(this,je),w)}get onselectiondragstart(){return l(y(this,ht))}set onselectiondragstart(w){I(y(this,ht),w)}get onselectiondragstop(){return l(y(this,Ln))}set onselectiondragstop(w){I(y(this,Ln),w)}get colorMode(){return l(y(this,zn))}set colorMode(w){I(y(this,zn),w)}resetStoreValues(){this.dragging=!1,this.selectionRect=null,this.selectionRectMode=null,this.selectionKeyPressed=!1,this.multiselectionKeyPressed=!1,this.deleteKeyPressed=!1,this.panActivationKeyPressed=!1,this.zoomActivationKeyPressed=!1,this._connection=ea,this.clickConnectStartHandle=null,this.viewport=e.props.initialViewport??{x:0,y:0,zoom:1},this.ariaLiveMessage=""}}return n=new WeakMap,r=new WeakMap,i=new WeakMap,o=new WeakMap,s=new WeakMap,a=new WeakMap,u=new WeakMap,c=new WeakMap,f=new WeakMap,h=new WeakMap,d=new WeakMap,g=new WeakMap,v=new WeakMap,m=new WeakMap,_=new WeakMap,x=new WeakMap,C=new WeakMap,P=new WeakMap,b=new WeakMap,k=new WeakMap,L=new WeakMap,j=new WeakMap,D=new WeakMap,R=new WeakMap,$=new WeakMap,M=new WeakMap,E=new WeakMap,O=new WeakMap,p=new WeakMap,A=new WeakMap,N=new WeakMap,z=new WeakMap,V=new WeakMap,G=new WeakMap,H=new WeakMap,B=new WeakMap,ne=new WeakMap,se=new WeakMap,Y=new WeakMap,W=new WeakMap,K=new WeakMap,Z=new WeakMap,re=new WeakMap,ge=new WeakMap,U=new WeakMap,ae=new WeakMap,be=new WeakMap,ye=new WeakMap,T=new WeakMap,F=new WeakMap,J=new WeakMap,q=new WeakMap,ee=new WeakMap,te=new WeakMap,ie=new WeakMap,de=new WeakMap,Le=new WeakMap,Ge=new WeakMap,_e=new WeakMap,Be=new WeakMap,nt=new WeakMap,ft=new WeakMap,xt=new WeakMap,wt=new WeakMap,Me=new WeakMap,pe=new WeakMap,Pe=new WeakMap,Ze=new WeakMap,Ue=new WeakMap,lt=new WeakMap,ut=new WeakMap,Xe=new WeakMap,je=new WeakMap,ht=new WeakMap,Ln=new WeakMap,zn=new WeakMap,new t}function ui(){const e=ca(Lo);if(!e)throw new Error("To call useStore outside of <SvelteFlow /> you need to wrap your component in a <SvelteFlowProvider />");return e.getStore()}const Lo=Symbol();function ld(e){const t=bm(e);function n(M){t.nodeTypes={...sd,...M}}function r(M){t.edgeTypes={...ad,...M}}function i(M){t.edges=Uc(M,t.edges)}const o=(M,E=!1)=>{t.nodes=t.nodes.map(O=>{if(t.connection.inProgress&&t.connection.fromNode.id===O.id){const A=t.nodeLookup.get(O.id);A&&(t.connection={...t.connection,from:Nr(A,t.connection.fromHandle,we.Left,!0)})}const p=M.get(O.id);return p?{...O,position:p.position,dragging:E}:O})};function s(M){var A,N,z;const{changes:E,updatedInternals:O}=Tp(M,t.nodeLookup,t.parentLookup,t.domNode,t.nodeOrigin,t.nodeExtent,t.zIndexMode);if(!O)return;xp(t.nodeLookup,t.parentLookup,{nodeOrigin:t.nodeOrigin,nodeExtent:t.nodeExtent,zIndexMode:t.zIndexMode}),t.fitViewQueued&&t.resolveFitView();const p=new Map;for(const V of E){const G=(A=t.nodeLookup.get(V.id))==null?void 0:A.internals.userNode;if(!G)continue;const H={...G};switch(V.type){case"dimensions":{const B={...H.measured,...V.dimensions};V.setAttributes&&(H.width=((N=V.dimensions)==null?void 0:N.width)??H.width,H.height=((z=V.dimensions)==null?void 0:z.height)??H.height),H.measured=B;break}case"position":H.position=V.position??H.position;break}p.set(V.id,H)}t.nodes=t.nodes.map(V=>p.get(V.id)??V)}function a(M){const E=t.fitViewResolver??Promise.withResolvers();return t.fitViewQueued=!0,t.fitViewOptions=M,t.fitViewResolver=E,t.nodes=[...t.nodes],E.promise}async function u(M,E,O){const p=typeof(O==null?void 0:O.zoom)<"u"?O.zoom:t.maxZoom,A=t.panZoom;return A?(await A.setViewport({x:t.width/2-M*p,y:t.height/2-E*p,zoom:p},{duration:O==null?void 0:O.duration,ease:O==null?void 0:O.ease,interpolate:O==null?void 0:O.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)}function c(M,E){const O=t.panZoom;return O?O.scaleBy(M,E):Promise.resolve(!1)}function f(M){return c(1.2,M)}function h(M){return c(1/1.2,M)}function d(M){const E=t.panZoom;E&&(E.setScaleExtent([M,t.maxZoom]),t.minZoom=M)}function g(M){const E=t.panZoom;E&&(E.setScaleExtent([t.minZoom,M]),t.maxZoom=M)}function v(M){const E=t.panZoom;E&&(E.setTranslateExtent(M),t.translateExtent=M)}function m(M,E=null){let O=!1;const p=M.map(A=>(E?E.has(A.id):!0)&&A.selected?(O=!0,{...A,selected:!1}):A);return[O,p]}function _(M){const E=M!=null&&M.nodes?new Set(M.nodes.map(V=>V.id)):null,[O,p]=m(t.nodes,E);O&&(t.nodes=p);const A=M!=null&&M.edges?new Set(M.edges.map(V=>V.id)):null,[N,z]=m(t.edges,A);N&&(t.edges=z)}function x(M){const E=t.multiselectionKeyPressed;t.nodes=t.nodes.map(O=>{const p=M.includes(O.id),A=E&&O.selected||p;return!!O.selected!==A?{...O,selected:A}:O}),E||_({nodes:[]})}function C(M){const E=t.multiselectionKeyPressed;t.edges=t.edges.map(O=>{const p=M.includes(O.id),A=E&&O.selected||p;return!!O.selected!==A?{...O,selected:A}:O}),E||_({edges:[]})}function P(M,E,O){const p=t.nodeLookup.get(M);if(!p){console.warn("012",Ai.error012(M));return}t.selectionRect=null,t.selectionRectMode=null,p.selected?(E||p.selected&&t.multiselectionKeyPressed)&&(_({nodes:[p],edges:[]}),requestAnimationFrame(()=>O==null?void 0:O.blur())):x([M])}function b(M){const E=t.edgeLookup.get(M);if(!E){console.warn("012",Ai.error012(M));return}(E.selectable||t.elementsSelectable&&typeof E.selectable>"u")&&(t.selectionRect=null,t.selectionRectMode=null,E.selected?E.selected&&t.multiselectionKeyPressed&&_({nodes:[],edges:[E]}):C([M]))}function k(M,E){const{nodeExtent:O,snapGrid:p,nodeOrigin:A,nodeLookup:N,nodesDraggable:z,onerror:V}=t,G=new Map,H=(p==null?void 0:p[0])??5,B=(p==null?void 0:p[1])??5,ne=M.x*H*E,se=M.y*B*E;for(const Y of N.values()){if(!(Y.selected&&(Y.draggable||z&&typeof Y.draggable>"u")))continue;let K={x:Y.internals.positionAbsolute.x+ne,y:Y.internals.positionAbsolute.y+se};p&&(K=Qi(K,p));const{position:Z,positionAbsolute:re}=Rc({nodeId:Y.id,nextPosition:K,nodeLookup:N,nodeExtent:O,nodeOrigin:A,onError:V});Y.position=Z,Y.internals.positionAbsolute=re,G.set(Y.id,Y)}o(G)}function L(M){return kp({delta:M,panZoom:t.panZoom,transform:[t.viewport.x,t.viewport.y,t.viewport.zoom],translateExtent:t.translateExtent,width:t.width,height:t.height})}const j=M=>{t._connection={...M}};function D(){t._connection=ea}function R(){t.resetStoreValues(),_()}return Object.assign(t,{setNodeTypes:n,setEdgeTypes:r,addEdge:i,updateNodePositions:o,updateNodeInternals:s,zoomIn:f,zoomOut:h,fitView:a,setCenter:u,setMinZoom:d,setMaxZoom:g,setTranslateExtent:v,unselectNodesAndEdges:_,addSelectedNodes:x,addSelectedEdges:C,handleNodeSelection:P,handleEdgeSelection:b,moveSelectedNodes:k,panBy:L,updateConnection:j,cancelConnection:D,reset:R})}function Is(e,t){const{minZoom:n,maxZoom:r,initialViewport:i,onPanZoomStart:o,onPanZoom:s,onPanZoomEnd:a,translateExtent:u,setPanZoomInstance:c,onDraggingChange:f,onTransformChange:h}=t,d=Wp({domNode:e,minZoom:n,maxZoom:r,translateExtent:u,viewport:i,onPanZoom:s,onPanZoomStart:o,onPanZoomEnd:a,onDraggingChange:f}),g=d.getViewport();return(i.x!==g.x||i.y!==g.y||i.zoom!==g.zoom)&&h([g.x,g.y,g.zoom]),c(d),d.update(t),{update(v){d.update(v)}}}var xm=me('<div class="svelte-flow__zoom svelte-flow__container"><!></div>');function wm(e,t){Ne(t,!0);let n=Q(t,"store",15),r=S(()=>n().panActivationKeyPressed||t.panOnDrag),i=S(()=>n().panActivationKeyPressed||t.panOnScroll);const{viewport:o}=n();let s=!1;an(()=>{var c;!s&&n().viewportInitialized&&((c=t.oninit)==null||c.call(t),s=!0)});var a=xm(),u=ce(a);Pn(u,()=>t.children),yt(a,(c,f)=>Is==null?void 0:Is(c,f),()=>({viewport:n().viewport,minZoom:n().minZoom,maxZoom:n().maxZoom,initialViewport:o,onDraggingChange:c=>{n(n().dragging=c,!0)},setPanZoomInstance:c=>{n(n().panZoom=c,!0)},onPanZoomStart:t.onmovestart,onPanZoom:t.onmove,onPanZoomEnd:t.onmoveend,zoomOnScroll:t.zoomOnScroll,zoomOnDoubleClick:t.zoomOnDoubleClick,zoomOnPinch:t.zoomOnPinch,panOnScroll:l(i),panOnDrag:l(r),panOnScrollSpeed:t.panOnScrollSpeed,panOnScrollMode:t.panOnScrollMode,zoomActivationKeyPressed:n().zoomActivationKeyPressed,preventScrolling:typeof t.preventScrolling=="boolean"?t.preventScrolling:!0,noPanClassName:n().noPanClass,noWheelClassName:n().noWheelClass,userSelectionActive:!!n().selectionRect,translateExtent:n().translateExtent,lib:"svelte",paneClickDistance:t.paneClickDistance,selectionOnDrag:t.selectionOnDrag,onTransformChange:c=>{n(n().viewport={x:c[0],y:c[1],zoom:c[2]},!0)},connectionInProgress:n().connection.inProgress})),oe(e,a),Ie()}function Kl(e,t){return n=>{n.target===t&&(e==null||e(n))}}function Yl(e){return t=>{const n=e.has(t.id);return!!t.selected!==n?{...t,selected:n}:t}}function Xl(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}var Em=me("<div><!></div>");function Nm(e,t){Ne(t,!0);let n=Q(t,"store",15),r=Q(t,"panOnDrag",3,!0),i=Q(t,"paneClickDistance",3,1),o,s=null,a=new Set,u=new Set,c=S(()=>n().panActivationKeyPressed||r()),f=S(()=>n().selectionKeyPressed||!!n().selectionRect||t.selectionOnDrag&&l(c)!==!0),h=S(()=>n().elementsSelectable&&(l(f)||n().selectionRectMode==="user")),d=!1;function g(D){var p,A;if(s=o==null?void 0:o.getBoundingClientRect(),!s)return;const R=D.target===o,$=!R&&!!D.target.closest(".nokey"),M=t.selectionOnDrag&&R||n().selectionKeyPressed;if($||!l(f)||!M||D.button!==0||!D.isPrimary)return;(A=(p=D.target)==null?void 0:p.setPointerCapture)==null||A.call(p,D.pointerId),d=!1;const{x:E,y:O}=Gt(D,s);n(n().selectionRect={width:0,height:0,startX:E,startY:O,x:E,y:O},!0),R||(D.stopPropagation(),D.preventDefault())}function v(D){var N;if(!l(f)||!s||!n().selectionRect)return;const R=Gt(D,s),{startX:$=0,startY:M=0}=n().selectionRect;if(!d){const z=n().selectionKeyPressed?0:i();if(Math.hypot(R.x-$,R.y-M)<=z)return;n().unselectNodesAndEdges(),(N=t.onselectionstart)==null||N.call(t,D)}d=!0;const E={...n().selectionRect,x:R.x<$?R.x:$,y:R.y<M?R.y:M,width:Math.abs(R.x-$),height:Math.abs(R.y-M)},O=a,p=u;a=new Set(Aa(n().nodeLookup,E,[n().viewport.x,n().viewport.y,n().viewport.zoom],n().selectionMode===Ao.Partial,!0).map(z=>z.id));const A=n().defaultEdgeOptions.selectable??!0;u=new Set;for(const z of a){const V=n().connectionLookup.get(z);if(V)for(const{edgeId:G}of V.values()){const H=n().edgeLookup.get(G);H&&(H.selectable??A)&&u.add(G)}}Xl(O,a)||n(n().nodes=n().nodes.map(Yl(a)),!0),Xl(p,u)||n(n().edges=n().edges.map(Yl(u)),!0),n(n().selectionRectMode="user",!0),n(n().selectionRect=E,!0)}function m(D){var R,$,M;D.button===0&&(($=(R=D.target)==null?void 0:R.releasePointerCapture)==null||$.call(R,D.pointerId),!d&&D.target===o&&(C==null||C(D)),n(n().selectionRect=null,!0),d&&n(n().selectionRectMode=a.size>0?"nodes":null,!0),d&&((M=t.onselectionend)==null||M.call(t,D)))}const _=D=>{var R;if(Array.isArray(l(c))&&l(c).includes(2)){D.preventDefault();return}(R=t.onpanecontextmenu)==null||R.call(t,{event:D})},x=D=>{d&&(D.stopPropagation(),d=!1)};function C(D){var R;if(d||n().connection.inProgress){d=!1;return}(R=t.onpaneclick)==null||R.call(t,{event:D}),n().unselectNodesAndEdges(),n(n().selectionRectMode=null,!0),n(n().selectionRect=null,!0)}var P=Em();let b;var k=S(()=>l(h)?void 0:Kl(C,o));P.__click=function(...D){var R;(R=l(k))==null||R.apply(this,D)},P.__pointermove=function(...D){var R;(R=l(h)?v:void 0)==null||R.apply(this,D)},P.__pointerup=function(...D){var R;(R=l(h)?m:void 0)==null||R.apply(this,D)};var L=S(()=>Kl(_,o));P.__contextmenu=function(...D){var R;(R=l(L))==null||R.apply(this,D)};var j=ce(P);Pn(j,()=>t.children),On(P,D=>o=D,()=>o),Ee(D=>b=Dn(P,1,"svelte-flow__pane svelte-flow__container",null,b,D),[()=>({draggable:r()===!0||Array.isArray(r())&&r().includes(0),dragging:n().dragging,selection:l(f)})]),$n("pointerdown",P,function(...D){var R;(R=l(h)?g:void 0)==null||R.apply(this,D)},!0),$n("click",P,function(...D){var R;(R=l(h)?x:void 0)==null||R.apply(this,D)},!0),oe(e,P),Ie()}Vt(["click","pointermove","pointerup","contextmenu"]);var Im=me('<div class="svelte-flow__viewport xyflow__viewport svelte-flow__container"><!></div>');function Sm(e,t){Ne(t,!0);var n=Im();let r;var i=ce(n);Pn(i,()=>t.children),Ee(()=>r=zt(n,"",r,{transform:`translate(${t.store.viewport.x??""}px, ${t.store.viewport.y??""}px) scale(${t.store.viewport.zoom??""})`})),oe(e,n),Ie()}function Rr(e,t){const{store:n,onDrag:r,onDragStart:i,onDragStop:o,onNodeMouseDown:s}=t,a=Pp({onDrag:r,onDragStart:i,onDragStop:o,onNodeMouseDown:s,getStoreItems:()=>{const{snapGrid:c,viewport:f}=n;return{nodes:n.nodes,nodeLookup:n.nodeLookup,edges:n.edges,nodeExtent:n.nodeExtent,snapGrid:c||[0,0],snapToGrid:!!c,nodeOrigin:n.nodeOrigin,multiSelectionActive:n.multiselectionKeyPressed,domNode:n.domNode,transform:[f.x,f.y,f.zoom],autoPanOnNodeDrag:n.autoPanOnNodeDrag,nodesDraggable:n.nodesDraggable,selectNodesOnDrag:n.selectNodesOnDrag,nodeDragThreshold:n.nodeDragThreshold,unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,onSelectionDrag:n.onselectiondrag,onSelectionDragStart:n.onselectiondragstart,onSelectionDragStop:n.onselectiondragstop,panBy:n.panBy}}});function u(c,f){if(f.disabled){a.destroy();return}a.update({domNode:c,noDragClassName:f.noDragClass,handleSelector:f.handleSelector,nodeId:f.nodeId,isSelectable:f.isSelectable,nodeClickDistance:f.nodeClickDistance})}return u(e,t),{update(c){u(e,c)},destroy(){a.destroy()}}}var Tm=me('<div aria-live="assertive" aria-atomic="true" class="a11y-live-msg svelte-1l9nrps"> </div>'),km=me('<div class="a11y-hidden svelte-1l9nrps"> </div> <div class="a11y-hidden svelte-1l9nrps"> </div> <!>',1);function Am(e,t){Ne(t,!0);var n=km(),r=Ke(n),i=ce(r),o=Se(r,2),s=ce(o),a=Se(o,2);{var u=c=>{var f=Tm(),h=ce(f);Ee(()=>{he(f,"id",`${Cm}-${t.store.flowId}`),We(h,t.store.ariaLiveMessage)}),oe(c,f)};Ye(a,c=>{t.store.disableKeyboardA11y||c(u)})}Ee(()=>{he(r,"id",`${ud}-${t.store.flowId}`),We(i,t.store.disableKeyboardA11y?t.store.ariaLabelConfig["node.a11yDescription.default"]:t.store.ariaLabelConfig["node.a11yDescription.keyboardDisabled"]),he(o,"id",`${cd}-${t.store.flowId}`),We(s,t.store.ariaLabelConfig["edge.a11yDescription.default"])}),oe(e,n),Ie()}const ud="svelte-flow__node-desc",cd="svelte-flow__edge-desc",Cm="svelte-flow__aria-live";var Mm=me("<div><!></div>");function Pm(e,t){Ne(t,!0);let n=Q(t,"store",15),r=S(()=>ct(t.node.data,()=>({}),!0)),i=S(()=>ct(t.node.selected,!1)),o=S(()=>t.node.draggable),s=S(()=>t.node.selectable),a=S(()=>ct(t.node.deletable,!0)),u=S(()=>t.node.connectable),c=S(()=>t.node.focusable),f=S(()=>ct(t.node.hidden,!1)),h=S(()=>ct(t.node.dragging,!1)),d=S(()=>ct(t.node.style,"")),g=S(()=>t.node.class),v=S(()=>ct(t.node.type,"default")),m=S(()=>t.node.parentId),_=S(()=>t.node.sourcePosition),x=S(()=>t.node.targetPosition),C=S(()=>ct(t.node.measured,()=>({width:0,height:0}),!0).width),P=S(()=>ct(t.node.measured,()=>({width:0,height:0}),!0).height),b=S(()=>t.node.initialWidth),k=S(()=>t.node.initialHeight),L=S(()=>t.node.width),j=S(()=>t.node.height),D=S(()=>t.node.dragHandle),R=S(()=>ct(t.node.internals.z,0)),$=S(()=>t.node.internals.positionAbsolute.x),M=S(()=>t.node.internals.positionAbsolute.y),E=S(()=>t.node.internals.userNode),{id:O}=t.node,p=S(()=>l(o)??n().nodesDraggable),A=S(()=>l(s)??n().elementsSelectable),N=S(()=>l(u)??n().nodesConnectable),z=S(()=>op(t.node)),V=S(()=>!!t.node.internals.handleBounds),G=S(()=>l(z)&&l(V)),H=S(()=>l(c)??n().nodesFocusable);function B(ee){return n().parentLookup.has(ee)}let ne=S(()=>B(O)),se=Ve(null),Y=null,W=l(v),K=l(_),Z=l(x),re=S(()=>n().nodeTypes[l(v)]??id),ge=S(()=>n().ariaLabelConfig),U={get value(){return l(N)}};Up(O),Zp(U);let ae=S(()=>{const ee=l(C)===void 0?l(L)??l(b):l(L),te=l(P)===void 0?l(j)??l(k):l(j);if(!(ee===void 0&&te===void 0&&l(d)===void 0))return`${l(d)};${ee?`width:${un(ee)};`:""}${te?`height:${un(te)};`:""}`});an(()=>{(l(v)!==W||l(_)!==K||l(x)!==Z)&&l(se)!==null&&requestAnimationFrame(()=>{l(se)!==null&&n().updateNodeInternals(new Map([[O,{id:O,nodeElement:l(se),force:!0}]]))}),W=l(v),K=l(_),Z=l(x)}),an(()=>{t.resizeObserver&&(!l(G)||l(se)!==Y)&&(Y&&t.resizeObserver.unobserve(Y),l(se)&&t.resizeObserver.observe(l(se)),Y=l(se))}),jo(()=>{var ee;Y&&((ee=t.resizeObserver)==null||ee.unobserve(Y))});function be(ee){var te;l(A)&&(!n().selectNodesOnDrag||!l(p)||n().nodeDragThreshold>0)&&n().handleNodeSelection(O),(te=t.onnodeclick)==null||te.call(t,{node:l(E),event:ee})}function ye(ee){if(!(Yc(ee)||n().disableKeyboardA11y))if(zc.includes(ee.key)&&l(A)){const te=ee.key==="Escape";n().handleNodeSelection(O,te,l(se))}else l(p)&&t.node.selected&&Object.prototype.hasOwnProperty.call(Oo,ee.key)&&(ee.preventDefault(),n(n().ariaLiveMessage=l(ge)["node.a11yDescription.ariaLiveMessage"]({direction:ee.key.replace("Arrow","").toLowerCase(),x:~~t.node.internals.positionAbsolute.x,y:~~t.node.internals.positionAbsolute.y}),!0),n().moveSelectedNodes(Oo[ee.key],ee.shiftKey?4:1))}const T=()=>{var Le;if(n().disableKeyboardA11y||!n().autoPanOnNodeFocus||!((Le=l(se))!=null&&Le.matches(":focus-visible")))return;const{width:ee,height:te,viewport:ie}=n();Aa(new Map([[O,t.node]]),{x:0,y:0,width:ee,height:te},[ie.x,ie.y,ie.zoom],!0).length>0||n().setCenter(t.node.position.x+(t.node.measured.width??0)/2,t.node.position.y+(t.node.measured.height??0)/2,{zoom:ie.zoom})};var F=ot(),J=Ke(F);{var q=ee=>{var te=Mm();An(te,()=>({"data-id":O,class:["svelte-flow__node",`svelte-flow__node-${l(v)}`,l(g)],style:l(ae),onclick:be,onpointerenter:t.onnodepointerenter?de=>t.onnodepointerenter({node:l(E),event:de}):void 0,onpointerleave:t.onnodepointerleave?de=>t.onnodepointerleave({node:l(E),event:de}):void 0,onpointermove:t.onnodepointermove?de=>t.onnodepointermove({node:l(E),event:de}):void 0,oncontextmenu:t.onnodecontextmenu?de=>t.onnodecontextmenu({node:l(E),event:de}):void 0,onkeydown:l(H)?ye:void 0,onfocus:l(H)?T:void 0,tabIndex:l(H)?0:void 0,role:t.node.ariaRole??(l(H)?"group":void 0),"aria-roledescription":"node","aria-describedby":n().disableKeyboardA11y?void 0:`${ud}-${n().flowId}`,...t.node.domAttributes,[Bn]:{dragging:l(h),selected:l(i),draggable:l(p),connectable:l(N),selectable:l(A),nopan:l(p),parent:l(ne)},[Hn]:{"z-index":l(R),transform:`translate(${l($)??""}px, ${l(M)??""}px)`,visibility:l(z)?"visible":"hidden"}}));var ie=ce(te);ba(ie,()=>l(re),(de,Le)=>{Le(de,{get data(){return l(r)},get id(){return O},get selected(){return l(i)},get selectable(){return l(A)},get deletable(){return l(a)},get sourcePosition(){return l(_)},get targetPosition(){return l(x)},get zIndex(){return l(R)},get dragging(){return l(h)},get draggable(){return l(p)},get dragHandle(){return l(D)},get parentId(){return l(m)},get type(){return l(v)},get isConnectable(){return l(N)},get positionAbsoluteX(){return l($)},get positionAbsoluteY(){return l(M)},get width(){return l(L)},get height(){return l(j)}})}),yt(te,(de,Le)=>Rr==null?void 0:Rr(de,Le),()=>({nodeId:O,isSelectable:l(A),disabled:!l(p),handleSelector:l(D),noDragClass:n().noDragClass,nodeClickDistance:t.nodeClickDistance,onNodeMouseDown:n().handleNodeSelection,onDrag:(de,Le,Ge,_e)=>{var Be;(Be=t.onnodedrag)==null||Be.call(t,{event:de,targetNode:Ge,nodes:_e})},onDragStart:(de,Le,Ge,_e)=>{var Be;(Be=t.onnodedragstart)==null||Be.call(t,{event:de,targetNode:Ge,nodes:_e})},onDragStop:(de,Le,Ge,_e)=>{var Be;(Be=t.onnodedragstop)==null||Be.call(t,{event:de,targetNode:Ge,nodes:_e})},store:n()})),On(te,de=>I(se,de),()=>l(se)),oe(ee,te)};Ye(J,ee=>{l(f)||ee(q)})}oe(e,F),Ie()}var Dm=me('<div class="svelte-flow__nodes"></div>');function Om(e,t){Ne(t,!0);let n=Q(t,"store",15);const r=typeof ResizeObserver>"u"?null:new ResizeObserver(o=>{const s=new Map;o.forEach(a=>{const u=a.target.getAttribute("data-id");s.set(u,{id:u,nodeElement:a.target,force:!0})}),n().updateNodeInternals(s)});jo(()=>{r==null||r.disconnect()});var i=Dm();ln(i,21,()=>n().visible.nodes.values(),o=>o.id,(o,s)=>{Pm(o,{get node(){return l(s)},get resizeObserver(){return r},get nodeClickDistance(){return t.nodeClickDistance},get onnodeclick(){return t.onnodeclick},get onnodepointerenter(){return t.onnodepointerenter},get onnodepointermove(){return t.onnodepointermove},get onnodepointerleave(){return t.onnodepointerleave},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get onnodecontextmenu(){return t.onnodecontextmenu},get store(){return n()},set store(a){n(a)}})}),oe(e,i),Ie()}var Lm=Tt('<svg class="svelte-flow__edge-wrapper"><g><!></g></svg>');function zm(e,t){Ne(t,!0);let n=S(()=>t.edge.id),r=S(()=>t.edge.source),i=S(()=>t.edge.target),o=S(()=>t.edge.sourceX),s=S(()=>t.edge.sourceY),a=S(()=>t.edge.targetX),u=S(()=>t.edge.targetY),c=S(()=>t.edge.sourcePosition),f=S(()=>t.edge.targetPosition),h=S(()=>ct(t.edge.animated,!1)),d=S(()=>ct(t.edge.selected,!1)),g=S(()=>t.edge.label),v=S(()=>t.edge.labelStyle),m=S(()=>ct(t.edge.data,()=>({}),!0)),_=S(()=>t.edge.style),x=S(()=>t.edge.interactionWidth),C=S(()=>ct(t.edge.type,"default")),P=S(()=>t.edge.sourceHandle),b=S(()=>t.edge.targetHandle),k=S(()=>t.edge.markerStart),L=S(()=>t.edge.markerEnd),j=S(()=>t.edge.selectable),D=S(()=>t.edge.focusable),R=S(()=>ct(t.edge.deletable,!0)),$=S(()=>t.edge.hidden),M=S(()=>t.edge.zIndex),E=S(()=>t.edge.class),O=S(()=>t.edge.ariaLabel);Jp(l(n));let p=null,A=S(()=>l(j)??t.store.elementsSelectable),N=S(()=>l(D)??t.store.edgesFocusable),z=S(()=>t.store.edgeTypes[l(C)]??od),V=S(()=>l(k)?`url('#${na(l(k),t.store.flowId)}')`:void 0),G=S(()=>l(L)?`url('#${na(l(L),t.store.flowId)}')`:void 0);function H(K){var re;const Z=t.store.edgeLookup.get(l(n));Z&&(l(A)&&t.store.handleEdgeSelection(l(n)),(re=t.onedgeclick)==null||re.call(t,{event:K,edge:Z}))}function B(K,Z){const re=t.store.edgeLookup.get(l(n));re&&Z({event:K,edge:re})}function ne(K){if(!t.store.disableKeyboardA11y&&zc.includes(K.key)&&l(A)){const{unselectNodesAndEdges:Z,addSelectedEdges:re}=t.store;K.key==="Escape"?(p==null||p.blur(),Z({edges:[t.edge]})):re([l(n)])}}var se=ot(),Y=Ke(se);{var W=K=>{var Z=Lm();let re;var ge=ce(Z);An(ge,()=>({class:["svelte-flow__edge",l(E)],"data-id":l(n),onclick:H,oncontextmenu:t.onedgecontextmenu?ae=>{B(ae,t.onedgecontextmenu)}:void 0,onpointerenter:t.onedgepointerenter?ae=>{B(ae,t.onedgepointerenter)}:void 0,onpointerleave:t.onedgepointerleave?ae=>{B(ae,t.onedgepointerleave)}:void 0,"aria-label":l(O)===null?void 0:l(O)?l(O):`Edge from ${l(r)} to ${l(i)}`,"aria-describedby":l(N)?`${cd}-${t.store.flowId}`:void 0,role:t.edge.ariaRole??(l(N)?"group":"img"),"aria-roledescription":"edge",onkeydown:l(N)?ne:void 0,tabindex:l(N)?0:void 0,...t.edge.domAttributes,[Bn]:{animated:l(h),selected:l(d),selectable:l(A)}}));var U=ce(ge);ba(U,()=>l(z),(ae,be)=>{be(ae,{get id(){return l(n)},get source(){return l(r)},get target(){return l(i)},get sourceX(){return l(o)},get sourceY(){return l(s)},get targetX(){return l(a)},get targetY(){return l(u)},get sourcePosition(){return l(c)},get targetPosition(){return l(f)},get animated(){return l(h)},get selected(){return l(d)},get label(){return l(g)},get labelStyle(){return l(v)},get data(){return l(m)},get style(){return l(_)},get interactionWidth(){return l(x)},get selectable(){return l(A)},get deletable(){return l(R)},get type(){return l(C)},get sourceHandleId(){return l(P)},get targetHandleId(){return l(b)},get markerStart(){return l(V)},get markerEnd(){return l(G)}})}),On(ge,ae=>p=ae,()=>p),Ee(()=>re=zt(Z,"",re,{"z-index":l(M)})),oe(K,Z)};Ye(Y,K=>{l($)||K(W)})}oe(e,se),Ie()}var Fm=Tt("<defs></defs>");function Rm(e,t){Ne(t,!1);const n=ui();dt();var r=Fm();ln(r,5,()=>n.markers,i=>i.id,(i,o)=>{Km(i,sc(()=>l(o)))}),oe(e,r),Ie()}var Vm=Tt('<polyline class="arrow" fill="none" stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4"></polyline>'),Bm=Tt('<polyline class="arrowclosed" stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4 -5,-4"></polyline>'),Hm=Tt('<marker class="svelte-flow__arrowhead" viewBox="-10 -10 20 20" refX="0" refY="0"><!></marker>');function Km(e,t){Ne(t,!0);let n=Q(t,"width",3,12.5),r=Q(t,"height",3,12.5),i=Q(t,"markerUnits",3,"strokeWidth"),o=Q(t,"orient",3,"auto-start-reverse"),s=Q(t,"color",3,"none");var a=Hm(),u=ce(a);{var c=h=>{var d=Vm();let g;Ee(()=>{he(d,"stroke-width",t.strokeWidth),g=zt(d,"",g,{stroke:s()})}),oe(h,d)},f=h=>{var d=Bm();let g;Ee(()=>{he(d,"stroke-width",t.strokeWidth),g=zt(d,"",g,{stroke:s(),fill:s()})}),oe(h,d)};Ye(u,h=>{t.type===Co.Arrow?h(c):t.type===Co.ArrowClosed&&h(f,1)})}Ee(()=>{he(a,"id",t.id),he(a,"markerWidth",`${n()}`),he(a,"markerHeight",`${r()}`),he(a,"markerUnits",i()),he(a,"orient",o())}),oe(e,a),Ie()}var Ym=me('<div class="svelte-flow__edges"><svg class="svelte-flow__marker"><!></svg> <!></div>');function Xm(e,t){Ne(t,!0);let n=Q(t,"store",15);var r=Ym(),i=ce(r),o=ce(i);Rm(o,{});var s=Se(i,2);ln(s,17,()=>n().visible.edges.values(),a=>a.id,(a,u)=>{zm(a,{get edge(){return l(u)},get onedgeclick(){return t.onedgeclick},get onedgecontextmenu(){return t.onedgecontextmenu},get onedgepointerenter(){return t.onedgepointerenter},get onedgepointerleave(){return t.onedgepointerleave},get store(){return n()},set store(c){n(c)}})}),oe(e,r),Ie()}var Wm=me('<div class="svelte-flow__selection svelte-1f9lbg4"></div>');function dd(e,t){Ne(t,!0);let n=Q(t,"x",3,0),r=Q(t,"y",3,0),i=Q(t,"width",3,0),o=Q(t,"height",3,0),s=Q(t,"isVisible",3,!0);var a=ot(),u=Ke(a);{var c=f=>{var h=Wm();let d;Ee(g=>d=zt(h,"",d,g),[()=>({width:typeof i()=="string"?i():un(i()),height:typeof o()=="string"?o():un(o()),transform:`translate(${n()}px, ${r()}px)`})]),oe(f,h)};Ye(u,f=>{s()&&f(c)})}oe(e,a),Ie()}var Gm=me("<div><!></div>");function Um(e,t){Ne(t,!0);let n=Ve(void 0);an(()=>{var h;t.store.disableKeyboardA11y||(h=l(n))==null||h.focus({preventScroll:!0})});let r=S(()=>{if(t.store.selectionRectMode==="nodes"){t.store.nodes;const h=ns(t.store.nodeLookup,{filter:d=>!!d.selected});if(h.width>0&&h.height>0)return h}return null});function i(h){var g;const d=t.store.nodes.filter(v=>v.selected);(g=t.onselectioncontextmenu)==null||g.call(t,{nodes:d,event:h})}function o(h){var g;const d=t.store.nodes.filter(v=>v.selected);(g=t.onselectionclick)==null||g.call(t,{nodes:d,event:h})}function s(h){Object.prototype.hasOwnProperty.call(Oo,h.key)&&(h.preventDefault(),t.store.moveSelectedNodes(Oo[h.key],h.shiftKey?4:1))}var a=ot(),u=Ke(a);{var c=h=>{var d=Gm();d.__contextmenu=i,d.__click=o,d.__keydown=function(...m){var _;(_=t.store.disableKeyboardA11y?void 0:s)==null||_.apply(this,m)};let g;var v=ce(d);dd(v,{width:"100%",height:"100%",x:0,y:0}),yt(d,(m,_)=>Rr==null?void 0:Rr(m,_),()=>({disabled:!1,store:t.store,onDrag:(m,_,x,C)=>{var P;(P=t.onnodedrag)==null||P.call(t,{event:m,targetNode:null,nodes:C})},onDragStart:(m,_,x,C)=>{var P;(P=t.onnodedragstart)==null||P.call(t,{event:m,targetNode:null,nodes:C})},onDragStop:(m,_,x,C)=>{var P;(P=t.onnodedragstop)==null||P.call(t,{event:m,targetNode:null,nodes:C})}})),On(d,m=>I(n,m),()=>l(n)),Ee(m=>{Dn(d,1,kr(["svelte-flow__selection-wrapper",t.store.noPanClass]),"svelte-5rnsv4"),he(d,"role",t.store.disableKeyboardA11y?void 0:"button"),he(d,"tabindex",t.store.disableKeyboardA11y?void 0:-1),g=zt(d,"",g,m)},[()=>({width:un(l(r).width),height:un(l(r).height),transform:`translate(${l(r).x??""}px, ${l(r).y??""}px)`})]),oe(h,d)},f=S(()=>t.store.selectionRectMode==="nodes"&&l(r)&&In(l(r).x)&&In(l(r).y));Ye(u,h=>{l(f)&&h(c)})}oe(e,a),Ie()}Vt(["contextmenu","click","keydown"]);function qm(e){switch(e){case"ctrl":return 8;case"shift":return 4;case"alt":return 2;case"meta":return 1}}function Fe(e,t){let{enabled:n=!0,trigger:r,type:i="keydown"}=t;function o(a){var f;const u=Array.isArray(r)?r:[r],c=[a.metaKey,a.altKey,a.shiftKey,a.ctrlKey].reduce((h,d,g)=>d?h|1<<g:h,0);for(const h of u){const d={preventDefault:!1,enabled:!0,...h},{modifier:g,key:v,callback:m,preventDefault:_,enabled:x}=d;if(x){if(a.key!==v)continue;if(g===null||g===!1){if(c!==0)continue}else if(g!==void 0&&((f=g==null?void 0:g[0])==null?void 0:f.length)>0){const P=Array.isArray(g)?g:[g];let b=!1;for(const k of P)if((Array.isArray(k)?k:[k]).reduce((j,D)=>j|qm(D),0)===c){b=!0;break}if(!b)continue}_&&a.preventDefault();const C={node:e,trigger:d,originalEvent:a};e.dispatchEvent(new CustomEvent("shortcut",{detail:C})),m==null||m(C)}}}let s;return n&&(s=Vs(e,i,o)),{update:a=>{const{enabled:u=!0,type:c="keydown"}=a;n&&(!u||i!==c)?s==null||s():!n&&u&&(s=Vs(e,c,o)),n=u,i=c,r=a.trigger},destroy:()=>{s==null||s()}}}function Fa(){const e=S(ui),t=o=>{var c,f;const s=Bl(o)?o:l(e).nodeLookup.get(o.id),a=s.parentId?sp(s.position,s.measured,s.parentId,l(e).nodeLookup,l(e).nodeOrigin):s.position,u={...s,position:a,width:((c=s.measured)==null?void 0:c.width)??s.width,height:((f=s.measured)==null?void 0:f.height)??s.height};return ti(u)};function n(o,s,a={replace:!1}){l(e).nodes=xe(()=>l(e).nodes).map(u=>{if(u.id===o){const c=typeof s=="function"?s(u):s;return a!=null&&a.replace&&Bl(c)?c:{...u,...c}}return u})}function r(o,s,a={replace:!1}){l(e).edges=xe(()=>l(e).edges).map(u=>{if(u.id===o){const c=typeof s=="function"?s(u):s;return a.replace&&sm(c)?c:{...u,...c}}return u})}const i=o=>l(e).nodeLookup.get(o);return{zoomIn:l(e).zoomIn,zoomOut:l(e).zoomOut,getInternalNode:i,getNode:o=>{var s;return(s=i(o))==null?void 0:s.internals.userNode},getNodes:o=>o===void 0?l(e).nodes:Wl(l(e).nodeLookup,o),getEdge:o=>l(e).edgeLookup.get(o),getEdges:o=>o===void 0?l(e).edges:Wl(l(e).edgeLookup,o),setZoom:(o,s)=>{const a=l(e).panZoom;return a?a.scaleTo(o,{duration:s==null?void 0:s.duration}):Promise.resolve(!1)},getZoom:()=>l(e).viewport.zoom,setViewport:async(o,s)=>{const a=l(e).viewport;return l(e).panZoom?(await l(e).panZoom.setViewport({x:o.x??a.x,y:o.y??a.y,zoom:o.zoom??a.zoom},s),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>gu(l(e).viewport),setCenter:async(o,s,a)=>l(e).setCenter(o,s,a),fitView:o=>l(e).fitView(o),fitBounds:async(o,s)=>{if(!l(e).panZoom)return Promise.resolve(!1);const a=Ca(o,l(e).width,l(e).height,l(e).minZoom,l(e).maxZoom,(s==null?void 0:s.padding)??.1);return await l(e).panZoom.setViewport(a,{duration:s==null?void 0:s.duration,ease:s==null?void 0:s.ease,interpolate:s==null?void 0:s.interpolate}),Promise.resolve(!0)},getIntersectingNodes:(o,s=!0,a)=>{const u=kl(o),c=u?o:t(o);return c?(a||l(e).nodes).filter(f=>{const h=l(e).nodeLookup.get(f.id);if(!h||!u&&f.id===o.id)return!1;const d=ti(h),g=Ci(d,c);return s&&g>0||g>=d.width*d.height||g>=c.width*c.height}):[]},isNodeIntersecting:(o,s,a=!0)=>{const c=kl(o)?o:t(o);if(!c)return!1;const f=Ci(c,s);return a&&f>0||f>=s.width*s.height||f>=c.width*c.height},deleteElements:async({nodes:o=[],edges:s=[]})=>{var c,f;const{nodes:a,edges:u}=await ep({nodesToRemove:o,edgesToRemove:s,nodes:l(e).nodes,edges:l(e).edges,onBeforeDelete:l(e).onbeforedelete});return a&&(l(e).nodes=xe(()=>l(e).nodes).filter(h=>!a.some(({id:d})=>d===h.id))),u&&(l(e).edges=xe(()=>l(e).edges).filter(h=>!u.some(({id:d})=>d===h.id))),(a.length>0||u.length>0)&&((f=(c=l(e)).ondelete)==null||f.call(c,{nodes:a,edges:u})),{deletedNodes:a,deletedEdges:u}},screenToFlowPosition:(o,s={snapToGrid:!0})=>{if(!l(e).domNode)return o;const a=s.snapToGrid?l(e).snapGrid:!1,{x:u,y:c,zoom:f}=l(e).viewport,{x:h,y:d}=l(e).domNode.getBoundingClientRect(),g={x:o.x-h,y:o.y-d};return $i(g,[u,c,f],a!==null,a||[1,1])},flowToScreenPosition:o=>{if(!l(e).domNode)return o;const{x:s,y:a,zoom:u}=l(e).viewport,{x:c,y:f}=l(e).domNode.getBoundingClientRect(),h=Po(o,[s,a,u]);return{x:h.x+c,y:h.y+f}},toObject:()=>structuredClone({nodes:[...l(e).nodes],edges:[...l(e).edges],viewport:{...l(e).viewport}}),updateNode:n,updateNodeData:(o,s,a)=>{var f;const u=(f=l(e).nodeLookup.get(o))==null?void 0:f.internals.userNode;if(!u)return;const c=typeof s=="function"?s(u):s;n(o,h=>({...h,data:a!=null&&a.replace?c:{...h.data,...c}}))},updateEdge:r,getNodesBounds:o=>jy(o,{nodeLookup:l(e).nodeLookup,nodeOrigin:l(e).nodeOrigin}),getHandleConnections:({type:o,id:s,nodeId:a})=>{var u;return Array.from(((u=l(e).connectionLookup.get(`${a}-${o}-${s??null}`))==null?void 0:u.values())??[])}}}function Wl(e,t){var r;const n=[];for(const i of t){const o=e.get(i);if(o){const s="internals"in o?(r=o.internals)==null?void 0:r.userNode:o;n.push(s)}}return n}function Zm(e,t){Ne(t,!0);let n=Q(t,"store",15),r=Q(t,"selectionKey",3,"Shift"),i=Q(t,"multiSelectionKey",19,()=>Do()?"Meta":"Control"),o=Q(t,"deleteKey",3,"Backspace"),s=Q(t,"panActivationKey",3," "),a=Q(t,"zoomActivationKey",19,()=>Do()?"Meta":"Control"),{deleteElements:u}=Fa();function c(m){return m!==null&&typeof m=="object"}function f(m){return c(m)?m.modifier||[]:[]}function h(m){return m==null?"":c(m)?m.key:m}function d(m,_){return(Array.isArray(m)?m:[m]).map(C=>{const P=h(C);return{key:P,modifier:f(C),enabled:P!==null,callback:_}})}function g(){n(n().selectionRect=null,!0),n(n().selectionKeyPressed=!1,!0),n(n().multiselectionKeyPressed=!1,!0),n(n().deleteKeyPressed=!1,!0),n(n().panActivationKeyPressed=!1,!0),n(n().zoomActivationKeyPressed=!1,!0)}function v(){const m=n().nodes.filter(x=>x.selected),_=n().edges.filter(x=>x.selected);u({nodes:m,edges:_})}$n("blur",gt,g),$n("contextmenu",gt,g),yt(gt,(m,_)=>Fe==null?void 0:Fe(m,_),()=>({trigger:d(r(),()=>n(n().selectionKeyPressed=!0,!0)),type:"keydown"})),yt(gt,(m,_)=>Fe==null?void 0:Fe(m,_),()=>({trigger:d(r(),()=>n(n().selectionKeyPressed=!1,!0)),type:"keyup"})),yt(gt,(m,_)=>Fe==null?void 0:Fe(m,_),()=>({trigger:d(i(),()=>{n(n().multiselectionKeyPressed=!0,!0)}),type:"keydown"})),yt(gt,(m,_)=>Fe==null?void 0:Fe(m,_),()=>({trigger:d(i(),()=>n(n().multiselectionKeyPressed=!1,!0)),type:"keyup"})),yt(gt,(m,_)=>Fe==null?void 0:Fe(m,_),()=>({trigger:d(o(),m=>{!(m.originalEvent.ctrlKey||m.originalEvent.metaKey||m.originalEvent.shiftKey)&&!Yc(m.originalEvent)&&(n(n().deleteKeyPressed=!0,!0),v())}),type:"keydown"})),yt(gt,(m,_)=>Fe==null?void 0:Fe(m,_),()=>({trigger:d(o(),()=>n(n().deleteKeyPressed=!1,!0)),type:"keyup"})),yt(gt,(m,_)=>Fe==null?void 0:Fe(m,_),()=>({trigger:d(s(),()=>n(n().panActivationKeyPressed=!0,!0)),type:"keydown"})),yt(gt,(m,_)=>Fe==null?void 0:Fe(m,_),()=>({trigger:d(s(),()=>n(n().panActivationKeyPressed=!1,!0)),type:"keyup"})),yt(gt,(m,_)=>Fe==null?void 0:Fe(m,_),()=>({trigger:d(a(),()=>n(n().zoomActivationKeyPressed=!0,!0)),type:"keydown"})),yt(gt,(m,_)=>Fe==null?void 0:Fe(m,_),()=>({trigger:d(a(),()=>n(n().zoomActivationKeyPressed=!1,!0)),type:"keyup"})),Ie()}var jm=Tt('<path fill="none" class="svelte-flow__connection-path"></path>'),Jm=Tt('<svg class="svelte-flow__connectionline"><g><!></g></svg>');function Qm(e,t){Ne(t,!0);let n=S(()=>{if(!t.store.connection.inProgress)return"";const s={sourceX:t.store.connection.from.x,sourceY:t.store.connection.from.y,sourcePosition:t.store.connection.fromPosition,targetX:t.store.connection.to.x,targetY:t.store.connection.to.y,targetPosition:t.store.connection.toPosition};switch(t.type){case Kn.Bezier:{const[a]=Wc(s);return a}case Kn.Straight:{const[a]=qc(s);return a}case Kn.Step:case Kn.SmoothStep:{const[a]=Ma({...s,borderRadius:t.type===Kn.Step?0:void 0});return a}}});var r=ot(),i=Ke(r);{var o=s=>{var a=Jm(),u=ce(a),c=ce(u);{var f=d=>{var g=ot(),v=Ke(g);ba(v,()=>t.LineComponent,(m,_)=>{_(m,{})}),oe(d,g)},h=d=>{var g=jm();Ee(()=>{he(g,"d",l(n)),zt(g,t.style)}),oe(d,g)};Ye(c,d=>{t.LineComponent?d(f):d(h,!1)})}Ee(d=>{he(a,"width",t.store.width),he(a,"height",t.store.height),zt(a,t.containerStyle),Dn(u,0,d)},[()=>kr(["svelte-flow__connection",qy(t.store.connection.isValid)])]),oe(s,a)};Ye(i,s=>{t.store.connection.inProgress&&s(o)})}oe(e,r),Ie()}var $m=me("<div><!></div>");function e0(e,t){Ne(t,!0);let n=Q(t,"position",3,"top-right"),r=qi(t,["$$slots","$$events","$$legacy","position","style","class","children"]),i=S(()=>`${n()}`.split("-"));var o=$m();An(o,a=>({class:a,style:t.style,...r}),[()=>["svelte-flow__panel",t.class,...l(i)]]);var s=ce(o);Pn(s,()=>t.children??Sr),oe(e,o),Ie()}var t0=me('<a href="https://svelteflow.dev" target="_blank" rel="noopener noreferrer" aria-label="Svelte Flow attribution">Svelte Flow</a>');function n0(e,t){Ne(t,!0);let n=Q(t,"position",3,"bottom-right");var r=ot(),i=Ke(r);{var o=s=>{e0(s,{get position(){return n()},class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",children:(a,u)=>{var c=t0();oe(a,c)},$$slots:{default:!0}})};Ye(i,s=>{var a;(a=t.proOptions)!=null&&a.hideAttribution||s(o)})}oe(e,r),Ie()}var r0=me("<div><!></div>");function i0(e,t){Ne(t,!0);let n=Q(t,"domNode",15),r=Q(t,"clientWidth",15),i=Q(t,"clientHeight",15),o=S(()=>t.rest.class),s=S(()=>kf(t.rest,["id","class","nodeTypes","edgeTypes","colorMode","isValidConnection","onmove","onmovestart","onmoveend","onflowerror","ondelete","onbeforedelete","onbeforeconnect","onconnect","onconnectstart","onconnectend","onbeforereconnect","onreconnect","onreconnectstart","onreconnectend","onclickconnectstart","onclickconnectend","oninit","onselectionchange","onselectiondragstart","onselectiondrag","onselectiondragstop","onselectionstart","onselectionend","clickConnect","fitView","fitViewOptions","nodeOrigin","nodeDragThreshold","connectionDragThreshold","minZoom","maxZoom","initialViewport","connectionRadius","connectionMode","selectionMode","selectNodesOnDrag","snapGrid","defaultMarkerColor","translateExtent","nodeExtent","onlyRenderVisibleElements","autoPanOnConnect","autoPanOnNodeDrag","colorModeSSR","defaultEdgeOptions","elevateNodesOnSelect","elevateEdgesOnSelect","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","elementsSelectable","nodesFocusable","edgesFocusable","disableKeyboardA11y","noDragClass","noPanClass","noWheelClass","ariaLabelConfig","autoPanSpeed","panOnScrollSpeed","zIndexMode"]));function a(f){f.currentTarget.scrollTo({top:0,left:0,behavior:"auto"}),t.rest.onscroll&&t.rest.onscroll(f)}var u=r0();An(u,f=>({class:["svelte-flow","svelte-flow__container",l(o),t.colorMode],"data-testid":"svelte-flow__wrapper",role:"application",onscroll:a,...l(s),[Hn]:f}),[()=>({width:un(t.width),height:un(t.height)})],void 0,void 0,"svelte-rhpwh");var c=ce(u);Pn(c,()=>t.children??Sr),On(u,f=>n(f),()=>n()),ol(u,"clientHeight",i),ol(u,"clientWidth",r),oe(e,u),Ie()}var o0=me('<div class="svelte-flow__viewport-back svelte-flow__container"></div> <!> <div class="svelte-flow__edge-labels svelte-flow__container"></div> <!> <!> <!> <div class="svelte-flow__viewport-front svelte-flow__container"></div>',1),s0=me("<!> <!>",1),a0=me("<!> <!> <!> <!> <!>",1);function l0(e,t){Ne(t,!0);let n=Q(t,"paneClickDistance",3,1),r=Q(t,"nodeClickDistance",3,1),i=Q(t,"panOnScrollMode",19,()=>Fr.Free),o=Q(t,"preventScrolling",3,!0),s=Q(t,"zoomOnScroll",3,!0),a=Q(t,"zoomOnDoubleClick",3,!0),u=Q(t,"zoomOnPinch",3,!0),c=Q(t,"panOnScroll",3,!1),f=Q(t,"panOnScrollSpeed",3,.5),h=Q(t,"panOnDrag",3,!0),d=Q(t,"selectionOnDrag",3,!1),g=Q(t,"connectionLineType",19,()=>Kn.Bezier),v=Q(t,"nodes",31,()=>Gn([])),m=Q(t,"edges",31,()=>Gn([])),_=Q(t,"viewport",15,void 0),x=qi(t,["$$slots","$$events","$$legacy","width","height","proOptions","selectionKey","deleteKey","panActivationKey","multiSelectionKey","zoomActivationKey","paneClickDistance","nodeClickDistance","onmovestart","onmoveend","onmove","oninit","onnodeclick","onnodecontextmenu","onnodedrag","onnodedragstart","onnodedragstop","onnodepointerenter","onnodepointermove","onnodepointerleave","onselectionclick","onselectioncontextmenu","onselectionstart","onselectionend","onedgeclick","onedgecontextmenu","onedgepointerenter","onedgepointerleave","onpaneclick","onpanecontextmenu","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnDrag","selectionOnDrag","connectionLineComponent","connectionLineStyle","connectionLineContainerStyle","connectionLineType","attributionPosition","children","nodes","edges","viewport"]),C=ld({props:x,width:t.width,height:t.height,get nodes(){return v()},set nodes(b){v(b)},get edges(){return m()},set edges(b){m(b)},get viewport(){return _()},set viewport(b){_(b)}});const P=ca(Lo);P&&P.setStore&&P.setStore(C),da(Lo,{provider:!1,getStore(){return C}}),an(()=>{var k;const b={nodes:C.selectedNodes,edges:C.selectedEdges};(k=xe(()=>t.onselectionchange))==null||k(b);for(const L of C.selectionChangeHandlers.values())L(b)}),jo(()=>{C.reset()}),i0(e,{get colorMode(){return C.colorMode},get width(){return t.width},get height(){return t.height},get rest(){return x},get domNode(){return C.domNode},set domNode(b){C.domNode=b},get clientWidth(){return C.width},set clientWidth(b){C.width=b},get clientHeight(){return C.height},set clientHeight(b){C.height=b},children:(b,k)=>{var L=a0(),j=Ke(L);Zm(j,{get selectionKey(){return t.selectionKey},get deleteKey(){return t.deleteKey},get panActivationKey(){return t.panActivationKey},get multiSelectionKey(){return t.multiSelectionKey},get zoomActivationKey(){return t.zoomActivationKey},get store(){return C},set store(E){C=E}});var D=Se(j,2);wm(D,{get panOnScrollMode(){return i()},get preventScrolling(){return o()},get zoomOnScroll(){return s()},get zoomOnDoubleClick(){return a()},get zoomOnPinch(){return u()},get panOnScroll(){return c()},get panOnScrollSpeed(){return f()},get panOnDrag(){return h()},get paneClickDistance(){return n()},get selectionOnDrag(){return d()},get onmovestart(){return t.onmovestart},get onmove(){return t.onmove},get onmoveend(){return t.onmoveend},get oninit(){return t.oninit},get store(){return C},set store(E){C=E},children:(E,O)=>{Nm(E,{get onpaneclick(){return t.onpaneclick},get onpanecontextmenu(){return t.onpanecontextmenu},get onselectionstart(){return t.onselectionstart},get onselectionend(){return t.onselectionend},get panOnDrag(){return h()},get paneClickDistance(){return n()},get selectionOnDrag(){return d()},get store(){return C},set store(p){C=p},children:(p,A)=>{var N=s0(),z=Ke(N);Sm(z,{get store(){return C},set store(G){C=G},children:(G,H)=>{var B=o0(),ne=Se(Ke(B),2);Xm(ne,{get onedgeclick(){return t.onedgeclick},get onedgecontextmenu(){return t.onedgecontextmenu},get onedgepointerenter(){return t.onedgepointerenter},get onedgepointerleave(){return t.onedgepointerleave},get store(){return C},set store(K){C=K}});var se=Se(ne,4);Qm(se,{get type(){return g()},get LineComponent(){return t.connectionLineComponent},get containerStyle(){return t.connectionLineContainerStyle},get style(){return t.connectionLineStyle},get store(){return C},set store(K){C=K}});var Y=Se(se,2);Om(Y,{get nodeClickDistance(){return r()},get onnodeclick(){return t.onnodeclick},get onnodecontextmenu(){return t.onnodecontextmenu},get onnodepointerenter(){return t.onnodepointerenter},get onnodepointermove(){return t.onnodepointermove},get onnodepointerleave(){return t.onnodepointerleave},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get store(){return C},set store(K){C=K}});var W=Se(Y,2);Um(W,{get onselectionclick(){return t.onselectionclick},get onselectioncontextmenu(){return t.onselectioncontextmenu},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get store(){return C},set store(K){C=K}}),oe(G,B)},$$slots:{default:!0}});var V=Se(z,2);{let G=S(()=>!!(C.selectionRect&&C.selectionRectMode==="user")),H=S(()=>{var Y;return(Y=C.selectionRect)==null?void 0:Y.width}),B=S(()=>{var Y;return(Y=C.selectionRect)==null?void 0:Y.height}),ne=S(()=>{var Y;return(Y=C.selectionRect)==null?void 0:Y.x}),se=S(()=>{var Y;return(Y=C.selectionRect)==null?void 0:Y.y});dd(V,{get isVisible(){return l(G)},get width(){return l(H)},get height(){return l(B)},get x(){return l(ne)},get y(){return l(se)}})}oe(p,N)},$$slots:{default:!0}})},$$slots:{default:!0}});var R=Se(D,2);n0(R,{get proOptions(){return t.proOptions},get position(){return t.attributionPosition}});var $=Se(R,2);Am($,{get store(){return C}});var M=Se($,2);Pn(M,()=>t.children??Sr),oe(b,L)},$$slots:{default:!0}}),Ie()}function u0(e,t){Ne(t,!0);let n=Ve(ld({props:{},nodes:[],edges:[]}));da(Lo,{provider:!0,getStore(){return l(n)},setStore:o=>{I(n,o)}}),jo(()=>{l(n).reset()});var r=ot(),i=Ke(r);Pn(i,()=>t.children??Sr),oe(e,r),Ie()}var jn;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(jn||(jn={}));var c0=Tt("<circle></circle>");function d0(e,t){var n=c0();Ee(()=>{he(n,"cx",t.radius),he(n,"cy",t.radius),he(n,"r",t.radius),Dn(n,0,kr(["svelte-flow__background-pattern","dots",t.class]))}),oe(e,n)}var f0=Tt("<path></path>");function h0(e,t){Ne(t,!0);var n=f0();Ee(()=>{he(n,"stroke-width",t.lineWidth),he(n,"d",`M${t.dimensions[0]/2} 0 V${t.dimensions[1]} M0 ${t.dimensions[1]/2} H${t.dimensions[0]}`),Dn(n,0,kr(["svelte-flow__background-pattern",t.variant,t.class]))}),oe(e,n),Ie()}const g0={[jn.Dots]:1,[jn.Lines]:1,[jn.Cross]:6};var v0=Tt('<svg data-testid="svelte-flow__background"><pattern patternUnits="userSpaceOnUse"><!></pattern><rect x="0" y="0" width="100%" height="100%"></rect></svg>');function y0(e,t){Ne(t,!0);let n=Q(t,"variant",19,()=>jn.Dots),r=Q(t,"gap",3,20),i=Q(t,"lineWidth",3,1),o=S(ui),s=S(()=>n()===jn.Dots),a=S(()=>n()===jn.Cross),u=S(()=>Array.isArray(r())?r():[r(),r()]),c=S(()=>`background-pattern-${l(o).flowId}-${t.id??""}`),f=S(()=>[l(u)[0]*l(o).viewport.zoom||1,l(u)[1]*l(o).viewport.zoom||1]),h=S(()=>(t.size??g0[n()])*l(o).viewport.zoom),d=S(()=>l(a)?[l(h),l(h)]:l(f)),g=S(()=>l(s)?[l(h)/2,l(h)/2]:[l(d)[0]/2,l(d)[1]/2]);var v=v0();let m;var _=ce(v),x=ce(_);{var C=k=>{{let L=S(()=>l(h)/2);d0(k,{get radius(){return l(L)},get class(){return t.patternClass}})}},P=k=>{h0(k,{get dimensions(){return l(d)},get variant(){return n()},get lineWidth(){return i()},get class(){return t.patternClass}})};Ye(x,k=>{l(s)?k(C):k(P,!1)})}var b=Se(_);Ee(()=>{Dn(v,0,kr(["svelte-flow__background","svelte-flow__container",t.class])),m=zt(v,"",m,{"--xy-background-color-props":t.bgColor,"--xy-background-pattern-color-props":t.patternColor}),he(_,"id",l(c)),he(_,"x",l(o).viewport.x%l(f)[0]),he(_,"y",l(o).viewport.y%l(f)[1]),he(_,"width",l(f)[0]),he(_,"height",l(f)[1]),he(_,"patternTransform",`translate(-${l(g)[0]},-${l(g)[1]})`),he(b,"fill",`url(#${l(c)})`)}),oe(e,v),Ie()}var p0=me('<div class="text-xs text-vsc-muted">No matching node types</div>'),m0=me('<span class="text-xs text-vsc-muted"> </span>'),_0=me('<button class="flex w-full cursor-pointer flex-col gap-0.5 rounded-md border border-vsc-editor-widget-border bg-vsc-button-secondary-bg px-2 py-1.5 text-left text-vsc-fg hover:border-vsc-focus hover:bg-vsc-list-hover data-[active=true]:border-vsc-focus data-[active=true]:bg-vsc-list-active-bg data-[active=true]:text-vsc-list-active-fg" type="button"><span class="text-xs font-semibold"> </span> <!></button>'),b0=me('<div class="flex flex-col gap-1.5"><div class="text-xs uppercase tracking-wide text-vsc-muted"> </div> <!></div>'),x0=me('<div class="absolute z-40 w-64 max-h-[70vh] translate-x-2 translate-y-2 overflow-hidden rounded-lg border border-vsc-editor-widget-border bg-vsc-editor-widget-bg p-2.5 text-vsc-editor-fg shadow-2xl"><input class="w-full rounded-md border border-vsc-input-border bg-vsc-input-bg px-2 py-1.5 text-xs text-vsc-input-fg" type="search" placeholder="Search nodes..."/> <div class="mt-2 flex max-h-[calc(70vh-3.5rem)] flex-col gap-2 overflow-auto pr-0.5"><!></div></div>');function w0(e,t){Ne(t,!1);const n=ue(),r=ue(),i=ue();let o=Q(t,"open",8,!1),s=Q(t,"openVersion",8,0),a=Q(t,"position",24,()=>({x:0,y:0})),u=Q(t,"templates",24,()=>[]);const c=dn();let f=ue(""),h=ue(),d=ue(0),g=ue(""),v=ue(-1);function m(D){const R=new Map;for(const $ of D){const M=typeof($==null?void 0:$.category)=="string"&&$.category.trim()?$.category.trim():"Other";R.has(M)||R.set(M,[]),R.get(M).push($)}return Array.from(R.entries()).sort(([$],[M])=>$.localeCompare(M)).map(([$,M])=>({category:$,items:M.sort((E,O)=>E.label.localeCompare(O.label))}))}function _(D){c("select",{template:D})}function x(){c("close")}function C(D){if(D.key==="Escape"){x();return}if(D.key==="ArrowDown"&&l(i).length>0){D.preventDefault(),I(d,(l(d)+1)%l(i).length);return}if(D.key==="ArrowUp"&&l(i).length>0){D.preventDefault(),I(d,(l(d)-1+l(i).length)%l(i).length);return}D.key==="Enter"&&l(i).length>0&&(D.preventDefault(),_(l(i)[l(d)]??l(i)[0]))}function P(D){var R;return(((R=l(i)[l(d)])==null?void 0:R.templateId)??"")===(D==null?void 0:D.templateId)}function b(D){const R=l(i).findIndex($=>($==null?void 0:$.templateId)&&$.templateId===(D==null?void 0:D.templateId));R>=0&&I(d,R)}ve(()=>(fe(o()),fe(s()),l(v),l(h)),()=>{o()&&s()!==l(v)&&(I(f,""),I(d,0),I(v,s()),Uo().then(()=>{var D;return(D=l(h))==null?void 0:D.focus()}))}),ve(()=>(fe(u()),l(f)),()=>{I(n,u().filter(D=>`${D.label} ${D.subtitle??""} ${D.category??""}`.toLowerCase().includes(l(f).trim().toLowerCase())))}),ve(()=>l(n),()=>{I(r,m(l(n)))}),ve(()=>l(r),()=>{I(i,l(r).flatMap(D=>D.items))}),ve(()=>(l(f),l(g)),()=>{l(f)!==l(g)&&(I(g,l(f)),I(d,0))}),ve(()=>(l(d),l(i)),()=>{l(d)>=l(i).length&&I(d,Math.max(0,l(i).length-1))}),Rt(),dt();var k=ot(),L=Ke(k);{var j=D=>{var R=x0();let $;var M=ce(R);M.__keydown=C,On(M,N=>I(h,N),()=>l(h));var E=Se(M,2),O=ce(E);{var p=N=>{var z=p0();oe(N,z)},A=N=>{var z=ot(),V=Ke(z);ln(V,1,()=>l(r),br,(G,H)=>{var B=b0(),ne=ce(B),se=ce(ne),Y=Se(ne,2);ln(Y,1,()=>(l(H),xe(()=>l(H).items)),br,(W,K)=>{var Z=_0();Z.__click=()=>_(l(K));var re=ce(Z),ge=ce(re),U=Se(re,2);{var ae=be=>{var ye=m0(),T=ce(ye);Ee(()=>We(T,(l(K),xe(()=>l(K).subtitle)))),oe(be,ye)};Ye(U,be=>{l(K),xe(()=>l(K).subtitle)&&be(ae)})}Ee(be=>{he(Z,"data-active",be),We(ge,(l(K),xe(()=>l(K).label)))},[()=>(l(K),xe(()=>P(l(K))))]),$n("mouseenter",Z,()=>b(l(K))),oe(W,Z)}),Ee(()=>We(se,(l(H),xe(()=>l(H).category)))),oe(G,B)}),oe(N,z)};Ye(O,N=>{l(r),xe(()=>l(r).length===0)?N(p):N(A,!1)})}Ee(()=>$=zt(R,"",$,{left:(fe(a()),xe(()=>`${a().x}px`)),top:(fe(a()),xe(()=>`${a().y}px`))})),nh(M,()=>l(f),N=>I(f,N)),oe(D,R)};Ye(L,D=>{o()&&D(j)})}oe(e,k),Ie()}Vt(["keydown","click"]);/**
 * @license lucide-svelte v0.564.0 - ISC
 *
 * ISC License
 * 
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2026 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2026.
 * 
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 * 
 * ---
 * 
 * The MIT License (MIT) (for portions derived from Feather)
 * 
 * Copyright (c) 2013-2026 Cole Bemis
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */const E0={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-svelte v0.564.0 - ISC
 *
 * ISC License
 * 
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2026 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2026.
 * 
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 * 
 * ---
 * 
 * The MIT License (MIT) (for portions derived from Feather)
 * 
 * Copyright (c) 2013-2026 Cole Bemis
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */const N0=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0;return!1};/**
 * @license lucide-svelte v0.564.0 - ISC
 *
 * ISC License
 * 
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2026 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2026.
 * 
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 * 
 * ---
 * 
 * The MIT License (MIT) (for portions derived from Feather)
 * 
 * Copyright (c) 2013-2026 Cole Bemis
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */const Gl=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();var I0=Tt("<svg><!><!></svg>");function S0(e,t){const n=Xs(t,["children","$$slots","$$events","$$legacy"]),r=Xs(n,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);Ne(t,!1);let i=Q(t,"name",8,void 0),o=Q(t,"color",8,"currentColor"),s=Q(t,"size",8,24),a=Q(t,"strokeWidth",8,2),u=Q(t,"absoluteStrokeWidth",8,!1),c=Q(t,"iconNode",24,()=>[]);dt();var f=I0();An(f,(g,v,m)=>({...E0,...g,...r,width:s(),height:s(),stroke:o(),"stroke-width":v,class:m}),[()=>N0(r)?void 0:{"aria-hidden":"true"},()=>(fe(u()),fe(a()),fe(s()),xe(()=>u()?Number(a())*24/Number(s()):a())),()=>(fe(Gl),fe(i()),fe(n),xe(()=>Gl("lucide-icon","lucide",i()?`lucide-${i()}`:"",n.class)))]);var h=ce(f);ln(h,1,c,br,(g,v)=>{var m=S(()=>ii(l(v),2));let _=()=>l(m)[0],x=()=>l(m)[1];var C=ot(),P=Ke(C);Wf(P,_,!0,(b,k)=>{An(b,()=>({...x()}))}),oe(g,C)});var d=Se(h);_a(d,t,"default",{}),oe(e,f),Ie()}function T0(e,t){const n=Xs(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.564.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2026 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2026.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2026 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const r=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"}],["path",{d:"m15 5 4 4"}]];S0(e,sc({name:"pencil"},()=>n,{get iconNode(){return r},children:(i,o)=>{var s=ot(),a=Ke(s);_a(a,t,"default",{}),oe(i,s)},$$slots:{default:!0}}))}const le={SMALL_STRING:"SmallString",STRING:"String",FLOAT:"Float",INT:"Int",INTEGER:"Integer",INT_SLIDER:"IntSlider",CHECKBOX:"Checkbox",BOOL:"Bool",ENUM:"Enum",FILE_PATH:"FilePath",LIST:"List",OBJECT:"Object"};Object.values(le);const wn="customMetadata",yn="$TemplateId",pn="$EditorFields",fd=new Set([le.SMALL_STRING,le.STRING,le.FILE_PATH]),k0=new Set([le.FLOAT,le.INT,le.INTEGER,le.INT_SLIDER]),hd=new Set([le.CHECKBOX,le.BOOL]);function Mi(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function Ra(e){return typeof e=="string"?e.trim():""}function hn(e){return Mi(e)?e:{}}function tr(e){const t=hn(e==null?void 0:e.options);return typeof t.Label=="string"&&t.Label.trim()?t.Label.trim():typeof(e==null?void 0:e.label)=="string"&&e.label.trim()?e.label.trim():typeof(e==null?void 0:e.id)=="string"&&e.id.trim()?e.id.trim():"Field"}function A0(e){const t=hn(e==null?void 0:e.options);return typeof t.Type=="string"&&t.Type.trim()?t.Type.trim():typeof t.ArrayElementType=="string"&&t.ArrayElementType.trim()?t.ArrayElementType.trim():le.STRING}function uo(e,t,n=!1){const r=Number(e);return Number.isFinite(r)?n?Math.round(r):r:t}function C0(e,t,n){let r=e;return Number.isFinite(t)&&(r=Math.max(r,t)),Number.isFinite(n)&&(r=Math.min(r,n)),r}function zo(e,t,n){const r=Number(e==null?void 0:e[t]);return Number.isFinite(r)?r:n}function M0(e,...t){for(const n of t)if(typeof(e==null?void 0:e[n])=="boolean")return e[n];return!1}function gd(e){return Array.isArray(e==null?void 0:e.Values)?e.Values.filter(t=>typeof t=="string"):[]}function ar(e){const t=Ra(e==null?void 0:e.type),n=hn(e==null?void 0:e.options);if(fd.has(t))return typeof n.Default=="string"?n.Default:"";if(t===le.FLOAT)return zo(n,"Default",0);if(t===le.INT||t===le.INTEGER||t===le.INT_SLIDER)return Math.round(zo(n,"Default",0));if(hd.has(t))return M0(n,"Default","DefaultValue");if(t===le.ENUM){const r=gd(n);return typeof n.Default=="string"&&r.includes(n.Default)?n.Default:r[0]??""}if(t===le.LIST)return[];if(t===le.OBJECT){const r=Array.isArray(n.Fields)?n.Fields:[],i={};for(const o of r)typeof(o==null?void 0:o.id)!="string"||!o.id.trim()||(i[o.id]=ar(o));return i}return""}function Pi(e,t){const n=Ra(e==null?void 0:e.type),r=hn(e==null?void 0:e.options);if(fd.has(n))return typeof t=="string"?t:String(t??"");if(n===le.FLOAT)return uo(t,ar(e),!1);if(n===le.INT||n===le.INTEGER)return uo(t,ar(e),!0);if(n===le.INT_SLIDER){const i=ar(e),o=zo(r,"Min",Number.NaN),s=zo(r,"Max",Number.NaN),a=uo(t,i,!0);return C0(a,o,s)}if(hd.has(n))return!!t;if(n===le.ENUM){const i=gd(r),o=ar(e);return typeof t=="string"&&i.includes(t)?t:o}if(n===le.LIST)return Array.isArray(t)?t:[];if(n===le.OBJECT){const i=Array.isArray(r.Fields)?r.Fields:[],o=Mi(t)?t:{},s={};for(const a of i)typeof(a==null?void 0:a.id)!="string"||!a.id.trim()||(s[a.id]=Pi(a,o[a.id]));return s}return k0.has(n)?uo(t,0,!1):t}function ra(e){const t={},n=Array.isArray(e)?e:[];for(const r of n)typeof(r==null?void 0:r.id)!="string"||!r.id.trim()||(t[r.id]=ar(r));return t}const P0=['input:not([type="hidden"]):not([disabled]):not([readonly])',"textarea:not([disabled]):not([readonly])","select:not([disabled])",'[contenteditable="true"]'].join(", ");function D0(e){var t;return!!(e!=null&&e.offsetWidth||e!=null&&e.offsetHeight||(t=e==null?void 0:e.getClientRects)!=null&&t.call(e).length)}function O0(e){var t;return((t=e==null?void 0:e.closest)==null?void 0:t.call(e,"[data-node-editor-root]"))??null}function ci(e){const t=O0(e);if(!t)return!1;const n=Array.from(t.querySelectorAll(P0)).filter(D0),r=n.indexOf(e);if(r<0)return!1;const i=n[r+1];return i?(i.focus(),!0):!1}function di(e){return(e==null?void 0:e.key)==="Enter"&&!(e!=null&&e.isComposing)&&!(e!=null&&e.altKey)&&!(e!=null&&e.ctrlKey)&&!(e!=null&&e.metaKey)&&!(e!=null&&e.shiftKey)}var L0=me('<textarea class="nodrag min-h-10 w-full resize-none rounded-md border border-vsc-input-border bg-vsc-input-bg px-2 py-1.5 text-xs text-vsc-input-fg h-20"></textarea>'),z0=me('<input class="nodrag w-full rounded-md border border-vsc-input-border bg-vsc-input-bg px-2 py-1.5 text-xs text-vsc-input-fg" type="text"/>'),F0=me('<div class="flex flex-col gap-1"><label class="text-xs text-vsc-muted"> </label> <!></div>');function R0(e,t){Ne(t,!1);const n=ue(),r=ue(),i=ue(),o=ue(),s=ue();let a=Q(t,"field",8),u=Q(t,"value",8);const c=dn();function f(b){c("change",{value:b})}function h(b){di(b)&&(b.preventDefault(),ci(b.currentTarget)||b.currentTarget.blur())}function d(b){return typeof b!="string"||!b.trim()?"field":b.replace(/[^a-zA-Z0-9_-]/g,"_")}ve(()=>fe(a()),()=>{var b;I(n,hn((b=a())==null?void 0:b.options))}),ve(()=>fe(a()),()=>{I(r,tr(a()))}),ve(()=>fe(u()),()=>{I(i,typeof u()=="string"?u():String(u()??""))}),ve(()=>l(n),()=>{I(o,Math.max(2,Math.round(Number(l(n).Height)/24)||2))}),ve(()=>fe(a()),()=>{var b,k;I(s,`text-${d((b=a())==null?void 0:b.id)}-${((k=a())==null?void 0:k.type)??"value"}`)}),Rt(),dt();var g=F0(),v=ce(g),m=ce(v),_=Se(v,2);{var x=b=>{var k=L0();k.__input=L=>f(L.currentTarget.value),Ee(()=>{he(k,"id",l(s)),he(k,"rows",l(o)),Ut(k,l(i))}),oe(b,k)},C=S(()=>(fe(a()),l(n),xe(()=>{var b;return((b=a())==null?void 0:b.type)==="String"||Number(l(n).Height)>0}))),P=b=>{var k=z0();k.__input=L=>f(L.currentTarget.value),k.__keydown=h,Ee(()=>{he(k,"id",l(s)),Ut(k,l(i))}),oe(b,k)};Ye(_,b=>{l(C)?b(x):b(P,!1)})}Ee(()=>{he(v,"for",l(s)),We(m,l(r))}),oe(e,g),Ie()}Vt(["input","keydown"]);var V0=me('<div class="flex flex-col gap-1"><label class="text-xs text-vsc-muted"> </label> <input class="nodrag w-full rounded-md border border-vsc-input-border bg-vsc-input-bg px-2 py-1.5 text-xs text-vsc-input-fg" type="number"/></div>');function B0(e,t){Ne(t,!1);const n=ue(),r=ue(),i=ue(),o=ue(),s=ue(),a=ue(),u=ue();let c=Q(t,"field",8),f=Q(t,"value",8);const h=dn();function d(P){h("change",{value:P})}function g(P){di(P)&&(P.preventDefault(),ci(P.currentTarget)||P.currentTarget.blur())}function v(P){return typeof P!="string"||!P.trim()?"field":P.replace(/[^a-zA-Z0-9_-]/g,"_")}ve(()=>fe(c()),()=>{var P;I(n,hn((P=c())==null?void 0:P.options))}),ve(()=>fe(c()),()=>{I(r,tr(c()))}),ve(()=>fe(f()),()=>{I(i,Number.isFinite(Number(f()))?Number(f()):0)}),ve(()=>l(n),()=>{I(o,Number.isFinite(Number(l(n).Min))?Number(l(n).Min):void 0)}),ve(()=>l(n),()=>{I(s,Number.isFinite(Number(l(n).Max))?Number(l(n).Max):void 0)}),ve(()=>fe(c()),()=>{var P;I(a,((P=c())==null?void 0:P.type)==="Float"?"any":"1")}),ve(()=>fe(c()),()=>{var P,b;I(u,`number-${v((P=c())==null?void 0:P.id)}-${((b=c())==null?void 0:b.type)??"value"}`)}),Rt(),dt();var m=V0(),_=ce(m),x=ce(_),C=Se(_,2);C.__input=P=>d(P.currentTarget.value),C.__keydown=g,Ee(()=>{he(_,"for",l(u)),We(x,l(r)),he(C,"id",l(u)),Ut(C,l(i)),he(C,"step",l(a)),he(C,"min",l(o)),he(C,"max",l(s))}),oe(e,m),Ie()}Vt(["input","keydown"]);var H0=me('<div class="flex flex-col gap-1"><label class="text-xs text-vsc-muted"> </label> <input class="nodrag w-full" type="range"/></div>');function K0(e,t){Ne(t,!1);const n=ue(),r=ue(),i=ue(),o=ue(),s=ue(),a=ue(),u=ue(),c=ue();let f=Q(t,"field",8),h=Q(t,"value",8);const d=dn();function g(P){d("change",{value:P})}function v(P){return typeof P!="string"||!P.trim()?"field":P.replace(/[^a-zA-Z0-9_-]/g,"_")}ve(()=>fe(f()),()=>{var P;I(n,hn((P=f())==null?void 0:P.options))}),ve(()=>fe(f()),()=>{I(r,tr(f()))}),ve(()=>l(n),()=>{I(i,Number.isFinite(Number(l(n).Min))?Number(l(n).Min):0)}),ve(()=>l(n),()=>{I(o,Number.isFinite(Number(l(n).Max))?Number(l(n).Max):100)}),ve(()=>l(n),()=>{I(s,Number.isFinite(Number(l(n).TickFrequency))?Number(l(n).TickFrequency):1)}),ve(()=>(fe(h()),l(i)),()=>{I(a,Number.isFinite(Number(h()))?Number(h()):l(i))}),ve(()=>(l(r),l(a)),()=>{I(u,`${l(r)} (${l(a)})`)}),ve(()=>fe(f()),()=>{var P,b;I(c,`slider-${v((P=f())==null?void 0:P.id)}-${((b=f())==null?void 0:b.type)??"value"}`)}),Rt(),dt();var m=H0(),_=ce(m),x=ce(_),C=Se(_,2);C.__input=P=>g(P.currentTarget.value),Ee(()=>{he(_,"for",l(c)),We(x,l(u)),he(C,"id",l(c)),he(C,"min",l(i)),he(C,"max",l(o)),he(C,"step",l(s)),Ut(C,l(a))}),oe(e,m),Ie()}Vt(["input"]);var Y0=me('<div class="flex flex-row items-center justify-between gap-2"><label class="text-xs text-vsc-muted"> </label> <input class="nodrag h-4 w-4" type="checkbox"/></div>');function X0(e,t){Ne(t,!1);const n=ue(),r=ue(),i=ue();let o=Q(t,"field",8),s=Q(t,"value",8);const a=dn();function u(v){a("change",{value:v})}function c(v){return typeof v!="string"||!v.trim()?"field":v.replace(/[^a-zA-Z0-9_-]/g,"_")}ve(()=>fe(o()),()=>{I(n,tr(o()))}),ve(()=>fe(s()),()=>{I(r,!!s())}),ve(()=>fe(o()),()=>{var v,m;I(i,`bool-${c((v=o())==null?void 0:v.id)}-${((m=o())==null?void 0:m.type)??"value"}`)}),Rt(),dt();var f=Y0(),h=ce(f),d=ce(h),g=Se(h,2);g.__change=v=>u(v.currentTarget.checked),Ee(()=>{he(h,"for",l(i)),We(d,l(n)),he(g,"id",l(i)),rc(g,l(r))}),oe(e,f),Ie()}Vt(["change"]);var W0=me('<div class="px-2 py-1 text-xs text-vsc-muted">No matching values</div>'),G0=me('<button class="block w-full cursor-pointer px-2 py-1 text-left text-xs text-vsc-input-fg hover:bg-vsc-list-hover data-[active=true]:bg-vsc-list-active-bg data-[active=true]:text-vsc-list-active-fg" type="button" tabindex="-1" role="option"> </button>'),U0=me('<div role="listbox" class="nodrag absolute left-0 right-0 top-full z-20 mt-1 max-h-40 overflow-auto rounded-md border border-vsc-input-border bg-vsc-editor-widget-bg py-1 shadow-lg"><!></div>'),q0=me('<div class="relative flex flex-col gap-1"><label class="text-xs text-vsc-muted"> </label> <input class="nodrag w-full rounded-md border border-vsc-input-border bg-vsc-input-bg px-2 py-1.5 text-xs text-vsc-input-fg" type="text" autocomplete="off" spellcheck="false" role="combobox" aria-autocomplete="list"/> <!></div>');function Z0(e,t){Ne(t,!1);const n=ue(),r=ue(),i=ue(),o=ue(),s=ue(),a=ue(),u=ue(),c=ue();let f=Q(t,"field",8),h=Q(t,"value",8);const d=dn();let g=ue(),v=ue(!1),m=ue(!1),_=ue(""),x=ue(-1);function C(B){d("change",{value:B})}function P(B,ne=!1){var Y;const se=typeof B=="string"&&l(i).includes(B)?B:l(a);se!==l(a)&&C(se),I(_,se),L(),ne&&(ci(l(g))||(Y=l(g))==null||Y.blur())}function b(){I(_,l(a)),L()}function k(){I(v,!0);const B=O(l(i),l(m)?"":l(_)),ne=B.indexOf(l(a));I(x,ne>=0?ne:B.length>0?0:-1)}function L(){I(v,!1),I(m,!1),I(x,-1)}function j(B){I(_,B.currentTarget.value),I(m,!1),I(v,!0),I(x,0)}function D(B){I(m,!0),k(),B.currentTarget.select()}function R(B){if(di(B)){B.preventDefault(),P(l(c),!0);return}if(B.key==="Tab"){P(l(c),!1);return}if(B.key==="Escape"){B.preventDefault(),b();return}if(B.key==="ArrowDown"){if(B.preventDefault(),!l(v)){I(m,!1),k();return}if(l(u).length===0)return;I(x,Math.min(l(x)+1,l(u).length-1));return}if(B.key==="ArrowUp"){if(B.preventDefault(),!l(v)){I(m,!1),k();return}if(l(u).length===0)return;I(x,Math.max(l(x)-1,0))}}function $(){b()}function M(B){P(B,!1)}function E(B){B.preventDefault()}function O(B,ne){const se=typeof ne=="string"?ne.trim().toLowerCase():"";if(!se)return B;const Y=[],W=[];for(const K of B){const Z=K.toLowerCase();Z.startsWith(se)?Y.push(K):Z.includes(se)&&W.push(K)}return[...Y,...W]}function p(B){return typeof B!="string"||!B.trim()?"field":B.replace(/[^a-zA-Z0-9_-]/g,"_")}ve(()=>fe(f()),()=>{var B;I(n,hn((B=f())==null?void 0:B.options))}),ve(()=>fe(f()),()=>{I(r,tr(f()))}),ve(()=>l(n),()=>{I(i,Array.isArray(l(n).Values)?l(n).Values.filter(B=>typeof B=="string"):[])}),ve(()=>fe(f()),()=>{var B,ne;I(o,`enum-${p((B=f())==null?void 0:B.id)}-${((ne=f())==null?void 0:ne.type)??"value"}`)}),ve(()=>l(o),()=>{I(s,`${l(o)}-list`)}),ve(()=>(fe(h()),l(i)),()=>{I(a,typeof h()=="string"&&l(i).includes(h())?h():l(i)[0]??"")}),ve(()=>(l(v),l(_),l(a)),()=>{!l(v)&&l(_)!==l(a)&&I(_,l(a))}),ve(()=>(l(i),l(m),l(_)),()=>{I(u,O(l(i),l(m)?"":l(_)))}),ve(()=>(l(u),l(x)),()=>{I(c,l(u)[l(x)]??l(u)[0])}),Rt(),dt();var A=q0(),N=ce(A),z=ce(N),V=Se(N,2);V.__input=j,V.__click=D,V.__keydown=R,On(V,B=>I(g,B),()=>l(g));var G=Se(V,2);{var H=B=>{var ne=U0(),se=ce(ne);{var Y=K=>{var Z=W0();oe(K,Z)},W=K=>{var Z=ot(),re=Ke(Z);ln(re,1,()=>l(u),br,(ge,U,ae)=>{var be=G0();be.__mousedown=E,be.__click=()=>M(l(U));var ye=ce(be);Ee(()=>{he(be,"data-active",ae===l(x)),he(be,"aria-selected",l(U)===l(a)),We(ye,l(U))}),$n("mouseenter",be,()=>I(x,ae)),oe(ge,be)}),oe(K,Z)};Ye(se,K=>{l(u),xe(()=>l(u).length===0)?K(Y):K(W,!1)})}Ee(()=>he(ne,"id",l(s))),oe(B,ne)};Ye(G,B=>{l(v)&&B(H)})}Ee(()=>{he(N,"for",l(o)),We(z,l(r)),he(V,"id",l(o)),Ut(V,l(_)),he(V,"aria-expanded",l(v)),he(V,"aria-controls",l(s))}),$n("blur",V,$),oe(e,A),Ie()}Vt(["input","click","keydown","mousedown"]);var j0=me('<div class="flex flex-col gap-1"><label class="text-xs text-vsc-muted"> </label> <input class="nodrag w-full rounded-md border border-vsc-input-border bg-vsc-input-bg px-2 py-1.5 text-xs text-vsc-input-fg" type="text" placeholder="path/to/file.json" spellcheck="false"/></div>');function J0(e,t){Ne(t,!1);const n=ue(),r=ue(),i=ue();let o=Q(t,"field",8),s=Q(t,"value",8);const a=dn();function u(m){a("change",{value:m})}function c(m){di(m)&&(m.preventDefault(),ci(m.currentTarget)||m.currentTarget.blur())}function f(m){return typeof m!="string"||!m.trim()?"field":m.replace(/[^a-zA-Z0-9_-]/g,"_")}ve(()=>fe(o()),()=>{I(n,tr(o()))}),ve(()=>fe(s()),()=>{I(r,typeof s()=="string"?s():String(s()??""))}),ve(()=>fe(o()),()=>{var m,_;I(i,`path-${f((m=o())==null?void 0:m.id)}-${((_=o())==null?void 0:_.type)??"value"}`)}),Rt(),dt();var h=j0(),d=ce(h),g=ce(d),v=Se(d,2);v.__input=m=>u(m.currentTarget.value),v.__keydown=c,Ee(()=>{he(d,"for",l(i)),We(g,l(n)),he(v,"id",l(i)),Ut(v,l(r))}),oe(e,h),Ie()}Vt(["input","keydown"]);var Q0=me('<div class="text-xs text-vsc-muted">No items</div>'),$0=me('<input class="nodrag h-4 w-4" type="checkbox"/>'),e_=me('<input class="nodrag w-full rounded-md border border-vsc-input-border bg-vsc-input-bg px-2 py-1.5 text-xs text-vsc-input-fg" type="number"/>'),t_=me('<textarea class="nodrag min-h-10 w-full resize-y rounded-md border border-vsc-input-border bg-vsc-input-bg px-2 py-1.5 text-xs text-vsc-input-fg" rows="3"></textarea>'),n_=me('<input class="nodrag w-full rounded-md border border-vsc-input-border bg-vsc-input-bg px-2 py-1.5 text-xs text-vsc-input-fg" type="text"/>'),r_=me('<div class="flex items-start gap-1.5"><div class="flex-1"><!></div> <button class="rounded-md border border-vsc-button-border bg-vsc-button-secondary-bg px-2 py-1 text-xs text-vsc-button-secondary-fg hover:bg-vsc-button-secondary-hover" type="button">Remove</button></div>'),i_=me('<div class="flex flex-col gap-1.5"></div>'),o_=me('<div class="flex flex-col gap-1.5 rounded-md border border-dashed border-vsc-editor-widget-border p-2"><div class="flex items-center justify-between gap-2"><div class="text-xs font-bold uppercase text-vsc-muted"> </div> <button class="rounded-md border border-vsc-button-border bg-vsc-button-secondary-bg px-2 py-1 text-xs text-vsc-button-secondary-fg hover:bg-vsc-button-secondary-hover" type="button">Add</button></div> <!> <div class="text-xs text-vsc-muted"> </div></div>');function s_(e,t){Ne(t,!1);const n=ue(),r=ue(),i=ue(),o=ue();let s=Q(t,"field",8),a=Q(t,"value",8);const u=dn();function c(p){u("change",{value:p})}function f(){return ar({type:l(i),options:l(n).ElementOptions??{}})}function h(){c([...l(o),f()])}function d(p){c(l(o).filter((A,N)=>N!==p))}function g(p,A){const N=l(o).slice();N[p]=A,c(N)}function v(p,A){g(p,A)}function m(p,A){const N=Number(A);g(p,Number.isFinite(N)?N:0)}function _(p,A){g(p,!!A)}function x(p,A){try{const N=JSON.parse(A);N!==null&&typeof N=="object"&&g(p,N)}catch{}}function C(p){try{return JSON.stringify(p??{},null,2)}catch{return"{}"}}function P(p){di(p)&&(p.preventDefault(),ci(p.currentTarget)||p.currentTarget.blur())}ve(()=>fe(s()),()=>{var p;I(n,hn((p=s())==null?void 0:p.options))}),ve(()=>fe(s()),()=>{I(r,tr(s()))}),ve(()=>fe(s()),()=>{I(i,A0(s()))}),ve(()=>fe(a()),()=>{I(o,Array.isArray(a())?a():[])}),Rt(),dt();var b=o_(),k=ce(b),L=ce(k),j=ce(L),D=Se(L,2);D.__click=h;var R=Se(k,2);{var $=p=>{var A=Q0();oe(p,A)},M=p=>{var A=i_();ln(A,5,()=>l(o),br,(N,z,V)=>{var G=r_(),H=ce(G),B=ce(H);{var ne=Z=>{var re=$0();re.__change=ge=>_(V,ge.currentTarget.checked),Ee(ge=>rc(re,ge),[()=>(l(z),xe(()=>!!l(z)))]),oe(Z,re)},se=Z=>{var re=e_();re.__input=ge=>m(V,ge.currentTarget.value),re.__keydown=P,Ee(ge=>Ut(re,ge),[()=>(l(z),xe(()=>Number.isFinite(Number(l(z)))?Number(l(z)):0))]),oe(Z,re)},Y=Z=>{var re=t_();re.__input=ge=>x(V,ge.currentTarget.value),Ee(ge=>Ut(re,ge),[()=>(l(z),xe(()=>C(l(z))))]),oe(Z,re)},W=Z=>{var re=n_();re.__input=ge=>v(V,ge.currentTarget.value),re.__keydown=P,Ee(ge=>Ut(re,ge),[()=>(l(z),xe(()=>typeof l(z)=="string"?l(z):String(l(z)??"")))]),oe(Z,re)};Ye(B,Z=>{l(i)==="Checkbox"||l(i)==="Bool"?Z(ne):l(i)==="Int"||l(i)==="Integer"||l(i)==="IntSlider"||l(i)==="Float"?Z(se,1):l(i)==="Object"?Z(Y,2):Z(W,!1)})}var K=Se(H,2);K.__click=()=>d(V),oe(N,G)}),oe(p,A)};Ye(R,p=>{l(o),xe(()=>l(o).length===0)?p($):p(M,!1)})}var E=Se(R,2),O=ce(E);Ee(()=>{We(j,l(r)),We(O,`Element type: ${l(i)??""}`)}),oe(e,b),Ie()}Vt(["click","change","input","keydown"]);var a_=me('<div class="flex flex-col gap-1.5 rounded-md border border-dashed border-vsc-editor-widget-border p-2"><div class="text-xs font-bold uppercase text-vsc-muted"> </div> <div class="flex flex-col gap-1.5"><!></div></div>');function l_(e,t){Ne(t,!1);const n=ue();let r=Q(t,"field",8);ve(()=>fe(r()),()=>{I(n,tr(r()))}),Rt(),dt();var i=a_(),o=ce(i),s=ce(o),a=Se(o,2),u=ce(a);_a(u,t,"default",{}),Ee(()=>We(s,l(n))),oe(e,i),Ie()}function vd(e,t){Ne(t,!1);const n=ue(),r=ue(),i=ue(),o=ue();let s=Q(t,"field",8),a=Q(t,"value",8);const u=dn();function c(k){u("change",{value:Pi(s(),k)})}function f(k,L){const j=Mi(l(r))?l(r):{};c({...j,[k]:L})}ve(()=>fe(s()),()=>{var k;I(n,Ra((k=s())==null?void 0:k.type))}),ve(()=>(fe(s()),fe(a())),()=>{I(r,Pi(s(),a()))}),ve(()=>fe(s()),()=>{var k;I(i,hn((k=s())==null?void 0:k.options))}),ve(()=>l(i),()=>{I(o,Array.isArray(l(i).Fields)?l(i).Fields:[])}),Rt(),dt();var h=ot(),d=Ke(h);{var g=k=>{l_(k,{get field(){return s()},children:(L,j)=>{var D=ot(),R=Ke(D);ln(R,1,()=>l(o),br,($,M)=>{var E=ot(),O=Ke(E);{var p=N=>{var z=ot(),V=Ke(z);{let G=Wi(()=>(l(r),l(M),xe(()=>{var H;return(H=l(r))==null?void 0:H[l(M).id]})));vd(V,{get field(){return l(M)},get value(){return l(G)},$$events:{change:H=>f(l(M).id,H.detail.value)}})}oe(N,z)},A=S(()=>(l(M),xe(()=>{var N;return typeof((N=l(M))==null?void 0:N.id)=="string"&&l(M).id.trim()})));Ye(O,N=>{l(A)&&N(p)})}oe($,E)}),oe(L,D)},$$slots:{default:!0}})},v=k=>{s_(k,{get field(){return s()},get value(){return l(r)},$$events:{change:L=>c(L.detail.value)}})},m=k=>{Z0(k,{get field(){return s()},get value(){return l(r)},$$events:{change:L=>c(L.detail.value)}})},_=k=>{J0(k,{get field(){return s()},get value(){return l(r)},$$events:{change:L=>c(L.detail.value)}})},x=k=>{K0(k,{get field(){return s()},get value(){return l(r)},$$events:{change:L=>c(L.detail.value)}})},C=k=>{X0(k,{get field(){return s()},get value(){return l(r)},$$events:{change:L=>c(L.detail.value)}})},P=k=>{B0(k,{get field(){return s()},get value(){return l(r)},$$events:{change:L=>c(L.detail.value)}})},b=k=>{R0(k,{get field(){return s()},get value(){return l(r)},$$events:{change:L=>c(L.detail.value)}})};Ye(d,k=>{l(n),fe(le),xe(()=>l(n)===le.OBJECT)?k(g):(l(n),fe(le),xe(()=>l(n)===le.LIST)?k(v,1):(l(n),fe(le),xe(()=>l(n)===le.ENUM)?k(m,2):(l(n),fe(le),xe(()=>l(n)===le.FILE_PATH)?k(_,3):(l(n),fe(le),xe(()=>l(n)===le.INT_SLIDER)?k(x,4):(l(n),fe(le),xe(()=>l(n)===le.CHECKBOX||l(n)===le.BOOL)?k(C,5):(l(n),fe(le),xe(()=>l(n)===le.INT||l(n)===le.INTEGER||l(n)===le.FLOAT)?k(P,6):k(b,!1)))))))})}oe(e,h),Ie()}function Vn(e){return{...e,buildInitialValues:()=>ra(e.fields)}}const Ir=[Vn({templateId:"simple",label:"Simple Node",subtitle:"Basic custom node",category:"Basics",defaultTypeName:"Simple",fields:[{id:"Label",type:le.SMALL_STRING,label:"Label",options:{Label:"Label",Default:"Simple Node",Width:220}},{id:"Subtitle",type:le.STRING,label:"Subtitle",options:{Label:"Subtitle",Default:"Basic custom node",Width:220,Height:60}}]}),Vn({templateId:"text",label:"Text Node",subtitle:"Headline + body",category:"Basics",defaultTypeName:"Text",fields:[{id:"Headline",type:le.SMALL_STRING,label:"Headline",options:{Label:"Headline",Default:"Untitled"}},{id:"Body",type:le.STRING,label:"Body",options:{Label:"Body",Default:"Write notes here...",Height:80,Width:260}}]}),Vn({templateId:"numbers",label:"Number Node",subtitle:"Int + Integer + Float",category:"Controls",defaultTypeName:"Number",fields:[{id:"Quantity",type:le.INT,label:"Quantity",options:{Label:"Quantity",Default:10,SmallChange:1,LargeChange:5}},{id:"Maximum",type:le.INTEGER,label:"Maximum",options:{Label:"Maximum",Default:100,Width:100}},{id:"Scale",type:le.FLOAT,label:"Scale",options:{Label:"Scale",Default:1.25,Width:100}}]}),Vn({templateId:"slider",label:"Slider Node",subtitle:"IntSlider field",category:"Controls",defaultTypeName:"Slider",fields:[{id:"Strength",type:le.INT_SLIDER,label:"Strength",options:{Label:"Strength",Default:45,Min:0,Max:100,TickFrequency:5,Width:220}}]}),Vn({templateId:"toggles",label:"Toggle Node",subtitle:"Checkbox + Bool + Enum",category:"Controls",defaultTypeName:"Toggle",fields:[{id:"Enabled",type:le.CHECKBOX,label:"Enabled",options:{Label:"Enabled",Default:!0}},{id:"Verbose",type:le.BOOL,label:"Verbose",options:{Label:"Verbose",DefaultValue:!1}},{id:"Mode",type:le.ENUM,label:"Mode",options:{Label:"Mode",Default:"Balanced",Values:["Fast","Balanced","Accurate"],Width:180}}]}),Vn({templateId:"assets",label:"Asset Node",subtitle:"FilePath + List",category:"Data",defaultTypeName:"Asset",fields:[{id:"AssetPath",type:le.FILE_PATH,label:"Asset Path",options:{Label:"Asset Path",Default:"resources/my_asset.json",Width:260,UseUUID:!1}},{id:"Tags",type:le.LIST,label:"Tags",options:{Label:"Tags",Type:le.STRING,Width:220}}]}),Vn({templateId:"object",label:"Object Node",subtitle:"Nested Object fields",category:"Data",defaultTypeName:"ObjectNode",fields:[{id:"Offset",type:le.OBJECT,label:"Offset",options:{Label:"Offset",Fields:[{id:"X",type:le.OBJECT,label:"X",options:{Label:"X",Fields:[{id:"Value",type:le.INT,label:"Value",options:{Label:"Value",Default:0}},{id:"Relative",type:le.CHECKBOX,label:"Relative",options:{Label:"Relative",Default:!1}}]}},{id:"Y",type:le.OBJECT,label:"Y",options:{Label:"Y",Fields:[{id:"Value",type:le.INT,label:"Value",options:{Label:"Value",Default:0}},{id:"Relative",type:le.CHECKBOX,label:"Relative",options:{Label:"Relative",Default:!1}}]}}]}}]}),Vn({templateId:"all-fields",label:"All Fields Node",subtitle:"Coverage for all supported field types",category:"Coverage",defaultTypeName:"AllFields",fields:[{id:"SmallString",type:le.SMALL_STRING,label:"SmallString",options:{Label:"SmallString",Default:"Example"}},{id:"String",type:le.STRING,label:"String",options:{Label:"String",Default:"Multiline text",Height:72}},{id:"Float",type:le.FLOAT,label:"Float",options:{Label:"Float",Default:1.5}},{id:"Int",type:le.INT,label:"Int",options:{Label:"Int",Default:3}},{id:"Integer",type:le.INTEGER,label:"Integer",options:{Label:"Integer",Default:64}},{id:"IntSlider",type:le.INT_SLIDER,label:"IntSlider",options:{Label:"IntSlider",Default:35,Min:0,Max:100,TickFrequency:5}},{id:"Checkbox",type:le.CHECKBOX,label:"Checkbox",options:{Label:"Checkbox",Default:!0}},{id:"Bool",type:le.BOOL,label:"Bool",options:{Label:"Bool",DefaultValue:!1}},{id:"Enum",type:le.ENUM,label:"Enum",options:{Label:"Enum",Values:["Low","Medium","High"],Default:"Medium"}},{id:"FilePath",type:le.FILE_PATH,label:"FilePath",options:{Label:"FilePath",Default:"data/sample.json"}},{id:"List",type:le.LIST,label:"List",options:{Label:"List",ArrayElementType:le.STRING}},{id:"Object",type:le.OBJECT,label:"Object",options:{Label:"Object",Fields:[{id:"Min",type:le.FLOAT,label:"Min",options:{Label:"Min",Default:0}},{id:"Max",type:le.FLOAT,label:"Max",options:{Label:"Max",Default:1}}]}}]})],u_=new Map(Ir.map(e=>[e.templateId,e]));function ia(e){return u_.get(e)}function oa(){return Ir[0]}function wi(e){if(typeof e!="string"||!e.trim())return;const t=e.trim().toLowerCase();return Ir.find(n=>n.defaultTypeName.toLowerCase()===t||n.label.toLowerCase()===t||n.templateId.toLowerCase()===t)}var c_=me('<input class="rounded-t-md p-1 bg-vsc-input-bg font-bold text-vsc-input-fg w-full" type="text"/>'),d_=me('<div class="flex flex-1 rounded-t-md bg-vsc-input-bg items-center p-1 gap-1"><div class="font-bold border border-transparent rounded-md select-none text-vsc-input-fg" role="button" tabindex="0"> </div> <button class="inline-flex items-center justify-center border rounded-md nodrag size-5 border-vsc-button-border hover:backdrop-brightness-90 p-0.5" type="button" title="Edit node title" aria-label="Edit node title"><!></button></div>'),f_=me('<div class="text-xs text-vsc-fg px-2.5"> </div>'),h_=me('<div class="pt-0 border rounded-lg shadow-lg min-w-72 max-w-80 border-vsc-editor-widget-border bg-vsc-editor-widget-bg text-vsc-editor-fg" data-node-editor-root=""><!> <div class="flex flex-col gap-1 mb-2"><div class="flex items-center gap-1"><!></div> <!></div> <div class="p-2.5 py-1"><div class="flex flex-col gap-2"><!> <div class="flex flex-col gap-1"><label class="text-xs text-vsc-muted">Comment</label> <textarea class="nodrag min-h-10 w-full resize-y rounded-md border border-vsc-input-border bg-vsc-input-bg px-2 py-1.5 text-xs text-vsc-input-fg" rows="2"></textarea></div></div></div> <!></div>');function g_(e,t){Ne(t,!1);const n=ue(),r=ue(),i=ue(),o=ue(),s=ue(),a=ue();let u=Q(t,"id",8),c=Q(t,"data",24,()=>({}));const{updateNodeData:f}=Fa();let h=ue(!1),d=ue(""),g=ue();function v(W){f(u(),{label:W,$templateId:l(n).templateId})}async function m(){var W,K;I(h,!0),I(d,l(s)),await Uo(),(W=l(g))==null||W.focus(),(K=l(g))==null||K.select()}function _(W=!1){var K;l(h)&&(v(l(d)),I(h,!1),W&&(ci(l(g))||(K=l(g))==null||K.blur()))}function x(){l(h)&&(I(h,!1),I(d,l(s)))}function C(W){var K;if(di(W)){W.preventDefault(),_(!0);return}W.key==="Escape"&&(W.preventDefault(),x(),(K=l(g))==null||K.blur())}function P(){_(!1)}function b(W){(W.key==="Enter"||W.key===" ")&&(W.preventDefault(),m())}function k(W){const K=typeof W=="string"?W:"";f(u(),{$comment:K,$templateId:l(n).templateId})}function L(W,K){var ge;const Z=Mi((ge=c())==null?void 0:ge.$fieldValues)?c().$fieldValues:{},re=Pi(W,K);f(u(),{$templateId:l(n).templateId,$fieldValues:{...Z,[W.id]:re}})}function j(W){return Pi(W,l(o)[W.id])}function D(W){return typeof W!="string"||!W.trim()?"node":W.replace(/[^a-zA-Z0-9_-]/g,"_")}ve(()=>(fe(c()),oa),()=>{var W,K,Z;I(n,ia((W=c())==null?void 0:W.$templateId)??wi((K=c())==null?void 0:K.Type)??wi((Z=c())==null?void 0:Z.label)??oa())}),ve(()=>(l(n),ra),()=>{var W,K,Z;I(r,((K=(W=l(n))==null?void 0:W.buildInitialValues)==null?void 0:K.call(W))??ra(((Z=l(n))==null?void 0:Z.fields)??[]))}),ve(()=>fe(c()),()=>{var W;I(i,Mi((W=c())==null?void 0:W.$fieldValues)?c().$fieldValues:{})}),ve(()=>(l(r),l(i)),()=>{I(o,{...l(r),...l(i)})}),ve(()=>(fe(c()),l(n)),()=>{var W;I(s,typeof((W=c())==null?void 0:W.label)=="string"?c().label:l(n).label)}),ve(()=>fe(u()),()=>{I(a,`comment-${D(u())}`)}),ve(()=>(l(h),l(s)),()=>{l(h)||I(d,l(s))}),Rt(),dt();var R=h_(),$=ce(R);ri($,{type:"target",get position(){return fe(we),xe(()=>we.Left)}});var M=Se($,2),E=ce(M),O=ce(E);{var p=W=>{var K=c_();K.__input=Z=>I(d,Z.currentTarget.value),K.__keydown=C,On(K,Z=>I(g,Z),()=>l(g)),Ee(()=>Ut(K,l(d))),$n("blur",K,P),oe(W,K)},A=W=>{var K=d_(),Z=ce(K);Z.__dblclick=m,Z.__keydown=b;var re=ce(Z),ge=Se(Z,2);ge.__click=m;var U=ce(ge);T0(U,{size:12,strokeWidth:2.5,"aria-hidden":"true",class:""}),Ee(()=>We(re,l(s))),oe(W,K)};Ye(O,W=>{l(h)?W(p):W(A,!1)})}var N=Se(E,2);{var z=W=>{var K=f_(),Z=ce(K);Ee(()=>We(Z,(l(n),xe(()=>l(n).subtitle)))),oe(W,K)};Ye(N,W=>{l(n),xe(()=>{var K;return(K=l(n))==null?void 0:K.subtitle})&&W(z)})}var V=Se(M,2),G=ce(V),H=ce(G);ln(H,1,()=>(l(n),xe(()=>l(n).fields)),br,(W,K)=>{{let Z=Wi(()=>(l(K),xe(()=>j(l(K)))));vd(W,{get field(){return l(K)},get value(){return l(Z)},$$events:{change:re=>L(l(K),re.detail.value)}})}});var B=Se(H,2),ne=ce(B),se=Se(ne,2);se.__input=W=>k(W.currentTarget.value);var Y=Se(V,2);ri(Y,{type:"source",get position(){return fe(we),xe(()=>we.Right)}}),Ee(()=>{he(ne,"for",l(a)),he(se,"id",l(a)),Ut(se,(fe(c()),xe(()=>{var W;return typeof((W=c())==null?void 0:W.$comment)=="string"?c().$comment:""})))}),oe(e,R),Ie()}Vt(["input","keydown","dblclick","click"]);var v_=me("<div><!> <!></div>");function y_(e,t){Ne(t,!1);let n=Q(t,"nodes",28,V),r=Q(t,"edges",28,()=>[]),i=Q(t,"loadVersion",8,0);const o=dn(),s={[wn]:g_},{screenToFlowPosition:a,fitView:u}=Fa();let c=ue(-1),f=ue(),h=ue(!1),d=ue(0),g=ue({x:0,y:0}),v={x:0,y:0},m,_,x=!1,C=ue(!1),P=!1,b=ue(!1);function k(U){o("flowchange",{reason:U,nodes:n(),edges:r()})}function L(){const U=Array.isArray(n())?n().map(ae=>j(ae)):[];D(n(),U)||n(U)}function j(U){return{...U,type:typeof(U==null?void 0:U.type)=="string"&&U.type.trim()?U.type:wn,data:{...(U==null?void 0:U.data)??{}}}}function D(U,ae){if(!Array.isArray(U)||!Array.isArray(ae)||U.length!==ae.length)return!1;for(let be=0;be<U.length;be+=1){const ye=U[be],T=ae[be];if((ye==null?void 0:ye.id)!==(T==null?void 0:T.id)||(ye==null?void 0:ye.type)!==(T==null?void 0:T.type)||!W(ye==null?void 0:ye.data)||!W(T==null?void 0:T.data))return!1}return!0}function R(U){r(Uc(U,r())),k("edge-created")}function $(){k("node-moved")}function M(){I(h,!1),m=void 0}function E(U,ae=void 0){var F,J;const{clientX:be,clientY:ye}=G(U),T=(J=(F=l(f))==null?void 0:F.getBoundingClientRect)==null?void 0:J.call(F);T&&(I(g,{x:be-T.left,y:ye-T.top-60}),v=a({x:be,y:ye}),m=ae,I(h,!0),I(d,l(d)+1))}function O(U){const ae=U==null?void 0:U.event;ae&&(ae.preventDefault(),E(ae))}function p(){if(x){x=!1;return}M(),k("node-created")}function A(U,ae){_=typeof(ae==null?void 0:ae.nodeId)=="string"&&ae.nodeId.trim()?ae.nodeId.trim():void 0}function N(U,ae){var F,J,q;const be=H(U),ye=B(U,ae);if(ye!=null&&ye.isValid){_=void 0;return}const T=((F=ye==null?void 0:ye.fromNode)==null?void 0:F.id)??_??((q=(J=n())==null?void 0:J[0])==null?void 0:q.id)??"Node-00000000-0000-0000-0000-000000000000";x=!0,E(be,T),_=void 0}function z(U){var T;const ae=(T=U==null?void 0:U.detail)==null?void 0:T.template;if(!ae)return;const be=`${ne(ae.defaultTypeName)}-${se()}`,ye={id:be,type:wn,data:{label:ae.label,Type:ae.defaultTypeName,$templateId:ae.templateId,$fieldValues:ae.buildInitialValues()},position:{...v},origin:[.5,0]};n([...n(),ye]),typeof m=="string"&&m.trim()&&r([...r(),{id:`${m}--${be}`,source:m,target:be}]),M()}function V(){const U=Ir[0];return[{id:"Node-00000000-0000-0000-0000-000000000000",type:wn,data:{label:U.label,Type:U.defaultTypeName,$templateId:U.templateId,$fieldValues:U.buildInitialValues()},position:{x:0,y:50}}]}function G(U){if(!U||typeof U!="object")return{clientX:0,clientY:0};if("changedTouches"in U&&U.changedTouches.length>0){const ae=U.changedTouches[0];return{clientX:ae.clientX,clientY:ae.clientY}}return{clientX:Number(U.clientX)||0,clientY:Number(U.clientY)||0}}function H(U){return U&&typeof U=="object"&&U.event?U.event:U}function B(U,ae){if(ae&&typeof ae=="object")return ae;if(U&&typeof U=="object"&&U.connectionState)return U.connectionState}function ne(U){if(typeof U=="string"){const ae=U.trim().replace(/[^A-Za-z0-9_]/g,"");if(ae)return ae}return"Node"}function se(){return typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`${Date.now().toString(16)}${Math.random().toString(16).slice(2)}`}async function Y(){l(C)||P||(P=!0,await Uo(),Array.isArray(n())&&n().length>0&&u({padding:.2,duration:0}),I(C,!0),I(b,!0),P=!1)}function W(U){return U!==null&&typeof U=="object"&&!Array.isArray(U)}ve(()=>(fe(i()),l(c)),()=>{i()!==l(c)&&(I(c,i()),L())}),ve(()=>(l(C),fe(i())),()=>{!l(C)&&i()>0&&Y()}),Rt(),dt();var K=v_();let Z;var re=ce(K);l0(re,{get nodeTypes(){return s},onconnect:R,onconnectstart:A,onconnectend:N,onnodedragstop:$,onpaneclick:p,onpanecontextmenu:O,get nodes(){return n()},set nodes(U){n(U)},get edges(){return r()},set edges(U){r(U)},children:(U,ae)=>{y0(U,{bgColor:"var(--vscode-editor-background)"})},$$slots:{default:!0},$$legacy:!0});var ge=Se(re,2);w0(ge,{get open(){return l(h)},get openVersion(){return l(d)},get position(){return l(g)},get templates(){return Ir},$$events:{close:M,select:z}}),On(K,U=>I(f,U),()=>l(f)),Ee(()=>Z=Dn(K,1,"relative w-full h-full overflow-hidden",null,Z,{invisible:!l(b)})),oe(e,K),Ie()}var p_=me('<div class="mb-2 text-sm text-vsc-error"> </div>'),m_=me('<main class="flex flex-col h-screen min-h-0 p-3"><!> <!></main>');function __(e,t){Ne(t,!1);let n=Q(t,"vscode",8);const r="$NodeEditorMetadata",i=["$WorkspaceID","$Nodes","$FloatingNodes","$Links","$Groups","$Comments"],o=["$WorkspaceID","$Groups","$Comments"],s="$templateId",a="$fieldValues",u=b("");let c=ue(u.nodes),f=ue(u.edges),h=u.runtimeFields,d=u.metadataContext,g=u.serializedText,v=-1,m=ue(0),_=ue("");function x(T){const F=T.data;if(!(!F||typeof F.type!="string")){if(F.type==="update"){v=typeof F.version=="number"?F.version:v;const J=typeof F.text=="string"?F.text:"";try{const q=b(J);I(c,q.nodes),I(f,q.edges),h=q.runtimeFields,d=q.metadataContext,g=q.serializedText,I(m,l(m)+1),I(_,"")}catch(q){I(_,q instanceof Error?q.message:"Could not parse flow JSON.")}return}F.type==="error"&&I(_,typeof F.message=="string"?F.message:"Unknown editor error.")}}function C(T){const F=T.detail??{};P(F.nodes,F.edges)}function P(T,F){const J=E({nodes:Array.isArray(T)?T:[],edges:Array.isArray(F)?F:[],runtimeFields:h,metadataContext:d});J.text!==g&&(I(c,J.nodes),I(f,J.edges),d=J.metadataContext,n().postMessage({type:"apply",text:J.text,sourceVersion:v}))}ac(()=>(window.addEventListener("message",x),n().postMessage({type:"ready"}),()=>{window.removeEventListener("message",x)}));function b(T){if(!T.trim())return k({},{});let F;try{F=JSON.parse(T)}catch{throw new Error("The underlying file is not valid JSON.")}if(!Y(F))throw new Error("The flow file must be a JSON object.");const J=Y(F[r]);if(!J&&(Array.isArray(F.nodes)||Array.isArray(F.edges)))return L(F);if(!J&&K(F))return j(F);const q=J?F[r]:{},ee=se(F,[r]);return k(ee,q)}function k(T,F){const J=Z(T),q=new Set(Object.keys(J)),ee=M(F,J,q);let te=$(ee);te.nodes.length===0&&(te=$(R(ee)));const ie=E({nodes:te.nodes,edges:te.edges,runtimeFields:T,metadataContext:ee});return{nodes:ie.nodes,edges:ie.edges,runtimeFields:T,metadataContext:ie.metadataContext,serializedText:ie.text}}function L(T){var Ge,_e,Be,nt,ft,xt,wt;const F=se(T,["nodes","edges",r]),J=p(),q=[],ee=[],te=new Set,ie=Array.isArray(T.nodes)?T.nodes:[];for(let Me=0;Me<ie.length;Me+=1){const pe=ie[Me],Pe=B(pe==null?void 0:pe.id,pe==null?void 0:pe.type);if(te.has(Pe))continue;te.add(Pe);const Ze=ne(pe==null?void 0:pe.position,Me),Ue=typeof((Ge=pe==null?void 0:pe.data)==null?void 0:Ge.label)=="string"&&pe.data.label.trim()?pe.data.label.trim():H(Pe),lt=typeof((_e=pe==null?void 0:pe.data)==null?void 0:_e.$comment)=="string"&&pe.data.$comment.trim()?pe.data.$comment.trim():void 0,ut=Y((Be=pe==null?void 0:pe.data)==null?void 0:Be.$nodePayload)?{...pe.data.$nodePayload}:{},Xe=z((nt=pe==null?void 0:pe.data)==null?void 0:nt[s],ut),je=V((ft=pe==null?void 0:pe.data)==null?void 0:ft[a],ut);J.nodeMetadataById[Pe]={$Position:{$x:Ze.x,$y:Ze.y}},Ue!==H(Pe)&&(J.nodeMetadataById[Pe].$Title=Ue);const ht=ut;ht.$NodeId=Pe,lt!==void 0&&(ht.$Comment=lt),Xe!==void 0&&(ht[yn]=Xe),je!==void 0&&(ht[pn]=je),J.nodePayloadById[Pe]=ht,q.push({id:Pe,type:wn,data:{label:Ue,...Xe!==void 0?{[s]:Xe}:{},...je!==void 0?{[a]:je}:{},...lt!==void 0?{$comment:lt}:{}},position:Ze})}const de=Array.isArray(T.edges)?T.edges:[];for(let Me=0;Me<de.length;Me+=1){const pe=de[Me],Pe=typeof(pe==null?void 0:pe.source)=="string"?pe.source:void 0,Ze=typeof(pe==null?void 0:pe.target)=="string"?pe.target:void 0;if(!Pe||!Ze||!te.has(Pe)||!te.has(Ze))continue;const Ue=typeof(pe==null?void 0:pe.id)=="string"&&pe.id.trim()?pe.id.trim():`${Pe}--${Ze}`;J.linkById[Ue]={$SourceNodeId:Pe,$TargetNodeId:Ze},ee.push({id:Ue,source:Pe,target:Ze})}if(q.length===0){const Me=A();q.push(Me),J.nodeMetadataById[Me.id]={$Position:{$x:Me.position.x,$y:Me.position.y}},J.nodePayloadById[Me.id]={$NodeId:Me.id,[yn]:(xt=Me.data)==null?void 0:xt[s],[pn]:(wt=Me.data)==null?void 0:wt[a]}}const Le=E({nodes:q,edges:ee,runtimeFields:F,metadataContext:J});return{nodes:Le.nodes,edges:Le.edges,runtimeFields:F,metadataContext:Le.metadataContext,serializedText:Le.text}}function j(T){const F=p();F.workspaceId=typeof T.$WorkspaceID=="string"?T.$WorkspaceID:void 0,F.groups=Array.isArray(T.$Groups)?T.$Groups:[],F.comments=Array.isArray(T.$Comments)?T.$Comments:[];const J=se(T,o),q=D(J);F.nodeMetadataById=q.nodeMetadataById,F.nodePayloadById=q.nodePayloadById,F.runtimeTreeNodeIds=q.runtimeTreeNodeIds;const ee=Y(q.runtimeRoot)?q.runtimeRoot:{},te={nodes:q.flowNodes,edges:[]},ie=E({nodes:te.nodes,edges:te.edges,runtimeFields:ee,metadataContext:F});return{nodes:ie.nodes,edges:ie.edges,runtimeFields:ee,metadataContext:ie.metadataContext,serializedText:ie.text}}function D(T){var Le,Ge;const F={},J={},q=new Set,ee=[];let te=0;const ie=(_e,Be,nt=!1)=>{if(Array.isArray(_e))return _e.map((Xe,je)=>ie(Xe,`${Be}${je}`,!1));if(!Y(_e))return _e;if(!(nt||typeof _e.$NodeId=="string"&&_e.$NodeId.trim()||W(_e.$Position)))return Object.fromEntries(Object.entries(_e).map(([Xe,je])=>[Xe,ie(je,Xe,!1)]));const xt=te;te+=1;const wt=typeof _e.Type=="string"&&_e.Type.trim()?_e.Type.trim():Be,Me=B(_e.$NodeId,wt),pe=ne(_e.$Position,xt),Pe=typeof _e.$Title=="string"&&_e.$Title.trim()?_e.$Title.trim():void 0,Ze=typeof _e.$Comment=="string"&&_e.$Comment.trim()?_e.$Comment.trim():void 0,Ue={};for(const[Xe,je]of Object.entries(_e))Xe==="$NodeId"||Xe==="$Position"||Xe==="$Title"||(Ue[Xe]=ie(je,Xe,!1));Ue.$NodeId=Me,F[Me]={$Position:{$x:pe.x,$y:pe.y},...Pe?{$Title:Pe}:{}},J[Me]=Ue,q.add(Me);const lt=z(void 0,Ue),ut=V(void 0,Ue);return ee.push({id:Me,type:wn,data:{label:N(Me,F[Me],void 0,Ue),...lt!==void 0?{[s]:lt}:{},...ut!==void 0?{[a]:ut}:{},...Ze!==void 0?{$comment:Ze}:{}},position:pe}),Ue},de=ie(T,"Root",!0);if(ee.length===0){const _e=A();q.add(_e.id),F[_e.id]={$Position:{$x:_e.position.x,$y:_e.position.y}},J[_e.id]={$NodeId:_e.id,[yn]:(Le=_e.data)==null?void 0:Le[s],[pn]:(Ge=_e.data)==null?void 0:Ge[a]},ee.push(_e)}return{runtimeRoot:de,nodeMetadataById:F,nodePayloadById:J,runtimeTreeNodeIds:q,flowNodes:ee}}function R(T){var q,ee;const F={...T,nodeMetadataById:{...T.nodeMetadataById},nodePayloadById:{...T.nodePayloadById}},J=A();return F.nodeMetadataById[J.id]={$Position:{$x:J.position.x,$y:J.position.y}},F.nodePayloadById[J.id]={$NodeId:J.id,[yn]:(q=J.data)==null?void 0:q[s],[pn]:(ee=J.data)==null?void 0:ee[a]},F}function $(T){const F=new Set([...Object.keys(T.nodeMetadataById),...Object.keys(T.nodePayloadById)]),J=[];for(const[te,ie]of Object.entries(T.linkById)){const de=O(te,ie);de&&(J.push(de),F.add(de.source),F.add(de.target))}const q=[],ee=Array.from(F).sort();for(let te=0;te<ee.length;te+=1){const ie=ee[te],de=Y(T.nodeMetadataById[ie])?T.nodeMetadataById[ie]:{},Le=Y(T.nodePayloadById[ie])?T.nodePayloadById[ie]:{},Ge=ne(de==null?void 0:de.$Position,te),_e=N(ie,de,void 0,Le),Be=typeof Le.$Comment=="string"&&Le.$Comment.trim()?Le.$Comment.trim():void 0,nt=z(void 0,Le),ft=V(void 0,Le);q.push({id:ie,type:wn,data:{label:_e,...nt!==void 0?{[s]:nt}:{},...ft!==void 0?{[a]:ft}:{},...Be!==void 0?{$comment:Be}:{}},position:Ge})}return{nodes:q,edges:J}}function M(T,F={},J=new Set){const q=p();q.workspaceId=T.$WorkspaceID,q.groups=Array.isArray(T.$Groups)?T.$Groups:[],q.comments=Array.isArray(T.$Comments)?T.$Comments:[],q.floatingNodes=Array.isArray(T.$FloatingNodes)?T.$FloatingNodes:[],q.metadataExtraFields=se(T,i),q.nodePayloadById={...F},q.runtimeTreeNodeIds=J;const ee=Y(T.$Nodes)?T.$Nodes:{};for(const[ie,de]of Object.entries(ee))typeof ie!="string"||!ie||!Y(de)||(q.nodeMetadataById[ie]={...de});for(const ie of q.floatingNodes)!Y(ie)||typeof ie.$NodeId!="string"||!ie.$NodeId||(q.nodePayloadById[ie.$NodeId]={...Y(q.nodePayloadById[ie.$NodeId])?q.nodePayloadById[ie.$NodeId]:{},...ie});const te=Y(T.$Links)?T.$Links:{};for(const[ie,de]of Object.entries(te))typeof ie!="string"||!ie||!Y(de)||(q.linkById[ie]={...de});return q}function E(T){var lt,ut,Xe,je,ht,Ln,zn;const F=T.metadataContext.nodeMetadataById,J=T.metadataContext.nodePayloadById,q=T.metadataContext.linkById,ee=T.metadataContext.runtimeTreeNodeIds instanceof Set?T.metadataContext.runtimeTreeNodeIds:new Set,te=[],ie={},de={},Le=new Set,Ge=Array.isArray(T.nodes)?T.nodes:[];for(let De=0;De<Ge.length;De+=1){const w=Ge[De],Oe=B(w==null?void 0:w.id,w==null?void 0:w.type);if(Le.has(Oe))continue;Le.add(Oe);const Je=Y(F[Oe])?{...F[Oe]}:{},ke=Y(J[Oe])?{...J[Oe]}:{},gn=ne(w==null?void 0:w.position,De),Cr=N(Oe,Je,(lt=w==null?void 0:w.data)==null?void 0:lt.label),Mr=typeof((ut=w==null?void 0:w.data)==null?void 0:ut.$comment)=="string"&&w.data.$comment.trim()?w.data.$comment.trim():void 0,Fn=z((Xe=w==null?void 0:w.data)==null?void 0:Xe[s],ke),Pr=V((je=w==null?void 0:w.data)==null?void 0:je[a],ke);Je.$Position={$x:gn.x,$y:gn.y},Cr!==H(Oe)||typeof Je.$Title=="string"?Je.$Title=Cr:delete Je.$Title,ke.$NodeId=Oe,Mr!==void 0?ke.$Comment=Mr:delete ke.$Comment,Fn!==void 0?ke[yn]=Fn:delete ke[yn],Pr!==void 0?ke[pn]=Pr:delete ke[pn];const nr=(Fn!==void 0?ia(Fn):void 0)??wi(ke.Type)??wi(Cr);nr&&(typeof ke.Type!="string"||!ke.Type.trim())&&(ke.Type=nr.defaultTypeName),ie[Oe]=Je,de[Oe]=ke,te.push({id:Oe,type:wn,data:{label:Cr,...Fn!==void 0?{[s]:Fn}:{},...Pr!==void 0?{[a]:Pr}:{},...Mr!==void 0?{$comment:Mr}:{}},position:gn})}if(te.length===0){const De=A(),w={...T.metadataContext,nodeMetadataById:{...ie,[De.id]:{$Position:{$x:De.position.x,$y:De.position.y}}},nodePayloadById:{...de,[De.id]:{$NodeId:De.id,[yn]:(ht=De.data)==null?void 0:ht[s],[pn]:(Ln=De.data)==null?void 0:Ln[a]}}};return E({...T,nodes:[De],metadataContext:w})}const _e=new Set(te.map(De=>De.id)),Be=[],nt=new Set,ft=Array.isArray(T.metadataContext.floatingNodes)?T.metadataContext.floatingNodes:[];for(const De of ft){if(!Y(De))continue;const w=typeof De.$NodeId=="string"&&De.$NodeId.trim()?De.$NodeId.trim():void 0;!w||!_e.has(w)||(Be.push(De),re(De,nt))}for(const De of te){const w=De.id;if(ee.has(w)||nt.has(w))continue;const Oe=typeof((zn=De==null?void 0:De.data)==null?void 0:zn.label)=="string"&&De.data.label.trim()?De.data.label.trim():H(w),ke={...Y(de[w])?de[w]:{},$NodeId:w};typeof ke.Type!="string"&&Oe&&(ke.Type=Oe),Be.push(ke),re(ke,nt),de[w]=ke}const xt=[],wt={},Me=new Set,pe=Array.isArray(T.edges)?T.edges:[];for(let De=0;De<pe.length;De+=1){const w=pe[De],Oe=typeof(w==null?void 0:w.source)=="string"?w.source:void 0,Je=typeof(w==null?void 0:w.target)=="string"?w.target:void 0;if(!Oe||!Je||!_e.has(Oe)||!_e.has(Je))continue;const ke=typeof(w==null?void 0:w.id)=="string"&&w.id.trim()?w.id.trim():`${Oe}--${Je}`;if(Me.has(ke))continue;Me.add(ke);const gn=Y(q[ke])?{...q[ke]}:{};gn.$SourceNodeId=Oe,gn.$TargetNodeId=Je,wt[ke]=gn,xt.push({id:ke,source:Oe,target:Je})}const Pe={workspaceId:T.metadataContext.workspaceId,groups:Array.isArray(T.metadataContext.groups)?T.metadataContext.groups:[],comments:Array.isArray(T.metadataContext.comments)?T.metadataContext.comments:[],floatingNodes:Be,runtimeTreeNodeIds:ee,metadataExtraFields:Y(T.metadataContext.metadataExtraFields)?T.metadataContext.metadataExtraFields:{},nodeMetadataById:ie,nodePayloadById:de,linkById:wt},Ze={...Pe.metadataExtraFields,...Pe.workspaceId!==void 0?{$WorkspaceID:Pe.workspaceId}:{},$Nodes:Pe.nodeMetadataById,$FloatingNodes:Pe.floatingNodes,$Links:Pe.linkById,$Groups:Pe.groups,$Comments:Pe.comments},Ue={...T.runtimeFields,[r]:Ze};return{nodes:te,edges:xt,metadataContext:Pe,text:`${JSON.stringify(Ue,null,2)}
`}}function O(T,F){const J=[F.$SourceNodeId,F.source,F.Source,F.from,F.From],q=[F.$TargetNodeId,F.target,F.Target,F.to,F.To];let ee=J.find(ie=>typeof ie=="string"&&ie.trim()),te=q.find(ie=>typeof ie=="string"&&ie.trim());if((!ee||!te)&&T.includes("--")){const[ie,de]=T.split("--");ee=ee??ie,te=te??de}if(!(!ee||!te))return{id:T,source:ee,target:te}}function p(){return{workspaceId:void 0,groups:[],comments:[],floatingNodes:[],runtimeTreeNodeIds:new Set,metadataExtraFields:{},nodeMetadataById:{},nodePayloadById:{},linkById:{}}}function A(){const T="Node-00000000-0000-0000-0000-000000000000",F=oa();return{id:T,type:wn,data:{label:H(T),[s]:F.templateId,[a]:F.buildInitialValues()},position:{x:0,y:50}}}function N(T,F,J,q){const ee=typeof J=="string"&&J.trim()?J.trim():void 0;if(ee!==void 0)return ee;const te=typeof(F==null?void 0:F.$Title)=="string"&&F.$Title.trim()?F.$Title.trim():void 0;if(te!==void 0)return te;const ie=typeof(q==null?void 0:q.Type)=="string"&&q.Type.trim()?q.Type.trim():void 0;return ie!==void 0?ie:H(T)}function z(T,F){if(typeof T=="string"&&T.trim())return T.trim();const J=F==null?void 0:F[yn];if(typeof J=="string"&&J.trim())return J.trim();const q=wi(F==null?void 0:F.Type);if(q)return q.templateId}function V(T,F){const J=G(T);if(J!==void 0)return J;const q=G(F==null?void 0:F[pn]);if(q!==void 0)return q;const ee=z(void 0,F);if(ee===void 0)return;const te=ia(ee);return te==null?void 0:te.buildInitialValues()}function G(T){if(Y(T))return{...T}}function H(T){if(typeof T!="string"||!T.trim())return"Node";const[F,J]=T.split("-",2);return F&&J?F:T}function B(T,F,J){return typeof T=="string"&&T.trim()?T.trim():typeof T=="number"&&Number.isFinite(T)?String(T):`${(typeof F=="string"&&F.trim()?F.trim().replace(/[^A-Za-z0-9_]/g,""):"Node")||"Node"}-${ge()}`}function ne(T,F){const J=F*180,q=100,ee=Number(T==null?void 0:T.x),te=Number(T==null?void 0:T.y),ie=Number(T==null?void 0:T.$x),de=Number(T==null?void 0:T.$y);return{x:Number.isFinite(ee)?ee:Number.isFinite(ie)?ie:J,y:Number.isFinite(te)?te:Number.isFinite(de)?de:q}}function se(T,F){if(!Y(T))return{};const J=new Set(F);return Object.fromEntries(Object.entries(T).filter(([q])=>!J.has(q)))}function Y(T){return T!==null&&typeof T=="object"&&!Array.isArray(T)}function W(T){return Y(T)?Number.isFinite(Number(T.$x))||Number.isFinite(Number(T.$y)):!1}function K(T){var q,ee;if(!Y(T))return!1;if(Number.isFinite(Number((q=T==null?void 0:T.$Position)==null?void 0:q.$x))||Number.isFinite(Number((ee=T==null?void 0:T.$Position)==null?void 0:ee.$y))||typeof T.$Title=="string"&&T.$Title.trim())return!0;let F=!1;const J=te=>{if(!F){if(Array.isArray(te)){for(const ie of te)if(J(ie),F)return;return}if(Y(te)){if(W(te.$Position)){F=!0;return}for(const[ie,de]of Object.entries(te))if(!(ie===r||ie==="$Groups")&&(J(de),F))return}}};return J(T),F}function Z(T){const F={},J=q=>{if(Array.isArray(q)){for(const te of q)J(te);return}if(!Y(q))return;const ee=typeof q.$NodeId=="string"&&q.$NodeId.trim()?q.$NodeId.trim():void 0;ee&&!Y(F[ee])&&(F[ee]=q);for(const[te,ie]of Object.entries(q))te!==r&&J(ie)};return J(T),F}function re(T,F){const J=q=>{if(Array.isArray(q)){for(const te of q)J(te);return}if(!Y(q))return;const ee=typeof q.$NodeId=="string"&&q.$NodeId.trim()?q.$NodeId.trim():void 0;ee&&F.add(ee);for(const[te,ie]of Object.entries(q))te!==r&&J(ie)};J(T)}function ge(){return typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():Math.random().toString(16).slice(2)}dt();var U=m_(),ae=ce(U);{var be=T=>{var F=p_(),J=ce(F);Ee(()=>We(J,l(_))),oe(T,F)};Ye(ae,T=>{l(_)&&T(be)})}var ye=Se(ae,2);u0(ye,{children:(T,F)=>{y_(T,{get loadVersion(){return l(m)},get nodes(){return l(c)},set nodes(J){I(c,J)},get edges(){return l(f)},set edges(J){I(f,J)},$$events:{flowchange:C},$$legacy:!0})},$$slots:{default:!0}}),oe(e,U),Ie()}const yd="hytale-node-editor.dev.document",co="Node-11111111-1111-1111-1111-111111111111",fo="Node-22222222-2222-2222-2222-222222222222";function Ul(e,t){return Ir.find(n=>n.templateId===e)??Ir[t]}function ql(e,t,n){return{$NodeId:e,Type:t.defaultTypeName,[yn]:t.templateId,[pn]:t.buildInitialValues(),...typeof n=="string"&&n.trim()?{$Comment:n.trim()}:{}}}function b_(){const e=Ul("all-fields",0),t=Ul("toggles",1);return{$NodeEditorMetadata:{$WorkspaceID:"dev-mock-workspace",$Nodes:{[co]:{$Position:{$x:-150,$y:60},$Title:"All Fields Preview"},[fo]:{$Position:{$x:260,$y:120},$Title:"Enum + Toggle Preview"}},$FloatingNodes:[ql(co,e,"Use this node to preview most field styles."),ql(fo,t,"Use Enter/Tab to test field navigation.")],$Links:{[`${co}--${fo}`]:{$SourceNodeId:co,$TargetNodeId:fo}},$Groups:[],$Comments:[]}}}const Zl=JSON.stringify(b_(),null,2);function x_(){try{const e=window.localStorage.getItem(yd);return typeof e=="string"&&e.trim()?e:Zl}catch{return Zl}}function w_(e){try{window.localStorage.setItem(yd,e)}catch{}}function E_(e){window.dispatchEvent(new MessageEvent("message",{data:e}))}function N_(){const e=document.documentElement,t={"--vscode-font-family":"-apple-system, BlinkMacSystemFont, sans-serif","--vscode-font-size":"13px","--vscode-font-weight":"normal","--vscode-editor-background":"#ffffff","--vscode-editor-foreground":"#313131","--vscode-foreground":"#313131","--vscode-editorWidget-background":"#f4f4f4","--vscode-editorWidget-border":"#adadad","--vscode-input-background":"#eaeaea","--vscode-input-foreground":"#313131","--vscode-input-border":"#adadad","--vscode-descriptionForeground":"#717171","--vscode-focusBorder":"#e1239a","--vscode-list-hoverBackground":"#ffffff","--vscode-list-activeSelectionBackground":"rgba(225, 35, 154, 0.33)","--vscode-list-activeSelectionForeground":"#313131","--vscode-button-secondaryBackground":"#ffffff","--vscode-button-secondaryForeground":"#313131","--vscode-button-secondaryHoverBackground":"#ffffff","--vscode-button-border":"#00000000","--vscode-errorForeground":"#a1260d"};for(const[n,r]of Object.entries(t))e.style.setProperty(n,r)}function I_(){N_();let e=x_(),t=1,n={};return{postMessage(r){if(!(!r||typeof r.type!="string")){if(r.type==="ready"){E_({type:"update",text:e,version:t});return}if(r.type==="apply"&&typeof r.text=="string"){e=r.text,t+=1,w_(e);return}}},getState(){return n},setState(r){return n=r??{},n}}}const S_=typeof globalThis.acquireVsCodeApi=="function"?globalThis.acquireVsCodeApi():I_();Vf(__,{target:document.getElementById("app"),props:{vscode:S_}});
//# sourceMappingURL=main.js.map
