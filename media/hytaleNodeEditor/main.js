var rf=Object.defineProperty;var Ra=e=>{throw TypeError(e)};var of=(e,t,n)=>t in e?rf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var He=(e,t,n)=>of(e,typeof t!="symbol"?t+"":t,n),rs=(e,t,n)=>t.has(e)||Ra("Cannot "+n);var y=(e,t,n)=>(rs(e,t,"read from private field"),n?n.call(e):t.get(e)),V=(e,t,n)=>t.has(e)?Ra("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Ee=(e,t,n,r)=>(rs(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),rt=(e,t,n)=>(rs(e,t,"access private method"),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const bs=!1;var zi=Array.isArray,sf=Array.prototype.indexOf,Yr=Array.prototype.includes,Ro=Array.from,af=Object.defineProperty,Xn=Object.getOwnPropertyDescriptor,Yl=Object.getOwnPropertyDescriptors,Xl=Object.prototype,lf=Array.prototype,Vo=Object.getPrototypeOf,Va=Object.isExtensible;function si(e){return typeof e=="function"}const br=()=>{};function uf(e){return e()}function xs(e){for(var t=0;t<e.length;t++)e[t]()}function Wl(){var e,t,n=new Promise((r,i)=>{e=r,t=i});return{promise:n,resolve:e,reject:t}}function ut(e,t,n=!1){return e===void 0?n?t():t:e}function Fi(e,t){if(Array.isArray(e))return e;if(t===void 0||!(Symbol.iterator in e))return Array.from(e);const n=[];for(const r of e)if(n.push(r),n.length===t)break;return n}const ot=2,mi=4,Ri=8,$s=1<<24,Tn=16,Gt=32,jn=64,Gl=128,kt=512,Qe=1024,st=2048,Pt=4096,It=8192,wn=16384,Vi=32768,Zn=65536,Ba=1<<17,ql=1<<18,xr=1<<19,Zl=1<<20,_n=1<<25,hr=65536,ws=1<<21,ea=1<<22,Wn=1<<23,en=Symbol("$state"),Ul=Symbol("legacy props"),cf=Symbol(""),$n=new class extends Error{constructor(){super(...arguments);He(this,"name","StaleReactionError");He(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};var Vl;const ta=((Vl=globalThis.document)==null?void 0:Vl.contentType.includes("xml"))??!1;function Bo(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function ff(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function df(e,t,n){throw new Error("https://svelte.dev/e/each_key_duplicate")}function hf(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function gf(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function vf(e){throw new Error("https://svelte.dev/e/effect_orphan")}function yf(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function mf(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function pf(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function _f(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function bf(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function xf(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const wf=1,Ef=2,jl=4,Nf=8,If=16,Sf=1,Tf=2,Cf=4,Af=8,kf=16,Jl=1,Mf=2,$e=Symbol(),Ql="http://www.w3.org/1999/xhtml",Pf="@attach";function Of(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function Df(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function $l(e){return e===this.v}function eu(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function tu(e){return!eu(e,this.v)}let ni=!1,Lf=!1;function zf(){ni=!0}const Ff=[];function nu(e,t=!1,n=!1){return lo(e,new Map,"",Ff,null,n)}function lo(e,t,n,r,i=null,o=!1){if(typeof e=="object"&&e!==null){var s=t.get(e);if(s!==void 0)return s;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(zi(e)){var a=Array(e.length);t.set(e,a),i!==null&&t.set(i,a);for(var u=0;u<e.length;u+=1){var c=e[u];u in e&&(a[u]=lo(c,t,n,r,null,o))}return a}if(Vo(e)===Xl){a={},t.set(e,a),i!==null&&t.set(i,a);for(var d in e)a[d]=lo(e[d],t,n,r,null,o);return a}if(e instanceof Date)return structuredClone(e);if(typeof e.toJSON=="function"&&!o)return lo(e.toJSON(),t,n,r,e)}if(e instanceof EventTarget)return e;try{return structuredClone(e)}catch{return e}}let Fe=null;function Xr(e){Fe=e}function na(e){return ia().get(e)}function ra(e,t){return ia().set(e,t),t}function Rf(e){return ia().has(e)}function xe(e,t=!1,n){Fe={p:Fe,i:!1,c:null,e:null,s:e,x:null,l:ni&&!t?{s:null,u:null,$:[]}:null}}function we(e){var t=Fe,n=t.e;if(n!==null){t.e=null;for(var r of n)Eu(r)}return t.i=!0,Fe=t.p,{}}function Bi(){return!ni||Fe!==null&&Fe.l===null}function ia(e){return Fe===null&&Bo(),Fe.c??(Fe.c=new Map(Vf(Fe)||void 0))}function Vf(e){let t=e.p;for(;t!==null;){const n=t.c;if(n!==null)return n;t=t.p}return null}let er=[];function ru(){var e=er;er=[],xs(e)}function tn(e){if(er.length===0&&!hi){var t=er;queueMicrotask(()=>{t===er&&ru()})}er.push(e)}function Bf(){for(;er.length>0;)ru()}function iu(e){var t=Re;if(t===null)return Ae.f|=Wn,e;if(!(t.f&Vi)&&!(t.f&mi))throw e;Wr(e,t)}function Wr(e,t){for(;t!==null;){if(t.f&Gl){if(!(t.f&Vi))throw e;try{t.b.error(e);return}catch(n){e=n}}t=t.parent}throw e}const Hf=-7169;function We(e,t){e.f=e.f&Hf|t}function oa(e){e.f&kt||e.deps===null?We(e,Qe):We(e,Pt)}function ou(e){if(e!==null)for(const t of e)!(t.f&ot)||!(t.f&hr)||(t.f^=hr,ou(t.deps))}function su(e,t,n){e.f&st?t.add(e):e.f&Pt&&n.add(e),ou(e.deps),We(e,Qe)}const Qi=new Set;let Ce=null,Es=null,it=null,vt=[],Ho=null,Ns=!1,hi=!1;var Lr,zr,ir,Fr,Ai,ki,or,gn,Rr,ln,Is,Ss,au;const Oa=class Oa{constructor(){V(this,ln);He(this,"committed",!1);He(this,"current",new Map);He(this,"previous",new Map);V(this,Lr,new Set);V(this,zr,new Set);V(this,ir,0);V(this,Fr,0);V(this,Ai,null);V(this,ki,new Set);V(this,or,new Set);V(this,gn,new Map);He(this,"is_fork",!1);V(this,Rr,!1)}is_deferred(){return this.is_fork||y(this,Fr)>0}skip_effect(t){y(this,gn).has(t)||y(this,gn).set(t,{d:[],m:[]})}unskip_effect(t){var n=y(this,gn).get(t);if(n){y(this,gn).delete(t);for(var r of n.d)We(r,st),Yt(r);for(r of n.m)We(r,Pt),Yt(r)}}process(t){var i;vt=[],this.apply();var n=[],r=[];for(const o of t)rt(this,ln,Is).call(this,o,n,r);if(this.is_deferred()){rt(this,ln,Ss).call(this,r),rt(this,ln,Ss).call(this,n);for(const[o,s]of y(this,gn))fu(o,s)}else{for(const o of y(this,Lr))o();y(this,Lr).clear(),y(this,ir)===0&&rt(this,ln,au).call(this),Es=this,Ce=null,Ha(r),Ha(n),Es=null,(i=y(this,Ai))==null||i.resolve()}it=null}capture(t,n){n!==$e&&!this.previous.has(t)&&this.previous.set(t,n),t.f&Wn||(this.current.set(t,t.v),it==null||it.set(t,t.v))}activate(){Ce=this,this.apply()}deactivate(){Ce===this&&(Ce=null,it=null)}flush(){if(this.activate(),vt.length>0){if(lu(),Ce!==null&&Ce!==this)return}else y(this,ir)===0&&this.process([]);this.deactivate()}discard(){for(const t of y(this,zr))t(this);y(this,zr).clear()}increment(t){Ee(this,ir,y(this,ir)+1),t&&Ee(this,Fr,y(this,Fr)+1)}decrement(t){Ee(this,ir,y(this,ir)-1),t&&Ee(this,Fr,y(this,Fr)-1),!y(this,Rr)&&(Ee(this,Rr,!0),tn(()=>{Ee(this,Rr,!1),this.is_deferred()?vt.length>0&&this.flush():this.revive()}))}revive(){for(const t of y(this,ki))y(this,or).delete(t),We(t,st),Yt(t);for(const t of y(this,or))We(t,Pt),Yt(t);this.flush()}oncommit(t){y(this,Lr).add(t)}ondiscard(t){y(this,zr).add(t)}settled(){return(y(this,Ai)??Ee(this,Ai,Wl())).promise}static ensure(){if(Ce===null){const t=Ce=new Oa;Qi.add(Ce),hi||tn(()=>{Ce===t&&t.flush()})}return Ce}apply(){}};Lr=new WeakMap,zr=new WeakMap,ir=new WeakMap,Fr=new WeakMap,Ai=new WeakMap,ki=new WeakMap,or=new WeakMap,gn=new WeakMap,Rr=new WeakMap,ln=new WeakSet,Is=function(t,n,r){t.f^=Qe;for(var i=t.first,o=null;i!==null;){var s=i.f,a=(s&(Gt|jn))!==0,u=a&&(s&Qe)!==0,c=u||(s&It)!==0||y(this,gn).has(i);if(!c&&i.fn!==null){a?i.f^=Qe:o!==null&&s&(mi|Ri|$s)?o.b.defer_effect(i):s&mi?n.push(i):ii(i)&&(s&Tn&&y(this,or).add(i),vr(i));var d=i.first;if(d!==null){i=d;continue}}var h=i.parent;for(i=i.next;i===null&&h!==null;)h===o&&(o=null),i=h.next,h=h.parent}},Ss=function(t){for(var n=0;n<t.length;n+=1)su(t[n],y(this,ki),y(this,or))},au=function(){var i;if(Qi.size>1){this.previous.clear();var t=it,n=!0;for(const o of Qi){if(o===this){n=!1;continue}const s=[];for(const[u,c]of this.current){if(o.current.has(u))if(n&&c!==o.current.get(u))o.current.set(u,c);else continue;s.push(u)}if(s.length===0)continue;const a=[...o.current.keys()].filter(u=>!this.current.has(u));if(a.length>0){var r=vt;vt=[];const u=new Set,c=new Map;for(const d of s)uu(d,a,u,c);if(vt.length>0){Ce=o,o.apply();for(const d of vt)rt(i=o,ln,Is).call(i,d,[],[]);o.deactivate()}vt=r}}Ce=null,it=t}this.committed=!0,Qi.delete(this)};let En=Oa;function Kf(e){var t=hi;hi=!0;try{for(var n;;){if(Bf(),vt.length===0&&(Ce==null||Ce.flush(),vt.length===0))return Ho=null,n;lu()}}finally{hi=t}}function lu(){Ns=!0;var e=null;try{for(var t=0;vt.length>0;){var n=En.ensure();if(t++>1e3){var r,i;Yf()}n.process(vt),Gn.clear()}}finally{vt=[],Ns=!1,Ho=null}}function Yf(){try{yf()}catch(e){Wr(e,Ho)}}let Vt=null;function Ha(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if(!(r.f&(wn|It))&&ii(r)&&(Vt=new Set,vr(r),r.deps===null&&r.first===null&&r.nodes===null&&r.teardown===null&&r.ac===null&&Cu(r),(Vt==null?void 0:Vt.size)>0)){Gn.clear();for(const i of Vt){if(i.f&(wn|It))continue;const o=[i];let s=i.parent;for(;s!==null;)Vt.has(s)&&(Vt.delete(s),o.push(s)),s=s.parent;for(let a=o.length-1;a>=0;a--){const u=o[a];u.f&(wn|It)||vr(u)}}Vt.clear()}}Vt=null}}function uu(e,t,n,r){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const i of e.reactions){const o=i.f;o&ot?uu(i,t,n,r):o&(ea|Tn)&&!(o&st)&&cu(i,t,r)&&(We(i,st),Yt(i))}}function cu(e,t,n){const r=n.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const i of e.deps){if(Yr.call(t,i))return!0;if(i.f&ot&&cu(i,t,n))return n.set(i,!0),!0}return n.set(e,!1),!1}function Yt(e){for(var t=Ho=e;t.parent!==null;){t=t.parent;var n=t.f;if(Ns&&t===Re&&n&Tn&&!(n&ql))return;if(n&(jn|Gt)){if(!(n&Qe))return;t.f^=Qe}}vt.push(t)}function fu(e,t){if(!(e.f&Gt&&e.f&Qe)){e.f&st?t.d.push(e):e.f&Pt&&t.m.push(e),We(e,Qe);for(var n=e.first;n!==null;)fu(n,t),n=n.next}}function du(e){let t=0,n=gr(0),r;return()=>{aa()&&(l(n),ri(()=>(t===0&&(r=_e(()=>e(()=>gi(n)))),t+=1,()=>{tn(()=>{t-=1,t===0&&(r==null||r(),r=void 0,gi(n))})})))}}var Xf=Zn|xr|Gl;function Wf(e,t,n){new Gf(e,t,n)}var Ct,Qs,Ut,sr,jt,At,ht,Jt,vn,Bn,ar,Hn,Vr,lr,Br,Hr,yn,Do,tt,qf,Zf,Ts,uo,co,Cs;class Gf{constructor(t,n,r){V(this,tt);He(this,"parent");He(this,"is_pending",!1);V(this,Ct);V(this,Qs,null);V(this,Ut);V(this,sr);V(this,jt);V(this,At,null);V(this,ht,null);V(this,Jt,null);V(this,vn,null);V(this,Bn,null);V(this,ar,0);V(this,Hn,0);V(this,Vr,!1);V(this,lr,!1);V(this,Br,new Set);V(this,Hr,new Set);V(this,yn,null);V(this,Do,du(()=>(Ee(this,yn,gr(y(this,ar))),()=>{Ee(this,yn,null)})));Ee(this,Ct,t),Ee(this,Ut,n),Ee(this,sr,r),this.parent=Re.b,this.is_pending=!!y(this,Ut).pending,Ee(this,jt,Wi(()=>{Re.b=this;{var i=rt(this,tt,Ts).call(this);try{Ee(this,At,mt(()=>r(i)))}catch(o){this.error(o)}y(this,Hn)>0?rt(this,tt,co).call(this):this.is_pending=!1}return()=>{var o;(o=y(this,Bn))==null||o.remove()}},Xf))}defer_effect(t){su(t,y(this,Br),y(this,Hr))}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!y(this,Ut).pending}update_pending_count(t){rt(this,tt,Cs).call(this,t),Ee(this,ar,y(this,ar)+t),!(!y(this,yn)||y(this,Vr))&&(Ee(this,Vr,!0),tn(()=>{Ee(this,Vr,!1),y(this,yn)&&Gr(y(this,yn),y(this,ar))}))}get_effect_pending(){return y(this,Do).call(this),l(y(this,yn))}error(t){var n=y(this,Ut).onerror;let r=y(this,Ut).failed;if(y(this,lr)||!n&&!r)throw t;y(this,At)&&(et(y(this,At)),Ee(this,At,null)),y(this,ht)&&(et(y(this,ht)),Ee(this,ht,null)),y(this,Jt)&&(et(y(this,Jt)),Ee(this,Jt,null));var i=!1,o=!1;const s=()=>{if(i){Df();return}i=!0,o&&xf(),En.ensure(),Ee(this,ar,0),y(this,Jt)!==null&&cr(y(this,Jt),()=>{Ee(this,Jt,null)}),this.is_pending=this.has_pending_snippet(),Ee(this,At,rt(this,tt,uo).call(this,()=>(Ee(this,lr,!1),mt(()=>y(this,sr).call(this,y(this,Ct)))))),y(this,Hn)>0?rt(this,tt,co).call(this):this.is_pending=!1};tn(()=>{try{o=!0,n==null||n(t,s),o=!1}catch(a){Wr(a,y(this,jt)&&y(this,jt).parent)}r&&Ee(this,Jt,rt(this,tt,uo).call(this,()=>{En.ensure(),Ee(this,lr,!0);try{return mt(()=>{r(y(this,Ct),()=>t,()=>s)})}catch(a){return Wr(a,y(this,jt).parent),null}finally{Ee(this,lr,!1)}}))})}}Ct=new WeakMap,Qs=new WeakMap,Ut=new WeakMap,sr=new WeakMap,jt=new WeakMap,At=new WeakMap,ht=new WeakMap,Jt=new WeakMap,vn=new WeakMap,Bn=new WeakMap,ar=new WeakMap,Hn=new WeakMap,Vr=new WeakMap,lr=new WeakMap,Br=new WeakMap,Hr=new WeakMap,yn=new WeakMap,Do=new WeakMap,tt=new WeakSet,qf=function(){try{Ee(this,At,mt(()=>y(this,sr).call(this,y(this,Ct))))}catch(t){this.error(t)}},Zf=function(){const t=y(this,Ut).pending;t&&(Ee(this,ht,mt(()=>t(y(this,Ct)))),tn(()=>{var n=rt(this,tt,Ts).call(this);Ee(this,At,rt(this,tt,uo).call(this,()=>(En.ensure(),mt(()=>y(this,sr).call(this,n))))),y(this,Hn)>0?rt(this,tt,co).call(this):(cr(y(this,ht),()=>{Ee(this,ht,null)}),this.is_pending=!1)}))},Ts=function(){var t=y(this,Ct);return this.is_pending&&(Ee(this,Bn,Nn()),y(this,Ct).before(y(this,Bn)),t=y(this,Bn)),t},uo=function(t){var n=Re,r=Ae,i=Fe;sn(y(this,jt)),Ot(y(this,jt)),Xr(y(this,jt).ctx);try{return t()}catch(o){return iu(o),null}finally{sn(n),Ot(r),Xr(i)}},co=function(){const t=y(this,Ut).pending;y(this,At)!==null&&(Ee(this,vn,document.createDocumentFragment()),y(this,vn).append(y(this,Bn)),Mu(y(this,At),y(this,vn))),y(this,ht)===null&&Ee(this,ht,mt(()=>t(y(this,Ct))))},Cs=function(t){var n;if(!this.has_pending_snippet()){this.parent&&rt(n=this.parent,tt,Cs).call(n,t);return}if(Ee(this,Hn,y(this,Hn)+t),y(this,Hn)===0){this.is_pending=!1;for(const r of y(this,Br))We(r,st),Yt(r);for(const r of y(this,Hr))We(r,Pt),Yt(r);y(this,Br).clear(),y(this,Hr).clear(),y(this,ht)&&cr(y(this,ht),()=>{Ee(this,ht,null)}),y(this,vn)&&(y(this,Ct).before(y(this,vn)),Ee(this,vn,null))}};function hu(e,t,n,r){const i=Bi()?Hi:Ki;var o=e.filter(f=>!f.settled);if(n.length===0&&o.length===0){r(t.map(i));return}var s=Ce,a=Re,u=Uf(),c=o.length===1?o[0].promise:o.length>1?Promise.all(o.map(f=>f.promise)):null;function d(f){u();try{r(f)}catch(g){a.f&wn||Wr(g,a)}s==null||s.deactivate(),As()}if(n.length===0){c.then(()=>d(t.map(i)));return}function h(){u(),Promise.all(n.map(f=>jf(f))).then(f=>d([...t.map(i),...f])).catch(f=>Wr(f,a))}c?c.then(h):h()}function Uf(){var e=Re,t=Ae,n=Fe,r=Ce;return function(o=!0){sn(e),Ot(t),Xr(n),o&&(r==null||r.activate())}}function As(){sn(null),Ot(null),Xr(null)}function Hi(e){var t=ot|st,n=Ae!==null&&Ae.f&ot?Ae:null;return Re!==null&&(Re.f|=xr),{ctx:Fe,deps:null,effects:null,equals:$l,f:t,fn:e,reactions:null,rv:0,v:$e,wv:0,parent:n??Re,ac:null}}function jf(e,t,n){let r=Re;r===null&&ff();var i=r.b,o=void 0,s=gr($e),a=!Ae,u=new Map;return cd(()=>{var g;var c=Wl();o=c.promise;try{Promise.resolve(e()).then(c.resolve,c.reject).then(()=>{d===Ce&&d.committed&&d.deactivate(),As()})}catch(v){c.reject(v),As()}var d=Ce;if(a){var h=i.is_rendered();i.update_pending_count(1),d.increment(h),(g=u.get(d))==null||g.reject($n),u.delete(d),u.set(d,c)}const f=(v,_=void 0)=>{if(d.activate(),_)_!==$n&&(s.f|=Wn,Gr(s,_));else{s.f&Wn&&(s.f^=Wn),Gr(s,v);for(const[p,b]of u){if(u.delete(p),p===d)break;b.reject($n)}}a&&(i.update_pending_count(-1),d.decrement(h))};c.promise.then(f,v=>f(null,v||"unknown"))}),la(()=>{for(const c of u.values())c.reject($n)}),new Promise(c=>{function d(h){function f(){h===o?c(s):d(o)}h.then(f,f)}d(o)})}function T(e){const t=Hi(e);return Pu(t),t}function Ki(e){const t=Hi(e);return t.equals=tu,t}function Jf(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)et(t[n])}}function Qf(e){for(var t=e.parent;t!==null;){if(!(t.f&ot))return t.f&wn?null:t;t=t.parent}return null}function sa(e){var t,n=Re;sn(Qf(e));try{e.f&=~hr,Jf(e),t=zu(e)}finally{sn(n)}return t}function gu(e){var t=sa(e);if(!e.equals(t)&&(e.wv=Du(),(!(Ce!=null&&Ce.is_fork)||e.deps===null)&&(e.v=t,e.deps===null))){We(e,Qe);return}Un||(it!==null?(aa()||Ce!=null&&Ce.is_fork)&&it.set(e,t):oa(e))}function $f(e){var t,n;if(e.effects!==null)for(const r of e.effects)(r.teardown||r.ac)&&((t=r.teardown)==null||t.call(r),(n=r.ac)==null||n.abort($n),r.teardown=br,r.ac=null,pi(r,0),ua(r))}function vu(e){if(e.effects!==null)for(const t of e.effects)t.teardown&&vr(t)}let ks=new Set;const Gn=new Map;let yu=!1;function gr(e,t){var n={f:0,v:e,reactions:null,equals:$l,rv:0,wv:0};return n}function Ve(e,t){const n=gr(e);return Pu(n),n}function le(e,t=!1,n=!0){var i;const r=gr(e);return t||(r.equals=tu),ni&&n&&Fe!==null&&Fe.l!==null&&((i=Fe.l).s??(i.s=[])).push(r),r}function D(e,t,n=!1){Ae!==null&&(!Xt||Ae.f&Ba)&&Bi()&&Ae.f&(ot|Tn|ea|Ba)&&(Mt===null||!Yr.call(Mt,e))&&bf();let r=n?Yn(t):t;return Gr(e,r)}function Gr(e,t){if(!e.equals(t)){var n=e.v;Un?Gn.set(e,t):Gn.set(e,n),e.v=t;var r=En.ensure();if(r.capture(e,n),e.f&ot){const i=e;e.f&st&&sa(i),oa(i)}e.wv=Du(),mu(e,st),Bi()&&Re!==null&&Re.f&Qe&&!(Re.f&(Gt|jn))&&(Tt===null?hd([e]):Tt.push(e)),!r.is_fork&&ks.size>0&&!yu&&ed()}return t}function ed(){yu=!1;for(const e of ks)e.f&Qe&&We(e,Pt),ii(e)&&vr(e);ks.clear()}function gi(e){D(e,e.v+1)}function mu(e,t){var n=e.reactions;if(n!==null)for(var r=Bi(),i=n.length,o=0;o<i;o++){var s=n[o],a=s.f;if(!(!r&&s===Re)){var u=(a&st)===0;if(u&&We(s,t),a&ot){var c=s;it==null||it.delete(c),a&hr||(a&kt&&(s.f|=hr),mu(c,Pt))}else u&&(a&Tn&&Vt!==null&&Vt.add(s),Yt(s))}}}function Yn(e){if(typeof e!="object"||e===null||en in e)return e;const t=Vo(e);if(t!==Xl&&t!==lf)return e;var n=new Map,r=zi(e),i=Ve(0),o=fr,s=a=>{if(fr===o)return a();var u=Ae,c=fr;Ot(null),Wa(o);var d=a();return Ot(u),Wa(c),d};return r&&n.set("length",Ve(e.length)),new Proxy(e,{defineProperty(a,u,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&pf();var d=n.get(u);return d===void 0?s(()=>{var h=Ve(c.value);return n.set(u,h),h}):D(d,c.value,!0),!0},deleteProperty(a,u){var c=n.get(u);if(c===void 0){if(u in a){const d=s(()=>Ve($e));n.set(u,d),gi(i)}}else D(c,$e),gi(i);return!0},get(a,u,c){var g;if(u===en)return e;var d=n.get(u),h=u in a;if(d===void 0&&(!h||(g=Xn(a,u))!=null&&g.writable)&&(d=s(()=>{var v=Yn(h?a[u]:$e),_=Ve(v);return _}),n.set(u,d)),d!==void 0){var f=l(d);return f===$e?void 0:f}return Reflect.get(a,u,c)},getOwnPropertyDescriptor(a,u){var c=Reflect.getOwnPropertyDescriptor(a,u);if(c&&"value"in c){var d=n.get(u);d&&(c.value=l(d))}else if(c===void 0){var h=n.get(u),f=h==null?void 0:h.v;if(h!==void 0&&f!==$e)return{enumerable:!0,configurable:!0,value:f,writable:!0}}return c},has(a,u){var f;if(u===en)return!0;var c=n.get(u),d=c!==void 0&&c.v!==$e||Reflect.has(a,u);if(c!==void 0||Re!==null&&(!d||(f=Xn(a,u))!=null&&f.writable)){c===void 0&&(c=s(()=>{var g=d?Yn(a[u]):$e,v=Ve(g);return v}),n.set(u,c));var h=l(c);if(h===$e)return!1}return d},set(a,u,c,d){var P;var h=n.get(u),f=u in a;if(r&&u==="length")for(var g=c;g<h.v;g+=1){var v=n.get(g+"");v!==void 0?D(v,$e):g in a&&(v=s(()=>Ve($e)),n.set(g+"",v))}if(h===void 0)(!f||(P=Xn(a,u))!=null&&P.writable)&&(h=s(()=>Ve(void 0)),D(h,Yn(c)),n.set(u,h));else{f=h.v!==$e;var _=s(()=>Yn(c));D(h,_)}var p=Reflect.getOwnPropertyDescriptor(a,u);if(p!=null&&p.set&&p.set.call(d,c),!f){if(r&&typeof u=="string"){var b=n.get("length"),C=Number(u);Number.isInteger(C)&&C>=b.v&&D(b,C+1)}gi(i)}return!0},ownKeys(a){l(i);var u=Reflect.ownKeys(a).filter(h=>{var f=n.get(h);return f===void 0||f.v!==$e});for(var[c,d]of n)d.v!==$e&&!(c in a)&&u.push(c);return u},setPrototypeOf(){_f()}})}function Ka(e){try{if(e!==null&&typeof e=="object"&&en in e)return e[en]}catch{}return e}function td(e,t){return Object.is(Ka(e),Ka(t))}var dt,pu,_u,bu;function nd(){if(dt===void 0){dt=window,pu=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;_u=Xn(t,"firstChild").get,bu=Xn(t,"nextSibling").get,Va(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Va(n)&&(n.__t=void 0)}}function Nn(e=""){return document.createTextNode(e)}function mn(e){return _u.call(e)}function Yi(e){return bu.call(e)}function ce(e,t){return mn(e)}function Ge(e,t=!1){{var n=mn(e);return n instanceof Comment&&n.data===""?Yi(n):n}}function Se(e,t=1,n=!1){let r=e;for(;t--;)r=Yi(r);return r}function rd(e){e.textContent=""}function xu(){return!1}function id(e,t,n){return document.createElementNS(Ql,e,void 0)}function od(e,t){if(t){const n=document.body;e.autofocus=!0,tn(()=>{document.activeElement===n&&e.focus()})}}let Ya=!1;function sd(){Ya||(Ya=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function Ko(e){var t=Ae,n=Re;Ot(null),sn(null);try{return e()}finally{Ot(t),sn(n)}}function ad(e,t,n,r=n){e.addEventListener(t,()=>Ko(n));const i=e.__on_r;i?e.__on_r=()=>{i(),r(!0)}:e.__on_r=()=>r(!0),sd()}function wu(e){Re===null&&(Ae===null&&vf(),gf()),Un&&hf()}function ld(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Lt(e,t,n){var r=Re;r!==null&&r.f&It&&(e|=It);var i={ctx:Fe,deps:null,nodes:null,f:e|st|kt,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(n)try{vr(i)}catch(a){throw et(i),a}else t!==null&&Yt(i);var o=i;if(n&&o.deps===null&&o.teardown===null&&o.nodes===null&&o.first===o.last&&!(o.f&xr)&&(o=o.first,e&Tn&&e&Zn&&o!==null&&(o.f|=Zn)),o!==null&&(o.parent=r,r!==null&&ld(o,r),Ae!==null&&Ae.f&ot&&!(e&jn))){var s=Ae;(s.effects??(s.effects=[])).push(o)}return i}function aa(){return Ae!==null&&!Xt}function la(e){const t=Lt(Ri,null,!1);return We(t,Qe),t.teardown=e,t}function on(e){wu();var t=Re.f,n=!Ae&&(t&Gt)!==0&&(t&Vi)===0;if(n){var r=Fe;(r.e??(r.e=[])).push(e)}else return Eu(e)}function Eu(e){return Lt(mi|Zl,e,!1)}function Nu(e){return wu(),Lt(Ri|Zl,e,!0)}function Iu(e){En.ensure();const t=Lt(jn|xr,e,!0);return()=>{et(t)}}function ud(e){En.ensure();const t=Lt(jn|xr,e,!0);return(n={})=>new Promise(r=>{n.outro?cr(t,()=>{et(t),r(void 0)}):(et(t),r(void 0))})}function Xi(e){return Lt(mi,e,!1)}function ve(e,t){var n=Fe,r={effect:null,ran:!1,deps:e};n.l.$.push(r),r.effect=ri(()=>{e(),!r.ran&&(r.ran=!0,_e(t))})}function zt(){var e=Fe;ri(()=>{for(var t of e.l.$){t.deps();var n=t.effect;n.f&Qe&&n.deps!==null&&We(n,Pt),ii(n)&&vr(n),t.ran=!1}})}function cd(e){return Lt(ea|xr,e,!0)}function ri(e,t=0){return Lt(Ri|t,e,!0)}function Ne(e,t=[],n=[],r=[]){hu(r,t,n,i=>{Lt(Ri,()=>e(...i.map(l)),!0)})}function Wi(e,t=0){var n=Lt(Tn|t,e,!0);return n}function Su(e,t=0){var n=Lt($s|t,e,!0);return n}function mt(e){return Lt(Gt|xr,e,!0)}function Tu(e){var t=e.teardown;if(t!==null){const n=Un,r=Ae;Xa(!0),Ot(null);try{t.call(null)}finally{Xa(n),Ot(r)}}}function ua(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const i=n.ac;i!==null&&Ko(()=>{i.abort($n)});var r=n.next;n.f&jn?n.parent=null:et(n,t),n=r}}function fd(e){for(var t=e.first;t!==null;){var n=t.next;t.f&Gt||et(t),t=n}}function et(e,t=!0){var n=!1;(t||e.f&ql)&&e.nodes!==null&&e.nodes.end!==null&&(dd(e.nodes.start,e.nodes.end),n=!0),ua(e,t&&!n),pi(e,0),We(e,wn);var r=e.nodes&&e.nodes.t;if(r!==null)for(const o of r)o.stop();Tu(e);var i=e.parent;i!==null&&i.first!==null&&Cu(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function dd(e,t){for(;e!==null;){var n=e===t?null:Yi(e);e.remove(),e=n}}function Cu(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function cr(e,t,n=!0){var r=[];Au(e,r,!0);var i=()=>{n&&et(e),t&&t()},o=r.length;if(o>0){var s=()=>--o||i();for(var a of r)a.out(s)}else i()}function Au(e,t,n){if(!(e.f&It)){e.f^=It;var r=e.nodes&&e.nodes.t;if(r!==null)for(const a of r)(a.is_global||n)&&t.push(a);for(var i=e.first;i!==null;){var o=i.next,s=(i.f&Zn)!==0||(i.f&Gt)!==0&&(e.f&Tn)!==0;Au(i,t,s?n:!1),i=o}}}function ca(e){ku(e,!0)}function ku(e,t){if(e.f&It){e.f^=It,e.f&Qe||(We(e,st),Yt(e));for(var n=e.first;n!==null;){var r=n.next,i=(n.f&Zn)!==0||(n.f&Gt)!==0;ku(n,i?t:!1),n=r}var o=e.nodes&&e.nodes.t;if(o!==null)for(const s of o)(s.is_global||t)&&s.in()}}function Mu(e,t){if(e.nodes)for(var n=e.nodes.start,r=e.nodes.end;n!==null;){var i=n===r?null:Yi(n);t.append(n),n=i}}let fo=!1,Un=!1;function Xa(e){Un=e}let Ae=null,Xt=!1;function Ot(e){Ae=e}let Re=null;function sn(e){Re=e}let Mt=null;function Pu(e){Ae!==null&&(Mt===null?Mt=[e]:Mt.push(e))}let yt=null,Et=0,Tt=null;function hd(e){Tt=e}let Ou=1,tr=0,fr=tr;function Wa(e){fr=e}function Du(){return++Ou}function ii(e){var t=e.f;if(t&st)return!0;if(t&ot&&(e.f&=~hr),t&Pt){for(var n=e.deps,r=n.length,i=0;i<r;i++){var o=n[i];if(ii(o)&&gu(o),o.wv>e.wv)return!0}t&kt&&it===null&&We(e,Qe)}return!1}function Lu(e,t,n=!0){var r=e.reactions;if(r!==null&&!(Mt!==null&&Yr.call(Mt,e)))for(var i=0;i<r.length;i++){var o=r[i];o.f&ot?Lu(o,t,!1):t===o&&(n?We(o,st):o.f&Qe&&We(o,Pt),Yt(o))}}function zu(e){var _;var t=yt,n=Et,r=Tt,i=Ae,o=Mt,s=Fe,a=Xt,u=fr,c=e.f;yt=null,Et=0,Tt=null,Ae=c&(Gt|jn)?null:e,Mt=null,Xr(e.ctx),Xt=!1,fr=++tr,e.ac!==null&&(Ko(()=>{e.ac.abort($n)}),e.ac=null);try{e.f|=ws;var d=e.fn,h=d();e.f|=Vi;var f=e.deps,g=Ce==null?void 0:Ce.is_fork;if(yt!==null){var v;if(g||pi(e,Et),f!==null&&Et>0)for(f.length=Et+yt.length,v=0;v<yt.length;v++)f[Et+v]=yt[v];else e.deps=f=yt;if(aa()&&e.f&kt)for(v=Et;v<f.length;v++)((_=f[v]).reactions??(_.reactions=[])).push(e)}else!g&&f!==null&&Et<f.length&&(pi(e,Et),f.length=Et);if(Bi()&&Tt!==null&&!Xt&&f!==null&&!(e.f&(ot|Pt|st)))for(v=0;v<Tt.length;v++)Lu(Tt[v],e);if(i!==null&&i!==e){if(tr++,i.deps!==null)for(let p=0;p<n;p+=1)i.deps[p].rv=tr;if(t!==null)for(const p of t)p.rv=tr;Tt!==null&&(r===null?r=Tt:r.push(...Tt))}return e.f&Wn&&(e.f^=Wn),h}catch(p){return iu(p)}finally{e.f^=ws,yt=t,Et=n,Tt=r,Ae=i,Mt=o,Xr(s),Xt=a,fr=u}}function gd(e,t){let n=t.reactions;if(n!==null){var r=sf.call(n,e);if(r!==-1){var i=n.length-1;i===0?n=t.reactions=null:(n[r]=n[i],n.pop())}}if(n===null&&t.f&ot&&(yt===null||!Yr.call(yt,t))){var o=t;o.f&kt&&(o.f^=kt,o.f&=~hr),oa(o),$f(o),pi(o,0)}}function pi(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)gd(e,n[r])}function vr(e){var t=e.f;if(!(t&wn)){We(e,Qe);var n=Re,r=fo;Re=e,fo=!0;try{t&(Tn|$s)?fd(e):ua(e),Tu(e);var i=zu(e);e.teardown=typeof i=="function"?i:null,e.wv=Ou;var o;bs&&Lf&&e.f&st&&e.deps}finally{fo=r,Re=n}}}async function fa(){await Promise.resolve(),Kf()}function l(e){var t=e.f,n=(t&ot)!==0;if(Ae!==null&&!Xt){var r=Re!==null&&(Re.f&wn)!==0;if(!r&&(Mt===null||!Yr.call(Mt,e))){var i=Ae.deps;if(Ae.f&ws)e.rv<tr&&(e.rv=tr,yt===null&&i!==null&&i[Et]===e?Et++:yt===null?yt=[e]:yt.push(e));else{(Ae.deps??(Ae.deps=[])).push(e);var o=e.reactions;o===null?e.reactions=[Ae]:Yr.call(o,Ae)||o.push(Ae)}}}if(Un&&Gn.has(e))return Gn.get(e);if(n){var s=e;if(Un){var a=s.v;return(!(s.f&Qe)&&s.reactions!==null||Ru(s))&&(a=sa(s)),Gn.set(s,a),a}var u=(s.f&kt)===0&&!Xt&&Ae!==null&&(fo||(Ae.f&kt)!==0),c=(s.f&Vi)===0;ii(s)&&(u&&(s.f|=kt),gu(s)),u&&!c&&(vu(s),Fu(s))}if(it!=null&&it.has(e))return it.get(e);if(e.f&Wn)throw e.v;return e.v}function Fu(e){if(e.f|=kt,e.deps!==null)for(const t of e.deps)(t.reactions??(t.reactions=[])).push(e),t.f&ot&&!(t.f&kt)&&(vu(t),Fu(t))}function Ru(e){if(e.v===$e)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Gn.has(t)||t.f&ot&&Ru(t))return!0;return!1}function _e(e){var t=Xt;try{return Xt=!0,e()}finally{Xt=t}}function vd(e,t){var n={};for(var r in e)t.includes(r)||(n[r]=e[r]);for(var i of Object.getOwnPropertySymbols(e))Object.propertyIsEnumerable.call(e,i)&&!t.includes(i)&&(n[i]=e[i]);return n}function de(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(en in e)Ms(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&en in n&&Ms(n)}}}function Ms(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{Ms(e[r],t)}catch{}const n=Vo(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=Yl(n);for(let i in r){const o=r[i].get;if(o)try{o.call(e)}catch{}}}}}function yd(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const md=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function pd(e){return md.includes(e)}const _d={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function bd(e){return e=e.toLowerCase(),_d[e]??e}const xd=["touchstart","touchmove"];function wd(e){return xd.includes(e)}const Vu=new Set,Ps=new Set;function da(e,t,n,r={}){function i(o){if(r.capture||Ds.call(t,o),!o.cancelBubble)return Ko(()=>n==null?void 0:n.call(this,o))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?tn(()=>{t.addEventListener(e,i,r)}):t.addEventListener(e,i,r),i}function Os(e,t,n,r={}){var i=da(t,e,n,r);return()=>{e.removeEventListener(t,i,r)}}function _i(e,t,n,r,i){var o={capture:r,passive:i},s=da(e,t,n,o);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&la(()=>{t.removeEventListener(e,s,o)})}function Ft(e){for(var t=0;t<e.length;t++)Vu.add(e[t]);for(var n of Ps)n(e)}let Ga=null;function Ds(e){var p;var t=this,n=t.ownerDocument,r=e.type,i=((p=e.composedPath)==null?void 0:p.call(e))||[],o=i[0]||e.target;Ga=e;var s=0,a=Ga===e&&e.__root;if(a){var u=i.indexOf(a);if(u!==-1&&(t===document||t===window)){e.__root=t;return}var c=i.indexOf(t);if(c===-1)return;u<=c&&(s=u)}if(o=i[s]||e.target,o!==t){af(e,"currentTarget",{configurable:!0,get(){return o||n}});var d=Ae,h=Re;Ot(null),sn(null);try{for(var f,g=[];o!==null;){var v=o.assignedSlot||o.parentNode||o.host||null;try{var _=o["__"+r];_!=null&&(!o.disabled||e.target===o)&&_.call(o,e)}catch(b){f?g.push(b):f=b}if(e.cancelBubble||v===t||v===null)break;o=v}if(f){for(let b of g)queueMicrotask(()=>{throw b});throw f}}finally{e.__root=t,delete e.currentTarget,Ot(d),sn(h)}}}var Bl,Hl;const is=(Hl=(Bl=globalThis==null?void 0:globalThis.window)==null?void 0:Bl.trustedTypes)==null?void 0:Hl.createPolicy("svelte-trusted-html",{createHTML:e=>e});function Ed(e){return(is==null?void 0:is.createHTML(e))??e}function Bu(e,t=!1){var n=id("template");return e=e.replaceAll("<!>","<!---->"),n.innerHTML=t?Ed(e):e,n.content}function qr(e,t){var n=Re;n.nodes===null&&(n.nodes={start:e,end:t,a:null,t:null})}function pe(e,t){var n=(t&Jl)!==0,r=(t&Mf)!==0,i,o=!e.startsWith("<!>");return()=>{i===void 0&&(i=Bu(o?e:"<!>"+e,!0),n||(i=mn(i)));var s=r||pu?document.importNode(i,!0):i.cloneNode(!0);if(n){var a=mn(s),u=s.lastChild;qr(a,u)}else qr(s,s);return s}}function Nd(e,t,n="svg"){var r=!e.startsWith("<!>"),i=(t&Jl)!==0,o=`<${n}>${r?e:"<!>"+e}</${n}>`,s;return()=>{if(!s){var a=Bu(o,!0),u=mn(a);if(i)for(s=document.createDocumentFragment();mn(u);)s.appendChild(mn(u));else s=mn(u)}var c=s.cloneNode(!0);if(i){var d=mn(c),h=c.lastChild;qr(d,h)}else qr(c,c);return c}}function Rt(e,t){return Nd(e,t,"svg")}function Id(e=""){{var t=Nn(e+"");return qr(t,t),t}}function pt(){var e=document.createDocumentFragment(),t=document.createComment(""),n=Nn();return e.append(t,n),qr(t,n),e}function ie(e,t){e!==null&&e.before(t)}function qe(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n+"")}function Sd(e,t){return Td(e,t)}const $i=new Map;function Td(e,{target:t,anchor:n,props:r={},events:i,context:o,intro:s=!0}){nd();var a=new Set,u=h=>{for(var f=0;f<h.length;f++){var g=h[f];if(!a.has(g)){a.add(g);var v=wd(g);for(const b of[t,document]){var _=$i.get(b);_===void 0&&(_=new Map,$i.set(b,_));var p=_.get(g);p===void 0?(b.addEventListener(g,Ds,{passive:v}),_.set(g,1)):_.set(g,p+1)}}}};u(Ro(Vu)),Ps.add(u);var c=void 0,d=ud(()=>{var h=n??t.appendChild(Nn());return Wf(h,{pending:()=>{}},f=>{xe({});var g=Fe;o&&(g.c=o),i&&(r.$$events=i),c=e(f,r)||{},we()}),()=>{var _;for(var f of a)for(const p of[t,document]){var g=$i.get(p),v=g.get(f);--v==0?(p.removeEventListener(f,Ds),g.delete(f),g.size===0&&$i.delete(p)):g.set(f,v)}Ps.delete(u),h!==n&&((_=h.parentNode)==null||_.removeChild(h))}});return Cd.set(c,d),c}let Cd=new WeakMap;var Bt,Qt,Nt,ur,Mi,Pi,Lo;class ha{constructor(t,n=!0){He(this,"anchor");V(this,Bt,new Map);V(this,Qt,new Map);V(this,Nt,new Map);V(this,ur,new Set);V(this,Mi,!0);V(this,Pi,()=>{var t=Ce;if(y(this,Bt).has(t)){var n=y(this,Bt).get(t),r=y(this,Qt).get(n);if(r)ca(r),y(this,ur).delete(n);else{var i=y(this,Nt).get(n);i&&(y(this,Qt).set(n,i.effect),y(this,Nt).delete(n),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),r=i.effect)}for(const[o,s]of y(this,Bt)){if(y(this,Bt).delete(o),o===t)break;const a=y(this,Nt).get(s);a&&(et(a.effect),y(this,Nt).delete(s))}for(const[o,s]of y(this,Qt)){if(o===n||y(this,ur).has(o))continue;const a=()=>{if(Array.from(y(this,Bt).values()).includes(o)){var c=document.createDocumentFragment();Mu(s,c),c.append(Nn()),y(this,Nt).set(o,{effect:s,fragment:c})}else et(s);y(this,ur).delete(o),y(this,Qt).delete(o)};y(this,Mi)||!r?(y(this,ur).add(o),cr(s,a,!1)):a()}}});V(this,Lo,t=>{y(this,Bt).delete(t);const n=Array.from(y(this,Bt).values());for(const[r,i]of y(this,Nt))n.includes(r)||(et(i.effect),y(this,Nt).delete(r))});this.anchor=t,Ee(this,Mi,n)}ensure(t,n){var r=Ce,i=xu();if(n&&!y(this,Qt).has(t)&&!y(this,Nt).has(t))if(i){var o=document.createDocumentFragment(),s=Nn();o.append(s),y(this,Nt).set(t,{effect:mt(()=>n(s)),fragment:o})}else y(this,Qt).set(t,mt(()=>n(this.anchor)));if(y(this,Bt).set(r,t),i){for(const[a,u]of y(this,Qt))a===t?r.unskip_effect(u):r.skip_effect(u);for(const[a,u]of y(this,Nt))a===t?r.unskip_effect(u.effect):r.skip_effect(u.effect);r.oncommit(y(this,Pi)),r.ondiscard(y(this,Lo))}else y(this,Pi).call(this)}}Bt=new WeakMap,Qt=new WeakMap,Nt=new WeakMap,ur=new WeakMap,Mi=new WeakMap,Pi=new WeakMap,Lo=new WeakMap;function Ze(e,t,n=!1){var r=new ha(e),i=n?Zn:0;function o(s,a){r.ensure(s,a)}Wi(()=>{var s=!1;t((a,u=0)=>{s=!0,o(u,a)}),s||o(!1,null)},i)}function Zr(e,t){return t}function Ad(e,t,n){for(var r=[],i=t.length,o,s=t.length,a=0;a<i;a++){let h=t[a];cr(h,()=>{if(o){if(o.pending.delete(h),o.done.add(h),o.pending.size===0){var f=e.outrogroups;Ls(Ro(o.done)),f.delete(o),f.size===0&&(e.outrogroups=null)}}else s-=1},!1)}if(s===0){var u=r.length===0&&n!==null;if(u){var c=n,d=c.parentNode;rd(d),d.append(c),e.items.clear()}Ls(t,!u)}else o={pending:new Set(t),done:new Set},(e.outrogroups??(e.outrogroups=new Set)).add(o)}function Ls(e,t=!0){for(var n=0;n<e.length;n++)et(e[n],t)}var qa;function In(e,t,n,r,i,o=null){var s=e,a=new Map,u=(t&jl)!==0;if(u){var c=e;s=c.appendChild(Nn())}var d=null,h=Ki(()=>{var b=n();return zi(b)?b:b==null?[]:Ro(b)}),f,g=!0;function v(){p.fallback=d,kd(p,f,s,t,r),d!==null&&(f.length===0?d.f&_n?(d.f^=_n,ci(d,null,s)):ca(d):cr(d,()=>{d=null}))}var _=Wi(()=>{f=l(h);for(var b=f.length,C=new Set,P=Ce,w=xu(),M=0;M<b;M+=1){var L=f[M],q=r(L,M),O=g?null:a.get(q);O?(O.v&&Gr(O.v,L),O.i&&Gr(O.i,M),w&&P.unskip_effect(O.e)):(O=Md(a,g?s:qa??(qa=Nn()),L,q,M,i,t,n),g||(O.e.f|=_n),a.set(q,O)),C.add(q)}if(b===0&&o&&!d&&(g?d=mt(()=>o(s)):(d=mt(()=>o(qa??(qa=Nn()))),d.f|=_n)),b>C.size&&df(),!g)if(w){for(const[R,J]of a)C.has(R)||P.skip_effect(J.e);P.oncommit(v),P.ondiscard(()=>{})}else v();l(h)}),p={effect:_,items:a,outrogroups:null,fallback:d};g=!1}function ai(e){for(;e!==null&&!(e.f&Gt);)e=e.next;return e}function kd(e,t,n,r,i){var J,N,x,S,m,k,I,F,B;var o=(r&Nf)!==0,s=t.length,a=e.items,u=ai(e.effect.first),c,d=null,h,f=[],g=[],v,_,p,b;if(o)for(b=0;b<s;b+=1)v=t[b],_=i(v,b),p=a.get(_).e,p.f&_n||((N=(J=p.nodes)==null?void 0:J.a)==null||N.measure(),(h??(h=new Set)).add(p));for(b=0;b<s;b+=1){if(v=t[b],_=i(v,b),p=a.get(_).e,e.outrogroups!==null)for(const Y of e.outrogroups)Y.pending.delete(p),Y.done.delete(p);if(p.f&_n)if(p.f^=_n,p===u)ci(p,null,n);else{var C=d?d.next:u;p===e.effect.last&&(e.effect.last=p.prev),p.prev&&(p.prev.next=p.next),p.next&&(p.next.prev=p.prev),On(e,d,p),On(e,p,C),ci(p,C,n),d=p,f=[],g=[],u=ai(d.next);continue}if(p.f&It&&(ca(p),o&&((S=(x=p.nodes)==null?void 0:x.a)==null||S.unfix(),(h??(h=new Set)).delete(p))),p!==u){if(c!==void 0&&c.has(p)){if(f.length<g.length){var P=g[0],w;d=P.prev;var M=f[0],L=f[f.length-1];for(w=0;w<f.length;w+=1)ci(f[w],P,n);for(w=0;w<g.length;w+=1)c.delete(g[w]);On(e,M.prev,L.next),On(e,d,M),On(e,L,P),u=P,d=L,b-=1,f=[],g=[]}else c.delete(p),ci(p,u,n),On(e,p.prev,p.next),On(e,p,d===null?e.effect.first:d.next),On(e,d,p),d=p;continue}for(f=[],g=[];u!==null&&u!==p;)(c??(c=new Set)).add(u),g.push(u),u=ai(u.next);if(u===null)continue}p.f&_n||f.push(p),d=p,u=ai(p.next)}if(e.outrogroups!==null){for(const Y of e.outrogroups)Y.pending.size===0&&(Ls(Ro(Y.done)),(m=e.outrogroups)==null||m.delete(Y));e.outrogroups.size===0&&(e.outrogroups=null)}if(u!==null||c!==void 0){var q=[];if(c!==void 0)for(p of c)p.f&It||q.push(p);for(;u!==null;)!(u.f&It)&&u!==e.fallback&&q.push(u),u=ai(u.next);var O=q.length;if(O>0){var R=r&jl&&s===0?n:null;if(o){for(b=0;b<O;b+=1)(I=(k=q[b].nodes)==null?void 0:k.a)==null||I.measure();for(b=0;b<O;b+=1)(B=(F=q[b].nodes)==null?void 0:F.a)==null||B.fix()}Ad(e,q,R)}}o&&tn(()=>{var Y,H;if(h!==void 0)for(p of h)(H=(Y=p.nodes)==null?void 0:Y.a)==null||H.apply()})}function Md(e,t,n,r,i,o,s,a){var u=s&wf?s&If?gr(n):le(n,!1,!1):null,c=s&Ef?gr(i):null;return{v:u,i:c,e:mt(()=>(o(t,u??n,c??i,a),()=>{e.delete(r)}))}}function ci(e,t,n){if(e.nodes)for(var r=e.nodes.start,i=e.nodes.end,o=t&&!(t.f&_n)?t.nodes.start:n;r!==null;){var s=Yi(r);if(o.before(r),r===i)return;r=s}}function On(e,t,n){t===null?e.effect.first=n:t.next=n,n===null?e.effect.last=t:n.prev=t}function Pd(e,t,n,r,i){var a;var o=(a=t.$$slots)==null?void 0:a[n],s=!1;o===!0&&(o=t.children,s=!0),o===void 0||o(e,s?()=>r:r)}function Cn(e,t,...n){var r=new ha(e);Wi(()=>{const i=t()??null;r.ensure(i,i&&(o=>i(o,...n)))},Zn)}function ga(e,t,n){var r=new ha(e);Wi(()=>{var i=t()??null;r.ensure(i,i&&(o=>n(o,i)))},Zn)}function gt(e,t,n){Xi(()=>{var r=_e(()=>t(e,n==null?void 0:n())||{});if(n&&(r!=null&&r.update)){var i=!1,o={};ri(()=>{var s=n();de(s),i&&eu(o,s)&&(o=s,r.update(s))}),i=!0}if(r!=null&&r.destroy)return()=>r.destroy()})}function Od(e,t){var n=void 0,r;Su(()=>{n!==(n=t())&&(r&&(et(r),r=null),n&&(r=mt(()=>{Xi(()=>n(e))})))})}function Hu(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Hu(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Dd(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Hu(e))&&(r&&(r+=" "),r+=t);return r}function wr(e){return typeof e=="object"?Dd(e):e??""}const Za=[...` 	
\r\fÂ \v\uFEFF`];function Ld(e,t,n){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),n){for(var i in n)if(n[i])r=r?r+" "+i:i;else if(r.length)for(var o=i.length,s=0;(s=r.indexOf(i,s))>=0;){var a=s+o;(s===0||Za.includes(r[s-1]))&&(a===r.length||Za.includes(r[a]))?r=(s===0?"":r.substring(0,s))+r.substring(a+1):s=a}}return r===""?null:r}function Ua(e,t=!1){var n=t?" !important;":";",r="";for(var i in e){var o=e[i];o!=null&&o!==""&&(r+=" "+i+": "+o+n)}return r}function os(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function zd(e,t){if(t){var n="",r,i;if(Array.isArray(t)?(r=t[0],i=t[1]):r=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var o=!1,s=0,a=!1,u=[];r&&u.push(...Object.keys(r).map(os)),i&&u.push(...Object.keys(i).map(os));var c=0,d=-1;const _=e.length;for(var h=0;h<_;h++){var f=e[h];if(a?f==="/"&&e[h-1]==="*"&&(a=!1):o?o===f&&(o=!1):f==="/"&&e[h+1]==="*"?a=!0:f==='"'||f==="'"?o=f:f==="("?s++:f===")"&&s--,!a&&o===!1&&s===0){if(f===":"&&d===-1)d=h;else if(f===";"||h===_-1){if(d!==-1){var g=os(e.substring(c,d).trim());if(!u.includes(g)){f!==";"&&h++;var v=e.substring(c,h).trim();n+=" "+v+";"}}c=h+1,d=-1}}}}return r&&(n+=Ua(r)),i&&(n+=Ua(i,!0)),n=n.trim(),n===""?null:n}return e==null?null:String(e)}function An(e,t,n,r,i,o){var s=e.__className;if(s!==n||s===void 0){var a=Ld(n,r,o);a==null?e.removeAttribute("class"):t?e.className=a:e.setAttribute("class",a),e.__className=n}else if(o&&i!==o)for(var u in o){var c=!!o[u];(i==null||c!==!!i[u])&&e.classList.toggle(u,c)}return o}function ss(e,t={},n,r){for(var i in n){var o=n[i];t[i]!==o&&(n[i]==null?e.style.removeProperty(i):e.style.setProperty(i,o,r))}}function Dt(e,t,n,r){var i=e.__style;if(i!==t){var o=zd(t,r);o==null?e.removeAttribute("style"):e.style.cssText=o,e.__style=t}else r&&(Array.isArray(r)?(ss(e,n==null?void 0:n[0],r[0]),ss(e,n==null?void 0:n[1],r[1],"important")):ss(e,n,r));return r}function po(e,t,n=!1){if(e.multiple){if(t==null)return;if(!zi(t))return Of();for(var r of e.options)r.selected=t.includes(ja(r));return}for(r of e.options){var i=ja(r);if(td(i,t)){r.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function Ku(e){var t=new MutationObserver(()=>{po(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),la(()=>{t.disconnect()})}function ja(e){return"__value"in e?e.__value:e.value}const Fn=Symbol("class"),Rn=Symbol("style"),Yu=Symbol("is custom element"),Xu=Symbol("is html"),Fd=ta?"option":"OPTION",Rd=ta?"select":"SELECT",Vd=ta?"progress":"PROGRESS";function nn(e,t){var n=Yo(e);n.value===(n.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!==Vd)||(e.value=t??"")}function Wu(e,t){var n=Yo(e);n.checked!==(n.checked=t??void 0)&&(e.checked=t)}function Bd(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function he(e,t,n,r){var i=Yo(e);i[t]!==(i[t]=n)&&(t==="loading"&&(e[cf]=n),n==null?e.removeAttribute(t):typeof n!="string"&&Gu(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Hd(e,t,n,r,i=!1,o=!1){var s=Yo(e),a=s[Yu],u=!s[Xu],c=t||{},d=e.nodeName===Fd;for(var h in t)h in n||(n[h]=null);n.class?n.class=wr(n.class):(r||n[Fn])&&(n.class=null),n[Rn]&&(n.style??(n.style=null));var f=Gu(e);for(const w in n){let M=n[w];if(d&&w==="value"&&M==null){e.value=e.__value="",c[w]=M;continue}if(w==="class"){var g=e.namespaceURI==="http://www.w3.org/1999/xhtml";An(e,g,M,r,t==null?void 0:t[Fn],n[Fn]),c[w]=M,c[Fn]=n[Fn];continue}if(w==="style"){Dt(e,M,t==null?void 0:t[Rn],n[Rn]),c[w]=M,c[Rn]=n[Rn];continue}var v=c[w];if(!(M===v&&!(M===void 0&&e.hasAttribute(w)))){c[w]=M;var _=w[0]+w[1];if(_!=="$$")if(_==="on"){const L={},q="$$"+w;let O=w.slice(2);var p=pd(O);if(yd(O)&&(O=O.slice(0,-7),L.capture=!0),!p&&v){if(M!=null)continue;e.removeEventListener(O,c[q],L),c[q]=null}if(M!=null)if(p)e[`__${O}`]=M,Ft([O]);else{let R=function(J){c[w].call(this,J)};var P=R;c[q]=da(O,e,R,L)}else p&&(e[`__${O}`]=void 0)}else if(w==="style")he(e,w,M);else if(w==="autofocus")od(e,!!M);else if(!a&&(w==="__value"||w==="value"&&M!=null))e.value=e.__value=M;else if(w==="selected"&&d)Bd(e,M);else{var b=w;u||(b=bd(b));var C=b==="defaultValue"||b==="defaultChecked";if(M==null&&!a&&!C)if(s[w]=null,b==="value"||b==="checked"){let L=e;const q=t===void 0;if(b==="value"){let O=L.defaultValue;L.removeAttribute(b),L.defaultValue=O,L.value=L.__value=q?O:null}else{let O=L.defaultChecked;L.removeAttribute(b),L.defaultChecked=O,L.checked=q?O:!1}}else e.removeAttribute(w);else C||f.includes(b)&&(a||typeof M!="string")?(e[b]=M,b in s&&(s[b]=$e)):typeof M!="function"&&he(e,b,M)}}}return c}function Er(e,t,n=[],r=[],i=[],o,s=!1,a=!1){hu(i,n,r,u=>{var c=void 0,d={},h=e.nodeName===Rd,f=!1;if(Su(()=>{var v=t(...u.map(l)),_=Hd(e,c,v,o,s,a);f&&h&&"value"in v&&po(e,v.value);for(let b of Object.getOwnPropertySymbols(d))v[b]||et(d[b]);for(let b of Object.getOwnPropertySymbols(v)){var p=v[b];b.description===Pf&&(!c||p!==c[b])&&(d[b]&&et(d[b]),d[b]=mt(()=>Od(e,()=>p))),_[b]=p}c=_}),h){var g=e;Xi(()=>{po(g,c.value,!0),Ku(g)})}f=!0})}function Yo(e){return e.__attributes??(e.__attributes={[Yu]:e.nodeName.includes("-"),[Xu]:e.namespaceURI===Ql})}var Ja=new Map;function Gu(e){var t=e.getAttribute("is")||e.nodeName,n=Ja.get(t);if(n)return n;Ja.set(t,n=[]);for(var r,i=e,o=Element.prototype;o!==i;){r=Yl(i);for(var s in r)r[s].set&&n.push(s);i=Vo(i)}return n}function Kd(e,t,n=t){var r=new WeakSet;ad(e,"input",async i=>{var o=i?e.defaultValue:e.value;if(o=as(e)?ls(o):o,n(o),Ce!==null&&r.add(Ce),await fa(),o!==(o=t())){var s=e.selectionStart,a=e.selectionEnd,u=e.value.length;if(e.value=o??"",a!==null){var c=e.value.length;s===a&&a===u&&c>u?(e.selectionStart=c,e.selectionEnd=c):(e.selectionStart=s,e.selectionEnd=Math.min(a,c))}}}),_e(t)==null&&e.value&&(n(as(e)?ls(e.value):e.value),Ce!==null&&r.add(Ce)),ri(()=>{var i=t();if(e===document.activeElement){var o=Es??Ce;if(r.has(o))return}as(e)&&i===ls(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function as(e){var t=e.type;return t==="number"||t==="range"}function ls(e){return e===""?null:+e}var Kn,Kr,Oi,zo,qu;const Fo=class Fo{constructor(t){V(this,zo);V(this,Kn,new WeakMap);V(this,Kr);V(this,Oi);Ee(this,Oi,t)}observe(t,n){var r=y(this,Kn).get(t)||new Set;return r.add(n),y(this,Kn).set(t,r),rt(this,zo,qu).call(this).observe(t,y(this,Oi)),()=>{var i=y(this,Kn).get(t);i.delete(n),i.size===0&&(y(this,Kn).delete(t),y(this,Kr).unobserve(t))}}};Kn=new WeakMap,Kr=new WeakMap,Oi=new WeakMap,zo=new WeakSet,qu=function(){return y(this,Kr)??Ee(this,Kr,new ResizeObserver(t=>{for(var n of t){Fo.entries.set(n.target,n);for(var r of y(this,Kn).get(n.target)||[])r(n)}}))},He(Fo,"entries",new WeakMap);let zs=Fo;var Yd=new zs({box:"border-box"});function Qa(e,t,n){var r=Yd.observe(e,()=>n(e[t]));Xi(()=>(_e(()=>n(e[t])),r))}function $a(e,t){return e===t||(e==null?void 0:e[en])===t}function Nr(e={},t,n,r){return Xi(()=>{var i,o;return ri(()=>{i=o,o=[],_e(()=>{e!==n(...o)&&(t(e,...o),i&&$a(n(...i),e)&&t(null,...i))})}),()=>{tn(()=>{o&&$a(n(...o),e)&&t(null,...o)})}}),e}function bt(e=!1){const t=Fe,n=t.l.u;if(!n)return;let r=()=>de(t.s);if(e){let i=0,o={};const s=Hi(()=>{let a=!1;const u=t.s;for(const c in u)u[c]!==o[c]&&(o[c]=u[c],a=!0);return a&&i++,i});r=()=>l(s)}n.b.length&&Nu(()=>{el(t,r),xs(n.b)}),on(()=>{const i=_e(()=>n.m.map(uf));return()=>{for(const o of i)typeof o=="function"&&o()}}),n.a.length&&on(()=>{el(t,r),xs(n.a)})}function el(e,t){if(e.l.s)for(const n of e.l.s)l(n);t()}let eo=!1;function Xd(e){var t=eo;try{return eo=!1,[e(),eo]}finally{eo=t}}const Wd={get(e,t){if(!e.exclude.includes(t))return e.props[t]},set(e,t){return!1},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function Gi(e,t,n){return new Proxy({props:e,exclude:t},Wd)}const Gd={get(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(si(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r)return r[t]}},set(e,t,n){let r=e.props.length;for(;r--;){let i=e.props[r];si(i)&&(i=i());const o=Xn(i,t);if(o&&o.set)return o.set(n),!0}return!1},getOwnPropertyDescriptor(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(si(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r){const i=Xn(r,t);return i&&!i.configurable&&(i.configurable=!0),i}}},has(e,t){if(t===en||t===Ul)return!1;for(let n of e.props)if(si(n)&&(n=n()),n!=null&&t in n)return!0;return!1},ownKeys(e){const t=[];for(let n of e.props)if(si(n)&&(n=n()),!!n){for(const r in n)t.includes(r)||t.push(r);for(const r of Object.getOwnPropertySymbols(n))t.includes(r)||t.push(r)}return t}};function qd(...e){return new Proxy({props:e},Gd)}function Z(e,t,n,r){var P;var i=!ni||(n&Tf)!==0,o=(n&Af)!==0,s=(n&kf)!==0,a=r,u=!0,c=()=>(u&&(u=!1,a=s?_e(r):r),a),d;if(o){var h=en in e||Ul in e;d=((P=Xn(e,t))==null?void 0:P.set)??(h&&t in e?w=>e[t]=w:void 0)}var f,g=!1;o?[f,g]=Xd(()=>e[t]):f=e[t],f===void 0&&r!==void 0&&(f=c(),d&&(i&&mf(),d(f)));var v;if(i?v=()=>{var w=e[t];return w===void 0?c():(u=!0,w)}:v=()=>{var w=e[t];return w!==void 0&&(a=void 0),w===void 0?a:w},i&&!(n&Cf))return v;if(d){var _=e.$$legacy;return function(w,M){return arguments.length>0?((!i||!M||_||g)&&d(M?v():w),w):v()}}var p=!1,b=(n&Sf?Hi:Ki)(()=>(p=!1,v()));o&&l(b);var C=Re;return function(w,M){if(arguments.length>0){const L=M?l(b):i&&o?Yn(w):w;return D(b,L),p=!0,a!==void 0&&(a=L),w}return Un&&p||C.f&wn?b.v:l(b)}}function Zu(e){Fe===null&&Bo(),ni&&Fe.l!==null?Ud(Fe).m.push(e):on(()=>{const t=_e(e);if(typeof t=="function")return t})}function Xo(e){Fe===null&&Bo(),Zu(()=>()=>_e(e))}function Zd(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}function un(){const e=Fe;return e===null&&Bo(),(t,n,r)=>{var o;const i=(o=e.s.$$events)==null?void 0:o[t];if(i){const s=zi(i)?i.slice():[i],a=Zd(t,n,r);for(const u of s)u.call(e.x,a);return!a.defaultPrevented}return!0}}function Ud(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const jd="5";var Kl;typeof window<"u"&&((Kl=window.__svelte??(window.__svelte={})).v??(Kl.v=new Set)).add(jd);zf();var Jd={value:()=>{}};function Wo(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new ho(n)}function ho(e){this._=e}function Qd(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}ho.prototype=Wo.prototype={constructor:ho,on:function(e,t){var n=this._,r=Qd(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=$d(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=tl(n[i],e.name,t);else if(t==null)for(i in n)n[i]=tl(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ho(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function $d(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function tl(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Jd,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Fs="http://www.w3.org/1999/xhtml";const nl={svg:"http://www.w3.org/2000/svg",xhtml:Fs,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Go(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),nl.hasOwnProperty(t)?{space:nl[t],local:e}:e}function eh(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Fs&&t.documentElement.namespaceURI===Fs?t.createElement(e):t.createElementNS(n,e)}}function th(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Uu(e){var t=Go(e);return(t.local?th:eh)(t)}function nh(){}function va(e){return e==null?nh:function(){return this.querySelector(e)}}function rh(e){typeof e!="function"&&(e=va(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=new Array(s),u,c,d=0;d<s;++d)(u=o[d])&&(c=e.call(u,u.__data__,d,o))&&("__data__"in u&&(c.__data__=u.__data__),a[d]=c);return new St(r,this._parents)}function ih(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function oh(){return[]}function ju(e){return e==null?oh:function(){return this.querySelectorAll(e)}}function sh(e){return function(){return ih(e.apply(this,arguments))}}function ah(e){typeof e=="function"?e=sh(e):e=ju(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var s=t[o],a=s.length,u,c=0;c<a;++c)(u=s[c])&&(r.push(e.call(u,u.__data__,c,s)),i.push(u));return new St(r,i)}function Ju(e){return function(){return this.matches(e)}}function Qu(e){return function(t){return t.matches(e)}}var lh=Array.prototype.find;function uh(e){return function(){return lh.call(this.children,e)}}function ch(){return this.firstElementChild}function fh(e){return this.select(e==null?ch:uh(typeof e=="function"?e:Qu(e)))}var dh=Array.prototype.filter;function hh(){return Array.from(this.children)}function gh(e){return function(){return dh.call(this.children,e)}}function vh(e){return this.selectAll(e==null?hh:gh(typeof e=="function"?e:Qu(e)))}function yh(e){typeof e!="function"&&(e=Ju(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],u,c=0;c<s;++c)(u=o[c])&&e.call(u,u.__data__,c,o)&&a.push(u);return new St(r,this._parents)}function $u(e){return new Array(e.length)}function mh(){return new St(this._enter||this._groups.map($u),this._parents)}function _o(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}_o.prototype={constructor:_o,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function ph(e){return function(){return e}}function _h(e,t,n,r,i,o){for(var s=0,a,u=t.length,c=o.length;s<c;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new _o(e,o[s]);for(;s<u;++s)(a=t[s])&&(i[s]=a)}function bh(e,t,n,r,i,o,s){var a,u,c=new Map,d=t.length,h=o.length,f=new Array(d),g;for(a=0;a<d;++a)(u=t[a])&&(f[a]=g=s.call(u,u.__data__,a,t)+"",c.has(g)?i[a]=u:c.set(g,u));for(a=0;a<h;++a)g=s.call(e,o[a],a,o)+"",(u=c.get(g))?(r[a]=u,u.__data__=o[a],c.delete(g)):n[a]=new _o(e,o[a]);for(a=0;a<d;++a)(u=t[a])&&c.get(f[a])===u&&(i[a]=u)}function xh(e){return e.__data__}function wh(e,t){if(!arguments.length)return Array.from(this,xh);var n=t?bh:_h,r=this._parents,i=this._groups;typeof e!="function"&&(e=ph(e));for(var o=i.length,s=new Array(o),a=new Array(o),u=new Array(o),c=0;c<o;++c){var d=r[c],h=i[c],f=h.length,g=Eh(e.call(d,d&&d.__data__,c,r)),v=g.length,_=a[c]=new Array(v),p=s[c]=new Array(v),b=u[c]=new Array(f);n(d,h,_,p,b,g,t);for(var C=0,P=0,w,M;C<v;++C)if(w=_[C]){for(C>=P&&(P=C+1);!(M=p[P])&&++P<v;);w._next=M||null}}return s=new St(s,r),s._enter=a,s._exit=u,s}function Eh(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Nh(){return new St(this._exit||this._groups.map($u),this._parents)}function Ih(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Sh(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),u=0;u<s;++u)for(var c=n[u],d=r[u],h=c.length,f=a[u]=new Array(h),g,v=0;v<h;++v)(g=c[v]||d[v])&&(f[v]=g);for(;u<i;++u)a[u]=n[u];return new St(a,this._parents)}function Th(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function Ch(e){e||(e=Ah);function t(h,f){return h&&f?e(h.__data__,f.__data__):!h-!f}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,u=i[o]=new Array(a),c,d=0;d<a;++d)(c=s[d])&&(u[d]=c);u.sort(t)}return new St(i,this._parents).order()}function Ah(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function kh(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Mh(){return Array.from(this)}function Ph(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function Oh(){let e=0;for(const t of this)++e;return e}function Dh(){return!this.node()}function Lh(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this}function zh(e){return function(){this.removeAttribute(e)}}function Fh(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Rh(e,t){return function(){this.setAttribute(e,t)}}function Vh(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Bh(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Hh(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Kh(e,t){var n=Go(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Fh:zh:typeof t=="function"?n.local?Hh:Bh:n.local?Vh:Rh)(n,t))}function ec(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Yh(e){return function(){this.style.removeProperty(e)}}function Xh(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Wh(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Gh(e,t,n){return arguments.length>1?this.each((t==null?Yh:typeof t=="function"?Wh:Xh)(e,t,n??"")):Ur(this.node(),e)}function Ur(e,t){return e.style.getPropertyValue(t)||ec(e).getComputedStyle(e,null).getPropertyValue(t)}function qh(e){return function(){delete this[e]}}function Zh(e,t){return function(){this[e]=t}}function Uh(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function jh(e,t){return arguments.length>1?this.each((t==null?qh:typeof t=="function"?Uh:Zh)(e,t)):this.node()[e]}function tc(e){return e.trim().split(/^|\s+/)}function ya(e){return e.classList||new nc(e)}function nc(e){this._node=e,this._names=tc(e.getAttribute("class")||"")}nc.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function rc(e,t){for(var n=ya(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function ic(e,t){for(var n=ya(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Jh(e){return function(){rc(this,e)}}function Qh(e){return function(){ic(this,e)}}function $h(e,t){return function(){(t.apply(this,arguments)?rc:ic)(this,e)}}function eg(e,t){var n=tc(e+"");if(arguments.length<2){for(var r=ya(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?$h:t?Jh:Qh)(n,t))}function tg(){this.textContent=""}function ng(e){return function(){this.textContent=e}}function rg(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function ig(e){return arguments.length?this.each(e==null?tg:(typeof e=="function"?rg:ng)(e)):this.node().textContent}function og(){this.innerHTML=""}function sg(e){return function(){this.innerHTML=e}}function ag(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function lg(e){return arguments.length?this.each(e==null?og:(typeof e=="function"?ag:sg)(e)):this.node().innerHTML}function ug(){this.nextSibling&&this.parentNode.appendChild(this)}function cg(){return this.each(ug)}function fg(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function dg(){return this.each(fg)}function hg(e){var t=typeof e=="function"?e:Uu(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function gg(){return null}function vg(e,t){var n=typeof e=="function"?e:Uu(e),r=t==null?gg:typeof t=="function"?t:va(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function yg(){var e=this.parentNode;e&&e.removeChild(this)}function mg(){return this.each(yg)}function pg(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function _g(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function bg(e){return this.select(e?_g:pg)}function xg(e){return arguments.length?this.property("__data__",e):this.node().__data__}function wg(e){return function(t){e.call(this,t,this.__data__)}}function Eg(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Ng(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function Ig(e,t,n){return function(){var r=this.__on,i,o=wg(t);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Sg(e,t,n){var r=Eg(e+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,c=a.length,d;u<c;++u)for(i=0,d=a[u];i<o;++i)if((s=r[i]).type===d.type&&s.name===d.name)return d.value}return}for(a=t?Ig:Ng,i=0;i<o;++i)this.each(a(r[i],t,n));return this}function oc(e,t,n){var r=ec(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Tg(e,t){return function(){return oc(this,e,t)}}function Cg(e,t){return function(){return oc(this,e,t.apply(this,arguments))}}function Ag(e,t){return this.each((typeof t=="function"?Cg:Tg)(e,t))}function*kg(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var sc=[null];function St(e,t){this._groups=e,this._parents=t}function qi(){return new St([[document.documentElement]],sc)}function Mg(){return this}St.prototype=qi.prototype={constructor:St,select:rh,selectAll:ah,selectChild:fh,selectChildren:vh,filter:yh,data:wh,enter:mh,exit:Nh,join:Ih,merge:Sh,selection:Mg,order:Th,sort:Ch,call:kh,nodes:Mh,node:Ph,size:Oh,empty:Dh,each:Lh,attr:Kh,style:Gh,property:jh,classed:eg,text:ig,html:lg,raise:cg,lower:dg,append:hg,insert:vg,remove:mg,clone:bg,datum:xg,on:Sg,dispatch:Ag,[Symbol.iterator]:kg};function Ht(e){return typeof e=="string"?new St([[document.querySelector(e)]],[document.documentElement]):new St([[e]],sc)}function Pg(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Zt(e,t){if(e=Pg(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Og={passive:!1},bi={capture:!0,passive:!1};function us(e){e.stopImmediatePropagation()}function Mr(e){e.preventDefault(),e.stopImmediatePropagation()}function ac(e){var t=e.document.documentElement,n=Ht(e).on("dragstart.drag",Mr,bi);"onselectstart"in t?n.on("selectstart.drag",Mr,bi):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function lc(e,t){var n=e.document.documentElement,r=Ht(e).on("dragstart.drag",null);t&&(r.on("click.drag",Mr,bi),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const to=e=>()=>e;function Rs(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:o,x:s,y:a,dx:u,dy:c,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}Rs.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Dg(e){return!e.ctrlKey&&!e.button}function Lg(){return this.parentNode}function zg(e,t){return t??{x:e.x,y:e.y}}function Fg(){return navigator.maxTouchPoints||"ontouchstart"in this}function Rg(){var e=Dg,t=Lg,n=zg,r=Fg,i={},o=Wo("start","drag","end"),s=0,a,u,c,d,h=0;function f(w){w.on("mousedown.drag",g).filter(r).on("touchstart.drag",p).on("touchmove.drag",b,Og).on("touchend.drag touchcancel.drag",C).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(w,M){if(!(d||!e.call(this,w,M))){var L=P(this,t.call(this,w,M),w,M,"mouse");L&&(Ht(w.view).on("mousemove.drag",v,bi).on("mouseup.drag",_,bi),ac(w.view),us(w),c=!1,a=w.clientX,u=w.clientY,L("start",w))}}function v(w){if(Mr(w),!c){var M=w.clientX-a,L=w.clientY-u;c=M*M+L*L>h}i.mouse("drag",w)}function _(w){Ht(w.view).on("mousemove.drag mouseup.drag",null),lc(w.view,c),Mr(w),i.mouse("end",w)}function p(w,M){if(e.call(this,w,M)){var L=w.changedTouches,q=t.call(this,w,M),O=L.length,R,J;for(R=0;R<O;++R)(J=P(this,q,w,M,L[R].identifier,L[R]))&&(us(w),J("start",w,L[R]))}}function b(w){var M=w.changedTouches,L=M.length,q,O;for(q=0;q<L;++q)(O=i[M[q].identifier])&&(Mr(w),O("drag",w,M[q]))}function C(w){var M=w.changedTouches,L=M.length,q,O;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),q=0;q<L;++q)(O=i[M[q].identifier])&&(us(w),O("end",w,M[q]))}function P(w,M,L,q,O,R){var J=o.copy(),N=Zt(R||L,M),x,S,m;if((m=n.call(w,new Rs("beforestart",{sourceEvent:L,target:f,identifier:O,active:s,x:N[0],y:N[1],dx:0,dy:0,dispatch:J}),q))!=null)return x=m.x-N[0]||0,S=m.y-N[1]||0,function k(I,F,B){var Y=N,H;switch(I){case"start":i[O]=k,H=s++;break;case"end":delete i[O],--s;case"drag":N=Zt(B||F,M),H=s;break}J.call(I,w,new Rs(I,{sourceEvent:F,subject:m,target:f,identifier:O,active:H,x:N[0]+x,y:N[1]+S,dx:N[0]-Y[0],dy:N[1]-Y[1],dispatch:J}),q)}}return f.filter=function(w){return arguments.length?(e=typeof w=="function"?w:to(!!w),f):e},f.container=function(w){return arguments.length?(t=typeof w=="function"?w:to(w),f):t},f.subject=function(w){return arguments.length?(n=typeof w=="function"?w:to(w),f):n},f.touchable=function(w){return arguments.length?(r=typeof w=="function"?w:to(!!w),f):r},f.on=function(){var w=o.on.apply(o,arguments);return w===o?f:w},f.clickDistance=function(w){return arguments.length?(h=(w=+w)*w,f):Math.sqrt(h)},f}function ma(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function uc(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Zi(){}var xi=.7,bo=1/xi,Pr="\\s*([+-]?\\d+)\\s*",wi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",rn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Vg=/^#([0-9a-f]{3,8})$/,Bg=new RegExp(`^rgb\\(${Pr},${Pr},${Pr}\\)$`),Hg=new RegExp(`^rgb\\(${rn},${rn},${rn}\\)$`),Kg=new RegExp(`^rgba\\(${Pr},${Pr},${Pr},${wi}\\)$`),Yg=new RegExp(`^rgba\\(${rn},${rn},${rn},${wi}\\)$`),Xg=new RegExp(`^hsl\\(${wi},${rn},${rn}\\)$`),Wg=new RegExp(`^hsla\\(${wi},${rn},${rn},${wi}\\)$`),rl={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ma(Zi,yr,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:il,formatHex:il,formatHex8:Gg,formatHsl:qg,formatRgb:ol,toString:ol});function il(){return this.rgb().formatHex()}function Gg(){return this.rgb().formatHex8()}function qg(){return cc(this).formatHsl()}function ol(){return this.rgb().formatRgb()}function yr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Vg.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?sl(t):n===3?new _t(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?no(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?no(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Bg.exec(e))?new _t(t[1],t[2],t[3],1):(t=Hg.exec(e))?new _t(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Kg.exec(e))?no(t[1],t[2],t[3],t[4]):(t=Yg.exec(e))?no(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Xg.exec(e))?ul(t[1],t[2]/100,t[3]/100,1):(t=Wg.exec(e))?ul(t[1],t[2]/100,t[3]/100,t[4]):rl.hasOwnProperty(e)?sl(rl[e]):e==="transparent"?new _t(NaN,NaN,NaN,0):null}function sl(e){return new _t(e>>16&255,e>>8&255,e&255,1)}function no(e,t,n,r){return r<=0&&(e=t=n=NaN),new _t(e,t,n,r)}function Zg(e){return e instanceof Zi||(e=yr(e)),e?(e=e.rgb(),new _t(e.r,e.g,e.b,e.opacity)):new _t}function Vs(e,t,n,r){return arguments.length===1?Zg(e):new _t(e,t,n,r??1)}function _t(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}ma(_t,Vs,uc(Zi,{brighter(e){return e=e==null?bo:Math.pow(bo,e),new _t(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?xi:Math.pow(xi,e),new _t(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new _t(dr(this.r),dr(this.g),dr(this.b),xo(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:al,formatHex:al,formatHex8:Ug,formatRgb:ll,toString:ll}));function al(){return`#${nr(this.r)}${nr(this.g)}${nr(this.b)}`}function Ug(){return`#${nr(this.r)}${nr(this.g)}${nr(this.b)}${nr((isNaN(this.opacity)?1:this.opacity)*255)}`}function ll(){const e=xo(this.opacity);return`${e===1?"rgb(":"rgba("}${dr(this.r)}, ${dr(this.g)}, ${dr(this.b)}${e===1?")":`, ${e})`}`}function xo(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function dr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function nr(e){return e=dr(e),(e<16?"0":"")+e.toString(16)}function ul(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Kt(e,t,n,r)}function cc(e){if(e instanceof Kt)return new Kt(e.h,e.s,e.l,e.opacity);if(e instanceof Zi||(e=yr(e)),!e)return new Kt;if(e instanceof Kt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,u=(o+i)/2;return a?(t===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-t)/a+2:s=(t-n)/a+4,a/=u<.5?o+i:2-o-i,s*=60):a=u>0&&u<1?0:s,new Kt(s,a,u,e.opacity)}function jg(e,t,n,r){return arguments.length===1?cc(e):new Kt(e,t,n,r??1)}function Kt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}ma(Kt,jg,uc(Zi,{brighter(e){return e=e==null?bo:Math.pow(bo,e),new Kt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?xi:Math.pow(xi,e),new Kt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new _t(cs(e>=240?e-240:e+120,i,r),cs(e,i,r),cs(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Kt(cl(this.h),ro(this.s),ro(this.l),xo(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=xo(this.opacity);return`${e===1?"hsl(":"hsla("}${cl(this.h)}, ${ro(this.s)*100}%, ${ro(this.l)*100}%${e===1?")":`, ${e})`}`}}));function cl(e){return e=(e||0)%360,e<0?e+360:e}function ro(e){return Math.max(0,Math.min(1,e||0))}function cs(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const pa=e=>()=>e;function Jg(e,t){return function(n){return e+n*t}}function Qg(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function $g(e){return(e=+e)==1?fc:function(t,n){return n-t?Qg(t,n,e):pa(isNaN(t)?n:t)}}function fc(e,t){var n=t-e;return n?Jg(e,n):pa(isNaN(e)?t:e)}const wo=function e(t){var n=$g(t);function r(i,o){var s=n((i=Vs(i)).r,(o=Vs(o)).r),a=n(i.g,o.g),u=n(i.b,o.b),c=fc(i.opacity,o.opacity);return function(d){return i.r=s(d),i.g=a(d),i.b=u(d),i.opacity=c(d),i+""}}return r.gamma=e,r}(1);function ev(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function tv(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function nv(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=vi(e[s],t[s]);for(;s<n;++s)o[s]=t[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function rv(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function $t(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function iv(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=vi(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var Bs=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fs=new RegExp(Bs.source,"g");function ov(e){return function(){return e}}function sv(e){return function(t){return e(t)+""}}function dc(e,t){var n=Bs.lastIndex=fs.lastIndex=0,r,i,o,s=-1,a=[],u=[];for(e=e+"",t=t+"";(r=Bs.exec(e))&&(i=fs.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,u.push({i:s,x:$t(r,i)})),n=fs.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?u[0]?sv(u[0].x):ov(t):(t=u.length,function(c){for(var d=0,h;d<t;++d)a[(h=u[d]).i]=h.x(c);return a.join("")})}function vi(e,t){var n=typeof t,r;return t==null||n==="boolean"?pa(t):(n==="number"?$t:n==="string"?(r=yr(t))?(t=r,wo):dc:t instanceof yr?wo:t instanceof Date?rv:tv(t)?ev:Array.isArray(t)?nv:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?iv:$t)(e,t)}var fl=180/Math.PI,Hs={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function hc(e,t,n,r,i,o){var s,a,u;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*fl,skewX:Math.atan(u)*fl,scaleX:s,scaleY:a}}var io;function av(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Hs:hc(t.a,t.b,t.c,t.d,t.e,t.f)}function lv(e){return e==null||(io||(io=document.createElementNS("http://www.w3.org/2000/svg","g")),io.setAttribute("transform",e),!(e=io.transform.baseVal.consolidate()))?Hs:(e=e.matrix,hc(e.a,e.b,e.c,e.d,e.e,e.f))}function gc(e,t,n,r){function i(c){return c.length?c.pop()+" ":""}function o(c,d,h,f,g,v){if(c!==h||d!==f){var _=g.push("translate(",null,t,null,n);v.push({i:_-4,x:$t(c,h)},{i:_-2,x:$t(d,f)})}else(h||f)&&g.push("translate("+h+t+f+n)}function s(c,d,h,f){c!==d?(c-d>180?d+=360:d-c>180&&(c+=360),f.push({i:h.push(i(h)+"rotate(",null,r)-2,x:$t(c,d)})):d&&h.push(i(h)+"rotate("+d+r)}function a(c,d,h,f){c!==d?f.push({i:h.push(i(h)+"skewX(",null,r)-2,x:$t(c,d)}):d&&h.push(i(h)+"skewX("+d+r)}function u(c,d,h,f,g,v){if(c!==h||d!==f){var _=g.push(i(g)+"scale(",null,",",null,")");v.push({i:_-4,x:$t(c,h)},{i:_-2,x:$t(d,f)})}else(h!==1||f!==1)&&g.push(i(g)+"scale("+h+","+f+")")}return function(c,d){var h=[],f=[];return c=e(c),d=e(d),o(c.translateX,c.translateY,d.translateX,d.translateY,h,f),s(c.rotate,d.rotate,h,f),a(c.skewX,d.skewX,h,f),u(c.scaleX,c.scaleY,d.scaleX,d.scaleY,h,f),c=d=null,function(g){for(var v=-1,_=f.length,p;++v<_;)h[(p=f[v]).i]=p.x(g);return h.join("")}}}var uv=gc(av,"px, ","px)","deg)"),cv=gc(lv,", ",")",")"),fv=1e-12;function dl(e){return((e=Math.exp(e))+1/e)/2}function dv(e){return((e=Math.exp(e))-1/e)/2}function hv(e){return((e=Math.exp(2*e))-1)/(e+1)}const go=function e(t,n,r){function i(o,s){var a=o[0],u=o[1],c=o[2],d=s[0],h=s[1],f=s[2],g=d-a,v=h-u,_=g*g+v*v,p,b;if(_<fv)b=Math.log(f/c)/t,p=function(q){return[a+q*g,u+q*v,c*Math.exp(t*q*b)]};else{var C=Math.sqrt(_),P=(f*f-c*c+r*_)/(2*c*n*C),w=(f*f-c*c-r*_)/(2*f*n*C),M=Math.log(Math.sqrt(P*P+1)-P),L=Math.log(Math.sqrt(w*w+1)-w);b=(L-M)/t,p=function(q){var O=q*b,R=dl(M),J=c/(n*C)*(R*hv(t*O+M)-dv(M));return[a+J*g,u+J*v,c*R/dl(t*O+M)]}}return p.duration=b*1e3*t/Math.SQRT2,p}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,u=a*a;return e(s,a,u)},i}(Math.SQRT2,2,4);var jr=0,fi=0,li=0,vc=1e3,Eo,di,No=0,mr=0,qo=0,Ei=typeof performance=="object"&&performance.now?performance:Date,yc=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function _a(){return mr||(yc(gv),mr=Ei.now()+qo)}function gv(){mr=0}function Io(){this._call=this._time=this._next=null}Io.prototype=mc.prototype={constructor:Io,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?_a():+n)+(t==null?0:+t),!this._next&&di!==this&&(di?di._next=this:Eo=this,di=this),this._call=e,this._time=n,Ks()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ks())}};function mc(e,t,n){var r=new Io;return r.restart(e,t,n),r}function vv(){_a(),++jr;for(var e=Eo,t;e;)(t=mr-e._time)>=0&&e._call.call(void 0,t),e=e._next;--jr}function hl(){mr=(No=Ei.now())+qo,jr=fi=0;try{vv()}finally{jr=0,mv(),mr=0}}function yv(){var e=Ei.now(),t=e-No;t>vc&&(qo-=t,No=e)}function mv(){for(var e,t=Eo,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Eo=n);di=e,Ks(r)}function Ks(e){if(!jr){fi&&(fi=clearTimeout(fi));var t=e-mr;t>24?(e<1/0&&(fi=setTimeout(hl,e-Ei.now()-qo)),li&&(li=clearInterval(li))):(li||(No=Ei.now(),li=setInterval(yv,vc)),jr=1,yc(hl))}}function gl(e,t,n){var r=new Io;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var pv=Wo("start","end","cancel","interrupt"),_v=[],pc=0,vl=1,Ys=2,vo=3,yl=4,Xs=5,yo=6;function Zo(e,t,n,r,i,o){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;bv(e,n,{name:t,index:r,group:i,on:pv,tween:_v,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:pc})}function ba(e,t){var n=qt(e,t);if(n.state>pc)throw new Error("too late; already scheduled");return n}function cn(e,t){var n=qt(e,t);if(n.state>vo)throw new Error("too late; already running");return n}function qt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function bv(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=mc(o,0,n.time);function o(c){n.state=vl,n.timer.restart(s,n.delay,n.time),n.delay<=c&&s(c-n.delay)}function s(c){var d,h,f,g;if(n.state!==vl)return u();for(d in r)if(g=r[d],g.name===n.name){if(g.state===vo)return gl(s);g.state===yl?(g.state=yo,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete r[d]):+d<t&&(g.state=yo,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete r[d])}if(gl(function(){n.state===vo&&(n.state=yl,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=Ys,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Ys){for(n.state=vo,i=new Array(f=n.tween.length),d=0,h=-1;d<f;++d)(g=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(i[++h]=g);i.length=h+1}}function a(c){for(var d=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(u),n.state=Xs,1),h=-1,f=i.length;++h<f;)i[h].call(e,d);n.state===Xs&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=yo,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function mo(e,t){var n=e.__transition,r,i,o=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){o=!1;continue}i=r.state>Ys&&r.state<Xs,r.state=yo,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}o&&delete e.__transition}}function xv(e){return this.each(function(){mo(this,e)})}function wv(e,t){var n,r;return function(){var i=cn(this,e),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function Ev(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=cn(this,e),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:t,value:n},u=0,c=i.length;u<c;++u)if(i[u].name===t){i[u]=a;break}u===c&&i.push(a)}o.tween=i}}function Nv(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=qt(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===e)return s.value;return null}return this.each((t==null?wv:Ev)(n,e,t))}function xa(e,t,n){var r=e._id;return e.each(function(){var i=cn(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return qt(i,r).value[t]}}function _c(e,t){var n;return(typeof t=="number"?$t:t instanceof yr?wo:(n=yr(t))?(t=n,wo):dc)(e,t)}function Iv(e){return function(){this.removeAttribute(e)}}function Sv(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Tv(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttribute(e);return s===i?null:s===r?o:o=t(r=s,n)}}function Cv(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===r?o:o=t(r=s,n)}}function Av(e,t,n){var r,i,o;return function(){var s,a=n(this),u;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),u=a+"",s===u?null:s===r&&u===i?o:(i=u,o=t(r=s,a)))}}function kv(e,t,n){var r,i,o;return function(){var s,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),u=a+"",s===u?null:s===r&&u===i?o:(i=u,o=t(r=s,a)))}}function Mv(e,t){var n=Go(e),r=n==="transform"?cv:_c;return this.attrTween(e,typeof t=="function"?(n.local?kv:Av)(n,r,xa(this,"attr."+e,t)):t==null?(n.local?Sv:Iv)(n):(n.local?Cv:Tv)(n,r,t))}function Pv(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Ov(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Dv(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&Ov(e,o)),n}return i._value=t,i}function Lv(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&Pv(e,o)),n}return i._value=t,i}function zv(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Go(e);return this.tween(n,(r.local?Dv:Lv)(r,t))}function Fv(e,t){return function(){ba(this,e).delay=+t.apply(this,arguments)}}function Rv(e,t){return t=+t,function(){ba(this,e).delay=t}}function Vv(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Fv:Rv)(t,e)):qt(this.node(),t).delay}function Bv(e,t){return function(){cn(this,e).duration=+t.apply(this,arguments)}}function Hv(e,t){return t=+t,function(){cn(this,e).duration=t}}function Kv(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Bv:Hv)(t,e)):qt(this.node(),t).duration}function Yv(e,t){if(typeof t!="function")throw new Error;return function(){cn(this,e).ease=t}}function Xv(e){var t=this._id;return arguments.length?this.each(Yv(t,e)):qt(this.node(),t).ease}function Wv(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;cn(this,e).ease=n}}function Gv(e){if(typeof e!="function")throw new Error;return this.each(Wv(this._id,e))}function qv(e){typeof e!="function"&&(e=Ju(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],u,c=0;c<s;++c)(u=o[c])&&e.call(u,u.__data__,c,o)&&a.push(u);return new Sn(r,this._parents,this._name,this._id)}function Zv(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var u=t[a],c=n[a],d=u.length,h=s[a]=new Array(d),f,g=0;g<d;++g)(f=u[g]||c[g])&&(h[g]=f);for(;a<r;++a)s[a]=t[a];return new Sn(s,this._parents,this._name,this._id)}function Uv(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function jv(e,t,n){var r,i,o=Uv(t)?ba:cn;return function(){var s=o(this,e),a=s.on;a!==r&&(i=(r=a).copy()).on(t,n),s.on=i}}function Jv(e,t){var n=this._id;return arguments.length<2?qt(this.node(),n).on.on(e):this.each(jv(n,e,t))}function Qv(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function $v(){return this.on("end.remove",Qv(this._id))}function ey(e){var t=this._name,n=this._id;typeof e!="function"&&(e=va(e));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],u=a.length,c=o[s]=new Array(u),d,h,f=0;f<u;++f)(d=a[f])&&(h=e.call(d,d.__data__,f,a))&&("__data__"in d&&(h.__data__=d.__data__),c[f]=h,Zo(c[f],t,n,f,c,qt(d,n)));return new Sn(o,this._parents,t,n)}function ty(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ju(e));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var u=r[a],c=u.length,d,h=0;h<c;++h)if(d=u[h]){for(var f=e.call(d,d.__data__,h,u),g,v=qt(d,n),_=0,p=f.length;_<p;++_)(g=f[_])&&Zo(g,t,n,_,f,v);o.push(f),s.push(d)}return new Sn(o,s,t,n)}var ny=qi.prototype.constructor;function ry(){return new ny(this._groups,this._parents)}function iy(e,t){var n,r,i;return function(){var o=Ur(this,e),s=(this.style.removeProperty(e),Ur(this,e));return o===s?null:o===n&&s===r?i:i=t(n=o,r=s)}}function bc(e){return function(){this.style.removeProperty(e)}}function oy(e,t,n){var r,i=n+"",o;return function(){var s=Ur(this,e);return s===i?null:s===r?o:o=t(r=s,n)}}function sy(e,t,n){var r,i,o;return function(){var s=Ur(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),Ur(this,e))),s===u?null:s===r&&u===i?o:(i=u,o=t(r=s,a))}}function ay(e,t){var n,r,i,o="style."+t,s="end."+o,a;return function(){var u=cn(this,e),c=u.on,d=u.value[o]==null?a||(a=bc(t)):void 0;(c!==n||i!==d)&&(r=(n=c).copy()).on(s,i=d),u.on=r}}function ly(e,t,n){var r=(e+="")=="transform"?uv:_c;return t==null?this.styleTween(e,iy(e,r)).on("end.style."+e,bc(e)):typeof t=="function"?this.styleTween(e,sy(e,r,xa(this,"style."+e,t))).each(ay(this._id,e)):this.styleTween(e,oy(e,r,t),n).on("end.style."+e,null)}function uy(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function cy(e,t,n){var r,i;function o(){var s=t.apply(this,arguments);return s!==i&&(r=(i=s)&&uy(e,s,n)),r}return o._value=t,o}function fy(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,cy(e,t,n??""))}function dy(e){return function(){this.textContent=e}}function hy(e){return function(){var t=e(this);this.textContent=t??""}}function gy(e){return this.tween("text",typeof e=="function"?hy(xa(this,"text",e)):dy(e==null?"":e+""))}function vy(e){return function(t){this.textContent=e.call(this,t)}}function yy(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&vy(i)),t}return r._value=e,r}function my(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,yy(e))}function py(){for(var e=this._name,t=this._id,n=xc(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,u,c=0;c<a;++c)if(u=s[c]){var d=qt(u,t);Zo(u,e,n,c,s,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Sn(r,this._parents,e,n)}function _y(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},u={value:function(){--i===0&&o()}};n.each(function(){var c=cn(this,r),d=c.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),c.on=t}),i===0&&o()})}var by=0;function Sn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function xc(){return++by}var hn=qi.prototype;Sn.prototype={constructor:Sn,select:ey,selectAll:ty,selectChild:hn.selectChild,selectChildren:hn.selectChildren,filter:qv,merge:Zv,selection:ry,transition:py,call:hn.call,nodes:hn.nodes,node:hn.node,size:hn.size,empty:hn.empty,each:hn.each,on:Jv,attr:Mv,attrTween:zv,style:ly,styleTween:fy,text:gy,textTween:my,remove:$v,tween:Nv,delay:Vv,duration:Kv,ease:Xv,easeVarying:Gv,end:_y,[Symbol.iterator]:hn[Symbol.iterator]};function xy(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var wy={time:null,delay:0,duration:250,ease:xy};function Ey(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Ny(e){var t,n;e instanceof Sn?(t=e._id,e=e._name):(t=xc(),(n=wy).time=_a(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,u,c=0;c<a;++c)(u=s[c])&&Zo(u,e,t,c,s,n||Ey(u,t));return new Sn(r,this._parents,e,t)}qi.prototype.interrupt=xv;qi.prototype.transition=Ny;const oo=e=>()=>e;function Iy(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function bn(e,t,n){this.k=e,this.x=t,this.y=n}bn.prototype={constructor:bn,scale:function(e){return e===1?this:new bn(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new bn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Uo=new bn(1,0,0);wc.prototype=bn.prototype;function wc(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Uo;return e.__zoom}function ds(e){e.stopImmediatePropagation()}function ui(e){e.preventDefault(),e.stopImmediatePropagation()}function Sy(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Ty(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function ml(){return this.__zoom||Uo}function Cy(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Ay(){return navigator.maxTouchPoints||"ontouchstart"in this}function ky(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function My(){var e=Sy,t=Ty,n=ky,r=Cy,i=Ay,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,u=go,c=Wo("start","zoom","end"),d,h,f,g=500,v=150,_=0,p=10;function b(m){m.property("__zoom",ml).on("wheel.zoom",O,{passive:!1}).on("mousedown.zoom",R).on("dblclick.zoom",J).filter(i).on("touchstart.zoom",N).on("touchmove.zoom",x).on("touchend.zoom touchcancel.zoom",S).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(m,k,I,F){var B=m.selection?m.selection():m;B.property("__zoom",ml),m!==B?M(m,k,I,F):B.interrupt().each(function(){L(this,arguments).event(F).start().zoom(null,typeof k=="function"?k.apply(this,arguments):k).end()})},b.scaleBy=function(m,k,I,F){b.scaleTo(m,function(){var B=this.__zoom.k,Y=typeof k=="function"?k.apply(this,arguments):k;return B*Y},I,F)},b.scaleTo=function(m,k,I,F){b.transform(m,function(){var B=t.apply(this,arguments),Y=this.__zoom,H=I==null?w(B):typeof I=="function"?I.apply(this,arguments):I,$=Y.invert(H),se=typeof k=="function"?k.apply(this,arguments):k;return n(P(C(Y,se),H,$),B,s)},I,F)},b.translateBy=function(m,k,I,F){b.transform(m,function(){return n(this.__zoom.translate(typeof k=="function"?k.apply(this,arguments):k,typeof I=="function"?I.apply(this,arguments):I),t.apply(this,arguments),s)},null,F)},b.translateTo=function(m,k,I,F,B){b.transform(m,function(){var Y=t.apply(this,arguments),H=this.__zoom,$=F==null?w(Y):typeof F=="function"?F.apply(this,arguments):F;return n(Uo.translate($[0],$[1]).scale(H.k).translate(typeof k=="function"?-k.apply(this,arguments):-k,typeof I=="function"?-I.apply(this,arguments):-I),Y,s)},F,B)};function C(m,k){return k=Math.max(o[0],Math.min(o[1],k)),k===m.k?m:new bn(k,m.x,m.y)}function P(m,k,I){var F=k[0]-I[0]*m.k,B=k[1]-I[1]*m.k;return F===m.x&&B===m.y?m:new bn(m.k,F,B)}function w(m){return[(+m[0][0]+ +m[1][0])/2,(+m[0][1]+ +m[1][1])/2]}function M(m,k,I,F){m.on("start.zoom",function(){L(this,arguments).event(F).start()}).on("interrupt.zoom end.zoom",function(){L(this,arguments).event(F).end()}).tween("zoom",function(){var B=this,Y=arguments,H=L(B,Y).event(F),$=t.apply(B,Y),se=I==null?w($):typeof I=="function"?I.apply(B,Y):I,ae=Math.max($[1][0]-$[0][0],$[1][1]-$[0][1]),K=B.__zoom,me=typeof k=="function"?k.apply(B,Y):k,ee=u(K.invert(se).concat(ae/K.k),me.invert(se).concat(ae/me.k));return function(te){if(te===1)te=me;else{var oe=ee(te),ke=ae/oe[2];te=new bn(ke,se[0]-oe[0]*ke,se[1]-oe[1]*ke)}H.zoom(null,te)}})}function L(m,k,I){return!I&&m.__zooming||new q(m,k)}function q(m,k){this.that=m,this.args=k,this.active=0,this.sourceEvent=null,this.extent=t.apply(m,k),this.taps=0}q.prototype={event:function(m){return m&&(this.sourceEvent=m),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(m,k){return this.mouse&&m!=="mouse"&&(this.mouse[1]=k.invert(this.mouse[0])),this.touch0&&m!=="touch"&&(this.touch0[1]=k.invert(this.touch0[0])),this.touch1&&m!=="touch"&&(this.touch1[1]=k.invert(this.touch1[0])),this.that.__zoom=k,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(m){var k=Ht(this.that).datum();c.call(m,this.that,new Iy(m,{sourceEvent:this.sourceEvent,target:b,transform:this.that.__zoom,dispatch:c}),k)}};function O(m,...k){if(!e.apply(this,arguments))return;var I=L(this,k).event(m),F=this.__zoom,B=Math.max(o[0],Math.min(o[1],F.k*Math.pow(2,r.apply(this,arguments)))),Y=Zt(m);if(I.wheel)(I.mouse[0][0]!==Y[0]||I.mouse[0][1]!==Y[1])&&(I.mouse[1]=F.invert(I.mouse[0]=Y)),clearTimeout(I.wheel);else{if(F.k===B)return;I.mouse=[Y,F.invert(Y)],mo(this),I.start()}ui(m),I.wheel=setTimeout(H,v),I.zoom("mouse",n(P(C(F,B),I.mouse[0],I.mouse[1]),I.extent,s));function H(){I.wheel=null,I.end()}}function R(m,...k){if(f||!e.apply(this,arguments))return;var I=m.currentTarget,F=L(this,k,!0).event(m),B=Ht(m.view).on("mousemove.zoom",se,!0).on("mouseup.zoom",ae,!0),Y=Zt(m,I),H=m.clientX,$=m.clientY;ac(m.view),ds(m),F.mouse=[Y,this.__zoom.invert(Y)],mo(this),F.start();function se(K){if(ui(K),!F.moved){var me=K.clientX-H,ee=K.clientY-$;F.moved=me*me+ee*ee>_}F.event(K).zoom("mouse",n(P(F.that.__zoom,F.mouse[0]=Zt(K,I),F.mouse[1]),F.extent,s))}function ae(K){B.on("mousemove.zoom mouseup.zoom",null),lc(K.view,F.moved),ui(K),F.event(K).end()}}function J(m,...k){if(e.apply(this,arguments)){var I=this.__zoom,F=Zt(m.changedTouches?m.changedTouches[0]:m,this),B=I.invert(F),Y=I.k*(m.shiftKey?.5:2),H=n(P(C(I,Y),F,B),t.apply(this,k),s);ui(m),a>0?Ht(this).transition().duration(a).call(M,H,F,m):Ht(this).call(b.transform,H,F,m)}}function N(m,...k){if(e.apply(this,arguments)){var I=m.touches,F=I.length,B=L(this,k,m.changedTouches.length===F).event(m),Y,H,$,se;for(ds(m),H=0;H<F;++H)$=I[H],se=Zt($,this),se=[se,this.__zoom.invert(se),$.identifier],B.touch0?!B.touch1&&B.touch0[2]!==se[2]&&(B.touch1=se,B.taps=0):(B.touch0=se,Y=!0,B.taps=1+!!d);d&&(d=clearTimeout(d)),Y&&(B.taps<2&&(h=se[0],d=setTimeout(function(){d=null},g)),mo(this),B.start())}}function x(m,...k){if(this.__zooming){var I=L(this,k).event(m),F=m.changedTouches,B=F.length,Y,H,$,se;for(ui(m),Y=0;Y<B;++Y)H=F[Y],$=Zt(H,this),I.touch0&&I.touch0[2]===H.identifier?I.touch0[0]=$:I.touch1&&I.touch1[2]===H.identifier&&(I.touch1[0]=$);if(H=I.that.__zoom,I.touch1){var ae=I.touch0[0],K=I.touch0[1],me=I.touch1[0],ee=I.touch1[1],te=(te=me[0]-ae[0])*te+(te=me[1]-ae[1])*te,oe=(oe=ee[0]-K[0])*oe+(oe=ee[1]-K[1])*oe;H=C(H,Math.sqrt(te/oe)),$=[(ae[0]+me[0])/2,(ae[1]+me[1])/2],se=[(K[0]+ee[0])/2,(K[1]+ee[1])/2]}else if(I.touch0)$=I.touch0[0],se=I.touch0[1];else return;I.zoom("touch",n(P(H,$,se),I.extent,s))}}function S(m,...k){if(this.__zooming){var I=L(this,k).event(m),F=m.changedTouches,B=F.length,Y,H;for(ds(m),f&&clearTimeout(f),f=setTimeout(function(){f=null},g),Y=0;Y<B;++Y)H=F[Y],I.touch0&&I.touch0[2]===H.identifier?delete I.touch0:I.touch1&&I.touch1[2]===H.identifier&&delete I.touch1;if(I.touch1&&!I.touch0&&(I.touch0=I.touch1,delete I.touch1),I.touch0)I.touch0[1]=this.__zoom.invert(I.touch0[0]);else if(I.end(),I.taps===2&&(H=Zt(H,this),Math.hypot(h[0]-H[0],h[1]-H[1])<p)){var $=Ht(this).on("dblclick.zoom");$&&$.apply(this,arguments)}}}return b.wheelDelta=function(m){return arguments.length?(r=typeof m=="function"?m:oo(+m),b):r},b.filter=function(m){return arguments.length?(e=typeof m=="function"?m:oo(!!m),b):e},b.touchable=function(m){return arguments.length?(i=typeof m=="function"?m:oo(!!m),b):i},b.extent=function(m){return arguments.length?(t=typeof m=="function"?m:oo([[+m[0][0],+m[0][1]],[+m[1][0],+m[1][1]]]),b):t},b.scaleExtent=function(m){return arguments.length?(o[0]=+m[0],o[1]=+m[1],b):[o[0],o[1]]},b.translateExtent=function(m){return arguments.length?(s[0][0]=+m[0][0],s[1][0]=+m[1][0],s[0][1]=+m[0][1],s[1][1]=+m[1][1],b):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},b.constrain=function(m){return arguments.length?(n=m,b):n},b.duration=function(m){return arguments.length?(a=+m,b):a},b.interpolate=function(m){return arguments.length?(u=m,b):u},b.on=function(){var m=c.on.apply(c,arguments);return m===c?b:m},b.clickDistance=function(m){return arguments.length?(_=(m=+m)*m,b):Math.sqrt(_)},b.tapDistance=function(m){return arguments.length?(p=+m,b):p},b}const Ni={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Ws=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Ec=["Enter"," ","Escape"],Py={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Jr;(function(e){e.Strict="strict",e.Loose="loose"})(Jr||(Jr={}));var Or;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Or||(Or={}));var So;(function(e){e.Partial="partial",e.Full="full"})(So||(So={}));const Gs={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var Vn;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Vn||(Vn={}));var To;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(To||(To={}));var be;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(be||(be={}));const pl={[be.Left]:be.Right,[be.Right]:be.Left,[be.Top]:be.Bottom,[be.Bottom]:be.Top};function Oy(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}function _l(e,t,n){if(!n)return;const r=[];e.forEach((i,o)=>{t!=null&&t.has(o)||r.push(i)}),r.length&&n(r)}function Dy(e){return e===null?null:e?"valid":"invalid"}const Nc=e=>"id"in e&&"source"in e&&"target"in e,Ly=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),wa=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Ui=(e,t=[0,0])=>{const{width:n,height:r}=Ir(e),i=e.origin??t,o=n*i[0],s=r*i[1];return{x:e.position.x-o,y:e.position.y-s}},zy=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const o=typeof i=="string";let s=!t.nodeLookup&&!o?i:void 0;t.nodeLookup&&(s=o?t.nodeLookup.get(i):wa(i)?i:t.nodeLookup.get(i.id));const a=s?Co(s,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Jo(r,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Qo(n)},jo=(e,t={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},r=!1;return e.forEach(i=>{(t.filter===void 0||t.filter(i))&&(n=Jo(n,Co(i)),r=!0)}),r?Qo(n):{x:0,y:0,width:0,height:0}},Ea=(e,t,[n,r,i]=[0,0,1],o=!1,s=!1)=>{const a={...Ji(t,[n,r,i]),width:t.width/i,height:t.height/i},u=[];for(const c of e.values()){const{measured:d,selectable:h=!0,hidden:f=!1}=c;if(s&&!h||f)continue;const g=d.width??c.width??c.initialWidth??null,v=d.height??c.height??c.initialHeight??null,_=Ii(a,$r(c)),p=(g??0)*(v??0),b=o&&_>0;(!c.internals.handleBounds||b||_>=p||c.dragging)&&u.push(c)}return u},Fy=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function Ry(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(i=>i.id)):null;return e.forEach(i=>{i.measured.width&&i.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function Vy({nodes:e,width:t,height:n,panZoom:r,minZoom:i,maxZoom:o},s){if(e.size===0)return Promise.resolve(!0);const a=Ry(e,s),u=jo(a),c=Na(u,t,n,(s==null?void 0:s.minZoom)??i,(s==null?void 0:s.maxZoom)??o,(s==null?void 0:s.padding)??.1);return await r.setViewport(c,{duration:s==null?void 0:s.duration,ease:s==null?void 0:s.ease,interpolate:s==null?void 0:s.interpolate}),Promise.resolve(!0)}function Ic({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:o}){const s=n.get(e),a=s.parentId?n.get(s.parentId):void 0,{x:u,y:c}=a?a.internals.positionAbsolute:{x:0,y:0},d=s.origin??r;let h=s.extent||i;if(s.extent==="parent"&&!s.expandParent)if(!a)o==null||o("005",Ni.error005());else{const g=a.measured.width,v=a.measured.height;g&&v&&(h=[[u,c],[u+g,c+v]])}else a&&ei(s.extent)&&(h=[[s.extent[0][0]+u,s.extent[0][1]+c],[s.extent[1][0]+u,s.extent[1][1]+c]]);const f=ei(h)?pr(t,h,s.measured):t;return(s.measured.width===void 0||s.measured.height===void 0)&&(o==null||o("015",Ni.error015())),{position:{x:f.x-u+(s.measured.width??0)*d[0],y:f.y-c+(s.measured.height??0)*d[1]},positionAbsolute:f}}async function By({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:i}){const o=new Set(e.map(f=>f.id)),s=[];for(const f of n){if(f.deletable===!1)continue;const g=o.has(f.id),v=!g&&f.parentId&&s.find(_=>_.id===f.parentId);(g||v)&&s.push(f)}const a=new Set(t.map(f=>f.id)),u=r.filter(f=>f.deletable!==!1),d=Fy(s,u);for(const f of u)a.has(f.id)&&!d.find(v=>v.id===f.id)&&d.push(f);if(!i)return{edges:d,nodes:s};const h=await i({nodes:s,edges:d});return typeof h=="boolean"?h?{edges:d,nodes:s}:{edges:[],nodes:[]}:h}const Qr=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),pr=(e={x:0,y:0},t,n)=>({x:Qr(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:Qr(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function Sc(e,t,n){const{width:r,height:i}=Ir(n),{x:o,y:s}=n.internals.positionAbsolute;return pr(e,[[o,s],[o+r,s+i]],t)}const bl=(e,t,n)=>e<t?Qr(Math.abs(e-t),1,t)/t:e>n?-Qr(Math.abs(e-n),1,t)/t:0,Tc=(e,t,n=15,r=40)=>{const i=bl(e.x,r,t.width-r)*n,o=bl(e.y,r,t.height-r)*n;return[i,o]},Jo=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),qs=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),Qo=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),$r=(e,t=[0,0])=>{var i,o;const{x:n,y:r}=wa(e)?e.internals.positionAbsolute:Ui(e,t);return{x:n,y:r,width:((i=e.measured)==null?void 0:i.width)??e.width??e.initialWidth??0,height:((o=e.measured)==null?void 0:o.height)??e.height??e.initialHeight??0}},Co=(e,t=[0,0])=>{var i,o;const{x:n,y:r}=wa(e)?e.internals.positionAbsolute:Ui(e,t);return{x:n,y:r,x2:n+(((i=e.measured)==null?void 0:i.width)??e.width??e.initialWidth??0),y2:r+(((o=e.measured)==null?void 0:o.height)??e.height??e.initialHeight??0)}},Hy=(e,t)=>Qo(Jo(qs(e),qs(t))),Ii=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},xl=e=>xn(e.width)&&xn(e.height)&&xn(e.x)&&xn(e.y),xn=e=>!isNaN(e)&&isFinite(e),Ky=(e,t)=>{},ji=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Ji=({x:e,y:t},[n,r,i],o=!1,s=[1,1])=>{const a={x:(e-n)/i,y:(t-r)/i};return o?ji(a,s):a},Ao=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r});function Ar(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function Yy(e,t,n){if(typeof e=="string"||typeof e=="number"){const r=Ar(e,n),i=Ar(e,t);return{top:r,right:i,bottom:r,left:i,x:i*2,y:r*2}}if(typeof e=="object"){const r=Ar(e.top??e.y??0,n),i=Ar(e.bottom??e.y??0,n),o=Ar(e.left??e.x??0,t),s=Ar(e.right??e.x??0,t);return{top:r,right:s,bottom:i,left:o,x:o+s,y:r+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function Xy(e,t,n,r,i,o){const{x:s,y:a}=Ao(e,[t,n,r]),{x:u,y:c}=Ao({x:e.x+e.width,y:e.y+e.height},[t,n,r]),d=i-u,h=o-c;return{left:Math.floor(s),top:Math.floor(a),right:Math.floor(d),bottom:Math.floor(h)}}const Na=(e,t,n,r,i,o)=>{const s=Yy(o,t,n),a=(t-s.x)/e.width,u=(n-s.y)/e.height,c=Math.min(a,u),d=Qr(c,r,i),h=e.x+e.width/2,f=e.y+e.height/2,g=t/2-h*d,v=n/2-f*d,_=Xy(e,g,v,d,t,n),p={left:Math.min(_.left-s.left,0),top:Math.min(_.top-s.top,0),right:Math.min(_.right-s.right,0),bottom:Math.min(_.bottom-s.bottom,0)};return{x:g-p.left+p.right,y:v-p.top+p.bottom,zoom:d}},ko=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function ei(e){return e!=null&&e!=="parent"}function Ir(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function Wy(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function Gy(e,t={width:0,height:0},n,r,i){const o={...e},s=r.get(n);if(s){const a=s.origin||i;o.x+=s.internals.positionAbsolute.x-(t.width??0)*a[0],o.y+=s.internals.positionAbsolute.y-(t.height??0)*a[1]}return o}function qy(e){return{...Py,...e||{}}}function hs(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){const{x:o,y:s}=Wt(e),a=Ji({x:o-((i==null?void 0:i.left)??0),y:s-((i==null?void 0:i.top)??0)},r),{x:u,y:c}=n?ji(a,t):a;return{xSnapped:u,ySnapped:c,...a}}const Cc=e=>({width:e.offsetWidth,height:e.offsetHeight}),Ac=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Zy=["INPUT","SELECT","TEXTAREA"];function kc(e){var r,i;const t=((i=(r=e.composedPath)==null?void 0:r.call(e))==null?void 0:i[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:Zy.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const Mc=e=>"clientX"in e,Wt=(e,t)=>{var o,s;const n=Mc(e),r=n?e.clientX:(o=e.touches)==null?void 0:o[0].clientX,i=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}},wl=(e,t,n,r,i)=>{const o=t.querySelectorAll(`.${e}`);return!o||!o.length?null:Array.from(o).map(s=>{const a=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:i,position:s.getAttribute("data-handlepos"),x:(a.left-n.left)/r,y:(a.top-n.top)/r,...Cc(s)}})};function Uy({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:o,targetControlX:s,targetControlY:a}){const u=e*.125+i*.375+s*.375+n*.125,c=t*.125+o*.375+a*.375+r*.125,d=Math.abs(u-e),h=Math.abs(c-t);return[u,c,d,h]}function so(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function El({pos:e,x1:t,y1:n,x2:r,y2:i,c:o}){switch(e){case be.Left:return[t-so(t-r,o),n];case be.Right:return[t+so(r-t,o),n];case be.Top:return[t,n-so(n-i,o)];case be.Bottom:return[t,n+so(i-n,o)]}}function Pc({sourceX:e,sourceY:t,sourcePosition:n=be.Bottom,targetX:r,targetY:i,targetPosition:o=be.Top,curvature:s=.25}){const[a,u]=El({pos:n,x1:e,y1:t,x2:r,y2:i,c:s}),[c,d]=El({pos:o,x1:r,y1:i,x2:e,y2:t,c:s}),[h,f,g,v]=Uy({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:a,sourceControlY:u,targetControlX:c,targetControlY:d});return[`M${e},${t} C${a},${u} ${c},${d} ${r},${i}`,h,f,g,v]}function Oc({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,o=n<e?n+i:n-i,s=Math.abs(r-t)/2,a=r<t?r+s:r-s;return[o,a,i,s]}function jy({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:i=!1,zIndexMode:o="basic"}){if(o==="manual")return r;const s=i&&n?r+1e3:r,a=Math.max(e.parentId||i&&e.selected?e.internals.z:0,t.parentId||i&&t.selected?t.internals.z:0);return s+a}function Jy({sourceNode:e,targetNode:t,width:n,height:r,transform:i}){const o=Jo(Co(e),Co(t));o.x===o.x2&&(o.x2+=1),o.y===o.y2&&(o.y2+=1);const s={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return Ii(s,Qo(o))>0}const Qy=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,$y=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Dc=(e,t,n={})=>{if(!e.source||!e.target)return t;const r=n.getEdgeId||Qy;let i;return Nc(e)?i={...e}:i={...e,id:r(e)},$y(i,t)?t:(i.sourceHandle===null&&delete i.sourceHandle,i.targetHandle===null&&delete i.targetHandle,t.concat(i))};function Lc({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,o,s,a]=Oc({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,o,s,a]}const Nl={[be.Left]:{x:-1,y:0},[be.Right]:{x:1,y:0},[be.Top]:{x:0,y:-1},[be.Bottom]:{x:0,y:1}},em=({source:e,sourcePosition:t=be.Bottom,target:n})=>t===be.Left||t===be.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Il=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function tm({source:e,sourcePosition:t=be.Bottom,target:n,targetPosition:r=be.Top,center:i,offset:o,stepPosition:s}){const a=Nl[t],u=Nl[r],c={x:e.x+a.x*o,y:e.y+a.y*o},d={x:n.x+u.x*o,y:n.y+u.y*o},h=em({source:c,sourcePosition:t,target:d}),f=h.x!==0?"x":"y",g=h[f];let v=[],_,p;const b={x:0,y:0},C={x:0,y:0},[,,P,w]=Oc({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[f]*u[f]===-1){f==="x"?(_=i.x??c.x+(d.x-c.x)*s,p=i.y??(c.y+d.y)/2):(_=i.x??(c.x+d.x)/2,p=i.y??c.y+(d.y-c.y)*s);const L=[{x:_,y:c.y},{x:_,y:d.y}],q=[{x:c.x,y:p},{x:d.x,y:p}];a[f]===g?v=f==="x"?L:q:v=f==="x"?q:L}else{const L=[{x:c.x,y:d.y}],q=[{x:d.x,y:c.y}];if(f==="x"?v=a.x===g?q:L:v=a.y===g?L:q,t===r){const x=Math.abs(e[f]-n[f]);if(x<=o){const S=Math.min(o-1,o-x);a[f]===g?b[f]=(c[f]>e[f]?-1:1)*S:C[f]=(d[f]>n[f]?-1:1)*S}}if(t!==r){const x=f==="x"?"y":"x",S=a[f]===u[x],m=c[x]>d[x],k=c[x]<d[x];(a[f]===1&&(!S&&m||S&&k)||a[f]!==1&&(!S&&k||S&&m))&&(v=f==="x"?L:q)}const O={x:c.x+b.x,y:c.y+b.y},R={x:d.x+C.x,y:d.y+C.y},J=Math.max(Math.abs(O.x-v[0].x),Math.abs(R.x-v[0].x)),N=Math.max(Math.abs(O.y-v[0].y),Math.abs(R.y-v[0].y));J>=N?(_=(O.x+R.x)/2,p=v[0].y):(_=v[0].x,p=(O.y+R.y)/2)}return[[e,{x:c.x+b.x,y:c.y+b.y},...v,{x:d.x+C.x,y:d.y+C.y},n],_,p,P,w]}function nm(e,t,n,r){const i=Math.min(Il(e,t)/2,Il(t,n)/2,r),{x:o,y:s}=t;if(e.x===o&&o===n.x||e.y===s&&s===n.y)return`L${o} ${s}`;if(e.y===s){const c=e.x<n.x?-1:1,d=e.y<n.y?1:-1;return`L ${o+i*c},${s}Q ${o},${s} ${o},${s+i*d}`}const a=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return`L ${o},${s+i*u}Q ${o},${s} ${o+i*a},${s}`}function Ia({sourceX:e,sourceY:t,sourcePosition:n=be.Bottom,targetX:r,targetY:i,targetPosition:o=be.Top,borderRadius:s=5,centerX:a,centerY:u,offset:c=20,stepPosition:d=.5}){const[h,f,g,v,_]=tm({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:o,center:{x:a,y:u},offset:c,stepPosition:d});return[h.reduce((b,C,P)=>{let w="";return P>0&&P<h.length-1?w=nm(h[P-1],C,h[P+1],s):w=`${P===0?"M":"L"}${C.x} ${C.y}`,b+=w,b},""),f,g,v,_]}function Sl(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function rm(e){var h;const{sourceNode:t,targetNode:n}=e;if(!Sl(t)||!Sl(n))return null;const r=t.internals.handleBounds||Tl(t.handles),i=n.internals.handleBounds||Tl(n.handles),o=Cl((r==null?void 0:r.source)??[],e.sourceHandle),s=Cl(e.connectionMode===Jr.Strict?(i==null?void 0:i.target)??[]:((i==null?void 0:i.target)??[]).concat((i==null?void 0:i.source)??[]),e.targetHandle);if(!o||!s)return(h=e.onError)==null||h.call(e,"008",Ni.error008(o?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=(o==null?void 0:o.position)||be.Bottom,u=(s==null?void 0:s.position)||be.Top,c=_r(t,o,a),d=_r(n,s,u);return{sourceX:c.x,sourceY:c.y,targetX:d.x,targetY:d.y,sourcePosition:a,targetPosition:u}}function Tl(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function _r(e,t,n=be.Left,r=!1){const i=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,o=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:s,height:a}=t??Ir(e);if(r)return{x:i+s/2,y:o+a/2};switch((t==null?void 0:t.position)??n){case be.Top:return{x:i+s/2,y:o};case be.Right:return{x:i+s,y:o+a/2};case be.Bottom:return{x:i+s/2,y:o+a};case be.Left:return{x:i,y:o+a/2}}}function Cl(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function Zs(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function im(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const o=new Set;return e.reduce((s,a)=>([a.markerStart||r,a.markerEnd||i].forEach(u=>{if(u&&typeof u=="object"){const c=Zs(u,t);o.has(c)||(s.push({id:c,color:u.color||n,...u}),o.add(c))}}),s),[]).sort((s,a)=>s.id.localeCompare(a.id))}const zc=1e3,om=10,Sa={nodeOrigin:[0,0],nodeExtent:Ws,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},sm={...Sa,checkEquality:!0};function Ta(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function am(e,t,n){const r=Ta(Sa,n);for(const i of e.values())if(i.parentId)Aa(i,e,t,r);else{const o=Ui(i,r.nodeOrigin),s=ei(i.extent)?i.extent:r.nodeExtent,a=pr(o,s,Ir(i));i.internals.positionAbsolute=a}}function lm(e,t){if(!e.handles)return e.measured?t==null?void 0:t.internals.handleBounds:void 0;const n=[],r=[];for(const i of e.handles){const o={id:i.id,width:i.width??1,height:i.height??1,nodeId:e.id,x:i.x,y:i.y,position:i.position,type:i.type};i.type==="source"?n.push(o):i.type==="target"&&r.push(o)}return{source:n,target:r}}function Ca(e){return e==="manual"}function um(e,t,n,r={}){var c,d;const i=Ta(sm,r),o={i:0},s=new Map(t),a=i!=null&&i.elevateNodesOnSelect&&!Ca(i.zIndexMode)?zc:0;let u=e.length>0;t.clear(),n.clear();for(const h of e){let f=s.get(h.id);if(i.checkEquality&&h===(f==null?void 0:f.internals.userNode))t.set(h.id,f);else{const g=Ui(h,i.nodeOrigin),v=ei(h.extent)?h.extent:i.nodeExtent,_=pr(g,v,Ir(h));f={...i.defaults,...h,measured:{width:(c=h.measured)==null?void 0:c.width,height:(d=h.measured)==null?void 0:d.height},internals:{positionAbsolute:_,handleBounds:lm(h,f),z:Fc(h,a,i.zIndexMode),userNode:h}},t.set(h.id,f)}(f.measured===void 0||f.measured.width===void 0||f.measured.height===void 0)&&!f.hidden&&(u=!1),h.parentId&&Aa(f,t,n,r,o)}return u}function cm(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function Aa(e,t,n,r,i){const{elevateNodesOnSelect:o,nodeOrigin:s,nodeExtent:a,zIndexMode:u}=Ta(Sa,r),c=e.parentId,d=t.get(c);if(!d){console.warn(`Parent node ${c} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}cm(e,n),i&&!d.parentId&&d.internals.rootParentIndex===void 0&&u==="auto"&&(d.internals.rootParentIndex=++i.i,d.internals.z=d.internals.z+i.i*om),i&&d.internals.rootParentIndex!==void 0&&(i.i=d.internals.rootParentIndex);const h=o&&!Ca(u)?zc:0,{x:f,y:g,z:v}=fm(e,d,s,a,h,u),{positionAbsolute:_}=e.internals,p=f!==_.x||g!==_.y;(p||v!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:p?{x:f,y:g}:_,z:v}})}function Fc(e,t,n){const r=xn(e.zIndex)?e.zIndex:0;return Ca(n)?r:r+(e.selected?t:0)}function fm(e,t,n,r,i,o){const{x:s,y:a}=t.internals.positionAbsolute,u=Ir(e),c=Ui(e,n),d=ei(e.extent)?pr(c,e.extent,u):c;let h=pr({x:s+d.x,y:a+d.y},r,u);e.extent==="parent"&&(h=Sc(h,u,t));const f=Fc(e,i,o),g=t.internals.z??0;return{x:h.x,y:h.y,z:g>=f?g+1:f}}function dm(e,t,n,r=[0,0]){var s;const i=[],o=new Map;for(const a of e){const u=t.get(a.parentId);if(!u)continue;const c=((s=o.get(a.parentId))==null?void 0:s.expandedRect)??$r(u),d=Hy(c,a.rect);o.set(a.parentId,{expandedRect:d,parent:u})}return o.size>0&&o.forEach(({expandedRect:a,parent:u},c)=>{var P;const d=u.internals.positionAbsolute,h=Ir(u),f=u.origin??r,g=a.x<d.x?Math.round(Math.abs(d.x-a.x)):0,v=a.y<d.y?Math.round(Math.abs(d.y-a.y)):0,_=Math.max(h.width,Math.round(a.width)),p=Math.max(h.height,Math.round(a.height)),b=(_-h.width)*f[0],C=(p-h.height)*f[1];(g>0||v>0||b||C)&&(i.push({id:c,type:"position",position:{x:u.position.x-g+b,y:u.position.y-v+C}}),(P=n.get(c))==null||P.forEach(w=>{e.some(M=>M.id===w.id)||i.push({id:w.id,type:"position",position:{x:w.position.x+g,y:w.position.y+v}})})),(h.width<a.width||h.height<a.height||g||v)&&i.push({id:c,type:"dimensions",setAttributes:!0,dimensions:{width:_+(g?f[0]*g-b:0),height:p+(v?f[1]*v-C:0)}})}),i}function hm(e,t,n,r,i,o,s){const a=r==null?void 0:r.querySelector(".xyflow__viewport");let u=!1;if(!a)return{changes:[],updatedInternals:u};const c=[],d=window.getComputedStyle(a),{m22:h}=new window.DOMMatrixReadOnly(d.transform),f=[];for(const g of e.values()){const v=t.get(g.id);if(!v)continue;if(v.hidden){t.set(v.id,{...v,internals:{...v.internals,handleBounds:void 0}}),u=!0;continue}const _=Cc(g.nodeElement),p=v.measured.width!==_.width||v.measured.height!==_.height;if(!!(_.width&&_.height&&(p||!v.internals.handleBounds||g.force))){const C=g.nodeElement.getBoundingClientRect(),P=ei(v.extent)?v.extent:o;let{positionAbsolute:w}=v.internals;v.parentId&&v.extent==="parent"?w=Sc(w,_,t.get(v.parentId)):P&&(w=pr(w,P,_));const M={...v,measured:_,internals:{...v.internals,positionAbsolute:w,handleBounds:{source:wl("source",g.nodeElement,C,h,v.id),target:wl("target",g.nodeElement,C,h,v.id)}}};t.set(v.id,M),v.parentId&&Aa(M,t,n,{nodeOrigin:i,zIndexMode:s}),u=!0,p&&(c.push({id:v.id,type:"dimensions",dimensions:_}),v.expandParent&&v.parentId&&f.push({id:v.id,parentId:v.parentId,rect:$r(M,i)}))}}if(f.length>0){const g=dm(f,t,n,i);c.push(...g)}return{changes:c,updatedInternals:u}}async function gm({delta:e,panZoom:t,transform:n,translateExtent:r,width:i,height:o}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const s=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[i,o]],r),a=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(a)}function Al(e,t,n,r,i,o){let s=i;const a=r.get(s)||new Map;r.set(s,a.set(n,t)),s=`${i}-${e}`;const u=r.get(s)||new Map;if(r.set(s,u.set(n,t)),o){s=`${i}-${e}-${o}`;const c=r.get(s)||new Map;r.set(s,c.set(n,t))}}function vm(e,t,n){e.clear(),t.clear();for(const r of n){const{source:i,target:o,sourceHandle:s=null,targetHandle:a=null}=r,u={edgeId:r.id,source:i,target:o,sourceHandle:s,targetHandle:a},c=`${i}-${s}--${o}-${a}`,d=`${o}-${a}--${i}-${s}`;Al("source",u,d,e,i,s),Al("target",u,c,e,o,a),t.set(r.id,r)}}function Rc(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:Rc(n,t):!1}function kl(e,t,n){var i;let r=e;do{if((i=r==null?void 0:r.matches)!=null&&i.call(r,t))return!0;if(r===n)return!1;r=r==null?void 0:r.parentElement}while(r);return!1}function ym(e,t,n,r){const i=new Map;for(const[o,s]of e)if((s.selected||s.id===r)&&(!s.parentId||!Rc(s,e))&&(s.draggable||t&&typeof s.draggable>"u")){const a=e.get(o);a&&i.set(o,{id:o,position:a.position||{x:0,y:0},distance:{x:n.x-a.internals.positionAbsolute.x,y:n.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return i}function gs({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var s,a,u;const i=[];for(const[c,d]of t){const h=(s=n.get(c))==null?void 0:s.internals.userNode;h&&i.push({...h,position:d.position,dragging:r})}if(!e)return[i[0],i];const o=(a=n.get(e))==null?void 0:a.internals.userNode;return[o?{...o,position:((u=t.get(e))==null?void 0:u.position)||o.position,dragging:r}:i[0],i]}function mm({dragItems:e,snapGrid:t,x:n,y:r}){const i=e.values().next().value;if(!i)return null;const o={x:n-i.distance.x,y:r-i.distance.y},s=ji(o,t);return{x:s.x-o.x,y:s.y-o.y}}function pm({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:i}){let o={x:null,y:null},s=0,a=new Map,u=!1,c={x:0,y:0},d=null,h=!1,f=null,g=!1,v=!1,_=null;function p({noDragClassName:C,handleSelector:P,domNode:w,isSelectable:M,nodeId:L,nodeClickDistance:q=0}){f=Ht(w);function O({x,y:S}){const{nodeLookup:m,nodeExtent:k,snapGrid:I,snapToGrid:F,nodeOrigin:B,onNodeDrag:Y,onSelectionDrag:H,onError:$,updateNodePositions:se}=t();o={x,y:S};let ae=!1;const K=a.size>1,me=K&&k?qs(jo(a)):null,ee=K&&F?mm({dragItems:a,snapGrid:I,x,y:S}):null;for(const[te,oe]of a){if(!m.has(te))continue;let ke={x:x-oe.distance.x,y:S-oe.distance.y};F&&(ke=ee?{x:Math.round(ke.x+ee.x),y:Math.round(ke.y+ee.y)}:ji(ke,I));let W=null;if(K&&k&&!oe.extent&&me){const{positionAbsolute:ge}=oe.internals,A=ge.x-me.x+k[0][0],z=ge.x+oe.measured.width-me.x2+k[1][0],G=ge.y-me.y+k[0][1],X=ge.y+oe.measured.height-me.y2+k[1][1];W=[[A,G],[z,X]]}const{position:ne,positionAbsolute:Ie}=Ic({nodeId:te,nextPosition:ke,nodeLookup:m,nodeExtent:W||k,nodeOrigin:B,onError:$});ae=ae||oe.position.x!==ne.x||oe.position.y!==ne.y,oe.position=ne,oe.internals.positionAbsolute=Ie}if(v=v||ae,!!ae&&(se(a,!0),_&&(r||Y||!L&&H))){const[te,oe]=gs({nodeId:L,dragItems:a,nodeLookup:m});r==null||r(_,a,te,oe),Y==null||Y(_,te,oe),L||H==null||H(_,oe)}}async function R(){if(!d)return;const{transform:x,panBy:S,autoPanSpeed:m,autoPanOnNodeDrag:k}=t();if(!k){u=!1,cancelAnimationFrame(s);return}const[I,F]=Tc(c,d,m);(I!==0||F!==0)&&(o.x=(o.x??0)-I/x[2],o.y=(o.y??0)-F/x[2],await S({x:I,y:F})&&O(o)),s=requestAnimationFrame(R)}function J(x){var K;const{nodeLookup:S,multiSelectionActive:m,nodesDraggable:k,transform:I,snapGrid:F,snapToGrid:B,selectNodesOnDrag:Y,onNodeDragStart:H,onSelectionDragStart:$,unselectNodesAndEdges:se}=t();h=!0,(!Y||!M)&&!m&&L&&((K=S.get(L))!=null&&K.selected||se()),M&&Y&&L&&(e==null||e(L));const ae=hs(x.sourceEvent,{transform:I,snapGrid:F,snapToGrid:B,containerBounds:d});if(o=ae,a=ym(S,k,ae,L),a.size>0&&(n||H||!L&&$)){const[me,ee]=gs({nodeId:L,dragItems:a,nodeLookup:S});n==null||n(x.sourceEvent,a,me,ee),H==null||H(x.sourceEvent,me,ee),L||$==null||$(x.sourceEvent,ee)}}const N=Rg().clickDistance(q).on("start",x=>{const{domNode:S,nodeDragThreshold:m,transform:k,snapGrid:I,snapToGrid:F}=t();d=(S==null?void 0:S.getBoundingClientRect())||null,g=!1,v=!1,_=x.sourceEvent,m===0&&J(x),o=hs(x.sourceEvent,{transform:k,snapGrid:I,snapToGrid:F,containerBounds:d}),c=Wt(x.sourceEvent,d)}).on("drag",x=>{const{autoPanOnNodeDrag:S,transform:m,snapGrid:k,snapToGrid:I,nodeDragThreshold:F,nodeLookup:B}=t(),Y=hs(x.sourceEvent,{transform:m,snapGrid:k,snapToGrid:I,containerBounds:d});if(_=x.sourceEvent,(x.sourceEvent.type==="touchmove"&&x.sourceEvent.touches.length>1||L&&!B.has(L))&&(g=!0),!g){if(!u&&S&&h&&(u=!0,R()),!h){const H=Wt(x.sourceEvent,d),$=H.x-c.x,se=H.y-c.y;Math.sqrt($*$+se*se)>F&&J(x)}(o.x!==Y.xSnapped||o.y!==Y.ySnapped)&&a&&h&&(c=Wt(x.sourceEvent,d),O(Y))}}).on("end",x=>{if(!(!h||g)&&(u=!1,h=!1,cancelAnimationFrame(s),a.size>0)){const{nodeLookup:S,updateNodePositions:m,onNodeDragStop:k,onSelectionDragStop:I}=t();if(v&&(m(a,!1),v=!1),i||k||!L&&I){const[F,B]=gs({nodeId:L,dragItems:a,nodeLookup:S,dragging:!1});i==null||i(x.sourceEvent,a,F,B),k==null||k(x.sourceEvent,F,B),L||I==null||I(x.sourceEvent,B)}}}).filter(x=>{const S=x.target;return!x.button&&(!C||!kl(S,`.${C}`,w))&&(!P||kl(S,P,w))});f.call(N)}function b(){f==null||f.on(".drag",null)}return{update:p,destroy:b}}function _m(e,t,n){const r=[],i={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const o of t.values())Ii(i,$r(o))>0&&r.push(o);return r}const bm=250;function xm(e,t,n,r){var a,u;let i=[],o=1/0;const s=_m(e,n,t+bm);for(const c of s){const d=[...((a=c.internals.handleBounds)==null?void 0:a.source)??[],...((u=c.internals.handleBounds)==null?void 0:u.target)??[]];for(const h of d){if(r.nodeId===h.nodeId&&r.type===h.type&&r.id===h.id)continue;const{x:f,y:g}=_r(c,h,h.position,!0),v=Math.sqrt(Math.pow(f-e.x,2)+Math.pow(g-e.y,2));v>t||(v<o?(i=[{...h,x:f,y:g}],o=v):v===o&&i.push({...h,x:f,y:g}))}}if(!i.length)return null;if(i.length>1){const c=r.type==="source"?"target":"source";return i.find(d=>d.type===c)??i[0]}return i[0]}function Vc(e,t,n,r,i,o=!1){var c,d,h;const s=r.get(e);if(!s)return null;const a=i==="strict"?(c=s.internals.handleBounds)==null?void 0:c[t]:[...((d=s.internals.handleBounds)==null?void 0:d.source)??[],...((h=s.internals.handleBounds)==null?void 0:h.target)??[]],u=(n?a==null?void 0:a.find(f=>f.id===n):a==null?void 0:a[0])??null;return u&&o?{...u,..._r(s,u,u.position,!0)}:u}function Bc(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function wm(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const Hc=()=>!0;function Em(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:o,isTarget:s,domNode:a,nodeLookup:u,lib:c,autoPanOnConnect:d,flowId:h,panBy:f,cancelConnection:g,onConnectStart:v,onConnect:_,onConnectEnd:p,isValidConnection:b=Hc,onReconnectEnd:C,updateConnection:P,getTransform:w,getFromHandle:M,autoPanSpeed:L,dragThreshold:q=1,handleDomNode:O}){const R=Ac(e.target);let J=0,N;const{x,y:S}=Wt(e),m=Bc(o,O),k=a==null?void 0:a.getBoundingClientRect();let I=!1;if(!k||!m)return;const F=Vc(i,m,r,u,t);if(!F)return;let B=Wt(e,k),Y=!1,H=null,$=!1,se=null;function ae(){if(!d||!k)return;const[ne,Ie]=Tc(B,k,L);f({x:ne,y:Ie}),J=requestAnimationFrame(ae)}const K={...F,nodeId:i,type:m,position:F.position},me=u.get(i);let te={inProgress:!0,isValid:null,from:_r(me,K,be.Left,!0),fromHandle:K,fromPosition:K.position,fromNode:me,to:B,toHandle:null,toPosition:pl[K.position],toNode:null,pointer:B};function oe(){I=!0,P(te),v==null||v(e,{nodeId:i,handleId:r,handleType:m})}q===0&&oe();function ke(ne){if(!I){const{x:X,y:U}=Wt(ne),j=X-x,Q=U-S;if(!(j*j+Q*Q>q*q))return;oe()}if(!M()||!K){W(ne);return}const Ie=w();B=Wt(ne,k),N=xm(Ji(B,Ie,!1,[1,1]),n,u,K),Y||(ae(),Y=!0);const ge=Kc(ne,{handle:N,connectionMode:t,fromNodeId:i,fromHandleId:r,fromType:s?"target":"source",isValidConnection:b,doc:R,lib:c,flowId:h,nodeLookup:u});se=ge.handleDomNode,H=ge.connection,$=wm(!!N,ge.isValid);const A=u.get(i),z=A?_r(A,K,be.Left,!0):te.from,G={...te,from:z,isValid:$,to:ge.toHandle&&$?Ao({x:ge.toHandle.x,y:ge.toHandle.y},Ie):B,toHandle:ge.toHandle,toPosition:$&&ge.toHandle?ge.toHandle.position:pl[K.position],toNode:ge.toHandle?u.get(ge.toHandle.nodeId):null,pointer:B};P(G),te=G}function W(ne){if(!("touches"in ne&&ne.touches.length>0)){if(I){(N||se)&&H&&$&&(_==null||_(H));const{inProgress:Ie,...ge}=te,A={...ge,toPosition:te.toHandle?te.toPosition:null};p==null||p(ne,A),o&&(C==null||C(ne,A))}g(),cancelAnimationFrame(J),Y=!1,$=!1,H=null,se=null,R.removeEventListener("mousemove",ke),R.removeEventListener("mouseup",W),R.removeEventListener("touchmove",ke),R.removeEventListener("touchend",W)}}R.addEventListener("mousemove",ke),R.addEventListener("mouseup",W),R.addEventListener("touchmove",ke),R.addEventListener("touchend",W)}function Kc(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:o,doc:s,lib:a,flowId:u,isValidConnection:c=Hc,nodeLookup:d}){const h=o==="target",f=t?s.querySelector(`.${a}-flow__handle[data-id="${u}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:g,y:v}=Wt(e),_=s.elementFromPoint(g,v),p=_!=null&&_.classList.contains(`${a}-flow__handle`)?_:f,b={handleDomNode:p,isValid:!1,connection:null,toHandle:null};if(p){const C=Bc(void 0,p),P=p.getAttribute("data-nodeid"),w=p.getAttribute("data-handleid"),M=p.classList.contains("connectable"),L=p.classList.contains("connectableend");if(!P||!C)return b;const q={source:h?P:r,sourceHandle:h?w:i,target:h?r:P,targetHandle:h?i:w};b.connection=q;const R=M&&L&&(n===Jr.Strict?h&&C==="source"||!h&&C==="target":P!==r||w!==i);b.isValid=R&&c(q),b.toHandle=Vc(P,C,w,d,n,!0)}return b}const Ml={onPointerDown:Em,isValid:Kc},$o=e=>({x:e.x,y:e.y,zoom:e.k}),vs=({x:e,y:t,zoom:n})=>Uo.translate(e,t).scale(n),kr=(e,t)=>e.target.closest(`.${t}`),Yc=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Nm=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,ys=(e,t=0,n=Nm,r=()=>{})=>{const i=typeof t=="number"&&t>0;return i||r(),i?e.transition().duration(t).ease(n).on("end",r):e},Xc=e=>{const t=e.ctrlKey&&ko()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function Im({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:o,zoomOnPinch:s,onPanZoomStart:a,onPanZoom:u,onPanZoomEnd:c}){return d=>{if(kr(d,t))return d.ctrlKey&&d.preventDefault(),!1;d.preventDefault(),d.stopImmediatePropagation();const h=n.property("__zoom").k||1;if(d.ctrlKey&&s){const p=Zt(d),b=Xc(d),C=h*Math.pow(2,b);r.scaleTo(n,C,p,d);return}const f=d.deltaMode===1?20:1;let g=i===Or.Vertical?0:d.deltaX*f,v=i===Or.Horizontal?0:d.deltaY*f;!ko()&&d.shiftKey&&i!==Or.Vertical&&(g=d.deltaY*f,v=0),r.translateBy(n,-(g/h)*o,-(v/h)*o,{internal:!0});const _=$o(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(u==null||u(d,_),e.panScrollTimeout=setTimeout(()=>{c==null||c(d,_),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,a==null||a(d,_))}}function Sm({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,i){const o=r.type==="wheel",s=!t&&o&&!r.ctrlKey,a=kr(r,e);if(r.ctrlKey&&o&&a&&r.preventDefault(),s||a)return null;r.preventDefault(),n.call(this,r,i)}}function Tm({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var o,s,a;if((o=r.sourceEvent)!=null&&o.internal)return;const i=$o(r.transform);e.mouseButton=((s=r.sourceEvent)==null?void 0:s.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=i,((a=r.sourceEvent)==null?void 0:a.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,i))}}function Cm({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return o=>{var s,a;e.usedRightMouseButton=!!(n&&Yc(t,e.mouseButton??0)),(s=o.sourceEvent)!=null&&s.sync||r([o.transform.x,o.transform.y,o.transform.k]),i&&!((a=o.sourceEvent)!=null&&a.internal)&&(i==null||i(o.sourceEvent,$o(o.transform)))}}function Am({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:o}){return s=>{var a;if(!((a=s.sourceEvent)!=null&&a.internal)&&(e.isZoomingOrPanning=!1,o&&Yc(t,e.mouseButton??0)&&!e.usedRightMouseButton&&s.sourceEvent&&o(s.sourceEvent),e.usedRightMouseButton=!1,r(!1),i)){const u=$o(s.transform);e.prevViewport=u,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{i==null||i(s.sourceEvent,u)},n?150:0)}}}function km({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:o,userSelectionActive:s,noWheelClassName:a,noPanClassName:u,lib:c,connectionInProgress:d}){return h=>{var p;const f=e||t,g=n&&h.ctrlKey,v=h.type==="wheel";if(h.button===1&&h.type==="mousedown"&&(kr(h,`${c}-flow__node`)||kr(h,`${c}-flow__edge`)))return!0;if(!r&&!f&&!i&&!o&&!n||s||d&&!v||kr(h,a)&&v||kr(h,u)&&(!v||i&&v&&!e)||!n&&h.ctrlKey&&v)return!1;if(!n&&h.type==="touchstart"&&((p=h.touches)==null?void 0:p.length)>1)return h.preventDefault(),!1;if(!f&&!i&&!g&&v||!r&&(h.type==="mousedown"||h.type==="touchstart")||Array.isArray(r)&&!r.includes(h.button)&&h.type==="mousedown")return!1;const _=Array.isArray(r)&&r.includes(h.button)||!h.button||h.button<=1;return(!h.ctrlKey||v)&&_}}function Mm({domNode:e,minZoom:t,maxZoom:n,translateExtent:r,viewport:i,onPanZoom:o,onPanZoomStart:s,onPanZoomEnd:a,onDraggingChange:u}){const c={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},d=e.getBoundingClientRect(),h=My().scaleExtent([t,n]).translateExtent(r),f=Ht(e).call(h);C({x:i.x,y:i.y,zoom:Qr(i.zoom,t,n)},[[0,0],[d.width,d.height]],r);const g=f.on("wheel.zoom"),v=f.on("dblclick.zoom");h.wheelDelta(Xc);function _(N,x){return f?new Promise(S=>{h==null||h.interpolate((x==null?void 0:x.interpolate)==="linear"?vi:go).transform(ys(f,x==null?void 0:x.duration,x==null?void 0:x.ease,()=>S(!0)),N)}):Promise.resolve(!1)}function p({noWheelClassName:N,noPanClassName:x,onPaneContextMenu:S,userSelectionActive:m,panOnScroll:k,panOnDrag:I,panOnScrollMode:F,panOnScrollSpeed:B,preventScrolling:Y,zoomOnPinch:H,zoomOnScroll:$,zoomOnDoubleClick:se,zoomActivationKeyPressed:ae,lib:K,onTransformChange:me,connectionInProgress:ee,paneClickDistance:te,selectionOnDrag:oe}){m&&!c.isZoomingOrPanning&&b();const ke=k&&!ae&&!m;h.clickDistance(oe?1/0:!xn(te)||te<0?0:te);const W=ke?Im({zoomPanValues:c,noWheelClassName:N,d3Selection:f,d3Zoom:h,panOnScrollMode:F,panOnScrollSpeed:B,zoomOnPinch:H,onPanZoomStart:s,onPanZoom:o,onPanZoomEnd:a}):Sm({noWheelClassName:N,preventScrolling:Y,d3ZoomHandler:g});if(f.on("wheel.zoom",W,{passive:!1}),!m){const Ie=Tm({zoomPanValues:c,onDraggingChange:u,onPanZoomStart:s});h.on("start",Ie);const ge=Cm({zoomPanValues:c,panOnDrag:I,onPaneContextMenu:!!S,onPanZoom:o,onTransformChange:me});h.on("zoom",ge);const A=Am({zoomPanValues:c,panOnDrag:I,panOnScroll:k,onPaneContextMenu:S,onPanZoomEnd:a,onDraggingChange:u});h.on("end",A)}const ne=km({zoomActivationKeyPressed:ae,panOnDrag:I,zoomOnScroll:$,panOnScroll:k,zoomOnDoubleClick:se,zoomOnPinch:H,userSelectionActive:m,noPanClassName:x,noWheelClassName:N,lib:K,connectionInProgress:ee});h.filter(ne),se?f.on("dblclick.zoom",v):f.on("dblclick.zoom",null)}function b(){h.on("zoom",null)}async function C(N,x,S){const m=vs(N),k=h==null?void 0:h.constrain()(m,x,S);return k&&await _(k),new Promise(I=>I(k))}async function P(N,x){const S=vs(N);return await _(S,x),new Promise(m=>m(S))}function w(N){if(f){const x=vs(N),S=f.property("__zoom");(S.k!==N.zoom||S.x!==N.x||S.y!==N.y)&&(h==null||h.transform(f,x,null,{sync:!0}))}}function M(){const N=f?wc(f.node()):{x:0,y:0,k:1};return{x:N.x,y:N.y,zoom:N.k}}function L(N,x){return f?new Promise(S=>{h==null||h.interpolate((x==null?void 0:x.interpolate)==="linear"?vi:go).scaleTo(ys(f,x==null?void 0:x.duration,x==null?void 0:x.ease,()=>S(!0)),N)}):Promise.resolve(!1)}function q(N,x){return f?new Promise(S=>{h==null||h.interpolate((x==null?void 0:x.interpolate)==="linear"?vi:go).scaleBy(ys(f,x==null?void 0:x.duration,x==null?void 0:x.ease,()=>S(!0)),N)}):Promise.resolve(!1)}function O(N){h==null||h.scaleExtent(N)}function R(N){h==null||h.translateExtent(N)}function J(N){const x=!xn(N)||N<0?0:N;h==null||h.clickDistance(x)}return{update:p,destroy:b,setViewport:P,setViewportConstrained:C,getViewport:M,scaleTo:L,scaleBy:q,setScaleExtent:O,setTranslateExtent:R,syncViewport:w,setClickDistance:J}}var Pl;(function(e){e.Line="line",e.Handle="handle"})(Pl||(Pl={}));function ka(){const e={};return[t=>{if(t&&!Rf(e))throw new Error(t);return na(e)},t=>ra(e,t)]}const[Pm,Om]=ka(),[Dm,Lm]=ka(),[zm,Fm]=ka();var Rm=pe("<div><!></div>");function ti(e,t){xe(t,!0);let n=Z(t,"id",3,null),r=Z(t,"type",3,"source"),i=Z(t,"position",19,()=>be.Top),o=Z(t,"isConnectableStart",3,!0),s=Z(t,"isConnectableEnd",3,!0),a=Gi(t,["$$slots","$$events","$$legacy","id","type","position","style","class","isConnectable","isConnectableStart","isConnectableEnd","isValidConnection","onconnect","ondisconnect","children"]);const u=Pm("Handle must be used within a Custom Node component"),c=Dm("Handle must be used within a Custom Node component");let d=T(()=>r()==="target"),h=T(()=>t.isConnectable!==void 0?t.isConnectable:c.value),f=oi(),g=T(()=>f.ariaLabelConfig),v=null;Nu(()=>{if(t.onconnect||t.ondisconnect){f.edges;let x=f.connectionLookup.get(`${u}-${r()}${n()?`-${n()}`:""}`);if(v&&!Oy(x,v)){const S=x??new Map;_l(v,S,t.ondisconnect),_l(S,v,t.onconnect)}v=new Map(x)}});let _=T(()=>{if(!f.connection.inProgress)return[!1,!1,!1,!1,null];const{fromHandle:x,toHandle:S,isValid:m}=f.connection,k=x&&x.nodeId===u&&x.type===r()&&x.id===n(),I=S&&S.nodeId===u&&S.type===r()&&S.id===n(),F=f.connectionMode===Jr.Strict?(x==null?void 0:x.type)!==r():u!==(x==null?void 0:x.nodeId)||n()!==(x==null?void 0:x.id);return[!0,k,I,F,I&&m]}),p=T(()=>Fi(l(_),5)),b=T(()=>l(p)[0]),C=T(()=>l(p)[1]),P=T(()=>l(p)[2]),w=T(()=>l(p)[3]),M=T(()=>l(p)[4]);function L(x){var m;const S=f.onbeforeconnect?f.onbeforeconnect(x):x;S&&(f.addEdge(S),(m=f.onconnect)==null||m.call(f,x))}function q(x){const S=Mc(x);x.currentTarget&&(S&&x.button===0||!S)&&Ml.onPointerDown(x,{handleId:n(),nodeId:u,isTarget:l(d),connectionRadius:f.connectionRadius,domNode:f.domNode,nodeLookup:f.nodeLookup,connectionMode:f.connectionMode,lib:"svelte",autoPanOnConnect:f.autoPanOnConnect,autoPanSpeed:f.autoPanSpeed,flowId:f.flowId,isValidConnection:t.isValidConnection??f.isValidConnection,updateConnection:f.updateConnection,cancelConnection:f.cancelConnection,panBy:f.panBy,onConnect:L,onConnectStart:(m,k)=>{var I;(I=f.onconnectstart)==null||I.call(f,m,{nodeId:k.nodeId,handleId:k.handleId,handleType:k.handleType})},onConnectEnd:(m,k)=>{var I;(I=f.onconnectend)==null||I.call(f,m,k)},getTransform:()=>[f.viewport.x,f.viewport.y,f.viewport.zoom],getFromHandle:()=>f.connection.fromHandle,dragThreshold:f.connectionDragThreshold,handleDomNode:x.currentTarget})}function O(x){var se,ae;if(!u||!f.clickConnectStartHandle&&!o())return;if(!f.clickConnectStartHandle){(se=f.onclickconnectstart)==null||se.call(f,x,{nodeId:u,handleId:n(),handleType:r()}),f.clickConnectStartHandle={nodeId:u,type:r(),id:n()};return}const S=Ac(x.target),m=t.isValidConnection??f.isValidConnection,{connectionMode:k,clickConnectStartHandle:I,flowId:F,nodeLookup:B}=f,{connection:Y,isValid:H}=Ml.isValid(x,{handle:{nodeId:u,id:n(),type:r()},connectionMode:k,fromNodeId:I.nodeId,fromHandleId:I.id??null,fromType:I.type,isValidConnection:m,flowId:F,doc:S,lib:"svelte",nodeLookup:B});H&&Y&&L(Y);const $=structuredClone(nu(f.connection));delete $.inProgress,$.toPosition=$.toHandle?$.toHandle.position:null,(ae=f.onclickconnectend)==null||ae.call(f,x,$),f.clickConnectStartHandle=null}var R=Rm(),J=()=>{};Er(R,()=>({"data-handleid":n(),"data-nodeid":u,"data-handlepos":i(),"data-id":`${f.flowId??""}-${u??""}-${n()??"null"??""}-${r()??""}`,class:["svelte-flow__handle",`svelte-flow__handle-${i()}`,f.noDragClass,f.noPanClass,i(),t.class],onmousedown:q,ontouchstart:q,onclick:f.clickConnect?O:void 0,onkeypress:J,style:t.style,role:"button","aria-label":l(g)["handle.ariaLabel"],tabindex:"-1",...a,[Fn]:{valid:l(M),connectingto:l(P),connectingfrom:l(C),source:!l(d),target:l(d),connectablestart:o(),connectableend:s(),connectable:l(h),connectionindicator:l(h)&&(!l(b)||l(w))&&(l(b)||f.clickConnectStartHandle?s():o())}}));var N=ce(R);Cn(N,()=>t.children??br),ie(e,R),we()}var Vm=pe("<!> <!>",1);function Wc(e,t){xe(t,!0);let n=Z(t,"targetPosition",19,()=>be.Top),r=Z(t,"sourcePosition",19,()=>be.Bottom);var i=Vm(),o=Ge(i);ti(o,{type:"target",get position(){return n()}});var s=Se(o),a=Se(s);ti(a,{type:"source",get position(){return r()}}),Ne(()=>{var u;return qe(s,` ${((u=t.data)==null?void 0:u.label)??""} `)}),ie(e,i),we()}var Bm=pe(" <!>",1);function Hm(e,t){xe(t,!0);let n=Z(t,"data",19,()=>({label:"Node"})),r=Z(t,"sourcePosition",19,()=>be.Bottom);var i=Bm(),o=Ge(i),s=Se(o);ti(s,{type:"source",get position(){return r()}}),Ne(()=>{var a;return qe(o,`${((a=n())==null?void 0:a.label)??""} `)}),ie(e,i),we()}var Km=pe(" <!>",1);function Ym(e,t){xe(t,!0);let n=Z(t,"data",19,()=>({label:"Node"})),r=Z(t,"targetPosition",19,()=>be.Top);var i=Km(),o=Ge(i),s=Se(o);ti(s,{type:"target",get position(){return r()}}),Ne(()=>{var a;return qe(o,`${((a=n())==null?void 0:a.label)??""} `)}),ie(e,i),we()}function Xm(e,t){}function ms(e,t,n){if(!n||!t)return;const r=n==="root"?t:t.querySelector(`.svelte-flow__${n}`);r&&r.appendChild(e)}function ps(e,t){const n=T(oi),r=T(()=>l(n).domNode);let i;return l(r)?ms(e,l(r),t):i=Iu(()=>{on(()=>{ms(e,l(r),t),i==null||i()})}),{async update(o){ms(e,l(r),o)},destroy(){e.parentNode&&e.parentNode.removeChild(e),i==null||i()}}}function Wm(){let e=Ve(typeof window>"u");if(l(e)){const t=Iu(()=>{on(()=>{D(e,!1),t==null||t()})})}return{get value(){return l(e)}}}const Ol=e=>Ly(e),Gm=e=>Nc(e);function an(e){return e===void 0?void 0:`${e}px`}const Mo={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var qm=pe("<div><!></div>");function Zm(e,t){xe(t,!0);let n=Z(t,"x",3,0),r=Z(t,"y",3,0),i=Z(t,"selectEdgeOnClick",3,!1),o=Z(t,"transparent",3,!1),s=Gi(t,["$$slots","$$events","$$legacy","x","y","width","height","selectEdgeOnClick","transparent","class","children"]);const a=oi(),u=zm("EdgeLabel must be used within a Custom Edge component");let c=T(()=>{var g;return(g=a.visible.edges.get(u))==null?void 0:g.zIndex});var d=qm(),h=()=>{i()&&u&&a.handleEdgeSelection(u)};Er(d,g=>({class:["svelte-flow__edge-label",{transparent:o()},t.class],tabindex:"-1",onclick:h,...s,[Rn]:g}),[()=>({display:Wm().value?"none":void 0,cursor:i()?"pointer":void 0,transform:`translate(-50%, -50%) translate(${n()??""}px,${r()??""}px)`,"pointer-events":"all",width:an(t.width),height:an(t.height),"z-index":l(c)})],void 0,void 0,"svelte-1g6l770");var f=ce(d);Cn(f,()=>t.children??br),gt(d,(g,v)=>ps==null?void 0:ps(g,v),()=>"edge-labels"),ie(e,d),we()}var Um=Rt("<path></path>"),jm=Rt('<path fill="none"></path><!><!>',1);function es(e,t){let n=Z(t,"interactionWidth",3,20),r=Gi(t,["$$slots","$$events","$$legacy","id","path","label","labelX","labelY","labelStyle","markerStart","markerEnd","style","interactionWidth","class"]);var i=jm(),o=Ge(i),s=Se(o);{var a=d=>{var h=Um();Er(h,()=>({d:t.path,"stroke-opacity":0,"stroke-width":n(),fill:"none",class:"svelte-flow__edge-interaction",...r})),ie(d,h)};Ze(s,d=>{n()>0&&d(a)})}var u=Se(s);{var c=d=>{Zm(d,{get x(){return t.labelX},get y(){return t.labelY},get style(){return t.labelStyle},selectEdgeOnClick:!0,children:(h,f)=>{var g=Id();Ne(()=>qe(g,t.label)),ie(h,g)},$$slots:{default:!0}})};Ze(u,d=>{t.label&&d(c)})}Ne(()=>{he(o,"id",t.id),he(o,"d",t.path),An(o,0,wr(["svelte-flow__edge-path",t.class])),he(o,"marker-start",t.markerStart),he(o,"marker-end",t.markerEnd),Dt(o,t.style)}),ie(e,i)}function Gc(e,t){xe(t,!0);let n=T(()=>{var a;return Pc({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition,curvature:(a=t.pathOptions)==null?void 0:a.curvature})}),r=T(()=>Fi(l(n),3)),i=T(()=>l(r)[0]),o=T(()=>l(r)[1]),s=T(()=>l(r)[2]);es(e,{get id(){return t.id},get path(){return l(i)},get labelX(){return l(o)},get labelY(){return l(s)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),we()}function Jm(e,t){xe(t,!0);let n=T(()=>Ia({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition})),r=T(()=>Fi(l(n),3)),i=T(()=>l(r)[0]),o=T(()=>l(r)[1]),s=T(()=>l(r)[2]);es(e,{get path(){return l(i)},get labelX(){return l(o)},get labelY(){return l(s)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),we()}function Qm(e,t){xe(t,!0);let n=T(()=>Lc({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY})),r=T(()=>Fi(l(n),3)),i=T(()=>l(r)[0]),o=T(()=>l(r)[1]),s=T(()=>l(r)[2]);es(e,{get path(){return l(i)},get labelX(){return l(o)},get labelY(){return l(s)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),we()}function $m(e,t){xe(t,!0);let n=T(()=>Ia({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition,borderRadius:0})),r=T(()=>Fi(l(n),3)),i=T(()=>l(r)[0]),o=T(()=>l(r)[1]),s=T(()=>l(r)[2]);es(e,{get path(){return l(i)},get labelX(){return l(o)},get labelY(){return l(s)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),we()}var Di,Li;class ep{constructor(t,n){V(this,Di);V(this,Li);Ee(this,Di,t),Ee(this,Li,du(n))}get current(){return y(this,Li).call(this),y(this,Di).call(this)}}Di=new WeakMap,Li=new WeakMap;const tp=/\(.+\)/,np=new Set(["all","print","screen","and","or","not","only"]);class rp extends ep{constructor(t,n){let r=tp.test(t)||t.split(/[\s,]+/).some(o=>np.has(o.trim()))?t:`(${t})`;const i=window.matchMedia(r);super(()=>i.matches,o=>Os(i,"change",o))}}function ip(e,t,n,r){const i=new Map;return Ea(e,{x:0,y:0,width:n,height:r},t,!0).forEach(o=>{i.set(o.id,o)}),i}function Dl(e){const{edges:t,defaultEdgeOptions:n,nodeLookup:r,previousEdges:i,connectionMode:o,onerror:s,onlyRenderVisible:a,elevateEdgesOnSelect:u,zIndexMode:c}=e,d=new Map;for(const h of t){const f=r.get(h.source),g=r.get(h.target);if(!f||!g)continue;if(a){const{visibleNodes:p,transform:b,width:C,height:P}=e;if(Jy({sourceNode:f,targetNode:g,width:C,height:P,transform:b}))p.set(f.id,f),p.set(g.id,g);else continue}const v=i.get(h.id);if(v&&h===v.edge&&f==v.sourceNode&&g==v.targetNode){d.set(h.id,v);continue}const _=rm({id:h.id,sourceNode:f,targetNode:g,sourceHandle:h.sourceHandle||null,targetHandle:h.targetHandle||null,connectionMode:o,onError:s});_&&d.set(h.id,{...n,...h,..._,zIndex:jy({selected:h.selected,zIndex:h.zIndex??n.zIndex,sourceNode:f,targetNode:g,elevateOnSelect:u,zIndexMode:c}),sourceNode:f,targetNode:g,edge:h})}return d}const qc={input:Hm,output:Ym,default:Wc,group:Xm},Zc={straight:Qm,smoothstep:Jm,default:Gc,step:$m};function op(e,t,n,r,i,o){if(t&&!n&&r&&i){const s=jo(o,{filter:a=>!!((a.width||a.initialWidth)&&(a.height||a.initialHeight))});return Na(s,r,i,.5,2,.1)}else return n??{x:0,y:0,zoom:1}}function sp(e){var n,r,i,o,s,a,u,c,d,h,f,g,v,_,p,b,C,P,w,M,L,q,O,R,J,N,x,S,m,k,I,F,B,Y,H,$,se,ae,K,me,ee,te,oe,ke,W,ne,Ie,ge,A,z,G,X,U,j,Q,ue,Le,Ye,ye,Be,nt,ct,xt,wt,Me,fe,Pe,Ue,Xe,at,lt,Ke,je,ft,kn,Mn;class t{constructor(){V(this,n,T(()=>e.props.id??"1"));V(this,r,Ve(null));V(this,i,Ve(null));V(this,o,Ve(e.width??0));V(this,s,Ve(e.height??0));V(this,a,Ve(e.props.zIndexMode??"basic"));V(this,u,T(()=>{var De;const E=um(e.nodes,this.nodeLookup,this.parentLookup,{nodeExtent:this.nodeExtent,nodeOrigin:this.nodeOrigin,elevateNodesOnSelect:e.props.elevateNodesOnSelect??!0,checkEquality:!0,zIndexMode:this.zIndexMode});return this.fitViewQueued&&E&&((De=this.fitViewOptions)!=null&&De.duration?this.resolveFitView():queueMicrotask(()=>{this.resolveFitView()})),E}));V(this,c,T(()=>this.panZoom!==null));V(this,d,T(()=>(vm(this.connectionLookup,this.edgeLookup,e.edges),e.edges)));He(this,"_prevSelectedNodes",[]);He(this,"_prevSelectedNodeIds",new Set);V(this,h,T(()=>{const E=this._prevSelectedNodeIds.size,De=new Set,Je=this.nodes.filter(Te=>(Te.selected&&(De.add(Te.id),this._prevSelectedNodeIds.delete(Te.id)),Te.selected));return(E!==De.size||this._prevSelectedNodeIds.size>0)&&(this._prevSelectedNodes=Je),this._prevSelectedNodeIds=De,this._prevSelectedNodes}));He(this,"_prevSelectedEdges",[]);He(this,"_prevSelectedEdgeIds",new Set);V(this,f,T(()=>{const E=this._prevSelectedEdgeIds.size,De=new Set,Je=this.edges.filter(Te=>(Te.selected&&(De.add(Te.id),this._prevSelectedEdgeIds.delete(Te.id)),Te.selected));return(E!==De.size||this._prevSelectedEdgeIds.size>0)&&(this._prevSelectedEdges=Je),this._prevSelectedEdgeIds=De,this._prevSelectedEdges}));He(this,"selectionChangeHandlers",new Map);He(this,"nodeLookup",new Map);He(this,"parentLookup",new Map);He(this,"connectionLookup",new Map);He(this,"edgeLookup",new Map);He(this,"_prevVisibleEdges",new Map);V(this,g,T(()=>{const{nodes:E,_edges:De,_prevVisibleEdges:Je,nodeLookup:Te,connectionMode:dn,onerror:Sr,onlyRenderVisibleElements:Tr,defaultEdgeOptions:Pn,zIndexMode:Cr}=this;let Qn,ts;const Da={edges:De,defaultEdgeOptions:Pn,previousEdges:Je,nodeLookup:Te,connectionMode:dn,elevateEdgesOnSelect:e.props.elevateEdgesOnSelect??!0,zIndexMode:Cr,onerror:Sr};if(Tr){const{viewport:ns,width:La,height:za}=this,Fa=[ns.x,ns.y,ns.zoom];Qn=ip(Te,Fa,La,za),ts=Dl({...Da,onlyRenderVisible:!0,visibleNodes:Qn,transform:Fa,width:La,height:za})}else Qn=this.nodeLookup,ts=Dl(Da);return{nodes:Qn,edges:ts}}));V(this,v,T(()=>e.props.nodesDraggable??!0));V(this,_,T(()=>e.props.nodesConnectable??!0));V(this,p,T(()=>e.props.elementsSelectable??!0));V(this,b,T(()=>e.props.nodesFocusable??!0));V(this,C,T(()=>e.props.edgesFocusable??!0));V(this,P,T(()=>e.props.disableKeyboardA11y??!1));V(this,w,T(()=>e.props.minZoom??.5));V(this,M,T(()=>e.props.maxZoom??2));V(this,L,T(()=>e.props.nodeOrigin??[0,0]));V(this,q,T(()=>e.props.nodeExtent??Ws));V(this,O,T(()=>e.props.translateExtent??Ws));V(this,R,T(()=>e.props.defaultEdgeOptions??{}));V(this,J,T(()=>e.props.nodeDragThreshold??1));V(this,N,T(()=>e.props.autoPanOnNodeDrag??!0));V(this,x,T(()=>e.props.autoPanOnConnect??!0));V(this,S,T(()=>e.props.autoPanOnNodeFocus??!0));V(this,m,T(()=>e.props.autoPanSpeed??15));V(this,k,T(()=>e.props.connectionDragThreshold??1));He(this,"fitViewQueued",e.props.fitView??!1);He(this,"fitViewOptions",e.props.fitViewOptions);He(this,"fitViewResolver",null);V(this,I,T(()=>e.props.snapGrid??null));V(this,F,Ve(!1));V(this,B,Ve(null));V(this,Y,Ve(!1));V(this,H,Ve(!1));V(this,$,Ve(!1));V(this,se,Ve(!1));V(this,ae,Ve(!1));V(this,K,Ve(null));V(this,me,Ve(""));V(this,ee,T(()=>e.props.selectionMode??So.Partial));V(this,te,T(()=>({...qc,...e.props.nodeTypes})));V(this,oe,T(()=>({...Zc,...e.props.edgeTypes})));V(this,ke,T(()=>e.props.noPanClass??"nopan"));V(this,W,T(()=>e.props.noDragClass??"nodrag"));V(this,ne,T(()=>e.props.noWheelClass??"nowheel"));V(this,Ie,T(()=>qy(e.props.ariaLabelConfig)));V(this,ge,Ve(op(this.nodesInitialized,e.props.fitView,e.props.initialViewport,this.width,this.height,this.nodeLookup)));V(this,A,Ve(Gs));V(this,z,T(()=>this._connection.inProgress?{...this._connection,to:Ji(this._connection.to,[this.viewport.x,this.viewport.y,this.viewport.zoom])}:this._connection));V(this,G,T(()=>e.props.connectionMode??Jr.Strict));V(this,X,T(()=>e.props.connectionRadius??20));V(this,U,T(()=>e.props.isValidConnection??(()=>!0)));V(this,j,T(()=>e.props.selectNodesOnDrag??!0));V(this,Q,T(()=>e.props.defaultMarkerColor===void 0?"#b1b1b7":e.props.defaultMarkerColor));V(this,ue,T(()=>im(e.edges,{defaultColor:this.defaultMarkerColor,id:this.flowId,defaultMarkerStart:this.defaultEdgeOptions.markerStart,defaultMarkerEnd:this.defaultEdgeOptions.markerEnd})));V(this,Le,T(()=>e.props.onlyRenderVisibleElements??!1));V(this,Ye,T(()=>e.props.onflowerror??Ky));V(this,ye,T(()=>e.props.ondelete));V(this,Be,T(()=>e.props.onbeforedelete));V(this,nt,T(()=>e.props.onbeforeconnect));V(this,ct,T(()=>e.props.onconnect));V(this,xt,T(()=>e.props.onconnectstart));V(this,wt,T(()=>e.props.onconnectend));V(this,Me,T(()=>e.props.onbeforereconnect));V(this,fe,T(()=>e.props.onreconnect));V(this,Pe,T(()=>e.props.onreconnectstart));V(this,Ue,T(()=>e.props.onreconnectend));V(this,Xe,T(()=>e.props.clickConnect??!0));V(this,at,T(()=>e.props.onclickconnectstart));V(this,lt,T(()=>e.props.onclickconnectend));V(this,Ke,Ve(null));V(this,je,T(()=>e.props.onselectiondrag));V(this,ft,T(()=>e.props.onselectiondragstart));V(this,kn,T(()=>e.props.onselectiondragstop));He(this,"resolveFitView",async()=>{var E;this.panZoom&&(await Vy({nodes:this.nodeLookup,width:this.width,height:this.height,panZoom:this.panZoom,minZoom:this.minZoom,maxZoom:this.maxZoom},this.fitViewOptions),(E=this.fitViewResolver)==null||E.resolve(!0),this.fitViewQueued=!1,this.fitViewOptions=void 0,this.fitViewResolver=null)});He(this,"_prefersDark",new rp("(prefers-color-scheme: dark)",e.props.colorModeSSR==="dark"));V(this,Mn,T(()=>e.props.colorMode==="system"?this._prefersDark.current?"dark":"light":e.props.colorMode??"light"))}get flowId(){return l(y(this,n))}set flowId(E){D(y(this,n),E)}get domNode(){return l(y(this,r))}set domNode(E){D(y(this,r),E)}get panZoom(){return l(y(this,i))}set panZoom(E){D(y(this,i),E)}get width(){return l(y(this,o))}set width(E){D(y(this,o),E)}get height(){return l(y(this,s))}set height(E){D(y(this,s),E)}get zIndexMode(){return l(y(this,a))}set zIndexMode(E){D(y(this,a),E)}get nodesInitialized(){return l(y(this,u))}set nodesInitialized(E){D(y(this,u),E)}get viewportInitialized(){return l(y(this,c))}set viewportInitialized(E){D(y(this,c),E)}get _edges(){return l(y(this,d))}set _edges(E){D(y(this,d),E)}get nodes(){return this.nodesInitialized,e.nodes}set nodes(E){e.nodes=E}get edges(){return this._edges}set edges(E){e.edges=E}get selectedNodes(){return l(y(this,h))}set selectedNodes(E){D(y(this,h),E)}get selectedEdges(){return l(y(this,f))}set selectedEdges(E){D(y(this,f),E)}get visible(){return l(y(this,g))}set visible(E){D(y(this,g),E)}get nodesDraggable(){return l(y(this,v))}set nodesDraggable(E){D(y(this,v),E)}get nodesConnectable(){return l(y(this,_))}set nodesConnectable(E){D(y(this,_),E)}get elementsSelectable(){return l(y(this,p))}set elementsSelectable(E){D(y(this,p),E)}get nodesFocusable(){return l(y(this,b))}set nodesFocusable(E){D(y(this,b),E)}get edgesFocusable(){return l(y(this,C))}set edgesFocusable(E){D(y(this,C),E)}get disableKeyboardA11y(){return l(y(this,P))}set disableKeyboardA11y(E){D(y(this,P),E)}get minZoom(){return l(y(this,w))}set minZoom(E){D(y(this,w),E)}get maxZoom(){return l(y(this,M))}set maxZoom(E){D(y(this,M),E)}get nodeOrigin(){return l(y(this,L))}set nodeOrigin(E){D(y(this,L),E)}get nodeExtent(){return l(y(this,q))}set nodeExtent(E){D(y(this,q),E)}get translateExtent(){return l(y(this,O))}set translateExtent(E){D(y(this,O),E)}get defaultEdgeOptions(){return l(y(this,R))}set defaultEdgeOptions(E){D(y(this,R),E)}get nodeDragThreshold(){return l(y(this,J))}set nodeDragThreshold(E){D(y(this,J),E)}get autoPanOnNodeDrag(){return l(y(this,N))}set autoPanOnNodeDrag(E){D(y(this,N),E)}get autoPanOnConnect(){return l(y(this,x))}set autoPanOnConnect(E){D(y(this,x),E)}get autoPanOnNodeFocus(){return l(y(this,S))}set autoPanOnNodeFocus(E){D(y(this,S),E)}get autoPanSpeed(){return l(y(this,m))}set autoPanSpeed(E){D(y(this,m),E)}get connectionDragThreshold(){return l(y(this,k))}set connectionDragThreshold(E){D(y(this,k),E)}get snapGrid(){return l(y(this,I))}set snapGrid(E){D(y(this,I),E)}get dragging(){return l(y(this,F))}set dragging(E){D(y(this,F),E)}get selectionRect(){return l(y(this,B))}set selectionRect(E){D(y(this,B),E)}get selectionKeyPressed(){return l(y(this,Y))}set selectionKeyPressed(E){D(y(this,Y),E)}get multiselectionKeyPressed(){return l(y(this,H))}set multiselectionKeyPressed(E){D(y(this,H),E)}get deleteKeyPressed(){return l(y(this,$))}set deleteKeyPressed(E){D(y(this,$),E)}get panActivationKeyPressed(){return l(y(this,se))}set panActivationKeyPressed(E){D(y(this,se),E)}get zoomActivationKeyPressed(){return l(y(this,ae))}set zoomActivationKeyPressed(E){D(y(this,ae),E)}get selectionRectMode(){return l(y(this,K))}set selectionRectMode(E){D(y(this,K),E)}get ariaLiveMessage(){return l(y(this,me))}set ariaLiveMessage(E){D(y(this,me),E)}get selectionMode(){return l(y(this,ee))}set selectionMode(E){D(y(this,ee),E)}get nodeTypes(){return l(y(this,te))}set nodeTypes(E){D(y(this,te),E)}get edgeTypes(){return l(y(this,oe))}set edgeTypes(E){D(y(this,oe),E)}get noPanClass(){return l(y(this,ke))}set noPanClass(E){D(y(this,ke),E)}get noDragClass(){return l(y(this,W))}set noDragClass(E){D(y(this,W),E)}get noWheelClass(){return l(y(this,ne))}set noWheelClass(E){D(y(this,ne),E)}get ariaLabelConfig(){return l(y(this,Ie))}set ariaLabelConfig(E){D(y(this,Ie),E)}get _viewport(){return l(y(this,ge))}set _viewport(E){D(y(this,ge),E)}get viewport(){return e.viewport??this._viewport}set viewport(E){e.viewport&&(e.viewport=E),this._viewport=E}get _connection(){return l(y(this,A))}set _connection(E){D(y(this,A),E)}get connection(){return l(y(this,z))}set connection(E){D(y(this,z),E)}get connectionMode(){return l(y(this,G))}set connectionMode(E){D(y(this,G),E)}get connectionRadius(){return l(y(this,X))}set connectionRadius(E){D(y(this,X),E)}get isValidConnection(){return l(y(this,U))}set isValidConnection(E){D(y(this,U),E)}get selectNodesOnDrag(){return l(y(this,j))}set selectNodesOnDrag(E){D(y(this,j),E)}get defaultMarkerColor(){return l(y(this,Q))}set defaultMarkerColor(E){D(y(this,Q),E)}get markers(){return l(y(this,ue))}set markers(E){D(y(this,ue),E)}get onlyRenderVisibleElements(){return l(y(this,Le))}set onlyRenderVisibleElements(E){D(y(this,Le),E)}get onerror(){return l(y(this,Ye))}set onerror(E){D(y(this,Ye),E)}get ondelete(){return l(y(this,ye))}set ondelete(E){D(y(this,ye),E)}get onbeforedelete(){return l(y(this,Be))}set onbeforedelete(E){D(y(this,Be),E)}get onbeforeconnect(){return l(y(this,nt))}set onbeforeconnect(E){D(y(this,nt),E)}get onconnect(){return l(y(this,ct))}set onconnect(E){D(y(this,ct),E)}get onconnectstart(){return l(y(this,xt))}set onconnectstart(E){D(y(this,xt),E)}get onconnectend(){return l(y(this,wt))}set onconnectend(E){D(y(this,wt),E)}get onbeforereconnect(){return l(y(this,Me))}set onbeforereconnect(E){D(y(this,Me),E)}get onreconnect(){return l(y(this,fe))}set onreconnect(E){D(y(this,fe),E)}get onreconnectstart(){return l(y(this,Pe))}set onreconnectstart(E){D(y(this,Pe),E)}get onreconnectend(){return l(y(this,Ue))}set onreconnectend(E){D(y(this,Ue),E)}get clickConnect(){return l(y(this,Xe))}set clickConnect(E){D(y(this,Xe),E)}get onclickconnectstart(){return l(y(this,at))}set onclickconnectstart(E){D(y(this,at),E)}get onclickconnectend(){return l(y(this,lt))}set onclickconnectend(E){D(y(this,lt),E)}get clickConnectStartHandle(){return l(y(this,Ke))}set clickConnectStartHandle(E){D(y(this,Ke),E)}get onselectiondrag(){return l(y(this,je))}set onselectiondrag(E){D(y(this,je),E)}get onselectiondragstart(){return l(y(this,ft))}set onselectiondragstart(E){D(y(this,ft),E)}get onselectiondragstop(){return l(y(this,kn))}set onselectiondragstop(E){D(y(this,kn),E)}get colorMode(){return l(y(this,Mn))}set colorMode(E){D(y(this,Mn),E)}resetStoreValues(){this.dragging=!1,this.selectionRect=null,this.selectionRectMode=null,this.selectionKeyPressed=!1,this.multiselectionKeyPressed=!1,this.deleteKeyPressed=!1,this.panActivationKeyPressed=!1,this.zoomActivationKeyPressed=!1,this._connection=Gs,this.clickConnectStartHandle=null,this.viewport=e.props.initialViewport??{x:0,y:0,zoom:1},this.ariaLiveMessage=""}}return n=new WeakMap,r=new WeakMap,i=new WeakMap,o=new WeakMap,s=new WeakMap,a=new WeakMap,u=new WeakMap,c=new WeakMap,d=new WeakMap,h=new WeakMap,f=new WeakMap,g=new WeakMap,v=new WeakMap,_=new WeakMap,p=new WeakMap,b=new WeakMap,C=new WeakMap,P=new WeakMap,w=new WeakMap,M=new WeakMap,L=new WeakMap,q=new WeakMap,O=new WeakMap,R=new WeakMap,J=new WeakMap,N=new WeakMap,x=new WeakMap,S=new WeakMap,m=new WeakMap,k=new WeakMap,I=new WeakMap,F=new WeakMap,B=new WeakMap,Y=new WeakMap,H=new WeakMap,$=new WeakMap,se=new WeakMap,ae=new WeakMap,K=new WeakMap,me=new WeakMap,ee=new WeakMap,te=new WeakMap,oe=new WeakMap,ke=new WeakMap,W=new WeakMap,ne=new WeakMap,Ie=new WeakMap,ge=new WeakMap,A=new WeakMap,z=new WeakMap,G=new WeakMap,X=new WeakMap,U=new WeakMap,j=new WeakMap,Q=new WeakMap,ue=new WeakMap,Le=new WeakMap,Ye=new WeakMap,ye=new WeakMap,Be=new WeakMap,nt=new WeakMap,ct=new WeakMap,xt=new WeakMap,wt=new WeakMap,Me=new WeakMap,fe=new WeakMap,Pe=new WeakMap,Ue=new WeakMap,Xe=new WeakMap,at=new WeakMap,lt=new WeakMap,Ke=new WeakMap,je=new WeakMap,ft=new WeakMap,kn=new WeakMap,Mn=new WeakMap,new t}function oi(){const e=na(Po);if(!e)throw new Error("To call useStore outside of <SvelteFlow /> you need to wrap your component in a <SvelteFlowProvider />");return e.getStore()}const Po=Symbol();function Uc(e){const t=sp(e);function n(N){t.nodeTypes={...qc,...N}}function r(N){t.edgeTypes={...Zc,...N}}function i(N){t.edges=Dc(N,t.edges)}const o=(N,x=!1)=>{t.nodes=t.nodes.map(S=>{if(t.connection.inProgress&&t.connection.fromNode.id===S.id){const k=t.nodeLookup.get(S.id);k&&(t.connection={...t.connection,from:_r(k,t.connection.fromHandle,be.Left,!0)})}const m=N.get(S.id);return m?{...S,position:m.position,dragging:x}:S})};function s(N){var k,I,F;const{changes:x,updatedInternals:S}=hm(N,t.nodeLookup,t.parentLookup,t.domNode,t.nodeOrigin,t.nodeExtent,t.zIndexMode);if(!S)return;am(t.nodeLookup,t.parentLookup,{nodeOrigin:t.nodeOrigin,nodeExtent:t.nodeExtent,zIndexMode:t.zIndexMode}),t.fitViewQueued&&t.resolveFitView();const m=new Map;for(const B of x){const Y=(k=t.nodeLookup.get(B.id))==null?void 0:k.internals.userNode;if(!Y)continue;const H={...Y};switch(B.type){case"dimensions":{const $={...H.measured,...B.dimensions};B.setAttributes&&(H.width=((I=B.dimensions)==null?void 0:I.width)??H.width,H.height=((F=B.dimensions)==null?void 0:F.height)??H.height),H.measured=$;break}case"position":H.position=B.position??H.position;break}m.set(B.id,H)}t.nodes=t.nodes.map(B=>m.get(B.id)??B)}function a(N){const x=t.fitViewResolver??Promise.withResolvers();return t.fitViewQueued=!0,t.fitViewOptions=N,t.fitViewResolver=x,t.nodes=[...t.nodes],x.promise}async function u(N,x,S){const m=typeof(S==null?void 0:S.zoom)<"u"?S.zoom:t.maxZoom,k=t.panZoom;return k?(await k.setViewport({x:t.width/2-N*m,y:t.height/2-x*m,zoom:m},{duration:S==null?void 0:S.duration,ease:S==null?void 0:S.ease,interpolate:S==null?void 0:S.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)}function c(N,x){const S=t.panZoom;return S?S.scaleBy(N,x):Promise.resolve(!1)}function d(N){return c(1.2,N)}function h(N){return c(1/1.2,N)}function f(N){const x=t.panZoom;x&&(x.setScaleExtent([N,t.maxZoom]),t.minZoom=N)}function g(N){const x=t.panZoom;x&&(x.setScaleExtent([t.minZoom,N]),t.maxZoom=N)}function v(N){const x=t.panZoom;x&&(x.setTranslateExtent(N),t.translateExtent=N)}function _(N,x=null){let S=!1;const m=N.map(k=>(x?x.has(k.id):!0)&&k.selected?(S=!0,{...k,selected:!1}):k);return[S,m]}function p(N){const x=N!=null&&N.nodes?new Set(N.nodes.map(B=>B.id)):null,[S,m]=_(t.nodes,x);S&&(t.nodes=m);const k=N!=null&&N.edges?new Set(N.edges.map(B=>B.id)):null,[I,F]=_(t.edges,k);I&&(t.edges=F)}function b(N){const x=t.multiselectionKeyPressed;t.nodes=t.nodes.map(S=>{const m=N.includes(S.id),k=x&&S.selected||m;return!!S.selected!==k?{...S,selected:k}:S}),x||p({nodes:[]})}function C(N){const x=t.multiselectionKeyPressed;t.edges=t.edges.map(S=>{const m=N.includes(S.id),k=x&&S.selected||m;return!!S.selected!==k?{...S,selected:k}:S}),x||p({edges:[]})}function P(N,x,S){const m=t.nodeLookup.get(N);if(!m){console.warn("012",Ni.error012(N));return}t.selectionRect=null,t.selectionRectMode=null,m.selected?(x||m.selected&&t.multiselectionKeyPressed)&&(p({nodes:[m],edges:[]}),requestAnimationFrame(()=>S==null?void 0:S.blur())):b([N])}function w(N){const x=t.edgeLookup.get(N);if(!x){console.warn("012",Ni.error012(N));return}(x.selectable||t.elementsSelectable&&typeof x.selectable>"u")&&(t.selectionRect=null,t.selectionRectMode=null,x.selected?x.selected&&t.multiselectionKeyPressed&&p({nodes:[],edges:[x]}):C([N]))}function M(N,x){const{nodeExtent:S,snapGrid:m,nodeOrigin:k,nodeLookup:I,nodesDraggable:F,onerror:B}=t,Y=new Map,H=(m==null?void 0:m[0])??5,$=(m==null?void 0:m[1])??5,se=N.x*H*x,ae=N.y*$*x;for(const K of I.values()){if(!(K.selected&&(K.draggable||F&&typeof K.draggable>"u")))continue;let ee={x:K.internals.positionAbsolute.x+se,y:K.internals.positionAbsolute.y+ae};m&&(ee=ji(ee,m));const{position:te,positionAbsolute:oe}=Ic({nodeId:K.id,nextPosition:ee,nodeLookup:I,nodeExtent:S,nodeOrigin:k,onError:B});K.position=te,K.internals.positionAbsolute=oe,Y.set(K.id,K)}o(Y)}function L(N){return gm({delta:N,panZoom:t.panZoom,transform:[t.viewport.x,t.viewport.y,t.viewport.zoom],translateExtent:t.translateExtent,width:t.width,height:t.height})}const q=N=>{t._connection={...N}};function O(){t._connection=Gs}function R(){t.resetStoreValues(),p()}return Object.assign(t,{setNodeTypes:n,setEdgeTypes:r,addEdge:i,updateNodePositions:o,updateNodeInternals:s,zoomIn:d,zoomOut:h,fitView:a,setCenter:u,setMinZoom:f,setMaxZoom:g,setTranslateExtent:v,unselectNodesAndEdges:p,addSelectedNodes:b,addSelectedEdges:C,handleNodeSelection:P,handleEdgeSelection:w,moveSelectedNodes:M,panBy:L,updateConnection:q,cancelConnection:O,reset:R})}function _s(e,t){const{minZoom:n,maxZoom:r,initialViewport:i,onPanZoomStart:o,onPanZoom:s,onPanZoomEnd:a,translateExtent:u,setPanZoomInstance:c,onDraggingChange:d,onTransformChange:h}=t,f=Mm({domNode:e,minZoom:n,maxZoom:r,translateExtent:u,viewport:i,onPanZoom:s,onPanZoomStart:o,onPanZoomEnd:a,onDraggingChange:d}),g=f.getViewport();return(i.x!==g.x||i.y!==g.y||i.zoom!==g.zoom)&&h([g.x,g.y,g.zoom]),c(f),f.update(t),{update(v){f.update(v)}}}var ap=pe('<div class="svelte-flow__zoom svelte-flow__container"><!></div>');function lp(e,t){xe(t,!0);let n=Z(t,"store",15),r=T(()=>n().panActivationKeyPressed||t.panOnDrag),i=T(()=>n().panActivationKeyPressed||t.panOnScroll);const{viewport:o}=n();let s=!1;on(()=>{var c;!s&&n().viewportInitialized&&((c=t.oninit)==null||c.call(t),s=!0)});var a=ap(),u=ce(a);Cn(u,()=>t.children),gt(a,(c,d)=>_s==null?void 0:_s(c,d),()=>({viewport:n().viewport,minZoom:n().minZoom,maxZoom:n().maxZoom,initialViewport:o,onDraggingChange:c=>{n(n().dragging=c,!0)},setPanZoomInstance:c=>{n(n().panZoom=c,!0)},onPanZoomStart:t.onmovestart,onPanZoom:t.onmove,onPanZoomEnd:t.onmoveend,zoomOnScroll:t.zoomOnScroll,zoomOnDoubleClick:t.zoomOnDoubleClick,zoomOnPinch:t.zoomOnPinch,panOnScroll:l(i),panOnDrag:l(r),panOnScrollSpeed:t.panOnScrollSpeed,panOnScrollMode:t.panOnScrollMode,zoomActivationKeyPressed:n().zoomActivationKeyPressed,preventScrolling:typeof t.preventScrolling=="boolean"?t.preventScrolling:!0,noPanClassName:n().noPanClass,noWheelClassName:n().noWheelClass,userSelectionActive:!!n().selectionRect,translateExtent:n().translateExtent,lib:"svelte",paneClickDistance:t.paneClickDistance,selectionOnDrag:t.selectionOnDrag,onTransformChange:c=>{n(n().viewport={x:c[0],y:c[1],zoom:c[2]},!0)},connectionInProgress:n().connection.inProgress})),ie(e,a),we()}function Ll(e,t){return n=>{n.target===t&&(e==null||e(n))}}function zl(e){return t=>{const n=e.has(t.id);return!!t.selected!==n?{...t,selected:n}:t}}function Fl(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}var up=pe("<div><!></div>");function cp(e,t){xe(t,!0);let n=Z(t,"store",15),r=Z(t,"panOnDrag",3,!0),i=Z(t,"paneClickDistance",3,1),o,s=null,a=new Set,u=new Set,c=T(()=>n().panActivationKeyPressed||r()),d=T(()=>n().selectionKeyPressed||!!n().selectionRect||t.selectionOnDrag&&l(c)!==!0),h=T(()=>n().elementsSelectable&&(l(d)||n().selectionRectMode==="user")),f=!1;function g(O){var m,k;if(s=o==null?void 0:o.getBoundingClientRect(),!s)return;const R=O.target===o,J=!R&&!!O.target.closest(".nokey"),N=t.selectionOnDrag&&R||n().selectionKeyPressed;if(J||!l(d)||!N||O.button!==0||!O.isPrimary)return;(k=(m=O.target)==null?void 0:m.setPointerCapture)==null||k.call(m,O.pointerId),f=!1;const{x,y:S}=Wt(O,s);n(n().selectionRect={width:0,height:0,startX:x,startY:S,x,y:S},!0),R||(O.stopPropagation(),O.preventDefault())}function v(O){var I;if(!l(d)||!s||!n().selectionRect)return;const R=Wt(O,s),{startX:J=0,startY:N=0}=n().selectionRect;if(!f){const F=n().selectionKeyPressed?0:i();if(Math.hypot(R.x-J,R.y-N)<=F)return;n().unselectNodesAndEdges(),(I=t.onselectionstart)==null||I.call(t,O)}f=!0;const x={...n().selectionRect,x:R.x<J?R.x:J,y:R.y<N?R.y:N,width:Math.abs(R.x-J),height:Math.abs(R.y-N)},S=a,m=u;a=new Set(Ea(n().nodeLookup,x,[n().viewport.x,n().viewport.y,n().viewport.zoom],n().selectionMode===So.Partial,!0).map(F=>F.id));const k=n().defaultEdgeOptions.selectable??!0;u=new Set;for(const F of a){const B=n().connectionLookup.get(F);if(B)for(const{edgeId:Y}of B.values()){const H=n().edgeLookup.get(Y);H&&(H.selectable??k)&&u.add(Y)}}Fl(S,a)||n(n().nodes=n().nodes.map(zl(a)),!0),Fl(m,u)||n(n().edges=n().edges.map(zl(u)),!0),n(n().selectionRectMode="user",!0),n(n().selectionRect=x,!0)}function _(O){var R,J,N;O.button===0&&((J=(R=O.target)==null?void 0:R.releasePointerCapture)==null||J.call(R,O.pointerId),!f&&O.target===o&&(C==null||C(O)),n(n().selectionRect=null,!0),f&&n(n().selectionRectMode=a.size>0?"nodes":null,!0),f&&((N=t.onselectionend)==null||N.call(t,O)))}const p=O=>{var R;if(Array.isArray(l(c))&&l(c).includes(2)){O.preventDefault();return}(R=t.onpanecontextmenu)==null||R.call(t,{event:O})},b=O=>{f&&(O.stopPropagation(),f=!1)};function C(O){var R;if(f||n().connection.inProgress){f=!1;return}(R=t.onpaneclick)==null||R.call(t,{event:O}),n().unselectNodesAndEdges(),n(n().selectionRectMode=null,!0),n(n().selectionRect=null,!0)}var P=up();let w;var M=T(()=>l(h)?void 0:Ll(C,o));P.__click=function(...O){var R;(R=l(M))==null||R.apply(this,O)},P.__pointermove=function(...O){var R;(R=l(h)?v:void 0)==null||R.apply(this,O)},P.__pointerup=function(...O){var R;(R=l(h)?_:void 0)==null||R.apply(this,O)};var L=T(()=>Ll(p,o));P.__contextmenu=function(...O){var R;(R=l(L))==null||R.apply(this,O)};var q=ce(P);Cn(q,()=>t.children),Nr(P,O=>o=O,()=>o),Ne(O=>w=An(P,1,"svelte-flow__pane svelte-flow__container",null,w,O),[()=>({draggable:r()===!0||Array.isArray(r())&&r().includes(0),dragging:n().dragging,selection:l(d)})]),_i("pointerdown",P,function(...O){var R;(R=l(h)?g:void 0)==null||R.apply(this,O)},!0),_i("click",P,function(...O){var R;(R=l(h)?b:void 0)==null||R.apply(this,O)},!0),ie(e,P),we()}Ft(["click","pointermove","pointerup","contextmenu"]);var fp=pe('<div class="svelte-flow__viewport xyflow__viewport svelte-flow__container"><!></div>');function dp(e,t){xe(t,!0);var n=fp();let r;var i=ce(n);Cn(i,()=>t.children),Ne(()=>r=Dt(n,"",r,{transform:`translate(${t.store.viewport.x??""}px, ${t.store.viewport.y??""}px) scale(${t.store.viewport.zoom??""})`})),ie(e,n),we()}function Dr(e,t){const{store:n,onDrag:r,onDragStart:i,onDragStop:o,onNodeMouseDown:s}=t,a=pm({onDrag:r,onDragStart:i,onDragStop:o,onNodeMouseDown:s,getStoreItems:()=>{const{snapGrid:c,viewport:d}=n;return{nodes:n.nodes,nodeLookup:n.nodeLookup,edges:n.edges,nodeExtent:n.nodeExtent,snapGrid:c||[0,0],snapToGrid:!!c,nodeOrigin:n.nodeOrigin,multiSelectionActive:n.multiselectionKeyPressed,domNode:n.domNode,transform:[d.x,d.y,d.zoom],autoPanOnNodeDrag:n.autoPanOnNodeDrag,nodesDraggable:n.nodesDraggable,selectNodesOnDrag:n.selectNodesOnDrag,nodeDragThreshold:n.nodeDragThreshold,unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,onSelectionDrag:n.onselectiondrag,onSelectionDragStart:n.onselectiondragstart,onSelectionDragStop:n.onselectiondragstop,panBy:n.panBy}}});function u(c,d){if(d.disabled){a.destroy();return}a.update({domNode:c,noDragClassName:d.noDragClass,handleSelector:d.handleSelector,nodeId:d.nodeId,isSelectable:d.isSelectable,nodeClickDistance:d.nodeClickDistance})}return u(e,t),{update(c){u(e,c)},destroy(){a.destroy()}}}var hp=pe('<div aria-live="assertive" aria-atomic="true" class="a11y-live-msg svelte-1l9nrps"> </div>'),gp=pe('<div class="a11y-hidden svelte-1l9nrps"> </div> <div class="a11y-hidden svelte-1l9nrps"> </div> <!>',1);function vp(e,t){xe(t,!0);var n=gp(),r=Ge(n),i=ce(r),o=Se(r,2),s=ce(o),a=Se(o,2);{var u=c=>{var d=hp(),h=ce(d);Ne(()=>{he(d,"id",`${yp}-${t.store.flowId}`),qe(h,t.store.ariaLiveMessage)}),ie(c,d)};Ze(a,c=>{t.store.disableKeyboardA11y||c(u)})}Ne(()=>{he(r,"id",`${jc}-${t.store.flowId}`),qe(i,t.store.disableKeyboardA11y?t.store.ariaLabelConfig["node.a11yDescription.default"]:t.store.ariaLabelConfig["node.a11yDescription.keyboardDisabled"]),he(o,"id",`${Jc}-${t.store.flowId}`),qe(s,t.store.ariaLabelConfig["edge.a11yDescription.default"])}),ie(e,n),we()}const jc="svelte-flow__node-desc",Jc="svelte-flow__edge-desc",yp="svelte-flow__aria-live";var mp=pe("<div><!></div>");function pp(e,t){xe(t,!0);let n=Z(t,"store",15),r=T(()=>ut(t.node.data,()=>({}),!0)),i=T(()=>ut(t.node.selected,!1)),o=T(()=>t.node.draggable),s=T(()=>t.node.selectable),a=T(()=>ut(t.node.deletable,!0)),u=T(()=>t.node.connectable),c=T(()=>t.node.focusable),d=T(()=>ut(t.node.hidden,!1)),h=T(()=>ut(t.node.dragging,!1)),f=T(()=>ut(t.node.style,"")),g=T(()=>t.node.class),v=T(()=>ut(t.node.type,"default")),_=T(()=>t.node.parentId),p=T(()=>t.node.sourcePosition),b=T(()=>t.node.targetPosition),C=T(()=>ut(t.node.measured,()=>({width:0,height:0}),!0).width),P=T(()=>ut(t.node.measured,()=>({width:0,height:0}),!0).height),w=T(()=>t.node.initialWidth),M=T(()=>t.node.initialHeight),L=T(()=>t.node.width),q=T(()=>t.node.height),O=T(()=>t.node.dragHandle),R=T(()=>ut(t.node.internals.z,0)),J=T(()=>t.node.internals.positionAbsolute.x),N=T(()=>t.node.internals.positionAbsolute.y),x=T(()=>t.node.internals.userNode),{id:S}=t.node,m=T(()=>l(o)??n().nodesDraggable),k=T(()=>l(s)??n().elementsSelectable),I=T(()=>l(u)??n().nodesConnectable),F=T(()=>Wy(t.node)),B=T(()=>!!t.node.internals.handleBounds),Y=T(()=>l(F)&&l(B)),H=T(()=>l(c)??n().nodesFocusable);function $(U){return n().parentLookup.has(U)}let se=T(()=>$(S)),ae=Ve(null),K=null,me=l(v),ee=l(p),te=l(b),oe=T(()=>n().nodeTypes[l(v)]??Wc),ke=T(()=>n().ariaLabelConfig),W={get value(){return l(I)}};Om(S),Lm(W);let ne=T(()=>{const U=l(C)===void 0?l(L)??l(w):l(L),j=l(P)===void 0?l(q)??l(M):l(q);if(!(U===void 0&&j===void 0&&l(f)===void 0))return`${l(f)};${U?`width:${an(U)};`:""}${j?`height:${an(j)};`:""}`});on(()=>{(l(v)!==me||l(p)!==ee||l(b)!==te)&&l(ae)!==null&&requestAnimationFrame(()=>{l(ae)!==null&&n().updateNodeInternals(new Map([[S,{id:S,nodeElement:l(ae),force:!0}]]))}),me=l(v),ee=l(p),te=l(b)}),on(()=>{t.resizeObserver&&(!l(Y)||l(ae)!==K)&&(K&&t.resizeObserver.unobserve(K),l(ae)&&t.resizeObserver.observe(l(ae)),K=l(ae))}),Xo(()=>{var U;K&&((U=t.resizeObserver)==null||U.unobserve(K))});function Ie(U){var j;l(k)&&(!n().selectNodesOnDrag||!l(m)||n().nodeDragThreshold>0)&&n().handleNodeSelection(S),(j=t.onnodeclick)==null||j.call(t,{node:l(x),event:U})}function ge(U){if(!(kc(U)||n().disableKeyboardA11y))if(Ec.includes(U.key)&&l(k)){const j=U.key==="Escape";n().handleNodeSelection(S,j,l(ae))}else l(m)&&t.node.selected&&Object.prototype.hasOwnProperty.call(Mo,U.key)&&(U.preventDefault(),n(n().ariaLiveMessage=l(ke)["node.a11yDescription.ariaLiveMessage"]({direction:U.key.replace("Arrow","").toLowerCase(),x:~~t.node.internals.positionAbsolute.x,y:~~t.node.internals.positionAbsolute.y}),!0),n().moveSelectedNodes(Mo[U.key],U.shiftKey?4:1))}const A=()=>{var Le;if(n().disableKeyboardA11y||!n().autoPanOnNodeFocus||!((Le=l(ae))!=null&&Le.matches(":focus-visible")))return;const{width:U,height:j,viewport:Q}=n();Ea(new Map([[S,t.node]]),{x:0,y:0,width:U,height:j},[Q.x,Q.y,Q.zoom],!0).length>0||n().setCenter(t.node.position.x+(t.node.measured.width??0)/2,t.node.position.y+(t.node.measured.height??0)/2,{zoom:Q.zoom})};var z=pt(),G=Ge(z);{var X=U=>{var j=mp();Er(j,()=>({"data-id":S,class:["svelte-flow__node",`svelte-flow__node-${l(v)}`,l(g)],style:l(ne),onclick:Ie,onpointerenter:t.onnodepointerenter?ue=>t.onnodepointerenter({node:l(x),event:ue}):void 0,onpointerleave:t.onnodepointerleave?ue=>t.onnodepointerleave({node:l(x),event:ue}):void 0,onpointermove:t.onnodepointermove?ue=>t.onnodepointermove({node:l(x),event:ue}):void 0,oncontextmenu:t.onnodecontextmenu?ue=>t.onnodecontextmenu({node:l(x),event:ue}):void 0,onkeydown:l(H)?ge:void 0,onfocus:l(H)?A:void 0,tabIndex:l(H)?0:void 0,role:t.node.ariaRole??(l(H)?"group":void 0),"aria-roledescription":"node","aria-describedby":n().disableKeyboardA11y?void 0:`${jc}-${n().flowId}`,...t.node.domAttributes,[Fn]:{dragging:l(h),selected:l(i),draggable:l(m),connectable:l(I),selectable:l(k),nopan:l(m),parent:l(se)},[Rn]:{"z-index":l(R),transform:`translate(${l(J)??""}px, ${l(N)??""}px)`,visibility:l(F)?"visible":"hidden"}}));var Q=ce(j);ga(Q,()=>l(oe),(ue,Le)=>{Le(ue,{get data(){return l(r)},get id(){return S},get selected(){return l(i)},get selectable(){return l(k)},get deletable(){return l(a)},get sourcePosition(){return l(p)},get targetPosition(){return l(b)},get zIndex(){return l(R)},get dragging(){return l(h)},get draggable(){return l(m)},get dragHandle(){return l(O)},get parentId(){return l(_)},get type(){return l(v)},get isConnectable(){return l(I)},get positionAbsoluteX(){return l(J)},get positionAbsoluteY(){return l(N)},get width(){return l(L)},get height(){return l(q)}})}),gt(j,(ue,Le)=>Dr==null?void 0:Dr(ue,Le),()=>({nodeId:S,isSelectable:l(k),disabled:!l(m),handleSelector:l(O),noDragClass:n().noDragClass,nodeClickDistance:t.nodeClickDistance,onNodeMouseDown:n().handleNodeSelection,onDrag:(ue,Le,Ye,ye)=>{var Be;(Be=t.onnodedrag)==null||Be.call(t,{event:ue,targetNode:Ye,nodes:ye})},onDragStart:(ue,Le,Ye,ye)=>{var Be;(Be=t.onnodedragstart)==null||Be.call(t,{event:ue,targetNode:Ye,nodes:ye})},onDragStop:(ue,Le,Ye,ye)=>{var Be;(Be=t.onnodedragstop)==null||Be.call(t,{event:ue,targetNode:Ye,nodes:ye})},store:n()})),Nr(j,ue=>D(ae,ue),()=>l(ae)),ie(U,j)};Ze(G,U=>{l(d)||U(X)})}ie(e,z),we()}var _p=pe('<div class="svelte-flow__nodes"></div>');function bp(e,t){xe(t,!0);let n=Z(t,"store",15);const r=typeof ResizeObserver>"u"?null:new ResizeObserver(o=>{const s=new Map;o.forEach(a=>{const u=a.target.getAttribute("data-id");s.set(u,{id:u,nodeElement:a.target,force:!0})}),n().updateNodeInternals(s)});Xo(()=>{r==null||r.disconnect()});var i=_p();In(i,21,()=>n().visible.nodes.values(),o=>o.id,(o,s)=>{pp(o,{get node(){return l(s)},get resizeObserver(){return r},get nodeClickDistance(){return t.nodeClickDistance},get onnodeclick(){return t.onnodeclick},get onnodepointerenter(){return t.onnodepointerenter},get onnodepointermove(){return t.onnodepointermove},get onnodepointerleave(){return t.onnodepointerleave},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get onnodecontextmenu(){return t.onnodecontextmenu},get store(){return n()},set store(a){n(a)}})}),ie(e,i),we()}var xp=Rt('<svg class="svelte-flow__edge-wrapper"><g><!></g></svg>');function wp(e,t){xe(t,!0);let n=T(()=>t.edge.id),r=T(()=>t.edge.source),i=T(()=>t.edge.target),o=T(()=>t.edge.sourceX),s=T(()=>t.edge.sourceY),a=T(()=>t.edge.targetX),u=T(()=>t.edge.targetY),c=T(()=>t.edge.sourcePosition),d=T(()=>t.edge.targetPosition),h=T(()=>ut(t.edge.animated,!1)),f=T(()=>ut(t.edge.selected,!1)),g=T(()=>t.edge.label),v=T(()=>t.edge.labelStyle),_=T(()=>ut(t.edge.data,()=>({}),!0)),p=T(()=>t.edge.style),b=T(()=>t.edge.interactionWidth),C=T(()=>ut(t.edge.type,"default")),P=T(()=>t.edge.sourceHandle),w=T(()=>t.edge.targetHandle),M=T(()=>t.edge.markerStart),L=T(()=>t.edge.markerEnd),q=T(()=>t.edge.selectable),O=T(()=>t.edge.focusable),R=T(()=>ut(t.edge.deletable,!0)),J=T(()=>t.edge.hidden),N=T(()=>t.edge.zIndex),x=T(()=>t.edge.class),S=T(()=>t.edge.ariaLabel);Fm(l(n));let m=null,k=T(()=>l(q)??t.store.elementsSelectable),I=T(()=>l(O)??t.store.edgesFocusable),F=T(()=>t.store.edgeTypes[l(C)]??Gc),B=T(()=>l(M)?`url('#${Zs(l(M),t.store.flowId)}')`:void 0),Y=T(()=>l(L)?`url('#${Zs(l(L),t.store.flowId)}')`:void 0);function H(ee){var oe;const te=t.store.edgeLookup.get(l(n));te&&(l(k)&&t.store.handleEdgeSelection(l(n)),(oe=t.onedgeclick)==null||oe.call(t,{event:ee,edge:te}))}function $(ee,te){const oe=t.store.edgeLookup.get(l(n));oe&&te({event:ee,edge:oe})}function se(ee){if(!t.store.disableKeyboardA11y&&Ec.includes(ee.key)&&l(k)){const{unselectNodesAndEdges:te,addSelectedEdges:oe}=t.store;ee.key==="Escape"?(m==null||m.blur(),te({edges:[t.edge]})):oe([l(n)])}}var ae=pt(),K=Ge(ae);{var me=ee=>{var te=xp();let oe;var ke=ce(te);Er(ke,()=>({class:["svelte-flow__edge",l(x)],"data-id":l(n),onclick:H,oncontextmenu:t.onedgecontextmenu?ne=>{$(ne,t.onedgecontextmenu)}:void 0,onpointerenter:t.onedgepointerenter?ne=>{$(ne,t.onedgepointerenter)}:void 0,onpointerleave:t.onedgepointerleave?ne=>{$(ne,t.onedgepointerleave)}:void 0,"aria-label":l(S)===null?void 0:l(S)?l(S):`Edge from ${l(r)} to ${l(i)}`,"aria-describedby":l(I)?`${Jc}-${t.store.flowId}`:void 0,role:t.edge.ariaRole??(l(I)?"group":"img"),"aria-roledescription":"edge",onkeydown:l(I)?se:void 0,tabindex:l(I)?0:void 0,...t.edge.domAttributes,[Fn]:{animated:l(h),selected:l(f),selectable:l(k)}}));var W=ce(ke);ga(W,()=>l(F),(ne,Ie)=>{Ie(ne,{get id(){return l(n)},get source(){return l(r)},get target(){return l(i)},get sourceX(){return l(o)},get sourceY(){return l(s)},get targetX(){return l(a)},get targetY(){return l(u)},get sourcePosition(){return l(c)},get targetPosition(){return l(d)},get animated(){return l(h)},get selected(){return l(f)},get label(){return l(g)},get labelStyle(){return l(v)},get data(){return l(_)},get style(){return l(p)},get interactionWidth(){return l(b)},get selectable(){return l(k)},get deletable(){return l(R)},get type(){return l(C)},get sourceHandleId(){return l(P)},get targetHandleId(){return l(w)},get markerStart(){return l(B)},get markerEnd(){return l(Y)}})}),Nr(ke,ne=>m=ne,()=>m),Ne(()=>oe=Dt(te,"",oe,{"z-index":l(N)})),ie(ee,te)};Ze(K,ee=>{l(J)||ee(me)})}ie(e,ae),we()}var Ep=Rt("<defs></defs>");function Np(e,t){xe(t,!1);const n=oi();bt();var r=Ep();In(r,5,()=>n.markers,i=>i.id,(i,o)=>{Cp(i,qd(()=>l(o)))}),ie(e,r),we()}var Ip=Rt('<polyline class="arrow" fill="none" stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4"></polyline>'),Sp=Rt('<polyline class="arrowclosed" stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4 -5,-4"></polyline>'),Tp=Rt('<marker class="svelte-flow__arrowhead" viewBox="-10 -10 20 20" refX="0" refY="0"><!></marker>');function Cp(e,t){xe(t,!0);let n=Z(t,"width",3,12.5),r=Z(t,"height",3,12.5),i=Z(t,"markerUnits",3,"strokeWidth"),o=Z(t,"orient",3,"auto-start-reverse"),s=Z(t,"color",3,"none");var a=Tp(),u=ce(a);{var c=h=>{var f=Ip();let g;Ne(()=>{he(f,"stroke-width",t.strokeWidth),g=Dt(f,"",g,{stroke:s()})}),ie(h,f)},d=h=>{var f=Sp();let g;Ne(()=>{he(f,"stroke-width",t.strokeWidth),g=Dt(f,"",g,{stroke:s(),fill:s()})}),ie(h,f)};Ze(u,h=>{t.type===To.Arrow?h(c):t.type===To.ArrowClosed&&h(d,1)})}Ne(()=>{he(a,"id",t.id),he(a,"markerWidth",`${n()}`),he(a,"markerHeight",`${r()}`),he(a,"markerUnits",i()),he(a,"orient",o())}),ie(e,a),we()}var Ap=pe('<div class="svelte-flow__edges"><svg class="svelte-flow__marker"><!></svg> <!></div>');function kp(e,t){xe(t,!0);let n=Z(t,"store",15);var r=Ap(),i=ce(r),o=ce(i);Np(o,{});var s=Se(i,2);In(s,17,()=>n().visible.edges.values(),a=>a.id,(a,u)=>{wp(a,{get edge(){return l(u)},get onedgeclick(){return t.onedgeclick},get onedgecontextmenu(){return t.onedgecontextmenu},get onedgepointerenter(){return t.onedgepointerenter},get onedgepointerleave(){return t.onedgepointerleave},get store(){return n()},set store(c){n(c)}})}),ie(e,r),we()}var Mp=pe('<div class="svelte-flow__selection svelte-1f9lbg4"></div>');function Qc(e,t){xe(t,!0);let n=Z(t,"x",3,0),r=Z(t,"y",3,0),i=Z(t,"width",3,0),o=Z(t,"height",3,0),s=Z(t,"isVisible",3,!0);var a=pt(),u=Ge(a);{var c=d=>{var h=Mp();let f;Ne(g=>f=Dt(h,"",f,g),[()=>({width:typeof i()=="string"?i():an(i()),height:typeof o()=="string"?o():an(o()),transform:`translate(${n()}px, ${r()}px)`})]),ie(d,h)};Ze(u,d=>{s()&&d(c)})}ie(e,a),we()}var Pp=pe("<div><!></div>");function Op(e,t){xe(t,!0);let n=Ve(void 0);on(()=>{var h;t.store.disableKeyboardA11y||(h=l(n))==null||h.focus({preventScroll:!0})});let r=T(()=>{if(t.store.selectionRectMode==="nodes"){t.store.nodes;const h=jo(t.store.nodeLookup,{filter:f=>!!f.selected});if(h.width>0&&h.height>0)return h}return null});function i(h){var g;const f=t.store.nodes.filter(v=>v.selected);(g=t.onselectioncontextmenu)==null||g.call(t,{nodes:f,event:h})}function o(h){var g;const f=t.store.nodes.filter(v=>v.selected);(g=t.onselectionclick)==null||g.call(t,{nodes:f,event:h})}function s(h){Object.prototype.hasOwnProperty.call(Mo,h.key)&&(h.preventDefault(),t.store.moveSelectedNodes(Mo[h.key],h.shiftKey?4:1))}var a=pt(),u=Ge(a);{var c=h=>{var f=Pp();f.__contextmenu=i,f.__click=o,f.__keydown=function(..._){var p;(p=t.store.disableKeyboardA11y?void 0:s)==null||p.apply(this,_)};let g;var v=ce(f);Qc(v,{width:"100%",height:"100%",x:0,y:0}),gt(f,(_,p)=>Dr==null?void 0:Dr(_,p),()=>({disabled:!1,store:t.store,onDrag:(_,p,b,C)=>{var P;(P=t.onnodedrag)==null||P.call(t,{event:_,targetNode:null,nodes:C})},onDragStart:(_,p,b,C)=>{var P;(P=t.onnodedragstart)==null||P.call(t,{event:_,targetNode:null,nodes:C})},onDragStop:(_,p,b,C)=>{var P;(P=t.onnodedragstop)==null||P.call(t,{event:_,targetNode:null,nodes:C})}})),Nr(f,_=>D(n,_),()=>l(n)),Ne(_=>{An(f,1,wr(["svelte-flow__selection-wrapper",t.store.noPanClass]),"svelte-5rnsv4"),he(f,"role",t.store.disableKeyboardA11y?void 0:"button"),he(f,"tabindex",t.store.disableKeyboardA11y?void 0:-1),g=Dt(f,"",g,_)},[()=>({width:an(l(r).width),height:an(l(r).height),transform:`translate(${l(r).x??""}px, ${l(r).y??""}px)`})]),ie(h,f)},d=T(()=>t.store.selectionRectMode==="nodes"&&l(r)&&xn(l(r).x)&&xn(l(r).y));Ze(u,h=>{l(d)&&h(c)})}ie(e,a),we()}Ft(["contextmenu","click","keydown"]);function Dp(e){switch(e){case"ctrl":return 8;case"shift":return 4;case"alt":return 2;case"meta":return 1}}function ze(e,t){let{enabled:n=!0,trigger:r,type:i="keydown"}=t;function o(a){var d;const u=Array.isArray(r)?r:[r],c=[a.metaKey,a.altKey,a.shiftKey,a.ctrlKey].reduce((h,f,g)=>f?h|1<<g:h,0);for(const h of u){const f={preventDefault:!1,enabled:!0,...h},{modifier:g,key:v,callback:_,preventDefault:p,enabled:b}=f;if(b){if(a.key!==v)continue;if(g===null||g===!1){if(c!==0)continue}else if(g!==void 0&&((d=g==null?void 0:g[0])==null?void 0:d.length)>0){const P=Array.isArray(g)?g:[g];let w=!1;for(const M of P)if((Array.isArray(M)?M:[M]).reduce((q,O)=>q|Dp(O),0)===c){w=!0;break}if(!w)continue}p&&a.preventDefault();const C={node:e,trigger:f,originalEvent:a};e.dispatchEvent(new CustomEvent("shortcut",{detail:C})),_==null||_(C)}}}let s;return n&&(s=Os(e,i,o)),{update:a=>{const{enabled:u=!0,type:c="keydown"}=a;n&&(!u||i!==c)?s==null||s():!n&&u&&(s=Os(e,c,o)),n=u,i=c,r=a.trigger},destroy:()=>{s==null||s()}}}function Ma(){const e=T(oi),t=o=>{var c,d;const s=Ol(o)?o:l(e).nodeLookup.get(o.id),a=s.parentId?Gy(s.position,s.measured,s.parentId,l(e).nodeLookup,l(e).nodeOrigin):s.position,u={...s,position:a,width:((c=s.measured)==null?void 0:c.width)??s.width,height:((d=s.measured)==null?void 0:d.height)??s.height};return $r(u)};function n(o,s,a={replace:!1}){l(e).nodes=_e(()=>l(e).nodes).map(u=>{if(u.id===o){const c=typeof s=="function"?s(u):s;return a!=null&&a.replace&&Ol(c)?c:{...u,...c}}return u})}function r(o,s,a={replace:!1}){l(e).edges=_e(()=>l(e).edges).map(u=>{if(u.id===o){const c=typeof s=="function"?s(u):s;return a.replace&&Gm(c)?c:{...u,...c}}return u})}const i=o=>l(e).nodeLookup.get(o);return{zoomIn:l(e).zoomIn,zoomOut:l(e).zoomOut,getInternalNode:i,getNode:o=>{var s;return(s=i(o))==null?void 0:s.internals.userNode},getNodes:o=>o===void 0?l(e).nodes:Rl(l(e).nodeLookup,o),getEdge:o=>l(e).edgeLookup.get(o),getEdges:o=>o===void 0?l(e).edges:Rl(l(e).edgeLookup,o),setZoom:(o,s)=>{const a=l(e).panZoom;return a?a.scaleTo(o,{duration:s==null?void 0:s.duration}):Promise.resolve(!1)},getZoom:()=>l(e).viewport.zoom,setViewport:async(o,s)=>{const a=l(e).viewport;return l(e).panZoom?(await l(e).panZoom.setViewport({x:o.x??a.x,y:o.y??a.y,zoom:o.zoom??a.zoom},s),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>nu(l(e).viewport),setCenter:async(o,s,a)=>l(e).setCenter(o,s,a),fitView:o=>l(e).fitView(o),fitBounds:async(o,s)=>{if(!l(e).panZoom)return Promise.resolve(!1);const a=Na(o,l(e).width,l(e).height,l(e).minZoom,l(e).maxZoom,(s==null?void 0:s.padding)??.1);return await l(e).panZoom.setViewport(a,{duration:s==null?void 0:s.duration,ease:s==null?void 0:s.ease,interpolate:s==null?void 0:s.interpolate}),Promise.resolve(!0)},getIntersectingNodes:(o,s=!0,a)=>{const u=xl(o),c=u?o:t(o);return c?(a||l(e).nodes).filter(d=>{const h=l(e).nodeLookup.get(d.id);if(!h||!u&&d.id===o.id)return!1;const f=$r(h),g=Ii(f,c);return s&&g>0||g>=f.width*f.height||g>=c.width*c.height}):[]},isNodeIntersecting:(o,s,a=!0)=>{const c=xl(o)?o:t(o);if(!c)return!1;const d=Ii(c,s);return a&&d>0||d>=s.width*s.height||d>=c.width*c.height},deleteElements:async({nodes:o=[],edges:s=[]})=>{var c,d;const{nodes:a,edges:u}=await By({nodesToRemove:o,edgesToRemove:s,nodes:l(e).nodes,edges:l(e).edges,onBeforeDelete:l(e).onbeforedelete});return a&&(l(e).nodes=_e(()=>l(e).nodes).filter(h=>!a.some(({id:f})=>f===h.id))),u&&(l(e).edges=_e(()=>l(e).edges).filter(h=>!u.some(({id:f})=>f===h.id))),(a.length>0||u.length>0)&&((d=(c=l(e)).ondelete)==null||d.call(c,{nodes:a,edges:u})),{deletedNodes:a,deletedEdges:u}},screenToFlowPosition:(o,s={snapToGrid:!0})=>{if(!l(e).domNode)return o;const a=s.snapToGrid?l(e).snapGrid:!1,{x:u,y:c,zoom:d}=l(e).viewport,{x:h,y:f}=l(e).domNode.getBoundingClientRect(),g={x:o.x-h,y:o.y-f};return Ji(g,[u,c,d],a!==null,a||[1,1])},flowToScreenPosition:o=>{if(!l(e).domNode)return o;const{x:s,y:a,zoom:u}=l(e).viewport,{x:c,y:d}=l(e).domNode.getBoundingClientRect(),h=Ao(o,[s,a,u]);return{x:h.x+c,y:h.y+d}},toObject:()=>structuredClone({nodes:[...l(e).nodes],edges:[...l(e).edges],viewport:{...l(e).viewport}}),updateNode:n,updateNodeData:(o,s,a)=>{var d;const u=(d=l(e).nodeLookup.get(o))==null?void 0:d.internals.userNode;if(!u)return;const c=typeof s=="function"?s(u):s;n(o,h=>({...h,data:a!=null&&a.replace?c:{...h.data,...c}}))},updateEdge:r,getNodesBounds:o=>zy(o,{nodeLookup:l(e).nodeLookup,nodeOrigin:l(e).nodeOrigin}),getHandleConnections:({type:o,id:s,nodeId:a})=>{var u;return Array.from(((u=l(e).connectionLookup.get(`${a}-${o}-${s??null}`))==null?void 0:u.values())??[])}}}function Rl(e,t){var r;const n=[];for(const i of t){const o=e.get(i);if(o){const s="internals"in o?(r=o.internals)==null?void 0:r.userNode:o;n.push(s)}}return n}function Lp(e,t){xe(t,!0);let n=Z(t,"store",15),r=Z(t,"selectionKey",3,"Shift"),i=Z(t,"multiSelectionKey",19,()=>ko()?"Meta":"Control"),o=Z(t,"deleteKey",3,"Backspace"),s=Z(t,"panActivationKey",3," "),a=Z(t,"zoomActivationKey",19,()=>ko()?"Meta":"Control"),{deleteElements:u}=Ma();function c(_){return _!==null&&typeof _=="object"}function d(_){return c(_)?_.modifier||[]:[]}function h(_){return _==null?"":c(_)?_.key:_}function f(_,p){return(Array.isArray(_)?_:[_]).map(C=>{const P=h(C);return{key:P,modifier:d(C),enabled:P!==null,callback:p}})}function g(){n(n().selectionRect=null,!0),n(n().selectionKeyPressed=!1,!0),n(n().multiselectionKeyPressed=!1,!0),n(n().deleteKeyPressed=!1,!0),n(n().panActivationKeyPressed=!1,!0),n(n().zoomActivationKeyPressed=!1,!0)}function v(){const _=n().nodes.filter(b=>b.selected),p=n().edges.filter(b=>b.selected);u({nodes:_,edges:p})}_i("blur",dt,g),_i("contextmenu",dt,g),gt(dt,(_,p)=>ze==null?void 0:ze(_,p),()=>({trigger:f(r(),()=>n(n().selectionKeyPressed=!0,!0)),type:"keydown"})),gt(dt,(_,p)=>ze==null?void 0:ze(_,p),()=>({trigger:f(r(),()=>n(n().selectionKeyPressed=!1,!0)),type:"keyup"})),gt(dt,(_,p)=>ze==null?void 0:ze(_,p),()=>({trigger:f(i(),()=>{n(n().multiselectionKeyPressed=!0,!0)}),type:"keydown"})),gt(dt,(_,p)=>ze==null?void 0:ze(_,p),()=>({trigger:f(i(),()=>n(n().multiselectionKeyPressed=!1,!0)),type:"keyup"})),gt(dt,(_,p)=>ze==null?void 0:ze(_,p),()=>({trigger:f(o(),_=>{!(_.originalEvent.ctrlKey||_.originalEvent.metaKey||_.originalEvent.shiftKey)&&!kc(_.originalEvent)&&(n(n().deleteKeyPressed=!0,!0),v())}),type:"keydown"})),gt(dt,(_,p)=>ze==null?void 0:ze(_,p),()=>({trigger:f(o(),()=>n(n().deleteKeyPressed=!1,!0)),type:"keyup"})),gt(dt,(_,p)=>ze==null?void 0:ze(_,p),()=>({trigger:f(s(),()=>n(n().panActivationKeyPressed=!0,!0)),type:"keydown"})),gt(dt,(_,p)=>ze==null?void 0:ze(_,p),()=>({trigger:f(s(),()=>n(n().panActivationKeyPressed=!1,!0)),type:"keyup"})),gt(dt,(_,p)=>ze==null?void 0:ze(_,p),()=>({trigger:f(a(),()=>n(n().zoomActivationKeyPressed=!0,!0)),type:"keydown"})),gt(dt,(_,p)=>ze==null?void 0:ze(_,p),()=>({trigger:f(a(),()=>n(n().zoomActivationKeyPressed=!1,!0)),type:"keyup"})),we()}var zp=Rt('<path fill="none" class="svelte-flow__connection-path"></path>'),Fp=Rt('<svg class="svelte-flow__connectionline"><g><!></g></svg>');function Rp(e,t){xe(t,!0);let n=T(()=>{if(!t.store.connection.inProgress)return"";const s={sourceX:t.store.connection.from.x,sourceY:t.store.connection.from.y,sourcePosition:t.store.connection.fromPosition,targetX:t.store.connection.to.x,targetY:t.store.connection.to.y,targetPosition:t.store.connection.toPosition};switch(t.type){case Vn.Bezier:{const[a]=Pc(s);return a}case Vn.Straight:{const[a]=Lc(s);return a}case Vn.Step:case Vn.SmoothStep:{const[a]=Ia({...s,borderRadius:t.type===Vn.Step?0:void 0});return a}}});var r=pt(),i=Ge(r);{var o=s=>{var a=Fp(),u=ce(a),c=ce(u);{var d=f=>{var g=pt(),v=Ge(g);ga(v,()=>t.LineComponent,(_,p)=>{p(_,{})}),ie(f,g)},h=f=>{var g=zp();Ne(()=>{he(g,"d",l(n)),Dt(g,t.style)}),ie(f,g)};Ze(c,f=>{t.LineComponent?f(d):f(h,!1)})}Ne(f=>{he(a,"width",t.store.width),he(a,"height",t.store.height),Dt(a,t.containerStyle),An(u,0,f)},[()=>wr(["svelte-flow__connection",Dy(t.store.connection.isValid)])]),ie(s,a)};Ze(i,s=>{t.store.connection.inProgress&&s(o)})}ie(e,r),we()}var Vp=pe("<div><!></div>");function Bp(e,t){xe(t,!0);let n=Z(t,"position",3,"top-right"),r=Gi(t,["$$slots","$$events","$$legacy","position","style","class","children"]),i=T(()=>`${n()}`.split("-"));var o=Vp();Er(o,a=>({class:a,style:t.style,...r}),[()=>["svelte-flow__panel",t.class,...l(i)]]);var s=ce(o);Cn(s,()=>t.children??br),ie(e,o),we()}var Hp=pe('<a href="https://svelteflow.dev" target="_blank" rel="noopener noreferrer" aria-label="Svelte Flow attribution">Svelte Flow</a>');function Kp(e,t){xe(t,!0);let n=Z(t,"position",3,"bottom-right");var r=pt(),i=Ge(r);{var o=s=>{Bp(s,{get position(){return n()},class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",children:(a,u)=>{var c=Hp();ie(a,c)},$$slots:{default:!0}})};Ze(i,s=>{var a;(a=t.proOptions)!=null&&a.hideAttribution||s(o)})}ie(e,r),we()}var Yp=pe("<div><!></div>");function Xp(e,t){xe(t,!0);let n=Z(t,"domNode",15),r=Z(t,"clientWidth",15),i=Z(t,"clientHeight",15),o=T(()=>t.rest.class),s=T(()=>vd(t.rest,["id","class","nodeTypes","edgeTypes","colorMode","isValidConnection","onmove","onmovestart","onmoveend","onflowerror","ondelete","onbeforedelete","onbeforeconnect","onconnect","onconnectstart","onconnectend","onbeforereconnect","onreconnect","onreconnectstart","onreconnectend","onclickconnectstart","onclickconnectend","oninit","onselectionchange","onselectiondragstart","onselectiondrag","onselectiondragstop","onselectionstart","onselectionend","clickConnect","fitView","fitViewOptions","nodeOrigin","nodeDragThreshold","connectionDragThreshold","minZoom","maxZoom","initialViewport","connectionRadius","connectionMode","selectionMode","selectNodesOnDrag","snapGrid","defaultMarkerColor","translateExtent","nodeExtent","onlyRenderVisibleElements","autoPanOnConnect","autoPanOnNodeDrag","colorModeSSR","defaultEdgeOptions","elevateNodesOnSelect","elevateEdgesOnSelect","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","elementsSelectable","nodesFocusable","edgesFocusable","disableKeyboardA11y","noDragClass","noPanClass","noWheelClass","ariaLabelConfig","autoPanSpeed","panOnScrollSpeed","zIndexMode"]));function a(d){d.currentTarget.scrollTo({top:0,left:0,behavior:"auto"}),t.rest.onscroll&&t.rest.onscroll(d)}var u=Yp();Er(u,d=>({class:["svelte-flow","svelte-flow__container",l(o),t.colorMode],"data-testid":"svelte-flow__wrapper",role:"application",onscroll:a,...l(s),[Rn]:d}),[()=>({width:an(t.width),height:an(t.height)})],void 0,void 0,"svelte-rhpwh");var c=ce(u);Cn(c,()=>t.children??br),Nr(u,d=>n(d),()=>n()),Qa(u,"clientHeight",i),Qa(u,"clientWidth",r),ie(e,u),we()}var Wp=pe('<div class="svelte-flow__viewport-back svelte-flow__container"></div> <!> <div class="svelte-flow__edge-labels svelte-flow__container"></div> <!> <!> <!> <div class="svelte-flow__viewport-front svelte-flow__container"></div>',1),Gp=pe("<!> <!>",1),qp=pe("<!> <!> <!> <!> <!>",1);function Zp(e,t){xe(t,!0);let n=Z(t,"paneClickDistance",3,1),r=Z(t,"nodeClickDistance",3,1),i=Z(t,"panOnScrollMode",19,()=>Or.Free),o=Z(t,"preventScrolling",3,!0),s=Z(t,"zoomOnScroll",3,!0),a=Z(t,"zoomOnDoubleClick",3,!0),u=Z(t,"zoomOnPinch",3,!0),c=Z(t,"panOnScroll",3,!1),d=Z(t,"panOnScrollSpeed",3,.5),h=Z(t,"panOnDrag",3,!0),f=Z(t,"selectionOnDrag",3,!1),g=Z(t,"connectionLineType",19,()=>Vn.Bezier),v=Z(t,"nodes",31,()=>Yn([])),_=Z(t,"edges",31,()=>Yn([])),p=Z(t,"viewport",15,void 0),b=Gi(t,["$$slots","$$events","$$legacy","width","height","proOptions","selectionKey","deleteKey","panActivationKey","multiSelectionKey","zoomActivationKey","paneClickDistance","nodeClickDistance","onmovestart","onmoveend","onmove","oninit","onnodeclick","onnodecontextmenu","onnodedrag","onnodedragstart","onnodedragstop","onnodepointerenter","onnodepointermove","onnodepointerleave","onselectionclick","onselectioncontextmenu","onselectionstart","onselectionend","onedgeclick","onedgecontextmenu","onedgepointerenter","onedgepointerleave","onpaneclick","onpanecontextmenu","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnDrag","selectionOnDrag","connectionLineComponent","connectionLineStyle","connectionLineContainerStyle","connectionLineType","attributionPosition","children","nodes","edges","viewport"]),C=Uc({props:b,width:t.width,height:t.height,get nodes(){return v()},set nodes(w){v(w)},get edges(){return _()},set edges(w){_(w)},get viewport(){return p()},set viewport(w){p(w)}});const P=na(Po);P&&P.setStore&&P.setStore(C),ra(Po,{provider:!1,getStore(){return C}}),on(()=>{var M;const w={nodes:C.selectedNodes,edges:C.selectedEdges};(M=_e(()=>t.onselectionchange))==null||M(w);for(const L of C.selectionChangeHandlers.values())L(w)}),Xo(()=>{C.reset()}),Xp(e,{get colorMode(){return C.colorMode},get width(){return t.width},get height(){return t.height},get rest(){return b},get domNode(){return C.domNode},set domNode(w){C.domNode=w},get clientWidth(){return C.width},set clientWidth(w){C.width=w},get clientHeight(){return C.height},set clientHeight(w){C.height=w},children:(w,M)=>{var L=qp(),q=Ge(L);Lp(q,{get selectionKey(){return t.selectionKey},get deleteKey(){return t.deleteKey},get panActivationKey(){return t.panActivationKey},get multiSelectionKey(){return t.multiSelectionKey},get zoomActivationKey(){return t.zoomActivationKey},get store(){return C},set store(x){C=x}});var O=Se(q,2);lp(O,{get panOnScrollMode(){return i()},get preventScrolling(){return o()},get zoomOnScroll(){return s()},get zoomOnDoubleClick(){return a()},get zoomOnPinch(){return u()},get panOnScroll(){return c()},get panOnScrollSpeed(){return d()},get panOnDrag(){return h()},get paneClickDistance(){return n()},get selectionOnDrag(){return f()},get onmovestart(){return t.onmovestart},get onmove(){return t.onmove},get onmoveend(){return t.onmoveend},get oninit(){return t.oninit},get store(){return C},set store(x){C=x},children:(x,S)=>{cp(x,{get onpaneclick(){return t.onpaneclick},get onpanecontextmenu(){return t.onpanecontextmenu},get onselectionstart(){return t.onselectionstart},get onselectionend(){return t.onselectionend},get panOnDrag(){return h()},get paneClickDistance(){return n()},get selectionOnDrag(){return f()},get store(){return C},set store(m){C=m},children:(m,k)=>{var I=Gp(),F=Ge(I);dp(F,{get store(){return C},set store(Y){C=Y},children:(Y,H)=>{var $=Wp(),se=Se(Ge($),2);kp(se,{get onedgeclick(){return t.onedgeclick},get onedgecontextmenu(){return t.onedgecontextmenu},get onedgepointerenter(){return t.onedgepointerenter},get onedgepointerleave(){return t.onedgepointerleave},get store(){return C},set store(ee){C=ee}});var ae=Se(se,4);Rp(ae,{get type(){return g()},get LineComponent(){return t.connectionLineComponent},get containerStyle(){return t.connectionLineContainerStyle},get style(){return t.connectionLineStyle},get store(){return C},set store(ee){C=ee}});var K=Se(ae,2);bp(K,{get nodeClickDistance(){return r()},get onnodeclick(){return t.onnodeclick},get onnodecontextmenu(){return t.onnodecontextmenu},get onnodepointerenter(){return t.onnodepointerenter},get onnodepointermove(){return t.onnodepointermove},get onnodepointerleave(){return t.onnodepointerleave},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get store(){return C},set store(ee){C=ee}});var me=Se(K,2);Op(me,{get onselectionclick(){return t.onselectionclick},get onselectioncontextmenu(){return t.onselectioncontextmenu},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get store(){return C},set store(ee){C=ee}}),ie(Y,$)},$$slots:{default:!0}});var B=Se(F,2);{let Y=T(()=>!!(C.selectionRect&&C.selectionRectMode==="user")),H=T(()=>{var K;return(K=C.selectionRect)==null?void 0:K.width}),$=T(()=>{var K;return(K=C.selectionRect)==null?void 0:K.height}),se=T(()=>{var K;return(K=C.selectionRect)==null?void 0:K.x}),ae=T(()=>{var K;return(K=C.selectionRect)==null?void 0:K.y});Qc(B,{get isVisible(){return l(Y)},get width(){return l(H)},get height(){return l($)},get x(){return l(se)},get y(){return l(ae)}})}ie(m,I)},$$slots:{default:!0}})},$$slots:{default:!0}});var R=Se(O,2);Kp(R,{get proOptions(){return t.proOptions},get position(){return t.attributionPosition}});var J=Se(R,2);vp(J,{get store(){return C}});var N=Se(J,2);Cn(N,()=>t.children??br),ie(w,L)},$$slots:{default:!0}}),we()}function Up(e,t){xe(t,!0);let n=Ve(Uc({props:{},nodes:[],edges:[]}));ra(Po,{provider:!0,getStore(){return l(n)},setStore:o=>{D(n,o)}}),Xo(()=>{l(n).reset()});var r=pt(),i=Ge(r);Cn(i,()=>t.children??br),ie(e,r),we()}var qn;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(qn||(qn={}));var jp=Rt("<circle></circle>");function Jp(e,t){var n=jp();Ne(()=>{he(n,"cx",t.radius),he(n,"cy",t.radius),he(n,"r",t.radius),An(n,0,wr(["svelte-flow__background-pattern","dots",t.class]))}),ie(e,n)}var Qp=Rt("<path></path>");function $p(e,t){xe(t,!0);var n=Qp();Ne(()=>{he(n,"stroke-width",t.lineWidth),he(n,"d",`M${t.dimensions[0]/2} 0 V${t.dimensions[1]} M0 ${t.dimensions[1]/2} H${t.dimensions[0]}`),An(n,0,wr(["svelte-flow__background-pattern",t.variant,t.class]))}),ie(e,n),we()}const e0={[qn.Dots]:1,[qn.Lines]:1,[qn.Cross]:6};var t0=Rt('<svg data-testid="svelte-flow__background"><pattern patternUnits="userSpaceOnUse"><!></pattern><rect x="0" y="0" width="100%" height="100%"></rect></svg>');function n0(e,t){xe(t,!0);let n=Z(t,"variant",19,()=>qn.Dots),r=Z(t,"gap",3,20),i=Z(t,"lineWidth",3,1),o=T(oi),s=T(()=>n()===qn.Dots),a=T(()=>n()===qn.Cross),u=T(()=>Array.isArray(r())?r():[r(),r()]),c=T(()=>`background-pattern-${l(o).flowId}-${t.id??""}`),d=T(()=>[l(u)[0]*l(o).viewport.zoom||1,l(u)[1]*l(o).viewport.zoom||1]),h=T(()=>(t.size??e0[n()])*l(o).viewport.zoom),f=T(()=>l(a)?[l(h),l(h)]:l(d)),g=T(()=>l(s)?[l(h)/2,l(h)/2]:[l(f)[0]/2,l(f)[1]/2]);var v=t0();let _;var p=ce(v),b=ce(p);{var C=M=>{{let L=T(()=>l(h)/2);Jp(M,{get radius(){return l(L)},get class(){return t.patternClass}})}},P=M=>{$p(M,{get dimensions(){return l(f)},get variant(){return n()},get lineWidth(){return i()},get class(){return t.patternClass}})};Ze(b,M=>{l(s)?M(C):M(P,!1)})}var w=Se(p);Ne(()=>{An(v,0,wr(["svelte-flow__background","svelte-flow__container",t.class])),_=Dt(v,"",_,{"--xy-background-color-props":t.bgColor,"--xy-background-pattern-color-props":t.patternColor}),he(p,"id",l(c)),he(p,"x",l(o).viewport.x%l(d)[0]),he(p,"y",l(o).viewport.y%l(d)[1]),he(p,"width",l(d)[0]),he(p,"height",l(d)[1]),he(p,"patternTransform",`translate(-${l(g)[0]},-${l(g)[1]})`),he(w,"fill",`url(#${l(c)})`)}),ie(e,v),we()}var r0=pe('<div class="text-xs text-vsc-muted">No matching node types</div>'),i0=pe('<span class="text-xs text-vsc-muted"> </span>'),o0=pe('<button class="flex w-full cursor-pointer flex-col gap-0.5 rounded-md border border-vsc-editor-widget-border bg-vsc-button-secondary-bg px-2 py-1.5 text-left text-vsc-fg hover:border-vsc-focus hover:bg-vsc-list-hover data-[active=true]:border-vsc-focus data-[active=true]:bg-vsc-list-active-bg data-[active=true]:text-vsc-list-active-fg" type="button"><span class="text-xs font-semibold"> </span> <!></button>'),s0=pe('<div class="flex flex-col gap-1.5"><div class="text-xs uppercase tracking-wide text-vsc-muted"> </div> <!></div>'),a0=pe('<div class="absolute z-40 w-64 max-h-[70vh] translate-x-2 translate-y-2 overflow-hidden rounded-lg border border-vsc-editor-widget-border bg-vsc-editor-widget-bg p-2.5 text-vsc-editor-fg shadow-2xl"><input class="w-full rounded-md border border-vsc-input-border bg-vsc-input-bg px-2 py-1.5 text-xs text-vsc-input-fg" type="search" placeholder="Search nodes..."/> <div class="mt-2 flex max-h-[calc(70vh-3.5rem)] flex-col gap-2 overflow-auto pr-0.5"><!></div></div>');function l0(e,t){xe(t,!1);const n=le(),r=le(),i=le();let o=Z(t,"open",8,!1),s=Z(t,"openVersion",8,0),a=Z(t,"position",24,()=>({x:0,y:0})),u=Z(t,"templates",24,()=>[]);const c=un();let d=le(""),h=le(),f=le(0),g=le(""),v=le(-1);function _(O){const R=new Map;for(const J of O){const N=typeof(J==null?void 0:J.category)=="string"&&J.category.trim()?J.category.trim():"Other";R.has(N)||R.set(N,[]),R.get(N).push(J)}return Array.from(R.entries()).sort(([J],[N])=>J.localeCompare(N)).map(([J,N])=>({category:J,items:N.sort((x,S)=>x.label.localeCompare(S.label))}))}function p(O){c("select",{template:O})}function b(){c("close")}function C(O){if(O.key==="Escape"){b();return}if(O.key==="ArrowDown"&&l(i).length>0){O.preventDefault(),D(f,(l(f)+1)%l(i).length);return}if(O.key==="ArrowUp"&&l(i).length>0){O.preventDefault(),D(f,(l(f)-1+l(i).length)%l(i).length);return}O.key==="Enter"&&l(i).length>0&&(O.preventDefault(),p(l(i)[l(f)]??l(i)[0]))}function P(O){var R;return(((R=l(i)[l(f)])==null?void 0:R.templateId)??"")===(O==null?void 0:O.templateId)}function w(O){const R=l(i).findIndex(J=>(J==null?void 0:J.templateId)&&J.templateId===(O==null?void 0:O.templateId));R>=0&&D(f,R)}ve(()=>(de(o()),de(s()),l(v),l(h)),()=>{o()&&s()!==l(v)&&(D(d,""),D(f,0),D(v,s()),fa().then(()=>{var O;return(O=l(h))==null?void 0:O.focus()}))}),ve(()=>(de(u()),l(d)),()=>{D(n,u().filter(O=>`${O.label} ${O.subtitle??""} ${O.category??""}`.toLowerCase().includes(l(d).trim().toLowerCase())))}),ve(()=>l(n),()=>{D(r,_(l(n)))}),ve(()=>l(r),()=>{D(i,l(r).flatMap(O=>O.items))}),ve(()=>(l(d),l(g)),()=>{l(d)!==l(g)&&(D(g,l(d)),D(f,0))}),ve(()=>(l(f),l(i)),()=>{l(f)>=l(i).length&&D(f,Math.max(0,l(i).length-1))}),zt(),bt();var M=pt(),L=Ge(M);{var q=O=>{var R=a0();let J;var N=ce(R);N.__keydown=C,Nr(N,I=>D(h,I),()=>l(h));var x=Se(N,2),S=ce(x);{var m=I=>{var F=r0();ie(I,F)},k=I=>{var F=pt(),B=Ge(F);In(B,1,()=>l(r),Zr,(Y,H)=>{var $=s0(),se=ce($),ae=ce(se),K=Se(se,2);In(K,1,()=>(l(H),_e(()=>l(H).items)),Zr,(me,ee)=>{var te=o0();te.__click=()=>p(l(ee));var oe=ce(te),ke=ce(oe),W=Se(oe,2);{var ne=Ie=>{var ge=i0(),A=ce(ge);Ne(()=>qe(A,(l(ee),_e(()=>l(ee).subtitle)))),ie(Ie,ge)};Ze(W,Ie=>{l(ee),_e(()=>l(ee).subtitle)&&Ie(ne)})}Ne(Ie=>{he(te,"data-active",Ie),qe(ke,(l(ee),_e(()=>l(ee).label)))},[()=>(l(ee),_e(()=>P(l(ee))))]),_i("mouseenter",te,()=>w(l(ee))),ie(me,te)}),Ne(()=>qe(ae,(l(H),_e(()=>l(H).category)))),ie(Y,$)}),ie(I,F)};Ze(S,I=>{l(r),_e(()=>l(r).length===0)?I(m):I(k,!1)})}Ne(()=>J=Dt(R,"",J,{left:(de(a()),_e(()=>`${a().x}px`)),top:(de(a()),_e(()=>`${a().y}px`))})),Kd(N,()=>l(d),I=>D(d,I)),ie(O,R)};Ze(L,O=>{o()&&O(q)})}ie(e,M),we()}Ft(["keydown","click"]);const re={SMALL_STRING:"SmallString",STRING:"String",FLOAT:"Float",INT:"Int",INTEGER:"Integer",INT_SLIDER:"IntSlider",CHECKBOX:"Checkbox",BOOL:"Bool",ENUM:"Enum",FILE_PATH:"FilePath",LIST:"List",OBJECT:"Object"};Object.values(re);const pn="customMetadata",Dn="$TemplateId",Ln="$EditorFields",$c=new Set([re.SMALL_STRING,re.STRING,re.FILE_PATH]),u0=new Set([re.FLOAT,re.INT,re.INTEGER,re.INT_SLIDER]),ef=new Set([re.CHECKBOX,re.BOOL]);function Si(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function Pa(e){return typeof e=="string"?e.trim():""}function fn(e){return Si(e)?e:{}}function Jn(e){const t=fn(e==null?void 0:e.options);return typeof t.Label=="string"&&t.Label.trim()?t.Label.trim():typeof(e==null?void 0:e.label)=="string"&&e.label.trim()?e.label.trim():typeof(e==null?void 0:e.id)=="string"&&e.id.trim()?e.id.trim():"Field"}function c0(e){const t=fn(e==null?void 0:e.options);return typeof t.Type=="string"&&t.Type.trim()?t.Type.trim():typeof t.ArrayElementType=="string"&&t.ArrayElementType.trim()?t.ArrayElementType.trim():re.STRING}function ao(e,t,n=!1){const r=Number(e);return Number.isFinite(r)?n?Math.round(r):r:t}function f0(e,t,n){let r=e;return Number.isFinite(t)&&(r=Math.max(r,t)),Number.isFinite(n)&&(r=Math.min(r,n)),r}function Oo(e,t,n){const r=Number(e==null?void 0:e[t]);return Number.isFinite(r)?r:n}function d0(e,...t){for(const n of t)if(typeof(e==null?void 0:e[n])=="boolean")return e[n];return!1}function tf(e){return Array.isArray(e==null?void 0:e.Values)?e.Values.filter(t=>typeof t=="string"):[]}function rr(e){const t=Pa(e==null?void 0:e.type),n=fn(e==null?void 0:e.options);if($c.has(t))return typeof n.Default=="string"?n.Default:"";if(t===re.FLOAT)return Oo(n,"Default",0);if(t===re.INT||t===re.INTEGER||t===re.INT_SLIDER)return Math.round(Oo(n,"Default",0));if(ef.has(t))return d0(n,"Default","DefaultValue");if(t===re.ENUM){const r=tf(n);return typeof n.Default=="string"&&r.includes(n.Default)?n.Default:r[0]??""}if(t===re.LIST)return[];if(t===re.OBJECT){const r=Array.isArray(n.Fields)?n.Fields:[],i={};for(const o of r)typeof(o==null?void 0:o.id)!="string"||!o.id.trim()||(i[o.id]=rr(o));return i}return""}function Ti(e,t){const n=Pa(e==null?void 0:e.type),r=fn(e==null?void 0:e.options);if($c.has(n))return typeof t=="string"?t:String(t??"");if(n===re.FLOAT)return ao(t,rr(e),!1);if(n===re.INT||n===re.INTEGER)return ao(t,rr(e),!0);if(n===re.INT_SLIDER){const i=rr(e),o=Oo(r,"Min",Number.NaN),s=Oo(r,"Max",Number.NaN),a=ao(t,i,!0);return f0(a,o,s)}if(ef.has(n))return!!t;if(n===re.ENUM){const i=tf(r),o=rr(e);return typeof t=="string"&&i.includes(t)?t:o}if(n===re.LIST)return Array.isArray(t)?t:[];if(n===re.OBJECT){const i=Array.isArray(r.Fields)?r.Fields:[],o=Si(t)?t:{},s={};for(const a of i)typeof(a==null?void 0:a.id)!="string"||!a.id.trim()||(s[a.id]=Ti(a,o[a.id]));return s}return u0.has(n)?ao(t,0,!1):t}function Us(e){const t={},n=Array.isArray(e)?e:[];for(const r of n)typeof(r==null?void 0:r.id)!="string"||!r.id.trim()||(t[r.id]=rr(r));return t}var h0=pe('<textarea class="nodrag min-h-10 w-full resize-y rounded-md border border-vsc-input-border bg-vsc-input-bg px-2 py-1.5 text-xs text-vsc-input-fg"></textarea>'),g0=pe('<input class="nodrag w-full rounded-md border border-vsc-input-border bg-vsc-input-bg px-2 py-1.5 text-xs text-vsc-input-fg" type="text"/>'),v0=pe('<div class="flex flex-col gap-1"><label class="text-xs text-vsc-muted"> </label> <!></div>');function y0(e,t){xe(t,!1);const n=le(),r=le(),i=le(),o=le(),s=le();let a=Z(t,"field",8),u=Z(t,"value",8);const c=un();function d(P){c("change",{value:P})}function h(P){return typeof P!="string"||!P.trim()?"field":P.replace(/[^a-zA-Z0-9_-]/g,"_")}ve(()=>de(a()),()=>{var P;D(n,fn((P=a())==null?void 0:P.options))}),ve(()=>de(a()),()=>{D(r,Jn(a()))}),ve(()=>de(u()),()=>{D(i,typeof u()=="string"?u():String(u()??""))}),ve(()=>l(n),()=>{D(o,Math.max(2,Math.round(Number(l(n).Height)/24)||2))}),ve(()=>de(a()),()=>{var P,w;D(s,`text-${h((P=a())==null?void 0:P.id)}-${((w=a())==null?void 0:w.type)??"value"}`)}),zt(),bt();var f=v0(),g=ce(f),v=ce(g),_=Se(g,2);{var p=P=>{var w=h0();w.__input=M=>d(M.currentTarget.value),Ne(()=>{he(w,"id",l(s)),he(w,"rows",l(o)),nn(w,l(i))}),ie(P,w)},b=T(()=>(de(a()),l(n),_e(()=>{var P;return((P=a())==null?void 0:P.type)==="String"||Number(l(n).Height)>0}))),C=P=>{var w=g0();w.__input=M=>d(M.currentTarget.value),Ne(()=>{he(w,"id",l(s)),nn(w,l(i))}),ie(P,w)};Ze(_,P=>{l(b)?P(p):P(C,!1)})}Ne(()=>{he(g,"for",l(s)),qe(v,l(r))}),ie(e,f),we()}Ft(["input"]);var m0=pe('<div class="flex flex-col gap-1"><label class="text-xs text-vsc-muted"> </label> <input class="nodrag w-full rounded-md border border-vsc-input-border bg-vsc-input-bg px-2 py-1.5 text-xs text-vsc-input-fg" type="number"/></div>');function p0(e,t){xe(t,!1);const n=le(),r=le(),i=le(),o=le(),s=le(),a=le(),u=le();let c=Z(t,"field",8),d=Z(t,"value",8);const h=un();function f(C){h("change",{value:C})}function g(C){return typeof C!="string"||!C.trim()?"field":C.replace(/[^a-zA-Z0-9_-]/g,"_")}ve(()=>de(c()),()=>{var C;D(n,fn((C=c())==null?void 0:C.options))}),ve(()=>de(c()),()=>{D(r,Jn(c()))}),ve(()=>de(d()),()=>{D(i,Number.isFinite(Number(d()))?Number(d()):0)}),ve(()=>l(n),()=>{D(o,Number.isFinite(Number(l(n).Min))?Number(l(n).Min):void 0)}),ve(()=>l(n),()=>{D(s,Number.isFinite(Number(l(n).Max))?Number(l(n).Max):void 0)}),ve(()=>de(c()),()=>{var C;D(a,((C=c())==null?void 0:C.type)==="Float"?"any":"1")}),ve(()=>de(c()),()=>{var C,P;D(u,`number-${g((C=c())==null?void 0:C.id)}-${((P=c())==null?void 0:P.type)??"value"}`)}),zt(),bt();var v=m0(),_=ce(v),p=ce(_),b=Se(_,2);b.__input=C=>f(C.currentTarget.value),Ne(()=>{he(_,"for",l(u)),qe(p,l(r)),he(b,"id",l(u)),nn(b,l(i)),he(b,"step",l(a)),he(b,"min",l(o)),he(b,"max",l(s))}),ie(e,v),we()}Ft(["input"]);var _0=pe('<div class="flex flex-col gap-1"><label class="text-xs text-vsc-muted"> </label> <input class="nodrag w-full" type="range"/></div>');function b0(e,t){xe(t,!1);const n=le(),r=le(),i=le(),o=le(),s=le(),a=le(),u=le(),c=le();let d=Z(t,"field",8),h=Z(t,"value",8);const f=un();function g(P){f("change",{value:P})}function v(P){return typeof P!="string"||!P.trim()?"field":P.replace(/[^a-zA-Z0-9_-]/g,"_")}ve(()=>de(d()),()=>{var P;D(n,fn((P=d())==null?void 0:P.options))}),ve(()=>de(d()),()=>{D(r,Jn(d()))}),ve(()=>l(n),()=>{D(i,Number.isFinite(Number(l(n).Min))?Number(l(n).Min):0)}),ve(()=>l(n),()=>{D(o,Number.isFinite(Number(l(n).Max))?Number(l(n).Max):100)}),ve(()=>l(n),()=>{D(s,Number.isFinite(Number(l(n).TickFrequency))?Number(l(n).TickFrequency):1)}),ve(()=>(de(h()),l(i)),()=>{D(a,Number.isFinite(Number(h()))?Number(h()):l(i))}),ve(()=>(l(r),l(a)),()=>{D(u,`${l(r)} (${l(a)})`)}),ve(()=>de(d()),()=>{var P,w;D(c,`slider-${v((P=d())==null?void 0:P.id)}-${((w=d())==null?void 0:w.type)??"value"}`)}),zt(),bt();var _=_0(),p=ce(_),b=ce(p),C=Se(p,2);C.__input=P=>g(P.currentTarget.value),Ne(()=>{he(p,"for",l(c)),qe(b,l(u)),he(C,"id",l(c)),he(C,"min",l(i)),he(C,"max",l(o)),he(C,"step",l(s)),nn(C,l(a))}),ie(e,_),we()}Ft(["input"]);var x0=pe('<div class="flex flex-row items-center justify-between gap-2"><label class="text-xs text-vsc-muted"> </label> <input class="nodrag h-4 w-4" type="checkbox"/></div>');function w0(e,t){xe(t,!1);const n=le(),r=le(),i=le();let o=Z(t,"field",8),s=Z(t,"value",8);const a=un();function u(v){a("change",{value:v})}function c(v){return typeof v!="string"||!v.trim()?"field":v.replace(/[^a-zA-Z0-9_-]/g,"_")}ve(()=>de(o()),()=>{D(n,Jn(o()))}),ve(()=>de(s()),()=>{D(r,!!s())}),ve(()=>de(o()),()=>{var v,_;D(i,`bool-${c((v=o())==null?void 0:v.id)}-${((_=o())==null?void 0:_.type)??"value"}`)}),zt(),bt();var d=x0(),h=ce(d),f=ce(h),g=Se(h,2);g.__change=v=>u(v.currentTarget.checked),Ne(()=>{he(h,"for",l(i)),qe(f,l(n)),he(g,"id",l(i)),Wu(g,l(r))}),ie(e,d),we()}Ft(["change"]);var E0=pe("<option> </option>"),N0=pe('<div class="flex flex-col gap-1"><label class="text-xs text-vsc-muted"> </label> <select class="nodrag w-full rounded-md border border-vsc-input-border bg-vsc-input-bg px-2 py-1.5 text-xs text-vsc-input-fg"></select></div>');function I0(e,t){xe(t,!1);const n=le(),r=le(),i=le(),o=le(),s=le();let a=Z(t,"field",8),u=Z(t,"value",8);const c=un();function d(b){c("change",{value:b})}function h(b){return typeof b!="string"||!b.trim()?"field":b.replace(/[^a-zA-Z0-9_-]/g,"_")}ve(()=>de(a()),()=>{var b;D(n,fn((b=a())==null?void 0:b.options))}),ve(()=>de(a()),()=>{D(r,Jn(a()))}),ve(()=>l(n),()=>{D(i,Array.isArray(l(n).Values)?l(n).Values.filter(b=>typeof b=="string"):[])}),ve(()=>(de(u()),l(i)),()=>{D(o,typeof u()=="string"?u():l(i)[0]??"")}),ve(()=>de(a()),()=>{var b,C;D(s,`enum-${h((b=a())==null?void 0:b.id)}-${((C=a())==null?void 0:C.type)??"value"}`)}),zt(),bt();var f=N0(),g=ce(f),v=ce(g),_=Se(g,2);_.__change=b=>d(b.currentTarget.value),In(_,5,()=>l(i),Zr,(b,C)=>{var P=E0(),w=ce(P),M={};Ne(()=>{qe(w,l(C)),M!==(M=l(C))&&(P.value=(P.__value=l(C))??"")}),ie(b,P)});var p;Ku(_),Ne(()=>{he(g,"for",l(s)),qe(v,l(r)),he(_,"id",l(s)),p!==(p=l(o))&&(_.value=(_.__value=l(o))??"",po(_,l(o)))}),ie(e,f),we()}Ft(["change"]);var S0=pe('<div class="flex flex-col gap-1"><label class="text-xs text-vsc-muted"> </label> <input class="nodrag w-full rounded-md border border-vsc-input-border bg-vsc-input-bg px-2 py-1.5 text-xs text-vsc-input-fg" type="text" placeholder="path/to/file.json" spellcheck="false"/></div>');function T0(e,t){xe(t,!1);const n=le(),r=le(),i=le();let o=Z(t,"field",8),s=Z(t,"value",8);const a=un();function u(v){a("change",{value:v})}function c(v){return typeof v!="string"||!v.trim()?"field":v.replace(/[^a-zA-Z0-9_-]/g,"_")}ve(()=>de(o()),()=>{D(n,Jn(o()))}),ve(()=>de(s()),()=>{D(r,typeof s()=="string"?s():String(s()??""))}),ve(()=>de(o()),()=>{var v,_;D(i,`path-${c((v=o())==null?void 0:v.id)}-${((_=o())==null?void 0:_.type)??"value"}`)}),zt(),bt();var d=S0(),h=ce(d),f=ce(h),g=Se(h,2);g.__input=v=>u(v.currentTarget.value),Ne(()=>{he(h,"for",l(i)),qe(f,l(n)),he(g,"id",l(i)),nn(g,l(r))}),ie(e,d),we()}Ft(["input"]);var C0=pe('<div class="text-xs text-vsc-muted">No items</div>'),A0=pe('<input class="nodrag h-4 w-4" type="checkbox"/>'),k0=pe('<input class="nodrag w-full rounded-md border border-vsc-input-border bg-vsc-input-bg px-2 py-1.5 text-xs text-vsc-input-fg" type="number"/>'),M0=pe('<textarea class="nodrag min-h-10 w-full resize-y rounded-md border border-vsc-input-border bg-vsc-input-bg px-2 py-1.5 text-xs text-vsc-input-fg" rows="3"></textarea>'),P0=pe('<input class="nodrag w-full rounded-md border border-vsc-input-border bg-vsc-input-bg px-2 py-1.5 text-xs text-vsc-input-fg" type="text"/>'),O0=pe('<div class="flex items-start gap-1.5"><div class="flex-1"><!></div> <button class="rounded-md border border-vsc-button-border bg-vsc-button-secondary-bg px-2 py-1 text-xs text-vsc-button-secondary-fg hover:bg-vsc-button-secondary-hover" type="button">Remove</button></div>'),D0=pe('<div class="flex flex-col gap-1.5"></div>'),L0=pe('<div class="flex flex-col gap-1.5 rounded-md border border-dashed border-vsc-editor-widget-border p-2"><div class="flex items-center justify-between gap-2"><div class="text-xs font-bold uppercase text-vsc-muted"> </div> <button class="rounded-md border border-vsc-button-border bg-vsc-button-secondary-bg px-2 py-1 text-xs text-vsc-button-secondary-fg hover:bg-vsc-button-secondary-hover" type="button">Add</button></div> <!> <div class="text-xs text-vsc-muted"> </div></div>');function z0(e,t){xe(t,!1);const n=le(),r=le(),i=le(),o=le();let s=Z(t,"field",8),a=Z(t,"value",8);const u=un();function c(S){u("change",{value:S})}function d(){return rr({type:l(i),options:l(n).ElementOptions??{}})}function h(){c([...l(o),d()])}function f(S){c(l(o).filter((m,k)=>k!==S))}function g(S,m){const k=l(o).slice();k[S]=m,c(k)}function v(S,m){g(S,m)}function _(S,m){const k=Number(m);g(S,Number.isFinite(k)?k:0)}function p(S,m){g(S,!!m)}function b(S,m){try{const k=JSON.parse(m);k!==null&&typeof k=="object"&&g(S,k)}catch{}}function C(S){try{return JSON.stringify(S??{},null,2)}catch{return"{}"}}ve(()=>de(s()),()=>{var S;D(n,fn((S=s())==null?void 0:S.options))}),ve(()=>de(s()),()=>{D(r,Jn(s()))}),ve(()=>de(s()),()=>{D(i,c0(s()))}),ve(()=>de(a()),()=>{D(o,Array.isArray(a())?a():[])}),zt(),bt();var P=L0(),w=ce(P),M=ce(w),L=ce(M),q=Se(M,2);q.__click=h;var O=Se(w,2);{var R=S=>{var m=C0();ie(S,m)},J=S=>{var m=D0();In(m,5,()=>l(o),Zr,(k,I,F)=>{var B=O0(),Y=ce(B),H=ce(Y);{var $=ee=>{var te=A0();te.__change=oe=>p(F,oe.currentTarget.checked),Ne(oe=>Wu(te,oe),[()=>(l(I),_e(()=>!!l(I)))]),ie(ee,te)},se=ee=>{var te=k0();te.__input=oe=>_(F,oe.currentTarget.value),Ne(oe=>nn(te,oe),[()=>(l(I),_e(()=>Number.isFinite(Number(l(I)))?Number(l(I)):0))]),ie(ee,te)},ae=ee=>{var te=M0();te.__input=oe=>b(F,oe.currentTarget.value),Ne(oe=>nn(te,oe),[()=>(l(I),_e(()=>C(l(I))))]),ie(ee,te)},K=ee=>{var te=P0();te.__input=oe=>v(F,oe.currentTarget.value),Ne(oe=>nn(te,oe),[()=>(l(I),_e(()=>typeof l(I)=="string"?l(I):String(l(I)??"")))]),ie(ee,te)};Ze(H,ee=>{l(i)==="Checkbox"||l(i)==="Bool"?ee($):l(i)==="Int"||l(i)==="Integer"||l(i)==="IntSlider"||l(i)==="Float"?ee(se,1):l(i)==="Object"?ee(ae,2):ee(K,!1)})}var me=Se(Y,2);me.__click=()=>f(F),ie(k,B)}),ie(S,m)};Ze(O,S=>{l(o),_e(()=>l(o).length===0)?S(R):S(J,!1)})}var N=Se(O,2),x=ce(N);Ne(()=>{qe(L,l(r)),qe(x,`Element type: ${l(i)??""}`)}),ie(e,P),we()}Ft(["click","change","input"]);var F0=pe('<div class="flex flex-col gap-1.5 rounded-md border border-dashed border-vsc-editor-widget-border p-2"><div class="text-xs font-bold uppercase text-vsc-muted"> </div> <div class="flex flex-col gap-1.5"><!></div></div>');function R0(e,t){xe(t,!1);const n=le();let r=Z(t,"field",8);ve(()=>de(r()),()=>{D(n,Jn(r()))}),zt(),bt();var i=F0(),o=ce(i),s=ce(o),a=Se(o,2),u=ce(a);Pd(u,t,"default",{}),Ne(()=>qe(s,l(n))),ie(e,i),we()}function nf(e,t){xe(t,!1);const n=le(),r=le(),i=le(),o=le();let s=Z(t,"field",8),a=Z(t,"value",8);const u=un();function c(M){u("change",{value:Ti(s(),M)})}function d(M,L){const q=Si(l(r))?l(r):{};c({...q,[M]:L})}ve(()=>de(s()),()=>{var M;D(n,Pa((M=s())==null?void 0:M.type))}),ve(()=>(de(s()),de(a())),()=>{D(r,Ti(s(),a()))}),ve(()=>de(s()),()=>{var M;D(i,fn((M=s())==null?void 0:M.options))}),ve(()=>l(i),()=>{D(o,Array.isArray(l(i).Fields)?l(i).Fields:[])}),zt(),bt();var h=pt(),f=Ge(h);{var g=M=>{R0(M,{get field(){return s()},children:(L,q)=>{var O=pt(),R=Ge(O);In(R,1,()=>l(o),Zr,(J,N)=>{var x=pt(),S=Ge(x);{var m=I=>{var F=pt(),B=Ge(F);{let Y=Ki(()=>(l(r),l(N),_e(()=>{var H;return(H=l(r))==null?void 0:H[l(N).id]})));nf(B,{get field(){return l(N)},get value(){return l(Y)},$$events:{change:H=>d(l(N).id,H.detail.value)}})}ie(I,F)},k=T(()=>(l(N),_e(()=>{var I;return typeof((I=l(N))==null?void 0:I.id)=="string"&&l(N).id.trim()})));Ze(S,I=>{l(k)&&I(m)})}ie(J,x)}),ie(L,O)},$$slots:{default:!0}})},v=M=>{z0(M,{get field(){return s()},get value(){return l(r)},$$events:{change:L=>c(L.detail.value)}})},_=M=>{I0(M,{get field(){return s()},get value(){return l(r)},$$events:{change:L=>c(L.detail.value)}})},p=M=>{T0(M,{get field(){return s()},get value(){return l(r)},$$events:{change:L=>c(L.detail.value)}})},b=M=>{b0(M,{get field(){return s()},get value(){return l(r)},$$events:{change:L=>c(L.detail.value)}})},C=M=>{w0(M,{get field(){return s()},get value(){return l(r)},$$events:{change:L=>c(L.detail.value)}})},P=M=>{p0(M,{get field(){return s()},get value(){return l(r)},$$events:{change:L=>c(L.detail.value)}})},w=M=>{y0(M,{get field(){return s()},get value(){return l(r)},$$events:{change:L=>c(L.detail.value)}})};Ze(f,M=>{l(n),de(re),_e(()=>l(n)===re.OBJECT)?M(g):(l(n),de(re),_e(()=>l(n)===re.LIST)?M(v,1):(l(n),de(re),_e(()=>l(n)===re.ENUM)?M(_,2):(l(n),de(re),_e(()=>l(n)===re.FILE_PATH)?M(p,3):(l(n),de(re),_e(()=>l(n)===re.INT_SLIDER)?M(b,4):(l(n),de(re),_e(()=>l(n)===re.CHECKBOX||l(n)===re.BOOL)?M(C,5):(l(n),de(re),_e(()=>l(n)===re.INT||l(n)===re.INTEGER||l(n)===re.FLOAT)?M(P,6):M(w,!1)))))))})}ie(e,h),we()}function zn(e){return{...e,buildInitialValues:()=>Us(e.fields)}}const Ci=[zn({templateId:"simple",label:"Simple Node",subtitle:"Basic custom node",category:"Basics",defaultTypeName:"Simple",fields:[{id:"Label",type:re.SMALL_STRING,label:"Label",options:{Label:"Label",Default:"Simple Node",Width:220}},{id:"Subtitle",type:re.STRING,label:"Subtitle",options:{Label:"Subtitle",Default:"Basic custom node",Width:220,Height:60}}]}),zn({templateId:"text",label:"Text Node",subtitle:"Headline + body",category:"Basics",defaultTypeName:"Text",fields:[{id:"Headline",type:re.SMALL_STRING,label:"Headline",options:{Label:"Headline",Default:"Untitled"}},{id:"Body",type:re.STRING,label:"Body",options:{Label:"Body",Default:"Write notes here...",Height:80,Width:260}}]}),zn({templateId:"numbers",label:"Number Node",subtitle:"Int + Integer + Float",category:"Controls",defaultTypeName:"Number",fields:[{id:"Quantity",type:re.INT,label:"Quantity",options:{Label:"Quantity",Default:10,SmallChange:1,LargeChange:5}},{id:"Maximum",type:re.INTEGER,label:"Maximum",options:{Label:"Maximum",Default:100,Width:100}},{id:"Scale",type:re.FLOAT,label:"Scale",options:{Label:"Scale",Default:1.25,Width:100}}]}),zn({templateId:"slider",label:"Slider Node",subtitle:"IntSlider field",category:"Controls",defaultTypeName:"Slider",fields:[{id:"Strength",type:re.INT_SLIDER,label:"Strength",options:{Label:"Strength",Default:45,Min:0,Max:100,TickFrequency:5,Width:220}}]}),zn({templateId:"toggles",label:"Toggle Node",subtitle:"Checkbox + Bool + Enum",category:"Controls",defaultTypeName:"Toggle",fields:[{id:"Enabled",type:re.CHECKBOX,label:"Enabled",options:{Label:"Enabled",Default:!0}},{id:"Verbose",type:re.BOOL,label:"Verbose",options:{Label:"Verbose",DefaultValue:!1}},{id:"Mode",type:re.ENUM,label:"Mode",options:{Label:"Mode",Default:"Balanced",Values:["Fast","Balanced","Accurate"],Width:180}}]}),zn({templateId:"assets",label:"Asset Node",subtitle:"FilePath + List",category:"Data",defaultTypeName:"Asset",fields:[{id:"AssetPath",type:re.FILE_PATH,label:"Asset Path",options:{Label:"Asset Path",Default:"resources/my_asset.json",Width:260,UseUUID:!1}},{id:"Tags",type:re.LIST,label:"Tags",options:{Label:"Tags",Type:re.STRING,Width:220}}]}),zn({templateId:"object",label:"Object Node",subtitle:"Nested Object fields",category:"Data",defaultTypeName:"ObjectNode",fields:[{id:"Offset",type:re.OBJECT,label:"Offset",options:{Label:"Offset",Fields:[{id:"X",type:re.OBJECT,label:"X",options:{Label:"X",Fields:[{id:"Value",type:re.INT,label:"Value",options:{Label:"Value",Default:0}},{id:"Relative",type:re.CHECKBOX,label:"Relative",options:{Label:"Relative",Default:!1}}]}},{id:"Y",type:re.OBJECT,label:"Y",options:{Label:"Y",Fields:[{id:"Value",type:re.INT,label:"Value",options:{Label:"Value",Default:0}},{id:"Relative",type:re.CHECKBOX,label:"Relative",options:{Label:"Relative",Default:!1}}]}}]}}]}),zn({templateId:"all-fields",label:"All Fields Node",subtitle:"Coverage for all supported field types",category:"Coverage",defaultTypeName:"AllFields",fields:[{id:"SmallString",type:re.SMALL_STRING,label:"SmallString",options:{Label:"SmallString",Default:"Example"}},{id:"String",type:re.STRING,label:"String",options:{Label:"String",Default:"Multiline text",Height:72}},{id:"Float",type:re.FLOAT,label:"Float",options:{Label:"Float",Default:1.5}},{id:"Int",type:re.INT,label:"Int",options:{Label:"Int",Default:3}},{id:"Integer",type:re.INTEGER,label:"Integer",options:{Label:"Integer",Default:64}},{id:"IntSlider",type:re.INT_SLIDER,label:"IntSlider",options:{Label:"IntSlider",Default:35,Min:0,Max:100,TickFrequency:5}},{id:"Checkbox",type:re.CHECKBOX,label:"Checkbox",options:{Label:"Checkbox",Default:!0}},{id:"Bool",type:re.BOOL,label:"Bool",options:{Label:"Bool",DefaultValue:!1}},{id:"Enum",type:re.ENUM,label:"Enum",options:{Label:"Enum",Values:["Low","Medium","High"],Default:"Medium"}},{id:"FilePath",type:re.FILE_PATH,label:"FilePath",options:{Label:"FilePath",Default:"data/sample.json"}},{id:"List",type:re.LIST,label:"List",options:{Label:"List",ArrayElementType:re.STRING}},{id:"Object",type:re.OBJECT,label:"Object",options:{Label:"Object",Fields:[{id:"Min",type:re.FLOAT,label:"Min",options:{Label:"Min",Default:0}},{id:"Max",type:re.FLOAT,label:"Max",options:{Label:"Max",Default:1}}]}}]})],V0=new Map(Ci.map(e=>[e.templateId,e]));function js(e){return V0.get(e)}function Js(){return Ci[0]}function yi(e){if(typeof e!="string"||!e.trim())return;const t=e.trim().toLowerCase();return Ci.find(n=>n.defaultTypeName.toLowerCase()===t||n.label.toLowerCase()===t||n.templateId.toLowerCase()===t)}var B0=pe('<div class="text-xs text-vsc-muted"> </div>'),H0=pe('<div class="min-w-72 max-w-80 rounded-lg border border-vsc-editor-widget-border bg-vsc-editor-widget-bg p-2.5 text-vsc-editor-fg shadow-lg"><!> <div class="mb-2 flex flex-col gap-1"><input class="nodrag w-full rounded-md border border-vsc-input-border bg-vsc-input-bg px-2 py-1.5 text-xs font-bold text-vsc-input-fg" type="text"/> <!></div> <div class="flex flex-col gap-2"><!> <div class="flex flex-col gap-1"><label class="text-xs text-vsc-muted">Comment</label> <textarea class="nodrag min-h-10 w-full resize-y rounded-md border border-vsc-input-border bg-vsc-input-bg px-2 py-1.5 text-xs text-vsc-input-fg" rows="2"></textarea></div></div> <!></div>');function K0(e,t){xe(t,!1);const n=le(),r=le(),i=le(),o=le(),s=le();let a=Z(t,"id",8),u=Z(t,"data",24,()=>({}));const{updateNodeData:c}=Ma();function d(N){c(a(),{label:N,$templateId:l(n).templateId})}function h(N){const x=typeof N=="string"?N:"";c(a(),{$comment:x,$templateId:l(n).templateId})}function f(N,x){var k;const S=Si((k=u())==null?void 0:k.$fieldValues)?u().$fieldValues:{},m=Ti(N,x);c(a(),{$templateId:l(n).templateId,$fieldValues:{...S,[N.id]:m}})}function g(N){return Ti(N,l(o)[N.id])}function v(N){return typeof N!="string"||!N.trim()?"node":N.replace(/[^a-zA-Z0-9_-]/g,"_")}ve(()=>(de(u()),Js),()=>{var N,x,S;D(n,js((N=u())==null?void 0:N.$templateId)??yi((x=u())==null?void 0:x.Type)??yi((S=u())==null?void 0:S.label)??Js())}),ve(()=>(l(n),Us),()=>{var N,x,S;D(r,((x=(N=l(n))==null?void 0:N.buildInitialValues)==null?void 0:x.call(N))??Us(((S=l(n))==null?void 0:S.fields)??[]))}),ve(()=>de(u()),()=>{var N;D(i,Si((N=u())==null?void 0:N.$fieldValues)?u().$fieldValues:{})}),ve(()=>(l(r),l(i)),()=>{D(o,{...l(r),...l(i)})}),ve(()=>de(a()),()=>{D(s,`comment-${v(a())}`)}),zt(),bt();var _=H0(),p=ce(_);ti(p,{type:"target",get position(){return de(be),_e(()=>be.Left)}});var b=Se(p,2),C=ce(b);C.__input=N=>d(N.currentTarget.value);var P=Se(C,2);{var w=N=>{var x=B0(),S=ce(x);Ne(()=>qe(S,(l(n),_e(()=>l(n).subtitle)))),ie(N,x)};Ze(P,N=>{l(n),_e(()=>{var x;return(x=l(n))==null?void 0:x.subtitle})&&N(w)})}var M=Se(b,2),L=ce(M);In(L,1,()=>(l(n),_e(()=>l(n).fields)),Zr,(N,x)=>{{let S=Ki(()=>(l(x),_e(()=>g(l(x)))));nf(N,{get field(){return l(x)},get value(){return l(S)},$$events:{change:m=>f(l(x),m.detail.value)}})}});var q=Se(L,2),O=ce(q),R=Se(O,2);R.__input=N=>h(N.currentTarget.value);var J=Se(M,2);ti(J,{type:"source",get position(){return de(be),_e(()=>be.Right)}}),Ne(()=>{nn(C,(de(u()),l(n),_e(()=>{var N;return typeof((N=u())==null?void 0:N.label)=="string"?u().label:l(n).label}))),he(O,"for",l(s)),he(R,"id",l(s)),nn(R,(de(u()),_e(()=>{var N;return typeof((N=u())==null?void 0:N.$comment)=="string"?u().$comment:""})))}),ie(e,_),we()}Ft(["input"]);var Y0=pe("<div><!> <!></div>");function X0(e,t){xe(t,!1);let n=Z(t,"nodes",28,B),r=Z(t,"edges",28,()=>[]),i=Z(t,"loadVersion",8,0);const o=un(),s={[pn]:K0},{screenToFlowPosition:a,fitView:u}=Ma();let c=le(-1),d=le(),h=le(!1),f=le(0),g=le({x:0,y:0}),v={x:0,y:0},_,p,b=!1,C=le(!1),P=!1,w=le(!1);function M(W){o("flowchange",{reason:W,nodes:n(),edges:r()})}function L(){const W=Array.isArray(n())?n().map(ne=>q(ne)):[];O(n(),W)||n(W)}function q(W){return{...W,type:typeof(W==null?void 0:W.type)=="string"&&W.type.trim()?W.type:pn,data:{...(W==null?void 0:W.data)??{}}}}function O(W,ne){if(!Array.isArray(W)||!Array.isArray(ne)||W.length!==ne.length)return!1;for(let Ie=0;Ie<W.length;Ie+=1){const ge=W[Ie],A=ne[Ie];if((ge==null?void 0:ge.id)!==(A==null?void 0:A.id)||(ge==null?void 0:ge.type)!==(A==null?void 0:A.type)||!me(ge==null?void 0:ge.data)||!me(A==null?void 0:A.data))return!1}return!0}function R(W){r(Dc(W,r())),M("edge-created")}function J(){M("node-moved")}function N(){D(h,!1),_=void 0}function x(W,ne=void 0){var z,G;const{clientX:Ie,clientY:ge}=Y(W),A=(G=(z=l(d))==null?void 0:z.getBoundingClientRect)==null?void 0:G.call(z);A&&(D(g,{x:Ie-A.left,y:ge-A.top-60}),v=a({x:Ie,y:ge}),_=ne,D(h,!0),D(f,l(f)+1))}function S(W){const ne=W==null?void 0:W.event;ne&&(ne.preventDefault(),x(ne))}function m(){if(b){b=!1;return}N(),M("node-created")}function k(W,ne){p=typeof(ne==null?void 0:ne.nodeId)=="string"&&ne.nodeId.trim()?ne.nodeId.trim():void 0}function I(W,ne){var z,G,X;const Ie=H(W),ge=$(W,ne);if(ge!=null&&ge.isValid){p=void 0;return}const A=((z=ge==null?void 0:ge.fromNode)==null?void 0:z.id)??p??((X=(G=n())==null?void 0:G[0])==null?void 0:X.id)??"Node-00000000-0000-0000-0000-000000000000";b=!0,x(Ie,A),p=void 0}function F(W){var A;const ne=(A=W==null?void 0:W.detail)==null?void 0:A.template;if(!ne)return;const Ie=`${se(ne.defaultTypeName)}-${ae()}`,ge={id:Ie,type:pn,data:{label:ne.label,Type:ne.defaultTypeName,$templateId:ne.templateId,$fieldValues:ne.buildInitialValues()},position:{...v},origin:[.5,0]};n([...n(),ge]),typeof _=="string"&&_.trim()&&r([...r(),{id:`${_}--${Ie}`,source:_,target:Ie}]),N()}function B(){const W=Ci[0];return[{id:"Node-00000000-0000-0000-0000-000000000000",type:pn,data:{label:W.label,Type:W.defaultTypeName,$templateId:W.templateId,$fieldValues:W.buildInitialValues()},position:{x:0,y:50}}]}function Y(W){if(!W||typeof W!="object")return{clientX:0,clientY:0};if("changedTouches"in W&&W.changedTouches.length>0){const ne=W.changedTouches[0];return{clientX:ne.clientX,clientY:ne.clientY}}return{clientX:Number(W.clientX)||0,clientY:Number(W.clientY)||0}}function H(W){return W&&typeof W=="object"&&W.event?W.event:W}function $(W,ne){if(ne&&typeof ne=="object")return ne;if(W&&typeof W=="object"&&W.connectionState)return W.connectionState}function se(W){if(typeof W=="string"){const ne=W.trim().replace(/[^A-Za-z0-9_]/g,"");if(ne)return ne}return"Node"}function ae(){return typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`${Date.now().toString(16)}${Math.random().toString(16).slice(2)}`}async function K(){l(C)||P||(P=!0,await fa(),Array.isArray(n())&&n().length>0&&u({padding:.2,duration:0}),D(C,!0),D(w,!0),P=!1)}function me(W){return W!==null&&typeof W=="object"&&!Array.isArray(W)}ve(()=>(de(i()),l(c)),()=>{i()!==l(c)&&(D(c,i()),L())}),ve(()=>(l(C),de(i())),()=>{!l(C)&&i()>0&&K()}),zt(),bt();var ee=Y0();let te;var oe=ce(ee);Zp(oe,{get nodeTypes(){return s},onconnect:R,onconnectstart:k,onconnectend:I,onnodedragstop:J,onpaneclick:m,onpanecontextmenu:S,get nodes(){return n()},set nodes(W){n(W)},get edges(){return r()},set edges(W){r(W)},children:(W,ne)=>{n0(W,{bgColor:"var(--vscode-editor-background)"})},$$slots:{default:!0},$$legacy:!0});var ke=Se(oe,2);l0(ke,{get open(){return l(h)},get openVersion(){return l(f)},get position(){return l(g)},get templates(){return Ci},$$events:{close:N,select:F}}),Nr(ee,W=>D(d,W),()=>l(d)),Ne(()=>te=An(ee,1,"relative w-full h-full overflow-hidden",null,te,{invisible:!l(w)})),ie(e,ee),we()}var W0=pe('<div class="mb-2 text-sm text-vsc-error"> </div>'),G0=pe('<main class="flex flex-col h-screen min-h-0 p-3"><!> <!></main>');function q0(e,t){xe(t,!1);let n=Z(t,"vscode",8);const r="$NodeEditorMetadata",i=["$WorkspaceID","$Nodes","$FloatingNodes","$Links","$Groups","$Comments"],o=["$WorkspaceID","$Groups","$Comments"],s="$templateId",a="$fieldValues",u=w("");let c=le(u.nodes),d=le(u.edges),h=u.runtimeFields,f=u.metadataContext,g=u.serializedText,v=-1,_=le(0),p=le("");function b(A){const z=A.data;if(!(!z||typeof z.type!="string")){if(z.type==="update"){v=typeof z.version=="number"?z.version:v;const G=typeof z.text=="string"?z.text:"";try{const X=w(G);D(c,X.nodes),D(d,X.edges),h=X.runtimeFields,f=X.metadataContext,g=X.serializedText,D(_,l(_)+1),D(p,"")}catch(X){D(p,X instanceof Error?X.message:"Could not parse flow JSON.")}return}z.type==="error"&&D(p,typeof z.message=="string"?z.message:"Unknown editor error.")}}function C(A){const z=A.detail??{};P(z.nodes,z.edges)}function P(A,z){const G=x({nodes:Array.isArray(A)?A:[],edges:Array.isArray(z)?z:[],runtimeFields:h,metadataContext:f});G.text!==g&&(D(c,G.nodes),D(d,G.edges),f=G.metadataContext,n().postMessage({type:"apply",text:G.text,sourceVersion:v}))}Zu(()=>(window.addEventListener("message",b),n().postMessage({type:"ready"}),()=>{window.removeEventListener("message",b)}));function w(A){if(!A.trim())return M({},{});let z;try{z=JSON.parse(A)}catch{throw new Error("The underlying file is not valid JSON.")}if(!K(z))throw new Error("The flow file must be a JSON object.");const G=K(z[r]);if(!G&&(Array.isArray(z.nodes)||Array.isArray(z.edges)))return L(z);if(!G&&ee(z))return q(z);const X=G?z[r]:{},U=ae(z,[r]);return M(U,X)}function M(A,z){const G=te(A),X=new Set(Object.keys(G)),U=N(z,G,X);let j=J(U);j.nodes.length===0&&(j=J(R(U)));const Q=x({nodes:j.nodes,edges:j.edges,runtimeFields:A,metadataContext:U});return{nodes:Q.nodes,edges:Q.edges,runtimeFields:A,metadataContext:Q.metadataContext,serializedText:Q.text}}function L(A){var Ye,ye,Be,nt,ct,xt,wt;const z=ae(A,["nodes","edges",r]),G=m(),X=[],U=[],j=new Set,Q=Array.isArray(A.nodes)?A.nodes:[];for(let Me=0;Me<Q.length;Me+=1){const fe=Q[Me],Pe=$(fe==null?void 0:fe.id,fe==null?void 0:fe.type);if(j.has(Pe))continue;j.add(Pe);const Ue=se(fe==null?void 0:fe.position,Me),Xe=typeof((Ye=fe==null?void 0:fe.data)==null?void 0:Ye.label)=="string"&&fe.data.label.trim()?fe.data.label.trim():H(Pe),at=typeof((ye=fe==null?void 0:fe.data)==null?void 0:ye.$comment)=="string"&&fe.data.$comment.trim()?fe.data.$comment.trim():void 0,lt=K((Be=fe==null?void 0:fe.data)==null?void 0:Be.$nodePayload)?{...fe.data.$nodePayload}:{},Ke=F((nt=fe==null?void 0:fe.data)==null?void 0:nt[s],lt),je=B((ct=fe==null?void 0:fe.data)==null?void 0:ct[a],lt);G.nodeMetadataById[Pe]={$Position:{$x:Ue.x,$y:Ue.y}},Xe!==H(Pe)&&(G.nodeMetadataById[Pe].$Title=Xe);const ft=lt;ft.$NodeId=Pe,at!==void 0&&(ft.$Comment=at),Ke!==void 0&&(ft[Dn]=Ke),je!==void 0&&(ft[Ln]=je),G.nodePayloadById[Pe]=ft,X.push({id:Pe,type:pn,data:{label:Xe,...Ke!==void 0?{[s]:Ke}:{},...je!==void 0?{[a]:je}:{},...at!==void 0?{$comment:at}:{}},position:Ue})}const ue=Array.isArray(A.edges)?A.edges:[];for(let Me=0;Me<ue.length;Me+=1){const fe=ue[Me],Pe=typeof(fe==null?void 0:fe.source)=="string"?fe.source:void 0,Ue=typeof(fe==null?void 0:fe.target)=="string"?fe.target:void 0;if(!Pe||!Ue||!j.has(Pe)||!j.has(Ue))continue;const Xe=typeof(fe==null?void 0:fe.id)=="string"&&fe.id.trim()?fe.id.trim():`${Pe}--${Ue}`;G.linkById[Xe]={$SourceNodeId:Pe,$TargetNodeId:Ue},U.push({id:Xe,source:Pe,target:Ue})}if(X.length===0){const Me=k();X.push(Me),G.nodeMetadataById[Me.id]={$Position:{$x:Me.position.x,$y:Me.position.y}},G.nodePayloadById[Me.id]={$NodeId:Me.id,[Dn]:(xt=Me.data)==null?void 0:xt[s],[Ln]:(wt=Me.data)==null?void 0:wt[a]}}const Le=x({nodes:X,edges:U,runtimeFields:z,metadataContext:G});return{nodes:Le.nodes,edges:Le.edges,runtimeFields:z,metadataContext:Le.metadataContext,serializedText:Le.text}}function q(A){const z=m();z.workspaceId=typeof A.$WorkspaceID=="string"?A.$WorkspaceID:void 0,z.groups=Array.isArray(A.$Groups)?A.$Groups:[],z.comments=Array.isArray(A.$Comments)?A.$Comments:[];const G=ae(A,o),X=O(G);z.nodeMetadataById=X.nodeMetadataById,z.nodePayloadById=X.nodePayloadById,z.runtimeTreeNodeIds=X.runtimeTreeNodeIds;const U=K(X.runtimeRoot)?X.runtimeRoot:{},j={nodes:X.flowNodes,edges:[]},Q=x({nodes:j.nodes,edges:j.edges,runtimeFields:U,metadataContext:z});return{nodes:Q.nodes,edges:Q.edges,runtimeFields:U,metadataContext:Q.metadataContext,serializedText:Q.text}}function O(A){var Le,Ye;const z={},G={},X=new Set,U=[];let j=0;const Q=(ye,Be,nt=!1)=>{if(Array.isArray(ye))return ye.map((Ke,je)=>Q(Ke,`${Be}${je}`,!1));if(!K(ye))return ye;if(!(nt||typeof ye.$NodeId=="string"&&ye.$NodeId.trim()||me(ye.$Position)))return Object.fromEntries(Object.entries(ye).map(([Ke,je])=>[Ke,Q(je,Ke,!1)]));const xt=j;j+=1;const wt=typeof ye.Type=="string"&&ye.Type.trim()?ye.Type.trim():Be,Me=$(ye.$NodeId,wt),fe=se(ye.$Position,xt),Pe=typeof ye.$Title=="string"&&ye.$Title.trim()?ye.$Title.trim():void 0,Ue=typeof ye.$Comment=="string"&&ye.$Comment.trim()?ye.$Comment.trim():void 0,Xe={};for(const[Ke,je]of Object.entries(ye))Ke==="$NodeId"||Ke==="$Position"||Ke==="$Title"||(Xe[Ke]=Q(je,Ke,!1));Xe.$NodeId=Me,z[Me]={$Position:{$x:fe.x,$y:fe.y},...Pe?{$Title:Pe}:{}},G[Me]=Xe,X.add(Me);const at=F(void 0,Xe),lt=B(void 0,Xe);return U.push({id:Me,type:pn,data:{label:I(Me,z[Me],void 0,Xe),...at!==void 0?{[s]:at}:{},...lt!==void 0?{[a]:lt}:{},...Ue!==void 0?{$comment:Ue}:{}},position:fe}),Xe},ue=Q(A,"Root",!0);if(U.length===0){const ye=k();X.add(ye.id),z[ye.id]={$Position:{$x:ye.position.x,$y:ye.position.y}},G[ye.id]={$NodeId:ye.id,[Dn]:(Le=ye.data)==null?void 0:Le[s],[Ln]:(Ye=ye.data)==null?void 0:Ye[a]},U.push(ye)}return{runtimeRoot:ue,nodeMetadataById:z,nodePayloadById:G,runtimeTreeNodeIds:X,flowNodes:U}}function R(A){var X,U;const z={...A,nodeMetadataById:{...A.nodeMetadataById},nodePayloadById:{...A.nodePayloadById}},G=k();return z.nodeMetadataById[G.id]={$Position:{$x:G.position.x,$y:G.position.y}},z.nodePayloadById[G.id]={$NodeId:G.id,[Dn]:(X=G.data)==null?void 0:X[s],[Ln]:(U=G.data)==null?void 0:U[a]},z}function J(A){const z=new Set([...Object.keys(A.nodeMetadataById),...Object.keys(A.nodePayloadById)]),G=[];for(const[j,Q]of Object.entries(A.linkById)){const ue=S(j,Q);ue&&(G.push(ue),z.add(ue.source),z.add(ue.target))}const X=[],U=Array.from(z).sort();for(let j=0;j<U.length;j+=1){const Q=U[j],ue=K(A.nodeMetadataById[Q])?A.nodeMetadataById[Q]:{},Le=K(A.nodePayloadById[Q])?A.nodePayloadById[Q]:{},Ye=se(ue==null?void 0:ue.$Position,j),ye=I(Q,ue,void 0,Le),Be=typeof Le.$Comment=="string"&&Le.$Comment.trim()?Le.$Comment.trim():void 0,nt=F(void 0,Le),ct=B(void 0,Le);X.push({id:Q,type:pn,data:{label:ye,...nt!==void 0?{[s]:nt}:{},...ct!==void 0?{[a]:ct}:{},...Be!==void 0?{$comment:Be}:{}},position:Ye})}return{nodes:X,edges:G}}function N(A,z={},G=new Set){const X=m();X.workspaceId=A.$WorkspaceID,X.groups=Array.isArray(A.$Groups)?A.$Groups:[],X.comments=Array.isArray(A.$Comments)?A.$Comments:[],X.floatingNodes=Array.isArray(A.$FloatingNodes)?A.$FloatingNodes:[],X.metadataExtraFields=ae(A,i),X.nodePayloadById={...z},X.runtimeTreeNodeIds=G;const U=K(A.$Nodes)?A.$Nodes:{};for(const[Q,ue]of Object.entries(U))typeof Q!="string"||!Q||!K(ue)||(X.nodeMetadataById[Q]={...ue});for(const Q of X.floatingNodes)!K(Q)||typeof Q.$NodeId!="string"||!Q.$NodeId||(X.nodePayloadById[Q.$NodeId]={...K(X.nodePayloadById[Q.$NodeId])?X.nodePayloadById[Q.$NodeId]:{},...Q});const j=K(A.$Links)?A.$Links:{};for(const[Q,ue]of Object.entries(j))typeof Q!="string"||!Q||!K(ue)||(X.linkById[Q]={...ue});return X}function x(A){var at,lt,Ke,je,ft,kn,Mn;const z=A.metadataContext.nodeMetadataById,G=A.metadataContext.nodePayloadById,X=A.metadataContext.linkById,U=A.metadataContext.runtimeTreeNodeIds instanceof Set?A.metadataContext.runtimeTreeNodeIds:new Set,j=[],Q={},ue={},Le=new Set,Ye=Array.isArray(A.nodes)?A.nodes:[];for(let Oe=0;Oe<Ye.length;Oe+=1){const E=Ye[Oe],De=$(E==null?void 0:E.id,E==null?void 0:E.type);if(Le.has(De))continue;Le.add(De);const Je=K(z[De])?{...z[De]}:{},Te=K(G[De])?{...G[De]}:{},dn=se(E==null?void 0:E.position,Oe),Sr=I(De,Je,(at=E==null?void 0:E.data)==null?void 0:at.label),Tr=typeof((lt=E==null?void 0:E.data)==null?void 0:lt.$comment)=="string"&&E.data.$comment.trim()?E.data.$comment.trim():void 0,Pn=F((Ke=E==null?void 0:E.data)==null?void 0:Ke[s],Te),Cr=B((je=E==null?void 0:E.data)==null?void 0:je[a],Te);Je.$Position={$x:dn.x,$y:dn.y},Sr!==H(De)||typeof Je.$Title=="string"?Je.$Title=Sr:delete Je.$Title,Te.$NodeId=De,Tr!==void 0?Te.$Comment=Tr:delete Te.$Comment,Pn!==void 0?Te[Dn]=Pn:delete Te[Dn],Cr!==void 0?Te[Ln]=Cr:delete Te[Ln];const Qn=(Pn!==void 0?js(Pn):void 0)??yi(Te.Type)??yi(Sr);Qn&&(typeof Te.Type!="string"||!Te.Type.trim())&&(Te.Type=Qn.defaultTypeName),Q[De]=Je,ue[De]=Te,j.push({id:De,type:pn,data:{label:Sr,...Pn!==void 0?{[s]:Pn}:{},...Cr!==void 0?{[a]:Cr}:{},...Tr!==void 0?{$comment:Tr}:{}},position:dn})}if(j.length===0){const Oe=k(),E={...A.metadataContext,nodeMetadataById:{...Q,[Oe.id]:{$Position:{$x:Oe.position.x,$y:Oe.position.y}}},nodePayloadById:{...ue,[Oe.id]:{$NodeId:Oe.id,[Dn]:(ft=Oe.data)==null?void 0:ft[s],[Ln]:(kn=Oe.data)==null?void 0:kn[a]}}};return x({...A,nodes:[Oe],metadataContext:E})}const ye=new Set(j.map(Oe=>Oe.id)),Be=[],nt=new Set,ct=Array.isArray(A.metadataContext.floatingNodes)?A.metadataContext.floatingNodes:[];for(const Oe of ct){if(!K(Oe))continue;const E=typeof Oe.$NodeId=="string"&&Oe.$NodeId.trim()?Oe.$NodeId.trim():void 0;!E||!ye.has(E)||(Be.push(Oe),oe(Oe,nt))}for(const Oe of j){const E=Oe.id;if(U.has(E)||nt.has(E))continue;const De=typeof((Mn=Oe==null?void 0:Oe.data)==null?void 0:Mn.label)=="string"&&Oe.data.label.trim()?Oe.data.label.trim():H(E),Te={...K(ue[E])?ue[E]:{},$NodeId:E};typeof Te.Type!="string"&&De&&(Te.Type=De),Be.push(Te),oe(Te,nt),ue[E]=Te}const xt=[],wt={},Me=new Set,fe=Array.isArray(A.edges)?A.edges:[];for(let Oe=0;Oe<fe.length;Oe+=1){const E=fe[Oe],De=typeof(E==null?void 0:E.source)=="string"?E.source:void 0,Je=typeof(E==null?void 0:E.target)=="string"?E.target:void 0;if(!De||!Je||!ye.has(De)||!ye.has(Je))continue;const Te=typeof(E==null?void 0:E.id)=="string"&&E.id.trim()?E.id.trim():`${De}--${Je}`;if(Me.has(Te))continue;Me.add(Te);const dn=K(X[Te])?{...X[Te]}:{};dn.$SourceNodeId=De,dn.$TargetNodeId=Je,wt[Te]=dn,xt.push({id:Te,source:De,target:Je})}const Pe={workspaceId:A.metadataContext.workspaceId,groups:Array.isArray(A.metadataContext.groups)?A.metadataContext.groups:[],comments:Array.isArray(A.metadataContext.comments)?A.metadataContext.comments:[],floatingNodes:Be,runtimeTreeNodeIds:U,metadataExtraFields:K(A.metadataContext.metadataExtraFields)?A.metadataContext.metadataExtraFields:{},nodeMetadataById:Q,nodePayloadById:ue,linkById:wt},Ue={...Pe.metadataExtraFields,...Pe.workspaceId!==void 0?{$WorkspaceID:Pe.workspaceId}:{},$Nodes:Pe.nodeMetadataById,$FloatingNodes:Pe.floatingNodes,$Links:Pe.linkById,$Groups:Pe.groups,$Comments:Pe.comments},Xe={...A.runtimeFields,[r]:Ue};return{nodes:j,edges:xt,metadataContext:Pe,text:`${JSON.stringify(Xe,null,2)}
`}}function S(A,z){const G=[z.$SourceNodeId,z.source,z.Source,z.from,z.From],X=[z.$TargetNodeId,z.target,z.Target,z.to,z.To];let U=G.find(Q=>typeof Q=="string"&&Q.trim()),j=X.find(Q=>typeof Q=="string"&&Q.trim());if((!U||!j)&&A.includes("--")){const[Q,ue]=A.split("--");U=U??Q,j=j??ue}if(!(!U||!j))return{id:A,source:U,target:j}}function m(){return{workspaceId:void 0,groups:[],comments:[],floatingNodes:[],runtimeTreeNodeIds:new Set,metadataExtraFields:{},nodeMetadataById:{},nodePayloadById:{},linkById:{}}}function k(){const A="Node-00000000-0000-0000-0000-000000000000",z=Js();return{id:A,type:pn,data:{label:H(A),[s]:z.templateId,[a]:z.buildInitialValues()},position:{x:0,y:50}}}function I(A,z,G,X){const U=typeof G=="string"&&G.trim()?G.trim():void 0;if(U!==void 0)return U;const j=typeof(z==null?void 0:z.$Title)=="string"&&z.$Title.trim()?z.$Title.trim():void 0;if(j!==void 0)return j;const Q=typeof(X==null?void 0:X.Type)=="string"&&X.Type.trim()?X.Type.trim():void 0;return Q!==void 0?Q:H(A)}function F(A,z){if(typeof A=="string"&&A.trim())return A.trim();const G=z==null?void 0:z[Dn];if(typeof G=="string"&&G.trim())return G.trim();const X=yi(z==null?void 0:z.Type);if(X)return X.templateId}function B(A,z){const G=Y(A);if(G!==void 0)return G;const X=Y(z==null?void 0:z[Ln]);if(X!==void 0)return X;const U=F(void 0,z);if(U===void 0)return;const j=js(U);return j==null?void 0:j.buildInitialValues()}function Y(A){if(K(A))return{...A}}function H(A){if(typeof A!="string"||!A.trim())return"Node";const[z,G]=A.split("-",2);return z&&G?z:A}function $(A,z,G){return typeof A=="string"&&A.trim()?A.trim():typeof A=="number"&&Number.isFinite(A)?String(A):`${(typeof z=="string"&&z.trim()?z.trim().replace(/[^A-Za-z0-9_]/g,""):"Node")||"Node"}-${ke()}`}function se(A,z){const G=z*180,X=100,U=Number(A==null?void 0:A.x),j=Number(A==null?void 0:A.y),Q=Number(A==null?void 0:A.$x),ue=Number(A==null?void 0:A.$y);return{x:Number.isFinite(U)?U:Number.isFinite(Q)?Q:G,y:Number.isFinite(j)?j:Number.isFinite(ue)?ue:X}}function ae(A,z){if(!K(A))return{};const G=new Set(z);return Object.fromEntries(Object.entries(A).filter(([X])=>!G.has(X)))}function K(A){return A!==null&&typeof A=="object"&&!Array.isArray(A)}function me(A){return K(A)?Number.isFinite(Number(A.$x))||Number.isFinite(Number(A.$y)):!1}function ee(A){var X,U;if(!K(A))return!1;if(Number.isFinite(Number((X=A==null?void 0:A.$Position)==null?void 0:X.$x))||Number.isFinite(Number((U=A==null?void 0:A.$Position)==null?void 0:U.$y))||typeof A.$Title=="string"&&A.$Title.trim())return!0;let z=!1;const G=j=>{if(!z){if(Array.isArray(j)){for(const Q of j)if(G(Q),z)return;return}if(K(j)){if(me(j.$Position)){z=!0;return}for(const[Q,ue]of Object.entries(j))if(!(Q===r||Q==="$Groups")&&(G(ue),z))return}}};return G(A),z}function te(A){const z={},G=X=>{if(Array.isArray(X)){for(const j of X)G(j);return}if(!K(X))return;const U=typeof X.$NodeId=="string"&&X.$NodeId.trim()?X.$NodeId.trim():void 0;U&&!K(z[U])&&(z[U]=X);for(const[j,Q]of Object.entries(X))j!==r&&G(Q)};return G(A),z}function oe(A,z){const G=X=>{if(Array.isArray(X)){for(const j of X)G(j);return}if(!K(X))return;const U=typeof X.$NodeId=="string"&&X.$NodeId.trim()?X.$NodeId.trim():void 0;U&&z.add(U);for(const[j,Q]of Object.entries(X))j!==r&&G(Q)};G(A)}function ke(){return typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():Math.random().toString(16).slice(2)}bt();var W=G0(),ne=ce(W);{var Ie=A=>{var z=W0(),G=ce(z);Ne(()=>qe(G,l(p))),ie(A,z)};Ze(ne,A=>{l(p)&&A(Ie)})}var ge=Se(ne,2);Up(ge,{children:(A,z)=>{X0(A,{get loadVersion(){return l(_)},get nodes(){return l(c)},set nodes(G){D(c,G)},get edges(){return l(d)},set edges(G){D(d,G)},$$events:{flowchange:C},$$legacy:!0})},$$slots:{default:!0}}),ie(e,W),we()}const Z0=acquireVsCodeApi();Sd(q0,{target:document.getElementById("app"),props:{vscode:Z0}});
//# sourceMappingURL=main.js.map
