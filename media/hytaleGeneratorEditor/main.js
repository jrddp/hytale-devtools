var pc=Object.defineProperty;var ea=e=>{throw TypeError(e)};var _c=(e,t,n)=>t in e?pc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ve=(e,t,n)=>_c(e,typeof t!="symbol"?t+"":t,n),_o=(e,t,n)=>t.has(e)||ea("Cannot "+n);var g=(e,t,n)=>(_o(e,t,"read from private field"),n?n.call(e):t.get(e)),I=(e,t,n)=>t.has(e)?ea("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),J=(e,t,n,r)=>(_o(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Pe=(e,t,n)=>(_o(e,t,"access private method"),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const Do=!1;var no=Array.isArray,wc=Array.prototype.indexOf,er=Array.prototype.includes,ro=Array.from,xc=Object.defineProperty,sn=Object.getOwnPropertyDescriptor,il=Object.getOwnPropertyDescriptors,ol=Object.prototype,bc=Array.prototype,io=Object.getPrototypeOf,ta=Object.isExtensible;function Tr(e){return typeof e=="function"}const Dn=()=>{};function Ec(e){return e()}function zo(e){for(var t=0;t<e.length;t++)e[t]()}function sl(){var e,t,n=new Promise((r,i)=>{e=r,t=i});return{promise:n,resolve:e,reject:t}}function Re(e,t,n=!1){return e===void 0?n?t():t:e}function ti(e,t){if(Array.isArray(e))return e;if(t===void 0||!(Symbol.iterator in e))return Array.from(e);const n=[];for(const r of e)if(n.push(r),n.length===t)break;return n}const Te=2,Kr=4,ni=8,fs=1<<24,Ut=16,xt=32,hn=64,al=128,rt=512,ke=1024,Ie=2048,_t=4096,Ze=8192,Wt=16384,ri=32768,cn=65536,na=1<<17,ll=1<<18,zn=1<<19,ul=1<<20,Bt=1<<25,Mn=65536,Ro=1<<21,ds=1<<22,an=1<<23,Pt=Symbol("$state"),cl=Symbol("legacy props"),Sc=Symbol(""),vn=new class extends Error{constructor(){super(...arguments);ve(this,"name","StaleReactionError");ve(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};var el;const fl=((el=globalThis.document)==null?void 0:el.contentType.includes("xml"))??!1;function hs(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function kc(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Cc(e,t,n){throw new Error("https://svelte.dev/e/each_key_duplicate")}function Nc(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Mc(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Pc(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Ac(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Tc(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Ic(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Oc(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Dc(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function zc(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Rc=1,Lc=2,dl=4,Hc=8,Vc=16,Kc=1,Fc=2,Bc=4,Yc=8,Xc=16,hl=1,Wc=2,Se=Symbol(),gl="http://www.w3.org/1999/xhtml",qc="@attach";function Zc(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function Gc(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function vl(e){return e===this.v}function yl(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function ml(e){return!yl(e,this.v)}let dr=!1,Uc=!1;function Qc(){dr=!0}const jc=[];function pl(e,t=!1,n=!1){return Ni(e,new Map,"",jc,null,n)}function Ni(e,t,n,r,i=null,o=!1){if(typeof e=="object"&&e!==null){var s=t.get(e);if(s!==void 0)return s;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(no(e)){var a=Array(e.length);t.set(e,a),i!==null&&t.set(i,a);for(var l=0;l<e.length;l+=1){var u=e[l];l in e&&(a[l]=Ni(u,t,n,r,null,o))}return a}if(io(e)===ol){a={},t.set(e,a),i!==null&&t.set(i,a);for(var f in e)a[f]=Ni(e[f],t,n,r,null,o);return a}if(e instanceof Date)return structuredClone(e);if(typeof e.toJSON=="function"&&!o)return Ni(e.toJSON(),t,n,r,e)}if(e instanceof EventTarget)return e;try{return structuredClone(e)}catch{return e}}let ge=null;function tr(e){ge=e}function gs(e){return ys().get(e)}function vs(e,t){return ys().set(e,t),t}function Jc(e){return ys().has(e)}function oe(e,t=!1,n){ge={p:ge,i:!1,c:null,e:null,s:e,x:null,l:dr&&!t?{s:null,u:null,$:[]}:null}}function se(e){var t=ge,n=t.e;if(n!==null){t.e=null;for(var r of n)Ll(r)}return t.i=!0,ge=t.p,{}}function ii(){return!dr||ge!==null&&ge.l===null}function ys(e){return ge===null&&hs(),ge.c??(ge.c=new Map($c(ge)||void 0))}function $c(e){let t=e.p;for(;t!==null;){const n=t.c;if(n!==null)return n;t=t.p}return null}let Kn=[];function ef(){var e=Kn;Kn=[],zo(e)}function At(e){if(Kn.length===0){var t=Kn;queueMicrotask(()=>{t===Kn&&ef()})}Kn.push(e)}function _l(e){var t=le;if(t===null)return te.f|=an,e;if(!(t.f&ri)&&!(t.f&Kr))throw e;nr(e,t)}function nr(e,t){for(;t!==null;){if(t.f&al){if(!(t.f&ri))throw e;try{t.b.error(e);return}catch(n){e=n}}t=t.parent}throw e}const tf=-7169;function we(e,t){e.f=e.f&tf|t}function ms(e){e.f&rt||e.deps===null?we(e,ke):we(e,_t)}function wl(e){if(e!==null)for(const t of e)!(t.f&Te)||!(t.f&Mn)||(t.f^=Mn,wl(t.deps))}function xl(e,t,n){e.f&Ie?t.add(e):e.f&_t&&n.add(e),wl(e.deps),we(e,ke)}const pi=new Set;let fe=null,Ae=null,nt=[],ps=null,Lo=!1;var qn,Zn,pn,Gn,Gr,Ur,_n,Ht,Un,zt,Ho,Vo,bl;const Us=class Us{constructor(){I(this,zt);ve(this,"committed",!1);ve(this,"current",new Map);ve(this,"previous",new Map);I(this,qn,new Set);I(this,Zn,new Set);I(this,pn,0);I(this,Gn,0);I(this,Gr,null);I(this,Ur,new Set);I(this,_n,new Set);I(this,Ht,new Map);ve(this,"is_fork",!1);I(this,Un,!1)}is_deferred(){return this.is_fork||g(this,Gn)>0}skip_effect(t){g(this,Ht).has(t)||g(this,Ht).set(t,{d:[],m:[]})}unskip_effect(t){var n=g(this,Ht).get(t);if(n){g(this,Ht).delete(t);for(var r of n.d)we(r,Ie),yt(r);for(r of n.m)we(r,_t),yt(r)}}process(t){var i;nt=[],this.apply();var n=[],r=[];for(const o of t)Pe(this,zt,Ho).call(this,o,n,r);if(this.is_deferred()){Pe(this,zt,Vo).call(this,r),Pe(this,zt,Vo).call(this,n);for(const[o,s]of g(this,Ht))kl(o,s)}else{for(const o of g(this,qn))o();g(this,qn).clear(),g(this,pn)===0&&Pe(this,zt,bl).call(this),fe=null,ra(r),ra(n),(i=g(this,Gr))==null||i.resolve()}Ae=null}capture(t,n){n!==Se&&!this.previous.has(t)&&this.previous.set(t,n),t.f&an||(this.current.set(t,t.v),Ae==null||Ae.set(t,t.v))}activate(){fe=this,this.apply()}deactivate(){fe===this&&(fe=null,Ae=null)}flush(){if(this.activate(),nt.length>0){if(nf(),fe!==null&&fe!==this)return}else g(this,pn)===0&&this.process([]);this.deactivate()}discard(){for(const t of g(this,Zn))t(this);g(this,Zn).clear()}increment(t){J(this,pn,g(this,pn)+1),t&&J(this,Gn,g(this,Gn)+1)}decrement(t){J(this,pn,g(this,pn)-1),t&&J(this,Gn,g(this,Gn)-1),!g(this,Un)&&(J(this,Un,!0),At(()=>{J(this,Un,!1),this.is_deferred()?nt.length>0&&this.flush():this.revive()}))}revive(){for(const t of g(this,Ur))g(this,_n).delete(t),we(t,Ie),yt(t);for(const t of g(this,_n))we(t,_t),yt(t);this.flush()}oncommit(t){g(this,qn).add(t)}ondiscard(t){g(this,Zn).add(t)}settled(){return(g(this,Gr)??J(this,Gr,sl())).promise}static ensure(){if(fe===null){const t=fe=new Us;pi.add(fe),At(()=>{fe===t&&t.flush()})}return fe}apply(){}};qn=new WeakMap,Zn=new WeakMap,pn=new WeakMap,Gn=new WeakMap,Gr=new WeakMap,Ur=new WeakMap,_n=new WeakMap,Ht=new WeakMap,Un=new WeakMap,zt=new WeakSet,Ho=function(t,n,r){t.f^=ke;for(var i=t.first,o=null;i!==null;){var s=i.f,a=(s&(xt|hn))!==0,l=a&&(s&ke)!==0,u=l||(s&Ze)!==0||g(this,Ht).has(i);if(!u&&i.fn!==null){a?i.f^=ke:o!==null&&s&(Kr|ni|fs)?o.b.defer_effect(i):s&Kr?n.push(i):ui(i)&&(s&Ut&&g(this,_n).add(i),ir(i));var f=i.first;if(f!==null){i=f;continue}}var d=i.parent;for(i=i.next;i===null&&d!==null;)d===o&&(o=null),i=d.next,d=d.parent}},Vo=function(t){for(var n=0;n<t.length;n+=1)xl(t[n],g(this,Ur),g(this,_n))},bl=function(){var i;if(pi.size>1){this.previous.clear();var t=Ae,n=!0;for(const o of pi){if(o===this){n=!1;continue}const s=[];for(const[l,u]of this.current){if(o.current.has(l))if(n&&u!==o.current.get(l))o.current.set(l,u);else continue;s.push(l)}if(s.length===0)continue;const a=[...o.current.keys()].filter(l=>!this.current.has(l));if(a.length>0){var r=nt;nt=[];const l=new Set,u=new Map;for(const f of s)El(f,a,l,u);if(nt.length>0){fe=o,o.apply();for(const f of nt)Pe(i=o,zt,Ho).call(i,f,[],[]);o.deactivate()}nt=r}}fe=null,Ae=t}this.committed=!0,pi.delete(this)};let qt=Us;function nf(){Lo=!0;var e=null;try{for(var t=0;nt.length>0;){var n=qt.ensure();if(t++>1e3){var r,i;rf()}n.process(nt),ln.clear()}}finally{nt=[],Lo=!1,ps=null}}function rf(){try{Ac()}catch(e){nr(e,ps)}}let dt=null;function ra(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if(!(r.f&(Wt|Ze))&&ui(r)&&(dt=new Set,ir(r),r.deps===null&&r.first===null&&r.nodes===null&&r.teardown===null&&r.ac===null&&Bl(r),(dt==null?void 0:dt.size)>0)){ln.clear();for(const i of dt){if(i.f&(Wt|Ze))continue;const o=[i];let s=i.parent;for(;s!==null;)dt.has(s)&&(dt.delete(s),o.push(s)),s=s.parent;for(let a=o.length-1;a>=0;a--){const l=o[a];l.f&(Wt|Ze)||ir(l)}}dt.clear()}}dt=null}}function El(e,t,n,r){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const i of e.reactions){const o=i.f;o&Te?El(i,t,n,r):o&(ds|Ut)&&!(o&Ie)&&Sl(i,t,r)&&(we(i,Ie),yt(i))}}function Sl(e,t,n){const r=n.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const i of e.deps){if(er.call(t,i))return!0;if(i.f&Te&&Sl(i,t,n))return n.set(i,!0),!0}return n.set(e,!1),!1}function yt(e){for(var t=ps=e;t.parent!==null;){t=t.parent;var n=t.f;if(Lo&&t===le&&n&Ut&&!(n&ll))return;if(n&(hn|xt)){if(!(n&ke))return;t.f^=ke}}nt.push(t)}function kl(e,t){if(!(e.f&xt&&e.f&ke)){e.f&Ie?t.d.push(e):e.f&_t&&t.m.push(e),we(e,ke);for(var n=e.first;n!==null;)kl(n,t),n=n.next}}function Cl(e){let t=0,n=Pn(0),r;return()=>{bs()&&(h(n),Ss(()=>(t===0&&(r=qe(()=>e(()=>Hr(n)))),t+=1,()=>{At(()=>{t-=1,t===0&&(r==null||r(),r=void 0,Hr(n))})})))}}var of=cn|zn|al;function sf(e,t,n){new af(e,t,n)}var et,cs,St,wn,kt,tt,Ve,Ct,Vt,tn,xn,nn,Qn,bn,jn,Jn,Kt,Ji,Ne,lf,uf,Ko,Mi,Pi,Fo;class af{constructor(t,n,r){I(this,Ne);ve(this,"parent");ve(this,"is_pending",!1);I(this,et);I(this,cs,null);I(this,St);I(this,wn);I(this,kt);I(this,tt,null);I(this,Ve,null);I(this,Ct,null);I(this,Vt,null);I(this,tn,null);I(this,xn,0);I(this,nn,0);I(this,Qn,!1);I(this,bn,!1);I(this,jn,new Set);I(this,Jn,new Set);I(this,Kt,null);I(this,Ji,Cl(()=>(J(this,Kt,Pn(g(this,xn))),()=>{J(this,Kt,null)})));J(this,et,t),J(this,St,n),J(this,wn,r),this.parent=le.b,this.is_pending=!!g(this,St).pending,J(this,kt,li(()=>{le.b=this;{var i=Pe(this,Ne,Ko).call(this);try{J(this,tt,Be(()=>r(i)))}catch(o){this.error(o)}g(this,nn)>0?Pe(this,Ne,Pi).call(this):this.is_pending=!1}return()=>{var o;(o=g(this,tn))==null||o.remove()}},of))}defer_effect(t){xl(t,g(this,jn),g(this,Jn))}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!g(this,St).pending}update_pending_count(t){Pe(this,Ne,Fo).call(this,t),J(this,xn,g(this,xn)+t),!(!g(this,Kt)||g(this,Qn))&&(J(this,Qn,!0),At(()=>{J(this,Qn,!1),g(this,Kt)&&rr(g(this,Kt),g(this,xn))}))}get_effect_pending(){return g(this,Ji).call(this),h(g(this,Kt))}error(t){var n=g(this,St).onerror;let r=g(this,St).failed;if(g(this,bn)||!n&&!r)throw t;g(this,tt)&&(Ce(g(this,tt)),J(this,tt,null)),g(this,Ve)&&(Ce(g(this,Ve)),J(this,Ve,null)),g(this,Ct)&&(Ce(g(this,Ct)),J(this,Ct,null));var i=!1,o=!1;const s=()=>{if(i){Gc();return}i=!0,o&&zc(),qt.ensure(),J(this,xn,0),g(this,Ct)!==null&&Sn(g(this,Ct),()=>{J(this,Ct,null)}),this.is_pending=this.has_pending_snippet(),J(this,tt,Pe(this,Ne,Mi).call(this,()=>(J(this,bn,!1),Be(()=>g(this,wn).call(this,g(this,et)))))),g(this,nn)>0?Pe(this,Ne,Pi).call(this):this.is_pending=!1};At(()=>{try{o=!0,n==null||n(t,s),o=!1}catch(a){nr(a,g(this,kt)&&g(this,kt).parent)}r&&J(this,Ct,Pe(this,Ne,Mi).call(this,()=>{qt.ensure(),J(this,bn,!0);try{return Be(()=>{r(g(this,et),()=>t,()=>s)})}catch(a){return nr(a,g(this,kt).parent),null}finally{J(this,bn,!1)}}))})}}et=new WeakMap,cs=new WeakMap,St=new WeakMap,wn=new WeakMap,kt=new WeakMap,tt=new WeakMap,Ve=new WeakMap,Ct=new WeakMap,Vt=new WeakMap,tn=new WeakMap,xn=new WeakMap,nn=new WeakMap,Qn=new WeakMap,bn=new WeakMap,jn=new WeakMap,Jn=new WeakMap,Kt=new WeakMap,Ji=new WeakMap,Ne=new WeakSet,lf=function(){try{J(this,tt,Be(()=>g(this,wn).call(this,g(this,et))))}catch(t){this.error(t)}},uf=function(){const t=g(this,St).pending;t&&(J(this,Ve,Be(()=>t(g(this,et)))),At(()=>{var n=Pe(this,Ne,Ko).call(this);J(this,tt,Pe(this,Ne,Mi).call(this,()=>(qt.ensure(),Be(()=>g(this,wn).call(this,n))))),g(this,nn)>0?Pe(this,Ne,Pi).call(this):(Sn(g(this,Ve),()=>{J(this,Ve,null)}),this.is_pending=!1)}))},Ko=function(){var t=g(this,et);return this.is_pending&&(J(this,tn,Zt()),g(this,et).before(g(this,tn)),t=g(this,tn)),t},Mi=function(t){var n=le,r=te,i=ge;Ot(g(this,kt)),ot(g(this,kt)),tr(g(this,kt).ctx);try{return t()}catch(o){return _l(o),null}finally{Ot(n),ot(r),tr(i)}},Pi=function(){const t=g(this,St).pending;g(this,tt)!==null&&(J(this,Vt,document.createDocumentFragment()),g(this,Vt).append(g(this,tn)),Wl(g(this,tt),g(this,Vt))),g(this,Ve)===null&&J(this,Ve,Be(()=>t(g(this,et))))},Fo=function(t){var n;if(!this.has_pending_snippet()){this.parent&&Pe(n=this.parent,Ne,Fo).call(n,t);return}if(J(this,nn,g(this,nn)+t),g(this,nn)===0){this.is_pending=!1;for(const r of g(this,jn))we(r,Ie),yt(r);for(const r of g(this,Jn))we(r,_t),yt(r);g(this,jn).clear(),g(this,Jn).clear(),g(this,Ve)&&Sn(g(this,Ve),()=>{J(this,Ve,null)}),g(this,Vt)&&(g(this,et).before(g(this,Vt)),J(this,Vt,null))}};function Nl(e,t,n,r){const i=ii()?oi:_s;var o=e.filter(c=>!c.settled);if(n.length===0&&o.length===0){r(t.map(i));return}var s=fe,a=le,l=cf(),u=o.length===1?o[0].promise:o.length>1?Promise.all(o.map(c=>c.promise)):null;function f(c){l();try{r(c)}catch(v){a.f&Wt||nr(v,a)}s==null||s.deactivate(),Bo()}if(n.length===0){u.then(()=>f(t.map(i)));return}function d(){l(),Promise.all(n.map(c=>ff(c))).then(c=>f([...t.map(i),...c])).catch(c=>nr(c,a))}u?u.then(d):d()}function cf(){var e=le,t=te,n=ge,r=fe;return function(o=!0){Ot(e),ot(t),tr(n),o&&(r==null||r.activate())}}function Bo(){Ot(null),ot(null),tr(null)}function oi(e){var t=Te|Ie,n=te!==null&&te.f&Te?te:null;return le!==null&&(le.f|=zn),{ctx:ge,deps:null,effects:null,equals:vl,f:t,fn:e,reactions:null,rv:0,v:Se,wv:0,parent:n??le,ac:null}}function ff(e,t,n){let r=le;r===null&&kc();var i=r.b,o=void 0,s=Pn(Se),a=!te,l=new Map;return Ef(()=>{var v;var u=sl();o=u.promise;try{Promise.resolve(e()).then(u.resolve,u.reject).then(()=>{f===fe&&f.committed&&f.deactivate(),Bo()})}catch(y){u.reject(y),Bo()}var f=fe;if(a){var d=i.is_rendered();i.update_pending_count(1),f.increment(d),(v=l.get(f))==null||v.reject(vn),l.delete(f),l.set(f,u)}const c=(y,_=void 0)=>{if(f.activate(),_)_!==vn&&(s.f|=an,rr(s,_));else{s.f&an&&(s.f^=an),rr(s,y);for(const[p,x]of l){if(l.delete(p),p===f)break;x.reject(vn)}}a&&(i.update_pending_count(-1),f.decrement(d))};u.promise.then(c,y=>c(null,y||"unknown"))}),Es(()=>{for(const u of l.values())u.reject(vn)}),new Promise(u=>{function f(d){function c(){d===o?u(s):f(o)}d.then(c,c)}f(o)})}function E(e){const t=oi(e);return ql(t),t}function _s(e){const t=oi(e);return t.equals=ml,t}function df(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)Ce(t[n])}}function hf(e){for(var t=e.parent;t!==null;){if(!(t.f&Te))return t.f&Wt?null:t;t=t.parent}return null}function ws(e){var t,n=le;Ot(hf(e));try{e.f&=~Mn,df(e),t=Ql(e)}finally{Ot(n)}return t}function Ml(e){var t=ws(e);if(!e.equals(t)&&(e.wv=Gl(),(!(fe!=null&&fe.is_fork)||e.deps===null)&&(e.v=t,e.deps===null))){we(e,ke);return}fn||(Ae!==null?(bs()||fe!=null&&fe.is_fork)&&Ae.set(e,t):ms(e))}function gf(e){var t,n;if(e.effects!==null)for(const r of e.effects)(r.teardown||r.ac)&&((t=r.teardown)==null||t.call(r),(n=r.ac)==null||n.abort(vn),r.teardown=Dn,r.ac=null,Fr(r,0),ks(r))}function Pl(e){if(e.effects!==null)for(const t of e.effects)t.teardown&&ir(t)}let Yo=new Set;const ln=new Map;let Al=!1;function Pn(e,t){var n={f:0,v:e,reactions:null,equals:vl,rv:0,wv:0};return n}function ce(e,t){const n=Pn(e);return ql(n),n}function Xo(e,t=!1,n=!0){var i;const r=Pn(e);return t||(r.equals=ml),dr&&n&&ge!==null&&ge.l!==null&&((i=ge.l).s??(i.s=[])).push(r),r}function K(e,t,n=!1){te!==null&&(!mt||te.f&na)&&ii()&&te.f&(Te|Ut|ds|na)&&(it===null||!er.call(it,e))&&Dc();let r=n?on(t):t;return rr(e,r)}function rr(e,t){if(!e.equals(t)){var n=e.v;fn?ln.set(e,t):ln.set(e,n),e.v=t;var r=qt.ensure();if(r.capture(e,n),e.f&Te){const i=e;e.f&Ie&&ws(i),ms(i)}e.wv=Gl(),Tl(e,Ie),ii()&&le!==null&&le.f&ke&&!(le.f&(xt|hn))&&($e===null?Cf([e]):$e.push(e)),!r.is_fork&&Yo.size>0&&!Al&&vf()}return t}function vf(){Al=!1;for(const e of Yo)e.f&ke&&we(e,_t),ui(e)&&ir(e);Yo.clear()}function Hr(e){K(e,e.v+1)}function Tl(e,t){var n=e.reactions;if(n!==null)for(var r=ii(),i=n.length,o=0;o<i;o++){var s=n[o],a=s.f;if(!(!r&&s===le)){var l=(a&Ie)===0;if(l&&we(s,t),a&Te){var u=s;Ae==null||Ae.delete(u),a&Mn||(a&rt&&(s.f|=Mn),Tl(u,_t))}else l&&(a&Ut&&dt!==null&&dt.add(s),yt(s))}}}function on(e){if(typeof e!="object"||e===null||Pt in e)return e;const t=io(e);if(t!==ol&&t!==bc)return e;var n=new Map,r=no(e),i=ce(0),o=kn,s=a=>{if(kn===o)return a();var l=te,u=kn;ot(null),sa(o);var f=a();return ot(l),sa(u),f};return r&&n.set("length",ce(e.length)),new Proxy(e,{defineProperty(a,l,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&Ic();var f=n.get(l);return f===void 0?s(()=>{var d=ce(u.value);return n.set(l,d),d}):K(f,u.value,!0),!0},deleteProperty(a,l){var u=n.get(l);if(u===void 0){if(l in a){const f=s(()=>ce(Se));n.set(l,f),Hr(i)}}else K(u,Se),Hr(i);return!0},get(a,l,u){var v;if(l===Pt)return e;var f=n.get(l),d=l in a;if(f===void 0&&(!d||(v=sn(a,l))!=null&&v.writable)&&(f=s(()=>{var y=on(d?a[l]:Se),_=ce(y);return _}),n.set(l,f)),f!==void 0){var c=h(f);return c===Se?void 0:c}return Reflect.get(a,l,u)},getOwnPropertyDescriptor(a,l){var u=Reflect.getOwnPropertyDescriptor(a,l);if(u&&"value"in u){var f=n.get(l);f&&(u.value=h(f))}else if(u===void 0){var d=n.get(l),c=d==null?void 0:d.v;if(d!==void 0&&c!==Se)return{enumerable:!0,configurable:!0,value:c,writable:!0}}return u},has(a,l){var c;if(l===Pt)return!0;var u=n.get(l),f=u!==void 0&&u.v!==Se||Reflect.has(a,l);if(u!==void 0||le!==null&&(!f||(c=sn(a,l))!=null&&c.writable)){u===void 0&&(u=s(()=>{var v=f?on(a[l]):Se,y=ce(v);return y}),n.set(l,u));var d=h(u);if(d===Se)return!1}return f},set(a,l,u,f){var z;var d=n.get(l),c=l in a;if(r&&l==="length")for(var v=u;v<d.v;v+=1){var y=n.get(v+"");y!==void 0?K(y,Se):v in a&&(y=s(()=>ce(Se)),n.set(v+"",y))}if(d===void 0)(!c||(z=sn(a,l))!=null&&z.writable)&&(d=s(()=>ce(void 0)),K(d,on(u)),n.set(l,d));else{c=d.v!==Se;var _=s(()=>on(u));K(d,_)}var p=Reflect.getOwnPropertyDescriptor(a,l);if(p!=null&&p.set&&p.set.call(f,u),!c){if(r&&typeof l=="string"){var x=n.get("length"),M=Number(l);Number.isInteger(M)&&M>=x.v&&K(x,M+1)}Hr(i)}return!0},ownKeys(a){h(i);var l=Reflect.ownKeys(a).filter(d=>{var c=n.get(d);return c===void 0||c.v!==Se});for(var[u,f]of n)f.v!==Se&&!(u in a)&&l.push(u);return l},setPrototypeOf(){Oc()}})}function ia(e){try{if(e!==null&&typeof e=="object"&&Pt in e)return e[Pt]}catch{}return e}function yf(e,t){return Object.is(ia(e),ia(t))}var He,Il,Ol,Dl;function mf(){if(He===void 0){He=window,Il=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;Ol=sn(t,"firstChild").get,Dl=sn(t,"nextSibling").get,ta(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),ta(n)&&(n.__t=void 0)}}function Zt(e=""){return document.createTextNode(e)}function Ft(e){return Ol.call(e)}function si(e){return Dl.call(e)}function me(e,t){return Ft(e)}function Oe(e,t=!1){{var n=Ft(e);return n instanceof Comment&&n.data===""?si(n):n}}function Ee(e,t=1,n=!1){let r=e;for(;t--;)r=si(r);return r}function pf(e){e.textContent=""}function zl(){return!1}function _f(e,t,n){return document.createElementNS(gl,e,void 0)}function wf(e,t){if(t){const n=document.body;e.autofocus=!0,At(()=>{document.activeElement===n&&e.focus()})}}function xs(e){var t=te,n=le;ot(null),Ot(null);try{return e()}finally{ot(t),Ot(n)}}function Rl(e){le===null&&(te===null&&Pc(),Mc()),fn&&Nc()}function xf(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function at(e,t,n){var r=le;r!==null&&r.f&Ze&&(e|=Ze);var i={ctx:ge,deps:null,nodes:null,f:e|Ie|rt,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(n)try{ir(i)}catch(a){throw Ce(i),a}else t!==null&&yt(i);var o=i;if(n&&o.deps===null&&o.teardown===null&&o.nodes===null&&o.first===o.last&&!(o.f&zn)&&(o=o.first,e&Ut&&e&cn&&o!==null&&(o.f|=cn)),o!==null&&(o.parent=r,r!==null&&xf(o,r),te!==null&&te.f&Te&&!(e&hn))){var s=te;(s.effects??(s.effects=[])).push(o)}return i}function bs(){return te!==null&&!mt}function Es(e){const t=at(ni,null,!1);return we(t,ke),t.teardown=e,t}function It(e){Rl();var t=le.f,n=!te&&(t&xt)!==0&&(t&ri)===0;if(n){var r=ge;(r.e??(r.e=[])).push(e)}else return Ll(e)}function Ll(e){return at(Kr|ul,e,!1)}function Hl(e){return Rl(),at(ni|ul,e,!0)}function Vl(e){qt.ensure();const t=at(hn|zn,e,!0);return()=>{Ce(t)}}function bf(e){qt.ensure();const t=at(hn|zn,e,!0);return(n={})=>new Promise(r=>{n.outro?Sn(t,()=>{Ce(t),r(void 0)}):(Ce(t),r(void 0))})}function ai(e){return at(Kr,e,!1)}function Ef(e){return at(ds|zn,e,!0)}function Ss(e,t=0){return at(ni|t,e,!0)}function xe(e,t=[],n=[],r=[]){Nl(r,t,n,i=>{at(ni,()=>e(...i.map(h)),!0)})}function li(e,t=0){var n=at(Ut|t,e,!0);return n}function Kl(e,t=0){var n=at(fs|t,e,!0);return n}function Be(e){return at(xt|zn,e,!0)}function Fl(e){var t=e.teardown;if(t!==null){const n=fn,r=te;oa(!0),ot(null);try{t.call(null)}finally{oa(n),ot(r)}}}function ks(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const i=n.ac;i!==null&&xs(()=>{i.abort(vn)});var r=n.next;n.f&hn?n.parent=null:Ce(n,t),n=r}}function Sf(e){for(var t=e.first;t!==null;){var n=t.next;t.f&xt||Ce(t),t=n}}function Ce(e,t=!0){var n=!1;(t||e.f&ll)&&e.nodes!==null&&e.nodes.end!==null&&(kf(e.nodes.start,e.nodes.end),n=!0),ks(e,t&&!n),Fr(e,0),we(e,Wt);var r=e.nodes&&e.nodes.t;if(r!==null)for(const o of r)o.stop();Fl(e);var i=e.parent;i!==null&&i.first!==null&&Bl(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function kf(e,t){for(;e!==null;){var n=e===t?null:si(e);e.remove(),e=n}}function Bl(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function Sn(e,t,n=!0){var r=[];Yl(e,r,!0);var i=()=>{n&&Ce(e),t&&t()},o=r.length;if(o>0){var s=()=>--o||i();for(var a of r)a.out(s)}else i()}function Yl(e,t,n){if(!(e.f&Ze)){e.f^=Ze;var r=e.nodes&&e.nodes.t;if(r!==null)for(const a of r)(a.is_global||n)&&t.push(a);for(var i=e.first;i!==null;){var o=i.next,s=(i.f&cn)!==0||(i.f&xt)!==0&&(e.f&Ut)!==0;Yl(i,t,s?n:!1),i=o}}}function Cs(e){Xl(e,!0)}function Xl(e,t){if(e.f&Ze){e.f^=Ze,e.f&ke||(we(e,Ie),yt(e));for(var n=e.first;n!==null;){var r=n.next,i=(n.f&cn)!==0||(n.f&xt)!==0;Xl(n,i?t:!1),n=r}var o=e.nodes&&e.nodes.t;if(o!==null)for(const s of o)(s.is_global||t)&&s.in()}}function Wl(e,t){if(e.nodes)for(var n=e.nodes.start,r=e.nodes.end;n!==null;){var i=n===r?null:si(n);t.append(n),n=i}}let Ai=!1,fn=!1;function oa(e){fn=e}let te=null,mt=!1;function ot(e){te=e}let le=null;function Ot(e){le=e}let it=null;function ql(e){te!==null&&(it===null?it=[e]:it.push(e))}let Fe=null,Xe=0,$e=null;function Cf(e){$e=e}let Zl=1,yn=0,kn=yn;function sa(e){kn=e}function Gl(){return++Zl}function ui(e){var t=e.f;if(t&Ie)return!0;if(t&Te&&(e.f&=~Mn),t&_t){for(var n=e.deps,r=n.length,i=0;i<r;i++){var o=n[i];if(ui(o)&&Ml(o),o.wv>e.wv)return!0}t&rt&&Ae===null&&we(e,ke)}return!1}function Ul(e,t,n=!0){var r=e.reactions;if(r!==null&&!(it!==null&&er.call(it,e)))for(var i=0;i<r.length;i++){var o=r[i];o.f&Te?Ul(o,t,!1):t===o&&(n?we(o,Ie):o.f&ke&&we(o,_t),yt(o))}}function Ql(e){var _;var t=Fe,n=Xe,r=$e,i=te,o=it,s=ge,a=mt,l=kn,u=e.f;Fe=null,Xe=0,$e=null,te=u&(xt|hn)?null:e,it=null,tr(e.ctx),mt=!1,kn=++yn,e.ac!==null&&(xs(()=>{e.ac.abort(vn)}),e.ac=null);try{e.f|=Ro;var f=e.fn,d=f();e.f|=ri;var c=e.deps,v=fe==null?void 0:fe.is_fork;if(Fe!==null){var y;if(v||Fr(e,Xe),c!==null&&Xe>0)for(c.length=Xe+Fe.length,y=0;y<Fe.length;y++)c[Xe+y]=Fe[y];else e.deps=c=Fe;if(bs()&&e.f&rt)for(y=Xe;y<c.length;y++)((_=c[y]).reactions??(_.reactions=[])).push(e)}else!v&&c!==null&&Xe<c.length&&(Fr(e,Xe),c.length=Xe);if(ii()&&$e!==null&&!mt&&c!==null&&!(e.f&(Te|_t|Ie)))for(y=0;y<$e.length;y++)Ul($e[y],e);if(i!==null&&i!==e){if(yn++,i.deps!==null)for(let p=0;p<n;p+=1)i.deps[p].rv=yn;if(t!==null)for(const p of t)p.rv=yn;$e!==null&&(r===null?r=$e:r.push(...$e))}return e.f&an&&(e.f^=an),d}catch(p){return _l(p)}finally{e.f^=Ro,Fe=t,Xe=n,$e=r,te=i,it=o,tr(s),mt=a,kn=l}}function Nf(e,t){let n=t.reactions;if(n!==null){var r=wc.call(n,e);if(r!==-1){var i=n.length-1;i===0?n=t.reactions=null:(n[r]=n[i],n.pop())}}if(n===null&&t.f&Te&&(Fe===null||!er.call(Fe,t))){var o=t;o.f&rt&&(o.f^=rt,o.f&=~Mn),ms(o),gf(o),Fr(o,0)}}function Fr(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)Nf(e,n[r])}function ir(e){var t=e.f;if(!(t&Wt)){we(e,ke);var n=le,r=Ai;le=e,Ai=!0;try{t&(Ut|fs)?Sf(e):ks(e),Fl(e);var i=Ql(e);e.teardown=typeof i=="function"?i:null,e.wv=Zl;var o;Do&&Uc&&e.f&Ie&&e.deps}finally{Ai=r,le=n}}}function h(e){var t=e.f,n=(t&Te)!==0;if(te!==null&&!mt){var r=le!==null&&(le.f&Wt)!==0;if(!r&&(it===null||!er.call(it,e))){var i=te.deps;if(te.f&Ro)e.rv<yn&&(e.rv=yn,Fe===null&&i!==null&&i[Xe]===e?Xe++:Fe===null?Fe=[e]:Fe.push(e));else{(te.deps??(te.deps=[])).push(e);var o=e.reactions;o===null?e.reactions=[te]:er.call(o,te)||o.push(te)}}}if(fn&&ln.has(e))return ln.get(e);if(n){var s=e;if(fn){var a=s.v;return(!(s.f&ke)&&s.reactions!==null||Jl(s))&&(a=ws(s)),ln.set(s,a),a}var l=(s.f&rt)===0&&!mt&&te!==null&&(Ai||(te.f&rt)!==0),u=(s.f&ri)===0;ui(s)&&(l&&(s.f|=rt),Ml(s)),l&&!u&&(Pl(s),jl(s))}if(Ae!=null&&Ae.has(e))return Ae.get(e);if(e.f&an)throw e.v;return e.v}function jl(e){if(e.f|=rt,e.deps!==null)for(const t of e.deps)(t.reactions??(t.reactions=[])).push(e),t.f&Te&&!(t.f&rt)&&(Pl(t),jl(t))}function Jl(e){if(e.v===Se)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(ln.has(t)||t.f&Te&&Jl(t))return!0;return!1}function qe(e){var t=mt;try{return mt=!0,e()}finally{mt=t}}function Mf(e,t){var n={};for(var r in e)t.includes(r)||(n[r]=e[r]);for(var i of Object.getOwnPropertySymbols(e))Object.propertyIsEnumerable.call(e,i)&&!t.includes(i)&&(n[i]=e[i]);return n}function $l(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Pt in e)Wo(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&Pt in n&&Wo(n)}}}function Wo(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{Wo(e[r],t)}catch{}const n=io(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=il(n);for(let i in r){const o=r[i].get;if(o)try{o.call(e)}catch{}}}}}function Pf(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const Af=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function Tf(e){return Af.includes(e)}const If={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function Of(e){return e=e.toLowerCase(),If[e]??e}const Df=["touchstart","touchmove"];function zf(e){return Df.includes(e)}const eu=new Set,qo=new Set;function Ns(e,t,n,r={}){function i(o){if(r.capture||Go.call(t,o),!o.cancelBubble)return xs(()=>n==null?void 0:n.call(this,o))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?At(()=>{t.addEventListener(e,i,r)}):t.addEventListener(e,i,r),i}function Zo(e,t,n,r={}){var i=Ns(t,e,n,r);return()=>{e.removeEventListener(t,i,r)}}function Ri(e,t,n,r,i){var o={capture:r,passive:i},s=Ns(e,t,n,o);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Es(()=>{t.removeEventListener(e,s,o)})}function Ms(e){for(var t=0;t<e.length;t++)eu.add(e[t]);for(var n of qo)n(e)}let aa=null;function Go(e){var p;var t=this,n=t.ownerDocument,r=e.type,i=((p=e.composedPath)==null?void 0:p.call(e))||[],o=i[0]||e.target;aa=e;var s=0,a=aa===e&&e.__root;if(a){var l=i.indexOf(a);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var u=i.indexOf(t);if(u===-1)return;l<=u&&(s=l)}if(o=i[s]||e.target,o!==t){xc(e,"currentTarget",{configurable:!0,get(){return o||n}});var f=te,d=le;ot(null),Ot(null);try{for(var c,v=[];o!==null;){var y=o.assignedSlot||o.parentNode||o.host||null;try{var _=o["__"+r];_!=null&&(!o.disabled||e.target===o)&&_.call(o,e)}catch(x){c?v.push(x):c=x}if(e.cancelBubble||y===t||y===null)break;o=y}if(c){for(let x of v)queueMicrotask(()=>{throw x});throw c}}finally{e.__root=t,delete e.currentTarget,ot(f),Ot(d)}}}var tl,nl;const wo=(nl=(tl=globalThis==null?void 0:globalThis.window)==null?void 0:tl.trustedTypes)==null?void 0:nl.createPolicy("svelte-trusted-html",{createHTML:e=>e});function Rf(e){return(wo==null?void 0:wo.createHTML(e))??e}function tu(e,t=!1){var n=_f("template");return e=e.replaceAll("<!>","<!---->"),n.innerHTML=t?Rf(e):e,n.content}function or(e,t){var n=le;n.nodes===null&&(n.nodes={start:e,end:t,a:null,t:null})}function pe(e,t){var n=(t&hl)!==0,r=(t&Wc)!==0,i,o=!e.startsWith("<!>");return()=>{i===void 0&&(i=tu(o?e:"<!>"+e,!0),n||(i=Ft(i)));var s=r||Il?document.importNode(i,!0):i.cloneNode(!0);if(n){var a=Ft(s),l=s.lastChild;or(a,l)}else or(s,s);return s}}function Lf(e,t,n="svg"){var r=!e.startsWith("<!>"),i=(t&hl)!==0,o=`<${n}>${r?e:"<!>"+e}</${n}>`,s;return()=>{if(!s){var a=tu(o,!0),l=Ft(a);if(i)for(s=document.createDocumentFragment();Ft(l);)s.appendChild(Ft(l));else s=Ft(l)}var u=s.cloneNode(!0);if(i){var f=Ft(u),d=u.lastChild;or(f,d)}else or(u,u);return u}}function lt(e,t){return Lf(e,t,"svg")}function Hf(e=""){{var t=Zt(e+"");return or(t,t),t}}function dn(){var e=document.createDocumentFragment(),t=document.createComment(""),n=Zt();return e.append(t,n),or(t,n),e}function j(e,t){e!==null&&e.before(t)}function Cn(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n+"")}function Vf(e,t){return Kf(e,t)}const _i=new Map;function Kf(e,{target:t,anchor:n,props:r={},events:i,context:o,intro:s=!0}){mf();var a=new Set,l=d=>{for(var c=0;c<d.length;c++){var v=d[c];if(!a.has(v)){a.add(v);var y=zf(v);for(const x of[t,document]){var _=_i.get(x);_===void 0&&(_=new Map,_i.set(x,_));var p=_.get(v);p===void 0?(x.addEventListener(v,Go,{passive:y}),_.set(v,1)):_.set(v,p+1)}}}};l(ro(eu)),qo.add(l);var u=void 0,f=bf(()=>{var d=n??t.appendChild(Zt());return sf(d,{pending:()=>{}},c=>{oe({});var v=ge;o&&(v.c=o),i&&(r.$$events=i),u=e(c,r)||{},se()}),()=>{var _;for(var c of a)for(const p of[t,document]){var v=_i.get(p),y=v.get(c);--y==0?(p.removeEventListener(c,Go),v.delete(c),v.size===0&&_i.delete(p)):v.set(c,y)}qo.delete(l),d!==n&&((_=d.parentNode)==null||_.removeChild(d))}});return Ff.set(u,f),u}let Ff=new WeakMap;var ht,Nt,We,En,Qr,jr,$i;class Ps{constructor(t,n=!0){ve(this,"anchor");I(this,ht,new Map);I(this,Nt,new Map);I(this,We,new Map);I(this,En,new Set);I(this,Qr,!0);I(this,jr,()=>{var t=fe;if(g(this,ht).has(t)){var n=g(this,ht).get(t),r=g(this,Nt).get(n);if(r)Cs(r),g(this,En).delete(n);else{var i=g(this,We).get(n);i&&(g(this,Nt).set(n,i.effect),g(this,We).delete(n),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),r=i.effect)}for(const[o,s]of g(this,ht)){if(g(this,ht).delete(o),o===t)break;const a=g(this,We).get(s);a&&(Ce(a.effect),g(this,We).delete(s))}for(const[o,s]of g(this,Nt)){if(o===n||g(this,En).has(o))continue;const a=()=>{if(Array.from(g(this,ht).values()).includes(o)){var u=document.createDocumentFragment();Wl(s,u),u.append(Zt()),g(this,We).set(o,{effect:s,fragment:u})}else Ce(s);g(this,En).delete(o),g(this,Nt).delete(o)};g(this,Qr)||!r?(g(this,En).add(o),Sn(s,a,!1)):a()}}});I(this,$i,t=>{g(this,ht).delete(t);const n=Array.from(g(this,ht).values());for(const[r,i]of g(this,We))n.includes(r)||(Ce(i.effect),g(this,We).delete(r))});this.anchor=t,J(this,Qr,n)}ensure(t,n){var r=fe,i=zl();if(n&&!g(this,Nt).has(t)&&!g(this,We).has(t))if(i){var o=document.createDocumentFragment(),s=Zt();o.append(s),g(this,We).set(t,{effect:Be(()=>n(s)),fragment:o})}else g(this,Nt).set(t,Be(()=>n(this.anchor)));if(g(this,ht).set(r,t),i){for(const[a,l]of g(this,Nt))a===t?r.unskip_effect(l):r.skip_effect(l);for(const[a,l]of g(this,We))a===t?r.unskip_effect(l.effect):r.skip_effect(l.effect);r.oncommit(g(this,jr)),r.ondiscard(g(this,$i))}else g(this,jr).call(this)}}ht=new WeakMap,Nt=new WeakMap,We=new WeakMap,En=new WeakMap,Qr=new WeakMap,jr=new WeakMap,$i=new WeakMap;function st(e,t,n=!1){var r=new Ps(e),i=n?cn:0;function o(s,a){r.ensure(s,a)}li(()=>{var s=!1;t((a,l=0)=>{s=!0,o(l,a)}),s||o(!1,null)},i)}function Bf(e,t,n){for(var r=[],i=t.length,o,s=t.length,a=0;a<i;a++){let d=t[a];Sn(d,()=>{if(o){if(o.pending.delete(d),o.done.add(d),o.pending.size===0){var c=e.outrogroups;Uo(ro(o.done)),c.delete(o),c.size===0&&(e.outrogroups=null)}}else s-=1},!1)}if(s===0){var l=r.length===0&&n!==null;if(l){var u=n,f=u.parentNode;pf(f),f.append(u),e.items.clear()}Uo(t,!l)}else o={pending:new Set(t),done:new Set},(e.outrogroups??(e.outrogroups=new Set)).add(o)}function Uo(e,t=!0){for(var n=0;n<e.length;n++)Ce(e[n],t)}var la;function As(e,t,n,r,i,o=null){var s=e,a=new Map,l=(t&dl)!==0;if(l){var u=e;s=u.appendChild(Zt())}var f=null,d=_s(()=>{var x=n();return no(x)?x:x==null?[]:ro(x)}),c,v=!0;function y(){p.fallback=f,Yf(p,c,s,t,r),f!==null&&(c.length===0?f.f&Bt?(f.f^=Bt,zr(f,null,s)):Cs(f):Sn(f,()=>{f=null}))}var _=li(()=>{c=h(d);for(var x=c.length,M=new Set,z=fe,w=zl(),T=0;T<x;T+=1){var O=c[T],F=r(O,T),A=v?null:a.get(F);A?(A.v&&rr(A.v,O),A.i&&rr(A.i,T),w&&z.unskip_effect(A.e)):(A=Xf(a,v?s:la??(la=Zt()),O,F,T,i,t,n),v||(A.e.f|=Bt),a.set(F,A)),M.add(F)}if(x===0&&o&&!f&&(v?f=Be(()=>o(s)):(f=Be(()=>o(la??(la=Zt()))),f.f|=Bt)),x>M.size&&Cc(),!v)if(w){for(const[R,q]of a)M.has(R)||z.skip_effect(q.e);z.oncommit(y),z.ondiscard(()=>{})}else y();h(d)}),p={effect:_,items:a,outrogroups:null,fallback:f};v=!1}function Ir(e){for(;e!==null&&!(e.f&xt);)e=e.next;return e}function Yf(e,t,n,r,i){var q,P,b,N,m,C,k,D,L;var o=(r&Hc)!==0,s=t.length,a=e.items,l=Ir(e.effect.first),u,f=null,d,c=[],v=[],y,_,p,x;if(o)for(x=0;x<s;x+=1)y=t[x],_=i(y,x),p=a.get(_).e,p.f&Bt||((P=(q=p.nodes)==null?void 0:q.a)==null||P.measure(),(d??(d=new Set)).add(p));for(x=0;x<s;x+=1){if(y=t[x],_=i(y,x),p=a.get(_).e,e.outrogroups!==null)for(const V of e.outrogroups)V.pending.delete(p),V.done.delete(p);if(p.f&Bt)if(p.f^=Bt,p===l)zr(p,null,n);else{var M=f?f.next:l;p===e.effect.last&&(e.effect.last=p.prev),p.prev&&(p.prev.next=p.next),p.next&&(p.next.prev=p.prev),jt(e,f,p),jt(e,p,M),zr(p,M,n),f=p,c=[],v=[],l=Ir(f.next);continue}if(p.f&Ze&&(Cs(p),o&&((N=(b=p.nodes)==null?void 0:b.a)==null||N.unfix(),(d??(d=new Set)).delete(p))),p!==l){if(u!==void 0&&u.has(p)){if(c.length<v.length){var z=v[0],w;f=z.prev;var T=c[0],O=c[c.length-1];for(w=0;w<c.length;w+=1)zr(c[w],z,n);for(w=0;w<v.length;w+=1)u.delete(v[w]);jt(e,T.prev,O.next),jt(e,f,T),jt(e,O,z),l=z,f=O,x-=1,c=[],v=[]}else u.delete(p),zr(p,l,n),jt(e,p.prev,p.next),jt(e,p,f===null?e.effect.first:f.next),jt(e,f,p),f=p;continue}for(c=[],v=[];l!==null&&l!==p;)(u??(u=new Set)).add(l),v.push(l),l=Ir(l.next);if(l===null)continue}p.f&Bt||c.push(p),f=p,l=Ir(p.next)}if(e.outrogroups!==null){for(const V of e.outrogroups)V.pending.size===0&&(Uo(ro(V.done)),(m=e.outrogroups)==null||m.delete(V));e.outrogroups.size===0&&(e.outrogroups=null)}if(l!==null||u!==void 0){var F=[];if(u!==void 0)for(p of u)p.f&Ze||F.push(p);for(;l!==null;)!(l.f&Ze)&&l!==e.fallback&&F.push(l),l=Ir(l.next);var A=F.length;if(A>0){var R=r&dl&&s===0?n:null;if(o){for(x=0;x<A;x+=1)(k=(C=F[x].nodes)==null?void 0:C.a)==null||k.measure();for(x=0;x<A;x+=1)(L=(D=F[x].nodes)==null?void 0:D.a)==null||L.fix()}Bf(e,F,R)}}o&&At(()=>{var V,H;if(d!==void 0)for(p of d)(H=(V=p.nodes)==null?void 0:V.a)==null||H.apply()})}function Xf(e,t,n,r,i,o,s,a){var l=s&Rc?s&Vc?Pn(n):Xo(n,!1,!1):null,u=s&Lc?Pn(i):null;return{v:l,i:u,e:Be(()=>(o(t,l??n,u??i,a),()=>{e.delete(r)}))}}function zr(e,t,n){if(e.nodes)for(var r=e.nodes.start,i=e.nodes.end,o=t&&!(t.f&Bt)?t.nodes.start:n;r!==null;){var s=si(r);if(o.before(r),r===i)return;r=s}}function jt(e,t,n){t===null?e.effect.first=n:t.next=n,n===null?e.effect.last=t:n.prev=t}function Qt(e,t,...n){var r=new Ps(e);li(()=>{const i=t()??null;r.ensure(i,i&&(o=>i(o,...n)))},cn)}function Ts(e,t,n){var r=new Ps(e);li(()=>{var i=t()??null;r.ensure(i,i&&(o=>n(o,i)))},cn)}function Ke(e,t,n){ai(()=>{var r=qe(()=>t(e,n==null?void 0:n())||{});if(n&&(r!=null&&r.update)){var i=!1,o={};Ss(()=>{var s=n();$l(s),i&&yl(o,s)&&(o=s,r.update(s))}),i=!0}if(r!=null&&r.destroy)return()=>r.destroy()})}function Wf(e,t){var n=void 0,r;Kl(()=>{n!==(n=t())&&(r&&(Ce(r),r=null),n&&(r=Be(()=>{ai(()=>n(e))})))})}function nu(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=nu(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function qf(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=nu(e))&&(r&&(r+=" "),r+=t);return r}function Rn(e){return typeof e=="object"?qf(e):e??""}const ua=[...` 	
\r\fÂ \v\uFEFF`];function Zf(e,t,n){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),n){for(var i in n)if(n[i])r=r?r+" "+i:i;else if(r.length)for(var o=i.length,s=0;(s=r.indexOf(i,s))>=0;){var a=s+o;(s===0||ua.includes(r[s-1]))&&(a===r.length||ua.includes(r[a]))?r=(s===0?"":r.substring(0,s))+r.substring(a+1):s=a}}return r===""?null:r}function ca(e,t=!1){var n=t?" !important;":";",r="";for(var i in e){var o=e[i];o!=null&&o!==""&&(r+=" "+i+": "+o+n)}return r}function xo(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function Gf(e,t){if(t){var n="",r,i;if(Array.isArray(t)?(r=t[0],i=t[1]):r=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var o=!1,s=0,a=!1,l=[];r&&l.push(...Object.keys(r).map(xo)),i&&l.push(...Object.keys(i).map(xo));var u=0,f=-1;const _=e.length;for(var d=0;d<_;d++){var c=e[d];if(a?c==="/"&&e[d-1]==="*"&&(a=!1):o?o===c&&(o=!1):c==="/"&&e[d+1]==="*"?a=!0:c==='"'||c==="'"?o=c:c==="("?s++:c===")"&&s--,!a&&o===!1&&s===0){if(c===":"&&f===-1)f=d;else if(c===";"||d===_-1){if(f!==-1){var v=xo(e.substring(u,f).trim());if(!l.includes(v)){c!==";"&&d++;var y=e.substring(u,d).trim();n+=" "+y+";"}}u=d+1,f=-1}}}}return r&&(n+=ca(r)),i&&(n+=ca(i,!0)),n=n.trim(),n===""?null:n}return e==null?null:String(e)}function gn(e,t,n,r,i,o){var s=e.__className;if(s!==n||s===void 0){var a=Zf(n,r,o);a==null?e.removeAttribute("class"):t?e.className=a:e.setAttribute("class",a),e.__className=n}else if(o&&i!==o)for(var l in o){var u=!!o[l];(i==null||u!==!!i[l])&&e.classList.toggle(l,u)}return o}function bo(e,t={},n,r){for(var i in n){var o=n[i];t[i]!==o&&(n[i]==null?e.style.removeProperty(i):e.style.setProperty(i,o,r))}}function wt(e,t,n,r){var i=e.__style;if(i!==t){var o=Gf(t,r);o==null?e.removeAttribute("style"):e.style.cssText=o,e.__style=t}else r&&(Array.isArray(r)?(bo(e,n==null?void 0:n[0],r[0]),bo(e,n==null?void 0:n[1],r[1],"important")):bo(e,n,r));return r}function Qo(e,t,n=!1){if(e.multiple){if(t==null)return;if(!no(t))return Zc();for(var r of e.options)r.selected=t.includes(fa(r));return}for(r of e.options){var i=fa(r);if(yf(i,t)){r.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function Uf(e){var t=new MutationObserver(()=>{Qo(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Es(()=>{t.disconnect()})}function fa(e){return"__value"in e?e.__value:e.value}const Jt=Symbol("class"),$t=Symbol("style"),ru=Symbol("is custom element"),iu=Symbol("is html"),Qf=fl?"option":"OPTION",jf=fl?"select":"SELECT";function Jf(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function ie(e,t,n,r){var i=ou(e);i[t]!==(i[t]=n)&&(t==="loading"&&(e[Sc]=n),n==null?e.removeAttribute(t):typeof n!="string"&&su(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function $f(e,t,n,r,i=!1,o=!1){var s=ou(e),a=s[ru],l=!s[iu],u=t||{},f=e.nodeName===Qf;for(var d in t)d in n||(n[d]=null);n.class?n.class=Rn(n.class):(r||n[Jt])&&(n.class=null),n[$t]&&(n.style??(n.style=null));var c=su(e);for(const w in n){let T=n[w];if(f&&w==="value"&&T==null){e.value=e.__value="",u[w]=T;continue}if(w==="class"){var v=e.namespaceURI==="http://www.w3.org/1999/xhtml";gn(e,v,T,r,t==null?void 0:t[Jt],n[Jt]),u[w]=T,u[Jt]=n[Jt];continue}if(w==="style"){wt(e,T,t==null?void 0:t[$t],n[$t]),u[w]=T,u[$t]=n[$t];continue}var y=u[w];if(!(T===y&&!(T===void 0&&e.hasAttribute(w)))){u[w]=T;var _=w[0]+w[1];if(_!=="$$")if(_==="on"){const O={},F="$$"+w;let A=w.slice(2);var p=Tf(A);if(Pf(A)&&(A=A.slice(0,-7),O.capture=!0),!p&&y){if(T!=null)continue;e.removeEventListener(A,u[F],O),u[F]=null}if(T!=null)if(p)e[`__${A}`]=T,Ms([A]);else{let R=function(q){u[w].call(this,q)};var z=R;u[F]=Ns(A,e,R,O)}else p&&(e[`__${A}`]=void 0)}else if(w==="style")ie(e,w,T);else if(w==="autofocus")wf(e,!!T);else if(!a&&(w==="__value"||w==="value"&&T!=null))e.value=e.__value=T;else if(w==="selected"&&f)Jf(e,T);else{var x=w;l||(x=Of(x));var M=x==="defaultValue"||x==="defaultChecked";if(T==null&&!a&&!M)if(s[w]=null,x==="value"||x==="checked"){let O=e;const F=t===void 0;if(x==="value"){let A=O.defaultValue;O.removeAttribute(x),O.defaultValue=A,O.value=O.__value=F?A:null}else{let A=O.defaultChecked;O.removeAttribute(x),O.defaultChecked=A,O.checked=F?A:!1}}else e.removeAttribute(w);else M||c.includes(x)&&(a||typeof T!="string")?(e[x]=T,x in s&&(s[x]=Se)):typeof T!="function"&&ie(e,x,T)}}}return u}function Ln(e,t,n=[],r=[],i=[],o,s=!1,a=!1){Nl(i,n,r,l=>{var u=void 0,f={},d=e.nodeName===jf,c=!1;if(Kl(()=>{var y=t(...l.map(h)),_=$f(e,u,y,o,s,a);c&&d&&"value"in y&&Qo(e,y.value);for(let x of Object.getOwnPropertySymbols(f))y[x]||Ce(f[x]);for(let x of Object.getOwnPropertySymbols(y)){var p=y[x];x.description===qc&&(!u||p!==u[x])&&(f[x]&&Ce(f[x]),f[x]=Be(()=>Wf(e,()=>p))),_[x]=p}u=_}),d){var v=e;ai(()=>{Qo(v,u.value,!0),Uf(v)})}c=!0})}function ou(e){return e.__attributes??(e.__attributes={[ru]:e.nodeName.includes("-"),[iu]:e.namespaceURI===gl})}var da=new Map;function su(e){var t=e.getAttribute("is")||e.nodeName,n=da.get(t);if(n)return n;da.set(t,n=[]);for(var r,i=e,o=Element.prototype;o!==i;){r=il(i);for(var s in r)r[s].set&&n.push(s);i=io(i)}return n}var rn,$n,Jr,eo,au;const to=class to{constructor(t){I(this,eo);I(this,rn,new WeakMap);I(this,$n);I(this,Jr);J(this,Jr,t)}observe(t,n){var r=g(this,rn).get(t)||new Set;return r.add(n),g(this,rn).set(t,r),Pe(this,eo,au).call(this).observe(t,g(this,Jr)),()=>{var i=g(this,rn).get(t);i.delete(n),i.size===0&&(g(this,rn).delete(t),g(this,$n).unobserve(t))}}};rn=new WeakMap,$n=new WeakMap,Jr=new WeakMap,eo=new WeakSet,au=function(){return g(this,$n)??J(this,$n,new ResizeObserver(t=>{for(var n of t){to.entries.set(n.target,n);for(var r of g(this,rn).get(n.target)||[])r(n)}}))},ve(to,"entries",new WeakMap);let jo=to;var ed=new jo({box:"border-box"});function ha(e,t,n){var r=ed.observe(e,()=>n(e[t]));ai(()=>(qe(()=>n(e[t])),r))}function ga(e,t){return e===t||(e==null?void 0:e[Pt])===t}function ci(e={},t,n,r){return ai(()=>{var i,o;return Ss(()=>{i=o,o=[],qe(()=>{e!==n(...o)&&(t(e,...o),i&&ga(n(...i),e)&&t(null,...i))})}),()=>{At(()=>{o&&ga(n(...o),e)&&t(null,...o)})}}),e}function Is(e=!1){const t=ge,n=t.l.u;if(!n)return;let r=()=>$l(t.s);if(e){let i=0,o={};const s=oi(()=>{let a=!1;const l=t.s;for(const u in l)l[u]!==o[u]&&(o[u]=l[u],a=!0);return a&&i++,i});r=()=>h(s)}n.b.length&&Hl(()=>{va(t,r),zo(n.b)}),It(()=>{const i=qe(()=>n.m.map(Ec));return()=>{for(const o of i)typeof o=="function"&&o()}}),n.a.length&&It(()=>{va(t,r),zo(n.a)})}function va(e,t){if(e.l.s)for(const n of e.l.s)h(n);t()}let wi=!1;function td(e){var t=wi;try{return wi=!1,[e(),wi]}finally{wi=t}}const nd={get(e,t){if(!e.exclude.includes(t))return e.props[t]},set(e,t){return!1},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function fi(e,t,n){return new Proxy({props:e,exclude:t},nd)}const rd={get(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(Tr(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r)return r[t]}},set(e,t,n){let r=e.props.length;for(;r--;){let i=e.props[r];Tr(i)&&(i=i());const o=sn(i,t);if(o&&o.set)return o.set(n),!0}return!1},getOwnPropertyDescriptor(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(Tr(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r){const i=sn(r,t);return i&&!i.configurable&&(i.configurable=!0),i}}},has(e,t){if(t===Pt||t===cl)return!1;for(let n of e.props)if(Tr(n)&&(n=n()),n!=null&&t in n)return!0;return!1},ownKeys(e){const t=[];for(let n of e.props)if(Tr(n)&&(n=n()),!!n){for(const r in n)t.includes(r)||t.push(r);for(const r of Object.getOwnPropertySymbols(n))t.includes(r)||t.push(r)}return t}};function id(...e){return new Proxy({props:e},rd)}function X(e,t,n,r){var z;var i=!dr||(n&Fc)!==0,o=(n&Yc)!==0,s=(n&Xc)!==0,a=r,l=!0,u=()=>(l&&(l=!1,a=s?qe(r):r),a),f;if(o){var d=Pt in e||cl in e;f=((z=sn(e,t))==null?void 0:z.set)??(d&&t in e?w=>e[t]=w:void 0)}var c,v=!1;o?[c,v]=td(()=>e[t]):c=e[t],c===void 0&&r!==void 0&&(c=u(),f&&(i&&Tc(),f(c)));var y;if(i?y=()=>{var w=e[t];return w===void 0?u():(l=!0,w)}:y=()=>{var w=e[t];return w!==void 0&&(a=void 0),w===void 0?a:w},i&&!(n&Bc))return y;if(f){var _=e.$$legacy;return function(w,T){return arguments.length>0?((!i||!T||_||v)&&f(T?y():w),w):y()}}var p=!1,x=(n&Kc?oi:_s)(()=>(p=!1,y()));o&&h(x);var M=le;return function(w,T){if(arguments.length>0){const O=T?h(x):i&&o?on(w):w;return K(x,O),p=!0,a!==void 0&&(a=O),w}return fn&&p||M.f&Wt?x.v:h(x)}}function lu(e){ge===null&&hs(),dr&&ge.l!==null?od(ge).m.push(e):It(()=>{const t=qe(e);if(typeof t=="function")return t})}function oo(e){ge===null&&hs(),lu(()=>()=>qe(e))}function od(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const sd="5";var rl;typeof window<"u"&&((rl=window.__svelte??(window.__svelte={})).v??(rl.v=new Set)).add(sd);Qc();var ad={value:()=>{}};function so(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ti(n)}function Ti(e){this._=e}function ld(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ti.prototype=so.prototype={constructor:Ti,on:function(e,t){var n=this._,r=ld(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=ud(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=ya(n[i],e.name,t);else if(t==null)for(i in n)n[i]=ya(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ti(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function ud(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function ya(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=ad,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Jo="http://www.w3.org/1999/xhtml";const ma={svg:"http://www.w3.org/2000/svg",xhtml:Jo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ao(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ma.hasOwnProperty(t)?{space:ma[t],local:e}:e}function cd(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Jo&&t.documentElement.namespaceURI===Jo?t.createElement(e):t.createElementNS(n,e)}}function fd(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function uu(e){var t=ao(e);return(t.local?fd:cd)(t)}function dd(){}function Os(e){return e==null?dd:function(){return this.querySelector(e)}}function hd(e){typeof e!="function"&&(e=Os(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=new Array(s),l,u,f=0;f<s;++f)(l=o[f])&&(u=e.call(l,l.__data__,f,o))&&("__data__"in l&&(u.__data__=l.__data__),a[f]=u);return new Ge(r,this._parents)}function gd(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function vd(){return[]}function cu(e){return e==null?vd:function(){return this.querySelectorAll(e)}}function yd(e){return function(){return gd(e.apply(this,arguments))}}function md(e){typeof e=="function"?e=yd(e):e=cu(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var s=t[o],a=s.length,l,u=0;u<a;++u)(l=s[u])&&(r.push(e.call(l,l.__data__,u,s)),i.push(l));return new Ge(r,i)}function fu(e){return function(){return this.matches(e)}}function du(e){return function(t){return t.matches(e)}}var pd=Array.prototype.find;function _d(e){return function(){return pd.call(this.children,e)}}function wd(){return this.firstElementChild}function xd(e){return this.select(e==null?wd:_d(typeof e=="function"?e:du(e)))}var bd=Array.prototype.filter;function Ed(){return Array.from(this.children)}function Sd(e){return function(){return bd.call(this.children,e)}}function kd(e){return this.selectAll(e==null?Ed:Sd(typeof e=="function"?e:du(e)))}function Cd(e){typeof e!="function"&&(e=fu(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],l,u=0;u<s;++u)(l=o[u])&&e.call(l,l.__data__,u,o)&&a.push(l);return new Ge(r,this._parents)}function hu(e){return new Array(e.length)}function Nd(){return new Ge(this._enter||this._groups.map(hu),this._parents)}function Li(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Li.prototype={constructor:Li,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Md(e){return function(){return e}}function Pd(e,t,n,r,i,o){for(var s=0,a,l=t.length,u=o.length;s<u;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new Li(e,o[s]);for(;s<l;++s)(a=t[s])&&(i[s]=a)}function Ad(e,t,n,r,i,o,s){var a,l,u=new Map,f=t.length,d=o.length,c=new Array(f),v;for(a=0;a<f;++a)(l=t[a])&&(c[a]=v=s.call(l,l.__data__,a,t)+"",u.has(v)?i[a]=l:u.set(v,l));for(a=0;a<d;++a)v=s.call(e,o[a],a,o)+"",(l=u.get(v))?(r[a]=l,l.__data__=o[a],u.delete(v)):n[a]=new Li(e,o[a]);for(a=0;a<f;++a)(l=t[a])&&u.get(c[a])===l&&(i[a]=l)}function Td(e){return e.__data__}function Id(e,t){if(!arguments.length)return Array.from(this,Td);var n=t?Ad:Pd,r=this._parents,i=this._groups;typeof e!="function"&&(e=Md(e));for(var o=i.length,s=new Array(o),a=new Array(o),l=new Array(o),u=0;u<o;++u){var f=r[u],d=i[u],c=d.length,v=Od(e.call(f,f&&f.__data__,u,r)),y=v.length,_=a[u]=new Array(y),p=s[u]=new Array(y),x=l[u]=new Array(c);n(f,d,_,p,x,v,t);for(var M=0,z=0,w,T;M<y;++M)if(w=_[M]){for(M>=z&&(z=M+1);!(T=p[z])&&++z<y;);w._next=T||null}}return s=new Ge(s,r),s._enter=a,s._exit=l,s}function Od(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Dd(){return new Ge(this._exit||this._groups.map(hu),this._parents)}function zd(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Rd(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),l=0;l<s;++l)for(var u=n[l],f=r[l],d=u.length,c=a[l]=new Array(d),v,y=0;y<d;++y)(v=u[y]||f[y])&&(c[y]=v);for(;l<i;++l)a[l]=n[l];return new Ge(a,this._parents)}function Ld(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function Hd(e){e||(e=Vd);function t(d,c){return d&&c?e(d.__data__,c.__data__):!d-!c}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,l=i[o]=new Array(a),u,f=0;f<a;++f)(u=s[f])&&(l[f]=u);l.sort(t)}return new Ge(i,this._parents).order()}function Vd(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Kd(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Fd(){return Array.from(this)}function Bd(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function Yd(){let e=0;for(const t of this)++e;return e}function Xd(){return!this.node()}function Wd(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this}function qd(e){return function(){this.removeAttribute(e)}}function Zd(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Gd(e,t){return function(){this.setAttribute(e,t)}}function Ud(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Qd(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function jd(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Jd(e,t){var n=ao(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Zd:qd:typeof t=="function"?n.local?jd:Qd:n.local?Ud:Gd)(n,t))}function gu(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function $d(e){return function(){this.style.removeProperty(e)}}function eh(e,t,n){return function(){this.style.setProperty(e,t,n)}}function th(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function nh(e,t,n){return arguments.length>1?this.each((t==null?$d:typeof t=="function"?th:eh)(e,t,n??"")):sr(this.node(),e)}function sr(e,t){return e.style.getPropertyValue(t)||gu(e).getComputedStyle(e,null).getPropertyValue(t)}function rh(e){return function(){delete this[e]}}function ih(e,t){return function(){this[e]=t}}function oh(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function sh(e,t){return arguments.length>1?this.each((t==null?rh:typeof t=="function"?oh:ih)(e,t)):this.node()[e]}function vu(e){return e.trim().split(/^|\s+/)}function Ds(e){return e.classList||new yu(e)}function yu(e){this._node=e,this._names=vu(e.getAttribute("class")||"")}yu.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function mu(e,t){for(var n=Ds(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function pu(e,t){for(var n=Ds(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function ah(e){return function(){mu(this,e)}}function lh(e){return function(){pu(this,e)}}function uh(e,t){return function(){(t.apply(this,arguments)?mu:pu)(this,e)}}function ch(e,t){var n=vu(e+"");if(arguments.length<2){for(var r=Ds(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?uh:t?ah:lh)(n,t))}function fh(){this.textContent=""}function dh(e){return function(){this.textContent=e}}function hh(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function gh(e){return arguments.length?this.each(e==null?fh:(typeof e=="function"?hh:dh)(e)):this.node().textContent}function vh(){this.innerHTML=""}function yh(e){return function(){this.innerHTML=e}}function mh(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function ph(e){return arguments.length?this.each(e==null?vh:(typeof e=="function"?mh:yh)(e)):this.node().innerHTML}function _h(){this.nextSibling&&this.parentNode.appendChild(this)}function wh(){return this.each(_h)}function xh(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function bh(){return this.each(xh)}function Eh(e){var t=typeof e=="function"?e:uu(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Sh(){return null}function kh(e,t){var n=typeof e=="function"?e:uu(e),r=t==null?Sh:typeof t=="function"?t:Os(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Ch(){var e=this.parentNode;e&&e.removeChild(this)}function Nh(){return this.each(Ch)}function Mh(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ph(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ah(e){return this.select(e?Ph:Mh)}function Th(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Ih(e){return function(t){e.call(this,t,this.__data__)}}function Oh(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Dh(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function zh(e,t,n){return function(){var r=this.__on,i,o=Ih(t);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Rh(e,t,n){var r=Oh(e+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,f;l<u;++l)for(i=0,f=a[l];i<o;++i)if((s=r[i]).type===f.type&&s.name===f.name)return f.value}return}for(a=t?zh:Dh,i=0;i<o;++i)this.each(a(r[i],t,n));return this}function _u(e,t,n){var r=gu(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Lh(e,t){return function(){return _u(this,e,t)}}function Hh(e,t){return function(){return _u(this,e,t.apply(this,arguments))}}function Vh(e,t){return this.each((typeof t=="function"?Hh:Lh)(e,t))}function*Kh(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var wu=[null];function Ge(e,t){this._groups=e,this._parents=t}function di(){return new Ge([[document.documentElement]],wu)}function Fh(){return this}Ge.prototype=di.prototype={constructor:Ge,select:hd,selectAll:md,selectChild:xd,selectChildren:kd,filter:Cd,data:Id,enter:Nd,exit:Dd,join:zd,merge:Rd,selection:Fh,order:Ld,sort:Hd,call:Kd,nodes:Fd,node:Bd,size:Yd,empty:Xd,each:Wd,attr:Jd,style:nh,property:sh,classed:ch,text:gh,html:ph,raise:wh,lower:bh,append:Eh,insert:kh,remove:Nh,clone:Ah,datum:Th,on:Rh,dispatch:Vh,[Symbol.iterator]:Kh};function gt(e){return typeof e=="string"?new Ge([[document.querySelector(e)]],[document.documentElement]):new Ge([[e]],wu)}function Bh(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Et(e,t){if(e=Bh(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Yh={passive:!1},Br={capture:!0,passive:!1};function Eo(e){e.stopImmediatePropagation()}function Bn(e){e.preventDefault(),e.stopImmediatePropagation()}function xu(e){var t=e.document.documentElement,n=gt(e).on("dragstart.drag",Bn,Br);"onselectstart"in t?n.on("selectstart.drag",Bn,Br):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function bu(e,t){var n=e.document.documentElement,r=gt(e).on("dragstart.drag",null);t&&(r.on("click.drag",Bn,Br),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const xi=e=>()=>e;function $o(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:o,x:s,y:a,dx:l,dy:u,dispatch:f}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:f}})}$o.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Xh(e){return!e.ctrlKey&&!e.button}function Wh(){return this.parentNode}function qh(e,t){return t??{x:e.x,y:e.y}}function Zh(){return navigator.maxTouchPoints||"ontouchstart"in this}function Gh(){var e=Xh,t=Wh,n=qh,r=Zh,i={},o=so("start","drag","end"),s=0,a,l,u,f,d=0;function c(w){w.on("mousedown.drag",v).filter(r).on("touchstart.drag",p).on("touchmove.drag",x,Yh).on("touchend.drag touchcancel.drag",M).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(w,T){if(!(f||!e.call(this,w,T))){var O=z(this,t.call(this,w,T),w,T,"mouse");O&&(gt(w.view).on("mousemove.drag",y,Br).on("mouseup.drag",_,Br),xu(w.view),Eo(w),u=!1,a=w.clientX,l=w.clientY,O("start",w))}}function y(w){if(Bn(w),!u){var T=w.clientX-a,O=w.clientY-l;u=T*T+O*O>d}i.mouse("drag",w)}function _(w){gt(w.view).on("mousemove.drag mouseup.drag",null),bu(w.view,u),Bn(w),i.mouse("end",w)}function p(w,T){if(e.call(this,w,T)){var O=w.changedTouches,F=t.call(this,w,T),A=O.length,R,q;for(R=0;R<A;++R)(q=z(this,F,w,T,O[R].identifier,O[R]))&&(Eo(w),q("start",w,O[R]))}}function x(w){var T=w.changedTouches,O=T.length,F,A;for(F=0;F<O;++F)(A=i[T[F].identifier])&&(Bn(w),A("drag",w,T[F]))}function M(w){var T=w.changedTouches,O=T.length,F,A;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),F=0;F<O;++F)(A=i[T[F].identifier])&&(Eo(w),A("end",w,T[F]))}function z(w,T,O,F,A,R){var q=o.copy(),P=Et(R||O,T),b,N,m;if((m=n.call(w,new $o("beforestart",{sourceEvent:O,target:c,identifier:A,active:s,x:P[0],y:P[1],dx:0,dy:0,dispatch:q}),F))!=null)return b=m.x-P[0]||0,N=m.y-P[1]||0,function C(k,D,L){var V=P,H;switch(k){case"start":i[A]=C,H=s++;break;case"end":delete i[A],--s;case"drag":P=Et(L||D,T),H=s;break}q.call(k,w,new $o(k,{sourceEvent:D,subject:m,target:c,identifier:A,active:H,x:P[0]+b,y:P[1]+N,dx:P[0]-V[0],dy:P[1]-V[1],dispatch:q}),F)}}return c.filter=function(w){return arguments.length?(e=typeof w=="function"?w:xi(!!w),c):e},c.container=function(w){return arguments.length?(t=typeof w=="function"?w:xi(w),c):t},c.subject=function(w){return arguments.length?(n=typeof w=="function"?w:xi(w),c):n},c.touchable=function(w){return arguments.length?(r=typeof w=="function"?w:xi(!!w),c):r},c.on=function(){var w=o.on.apply(o,arguments);return w===o?c:w},c.clickDistance=function(w){return arguments.length?(d=(w=+w)*w,c):Math.sqrt(d)},c}function zs(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Eu(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function hi(){}var Yr=.7,Hi=1/Yr,Yn="\\s*([+-]?\\d+)\\s*",Xr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Tt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Uh=/^#([0-9a-f]{3,8})$/,Qh=new RegExp(`^rgb\\(${Yn},${Yn},${Yn}\\)$`),jh=new RegExp(`^rgb\\(${Tt},${Tt},${Tt}\\)$`),Jh=new RegExp(`^rgba\\(${Yn},${Yn},${Yn},${Xr}\\)$`),$h=new RegExp(`^rgba\\(${Tt},${Tt},${Tt},${Xr}\\)$`),eg=new RegExp(`^hsl\\(${Xr},${Tt},${Tt}\\)$`),tg=new RegExp(`^hsla\\(${Xr},${Tt},${Tt},${Xr}\\)$`),pa={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};zs(hi,An,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:_a,formatHex:_a,formatHex8:ng,formatHsl:rg,formatRgb:wa,toString:wa});function _a(){return this.rgb().formatHex()}function ng(){return this.rgb().formatHex8()}function rg(){return Su(this).formatHsl()}function wa(){return this.rgb().formatRgb()}function An(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Uh.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?xa(t):n===3?new Ye(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?bi(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?bi(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Qh.exec(e))?new Ye(t[1],t[2],t[3],1):(t=jh.exec(e))?new Ye(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Jh.exec(e))?bi(t[1],t[2],t[3],t[4]):(t=$h.exec(e))?bi(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=eg.exec(e))?Sa(t[1],t[2]/100,t[3]/100,1):(t=tg.exec(e))?Sa(t[1],t[2]/100,t[3]/100,t[4]):pa.hasOwnProperty(e)?xa(pa[e]):e==="transparent"?new Ye(NaN,NaN,NaN,0):null}function xa(e){return new Ye(e>>16&255,e>>8&255,e&255,1)}function bi(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ye(e,t,n,r)}function ig(e){return e instanceof hi||(e=An(e)),e?(e=e.rgb(),new Ye(e.r,e.g,e.b,e.opacity)):new Ye}function es(e,t,n,r){return arguments.length===1?ig(e):new Ye(e,t,n,r??1)}function Ye(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}zs(Ye,es,Eu(hi,{brighter(e){return e=e==null?Hi:Math.pow(Hi,e),new Ye(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Yr:Math.pow(Yr,e),new Ye(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ye(Nn(this.r),Nn(this.g),Nn(this.b),Vi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ba,formatHex:ba,formatHex8:og,formatRgb:Ea,toString:Ea}));function ba(){return`#${mn(this.r)}${mn(this.g)}${mn(this.b)}`}function og(){return`#${mn(this.r)}${mn(this.g)}${mn(this.b)}${mn((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ea(){const e=Vi(this.opacity);return`${e===1?"rgb(":"rgba("}${Nn(this.r)}, ${Nn(this.g)}, ${Nn(this.b)}${e===1?")":`, ${e})`}`}function Vi(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Nn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function mn(e){return e=Nn(e),(e<16?"0":"")+e.toString(16)}function Sa(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new vt(e,t,n,r)}function Su(e){if(e instanceof vt)return new vt(e.h,e.s,e.l,e.opacity);if(e instanceof hi||(e=An(e)),!e)return new vt;if(e instanceof vt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(t===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-t)/a+2:s=(t-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new vt(s,a,l,e.opacity)}function sg(e,t,n,r){return arguments.length===1?Su(e):new vt(e,t,n,r??1)}function vt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}zs(vt,sg,Eu(hi,{brighter(e){return e=e==null?Hi:Math.pow(Hi,e),new vt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Yr:Math.pow(Yr,e),new vt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Ye(So(e>=240?e-240:e+120,i,r),So(e,i,r),So(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new vt(ka(this.h),Ei(this.s),Ei(this.l),Vi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Vi(this.opacity);return`${e===1?"hsl(":"hsla("}${ka(this.h)}, ${Ei(this.s)*100}%, ${Ei(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ka(e){return e=(e||0)%360,e<0?e+360:e}function Ei(e){return Math.max(0,Math.min(1,e||0))}function So(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Rs=e=>()=>e;function ag(e,t){return function(n){return e+n*t}}function lg(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function ug(e){return(e=+e)==1?ku:function(t,n){return n-t?lg(t,n,e):Rs(isNaN(t)?n:t)}}function ku(e,t){var n=t-e;return n?ag(e,n):Rs(isNaN(e)?t:e)}const Ki=function e(t){var n=ug(t);function r(i,o){var s=n((i=es(i)).r,(o=es(o)).r),a=n(i.g,o.g),l=n(i.b,o.b),u=ku(i.opacity,o.opacity);return function(f){return i.r=s(f),i.g=a(f),i.b=l(f),i.opacity=u(f),i+""}}return r.gamma=e,r}(1);function cg(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function fg(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function dg(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=Vr(e[s],t[s]);for(;s<n;++s)o[s]=t[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function hg(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Mt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function gg(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Vr(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var ts=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ko=new RegExp(ts.source,"g");function vg(e){return function(){return e}}function yg(e){return function(t){return e(t)+""}}function Cu(e,t){var n=ts.lastIndex=ko.lastIndex=0,r,i,o,s=-1,a=[],l=[];for(e=e+"",t=t+"";(r=ts.exec(e))&&(i=ko.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:Mt(r,i)})),n=ko.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?yg(l[0].x):vg(t):(t=l.length,function(u){for(var f=0,d;f<t;++f)a[(d=l[f]).i]=d.x(u);return a.join("")})}function Vr(e,t){var n=typeof t,r;return t==null||n==="boolean"?Rs(t):(n==="number"?Mt:n==="string"?(r=An(t))?(t=r,Ki):Cu:t instanceof An?Ki:t instanceof Date?hg:fg(t)?cg:Array.isArray(t)?dg:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?gg:Mt)(e,t)}var Ca=180/Math.PI,ns={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Nu(e,t,n,r,i,o){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*Ca,skewX:Math.atan(l)*Ca,scaleX:s,scaleY:a}}var Si;function mg(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?ns:Nu(t.a,t.b,t.c,t.d,t.e,t.f)}function pg(e){return e==null||(Si||(Si=document.createElementNS("http://www.w3.org/2000/svg","g")),Si.setAttribute("transform",e),!(e=Si.transform.baseVal.consolidate()))?ns:(e=e.matrix,Nu(e.a,e.b,e.c,e.d,e.e,e.f))}function Mu(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,f,d,c,v,y){if(u!==d||f!==c){var _=v.push("translate(",null,t,null,n);y.push({i:_-4,x:Mt(u,d)},{i:_-2,x:Mt(f,c)})}else(d||c)&&v.push("translate("+d+t+c+n)}function s(u,f,d,c){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),c.push({i:d.push(i(d)+"rotate(",null,r)-2,x:Mt(u,f)})):f&&d.push(i(d)+"rotate("+f+r)}function a(u,f,d,c){u!==f?c.push({i:d.push(i(d)+"skewX(",null,r)-2,x:Mt(u,f)}):f&&d.push(i(d)+"skewX("+f+r)}function l(u,f,d,c,v,y){if(u!==d||f!==c){var _=v.push(i(v)+"scale(",null,",",null,")");y.push({i:_-4,x:Mt(u,d)},{i:_-2,x:Mt(f,c)})}else(d!==1||c!==1)&&v.push(i(v)+"scale("+d+","+c+")")}return function(u,f){var d=[],c=[];return u=e(u),f=e(f),o(u.translateX,u.translateY,f.translateX,f.translateY,d,c),s(u.rotate,f.rotate,d,c),a(u.skewX,f.skewX,d,c),l(u.scaleX,u.scaleY,f.scaleX,f.scaleY,d,c),u=f=null,function(v){for(var y=-1,_=c.length,p;++y<_;)d[(p=c[y]).i]=p.x(v);return d.join("")}}}var _g=Mu(mg,"px, ","px)","deg)"),wg=Mu(pg,", ",")",")"),xg=1e-12;function Na(e){return((e=Math.exp(e))+1/e)/2}function bg(e){return((e=Math.exp(e))-1/e)/2}function Eg(e){return((e=Math.exp(2*e))-1)/(e+1)}const Ii=function e(t,n,r){function i(o,s){var a=o[0],l=o[1],u=o[2],f=s[0],d=s[1],c=s[2],v=f-a,y=d-l,_=v*v+y*y,p,x;if(_<xg)x=Math.log(c/u)/t,p=function(F){return[a+F*v,l+F*y,u*Math.exp(t*F*x)]};else{var M=Math.sqrt(_),z=(c*c-u*u+r*_)/(2*u*n*M),w=(c*c-u*u-r*_)/(2*c*n*M),T=Math.log(Math.sqrt(z*z+1)-z),O=Math.log(Math.sqrt(w*w+1)-w);x=(O-T)/t,p=function(F){var A=F*x,R=Na(T),q=u/(n*M)*(R*Eg(t*A+T)-bg(T));return[a+q*v,l+q*y,u*R/Na(t*A+T)]}}return p.duration=x*1e3*t/Math.SQRT2,p}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,l=a*a;return e(s,a,l)},i}(Math.SQRT2,2,4);var ar=0,Rr=0,Or=0,Pu=1e3,Fi,Lr,Bi=0,Tn=0,lo=0,Wr=typeof performance=="object"&&performance.now?performance:Date,Au=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Ls(){return Tn||(Au(Sg),Tn=Wr.now()+lo)}function Sg(){Tn=0}function Yi(){this._call=this._time=this._next=null}Yi.prototype=Tu.prototype={constructor:Yi,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Ls():+n)+(t==null?0:+t),!this._next&&Lr!==this&&(Lr?Lr._next=this:Fi=this,Lr=this),this._call=e,this._time=n,rs()},stop:function(){this._call&&(this._call=null,this._time=1/0,rs())}};function Tu(e,t,n){var r=new Yi;return r.restart(e,t,n),r}function kg(){Ls(),++ar;for(var e=Fi,t;e;)(t=Tn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ar}function Ma(){Tn=(Bi=Wr.now())+lo,ar=Rr=0;try{kg()}finally{ar=0,Ng(),Tn=0}}function Cg(){var e=Wr.now(),t=e-Bi;t>Pu&&(lo-=t,Bi=e)}function Ng(){for(var e,t=Fi,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Fi=n);Lr=e,rs(r)}function rs(e){if(!ar){Rr&&(Rr=clearTimeout(Rr));var t=e-Tn;t>24?(e<1/0&&(Rr=setTimeout(Ma,e-Wr.now()-lo)),Or&&(Or=clearInterval(Or))):(Or||(Bi=Wr.now(),Or=setInterval(Cg,Pu)),ar=1,Au(Ma))}}function Pa(e,t,n){var r=new Yi;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Mg=so("start","end","cancel","interrupt"),Pg=[],Iu=0,Aa=1,is=2,Oi=3,Ta=4,os=5,Di=6;function uo(e,t,n,r,i,o){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;Ag(e,n,{name:t,index:r,group:i,on:Mg,tween:Pg,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Iu})}function Hs(e,t){var n=bt(e,t);if(n.state>Iu)throw new Error("too late; already scheduled");return n}function Rt(e,t){var n=bt(e,t);if(n.state>Oi)throw new Error("too late; already running");return n}function bt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Ag(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Tu(o,0,n.time);function o(u){n.state=Aa,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var f,d,c,v;if(n.state!==Aa)return l();for(f in r)if(v=r[f],v.name===n.name){if(v.state===Oi)return Pa(s);v.state===Ta?(v.state=Di,v.timer.stop(),v.on.call("interrupt",e,e.__data__,v.index,v.group),delete r[f]):+f<t&&(v.state=Di,v.timer.stop(),v.on.call("cancel",e,e.__data__,v.index,v.group),delete r[f])}if(Pa(function(){n.state===Oi&&(n.state=Ta,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=is,n.on.call("start",e,e.__data__,n.index,n.group),n.state===is){for(n.state=Oi,i=new Array(c=n.tween.length),f=0,d=-1;f<c;++f)(v=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=v);i.length=d+1}}function a(u){for(var f=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=os,1),d=-1,c=i.length;++d<c;)i[d].call(e,f);n.state===os&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Di,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function zi(e,t){var n=e.__transition,r,i,o=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){o=!1;continue}i=r.state>is&&r.state<os,r.state=Di,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}o&&delete e.__transition}}function Tg(e){return this.each(function(){zi(this,e)})}function Ig(e,t){var n,r;return function(){var i=Rt(this,e),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function Og(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=Rt(this,e),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=a;break}l===u&&i.push(a)}o.tween=i}}function Dg(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=bt(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===e)return s.value;return null}return this.each((t==null?Ig:Og)(n,e,t))}function Vs(e,t,n){var r=e._id;return e.each(function(){var i=Rt(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return bt(i,r).value[t]}}function Ou(e,t){var n;return(typeof t=="number"?Mt:t instanceof An?Ki:(n=An(t))?(t=n,Ki):Cu)(e,t)}function zg(e){return function(){this.removeAttribute(e)}}function Rg(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Lg(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttribute(e);return s===i?null:s===r?o:o=t(r=s,n)}}function Hg(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===r?o:o=t(r=s,n)}}function Vg(e,t,n){var r,i,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),l=a+"",s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a)))}}function Kg(e,t,n){var r,i,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),l=a+"",s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a)))}}function Fg(e,t){var n=ao(e),r=n==="transform"?wg:Ou;return this.attrTween(e,typeof t=="function"?(n.local?Kg:Vg)(n,r,Vs(this,"attr."+e,t)):t==null?(n.local?Rg:zg)(n):(n.local?Hg:Lg)(n,r,t))}function Bg(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Yg(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Xg(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&Yg(e,o)),n}return i._value=t,i}function Wg(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&Bg(e,o)),n}return i._value=t,i}function qg(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=ao(e);return this.tween(n,(r.local?Xg:Wg)(r,t))}function Zg(e,t){return function(){Hs(this,e).delay=+t.apply(this,arguments)}}function Gg(e,t){return t=+t,function(){Hs(this,e).delay=t}}function Ug(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Zg:Gg)(t,e)):bt(this.node(),t).delay}function Qg(e,t){return function(){Rt(this,e).duration=+t.apply(this,arguments)}}function jg(e,t){return t=+t,function(){Rt(this,e).duration=t}}function Jg(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Qg:jg)(t,e)):bt(this.node(),t).duration}function $g(e,t){if(typeof t!="function")throw new Error;return function(){Rt(this,e).ease=t}}function ev(e){var t=this._id;return arguments.length?this.each($g(t,e)):bt(this.node(),t).ease}function tv(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Rt(this,e).ease=n}}function nv(e){if(typeof e!="function")throw new Error;return this.each(tv(this._id,e))}function rv(e){typeof e!="function"&&(e=fu(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],l,u=0;u<s;++u)(l=o[u])&&e.call(l,l.__data__,u,o)&&a.push(l);return new Gt(r,this._parents,this._name,this._id)}function iv(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var l=t[a],u=n[a],f=l.length,d=s[a]=new Array(f),c,v=0;v<f;++v)(c=l[v]||u[v])&&(d[v]=c);for(;a<r;++a)s[a]=t[a];return new Gt(s,this._parents,this._name,this._id)}function ov(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function sv(e,t,n){var r,i,o=ov(t)?Hs:Rt;return function(){var s=o(this,e),a=s.on;a!==r&&(i=(r=a).copy()).on(t,n),s.on=i}}function av(e,t){var n=this._id;return arguments.length<2?bt(this.node(),n).on.on(e):this.each(sv(n,e,t))}function lv(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function uv(){return this.on("end.remove",lv(this._id))}function cv(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Os(e));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],l=a.length,u=o[s]=new Array(l),f,d,c=0;c<l;++c)(f=a[c])&&(d=e.call(f,f.__data__,c,a))&&("__data__"in f&&(d.__data__=f.__data__),u[c]=d,uo(u[c],t,n,c,u,bt(f,n)));return new Gt(o,this._parents,t,n)}function fv(e){var t=this._name,n=this._id;typeof e!="function"&&(e=cu(e));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var l=r[a],u=l.length,f,d=0;d<u;++d)if(f=l[d]){for(var c=e.call(f,f.__data__,d,l),v,y=bt(f,n),_=0,p=c.length;_<p;++_)(v=c[_])&&uo(v,t,n,_,c,y);o.push(c),s.push(f)}return new Gt(o,s,t,n)}var dv=di.prototype.constructor;function hv(){return new dv(this._groups,this._parents)}function gv(e,t){var n,r,i;return function(){var o=sr(this,e),s=(this.style.removeProperty(e),sr(this,e));return o===s?null:o===n&&s===r?i:i=t(n=o,r=s)}}function Du(e){return function(){this.style.removeProperty(e)}}function vv(e,t,n){var r,i=n+"",o;return function(){var s=sr(this,e);return s===i?null:s===r?o:o=t(r=s,n)}}function yv(e,t,n){var r,i,o;return function(){var s=sr(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),sr(this,e))),s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a))}}function mv(e,t){var n,r,i,o="style."+t,s="end."+o,a;return function(){var l=Rt(this,e),u=l.on,f=l.value[o]==null?a||(a=Du(t)):void 0;(u!==n||i!==f)&&(r=(n=u).copy()).on(s,i=f),l.on=r}}function pv(e,t,n){var r=(e+="")=="transform"?_g:Ou;return t==null?this.styleTween(e,gv(e,r)).on("end.style."+e,Du(e)):typeof t=="function"?this.styleTween(e,yv(e,r,Vs(this,"style."+e,t))).each(mv(this._id,e)):this.styleTween(e,vv(e,r,t),n).on("end.style."+e,null)}function _v(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function wv(e,t,n){var r,i;function o(){var s=t.apply(this,arguments);return s!==i&&(r=(i=s)&&_v(e,s,n)),r}return o._value=t,o}function xv(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,wv(e,t,n??""))}function bv(e){return function(){this.textContent=e}}function Ev(e){return function(){var t=e(this);this.textContent=t??""}}function Sv(e){return this.tween("text",typeof e=="function"?Ev(Vs(this,"text",e)):bv(e==null?"":e+""))}function kv(e){return function(t){this.textContent=e.call(this,t)}}function Cv(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&kv(i)),t}return r._value=e,r}function Nv(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Cv(e))}function Mv(){for(var e=this._name,t=this._id,n=zu(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,l,u=0;u<a;++u)if(l=s[u]){var f=bt(l,t);uo(l,e,n,u,s,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Gt(r,this._parents,e,n)}function Pv(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},l={value:function(){--i===0&&o()}};n.each(function(){var u=Rt(this,r),f=u.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),u.on=t}),i===0&&o()})}var Av=0;function Gt(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function zu(){return++Av}var Lt=di.prototype;Gt.prototype={constructor:Gt,select:cv,selectAll:fv,selectChild:Lt.selectChild,selectChildren:Lt.selectChildren,filter:rv,merge:iv,selection:hv,transition:Mv,call:Lt.call,nodes:Lt.nodes,node:Lt.node,size:Lt.size,empty:Lt.empty,each:Lt.each,on:av,attr:Fg,attrTween:qg,style:pv,styleTween:xv,text:Sv,textTween:Nv,remove:uv,tween:Dg,delay:Ug,duration:Jg,ease:ev,easeVarying:nv,end:Pv,[Symbol.iterator]:Lt[Symbol.iterator]};function Tv(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Iv={time:null,delay:0,duration:250,ease:Tv};function Ov(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Dv(e){var t,n;e instanceof Gt?(t=e._id,e=e._name):(t=zu(),(n=Iv).time=Ls(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,l,u=0;u<a;++u)(l=s[u])&&uo(l,e,t,u,s,n||Ov(l,t));return new Gt(r,this._parents,e,t)}di.prototype.interrupt=Tg;di.prototype.transition=Dv;const ki=e=>()=>e;function zv(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Yt(e,t,n){this.k=e,this.x=t,this.y=n}Yt.prototype={constructor:Yt,scale:function(e){return e===1?this:new Yt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Yt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var co=new Yt(1,0,0);Ru.prototype=Yt.prototype;function Ru(e){for(;!e.__zoom;)if(!(e=e.parentNode))return co;return e.__zoom}function Co(e){e.stopImmediatePropagation()}function Dr(e){e.preventDefault(),e.stopImmediatePropagation()}function Rv(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Lv(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Ia(){return this.__zoom||co}function Hv(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Vv(){return navigator.maxTouchPoints||"ontouchstart"in this}function Kv(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function Fv(){var e=Rv,t=Lv,n=Kv,r=Hv,i=Vv,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,l=Ii,u=so("start","zoom","end"),f,d,c,v=500,y=150,_=0,p=10;function x(m){m.property("__zoom",Ia).on("wheel.zoom",A,{passive:!1}).on("mousedown.zoom",R).on("dblclick.zoom",q).filter(i).on("touchstart.zoom",P).on("touchmove.zoom",b).on("touchend.zoom touchcancel.zoom",N).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}x.transform=function(m,C,k,D){var L=m.selection?m.selection():m;L.property("__zoom",Ia),m!==L?T(m,C,k,D):L.interrupt().each(function(){O(this,arguments).event(D).start().zoom(null,typeof C=="function"?C.apply(this,arguments):C).end()})},x.scaleBy=function(m,C,k,D){x.scaleTo(m,function(){var L=this.__zoom.k,V=typeof C=="function"?C.apply(this,arguments):C;return L*V},k,D)},x.scaleTo=function(m,C,k,D){x.transform(m,function(){var L=t.apply(this,arguments),V=this.__zoom,H=k==null?w(L):typeof k=="function"?k.apply(this,arguments):k,Y=V.invert(H),Z=typeof C=="function"?C.apply(this,arguments):C;return n(z(M(V,Z),H,Y),L,s)},k,D)},x.translateBy=function(m,C,k,D){x.transform(m,function(){return n(this.__zoom.translate(typeof C=="function"?C.apply(this,arguments):C,typeof k=="function"?k.apply(this,arguments):k),t.apply(this,arguments),s)},null,D)},x.translateTo=function(m,C,k,D,L){x.transform(m,function(){var V=t.apply(this,arguments),H=this.__zoom,Y=D==null?w(V):typeof D=="function"?D.apply(this,arguments):D;return n(co.translate(Y[0],Y[1]).scale(H.k).translate(typeof C=="function"?-C.apply(this,arguments):-C,typeof k=="function"?-k.apply(this,arguments):-k),V,s)},D,L)};function M(m,C){return C=Math.max(o[0],Math.min(o[1],C)),C===m.k?m:new Yt(C,m.x,m.y)}function z(m,C,k){var D=C[0]-k[0]*m.k,L=C[1]-k[1]*m.k;return D===m.x&&L===m.y?m:new Yt(m.k,D,L)}function w(m){return[(+m[0][0]+ +m[1][0])/2,(+m[0][1]+ +m[1][1])/2]}function T(m,C,k,D){m.on("start.zoom",function(){O(this,arguments).event(D).start()}).on("interrupt.zoom end.zoom",function(){O(this,arguments).event(D).end()}).tween("zoom",function(){var L=this,V=arguments,H=O(L,V).event(D),Y=t.apply(L,V),Z=k==null?w(Y):typeof k=="function"?k.apply(L,V):k,W=Math.max(Y[1][0]-Y[0][0],Y[1][1]-Y[0][1]),B=L.__zoom,ee=typeof C=="function"?C.apply(L,V):C,G=l(B.invert(Z).concat(W/B.k),ee.invert(Z).concat(W/ee.k));return function(U){if(U===1)U=ee;else{var Q=G(U),ue=W/Q[2];U=new Yt(ue,Z[0]-Q[0]*ue,Z[1]-Q[1]*ue)}H.zoom(null,U)}})}function O(m,C,k){return!k&&m.__zooming||new F(m,C)}function F(m,C){this.that=m,this.args=C,this.active=0,this.sourceEvent=null,this.extent=t.apply(m,C),this.taps=0}F.prototype={event:function(m){return m&&(this.sourceEvent=m),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(m,C){return this.mouse&&m!=="mouse"&&(this.mouse[1]=C.invert(this.mouse[0])),this.touch0&&m!=="touch"&&(this.touch0[1]=C.invert(this.touch0[0])),this.touch1&&m!=="touch"&&(this.touch1[1]=C.invert(this.touch1[0])),this.that.__zoom=C,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(m){var C=gt(this.that).datum();u.call(m,this.that,new zv(m,{sourceEvent:this.sourceEvent,target:x,transform:this.that.__zoom,dispatch:u}),C)}};function A(m,...C){if(!e.apply(this,arguments))return;var k=O(this,C).event(m),D=this.__zoom,L=Math.max(o[0],Math.min(o[1],D.k*Math.pow(2,r.apply(this,arguments)))),V=Et(m);if(k.wheel)(k.mouse[0][0]!==V[0]||k.mouse[0][1]!==V[1])&&(k.mouse[1]=D.invert(k.mouse[0]=V)),clearTimeout(k.wheel);else{if(D.k===L)return;k.mouse=[V,D.invert(V)],zi(this),k.start()}Dr(m),k.wheel=setTimeout(H,y),k.zoom("mouse",n(z(M(D,L),k.mouse[0],k.mouse[1]),k.extent,s));function H(){k.wheel=null,k.end()}}function R(m,...C){if(c||!e.apply(this,arguments))return;var k=m.currentTarget,D=O(this,C,!0).event(m),L=gt(m.view).on("mousemove.zoom",Z,!0).on("mouseup.zoom",W,!0),V=Et(m,k),H=m.clientX,Y=m.clientY;xu(m.view),Co(m),D.mouse=[V,this.__zoom.invert(V)],zi(this),D.start();function Z(B){if(Dr(B),!D.moved){var ee=B.clientX-H,G=B.clientY-Y;D.moved=ee*ee+G*G>_}D.event(B).zoom("mouse",n(z(D.that.__zoom,D.mouse[0]=Et(B,k),D.mouse[1]),D.extent,s))}function W(B){L.on("mousemove.zoom mouseup.zoom",null),bu(B.view,D.moved),Dr(B),D.event(B).end()}}function q(m,...C){if(e.apply(this,arguments)){var k=this.__zoom,D=Et(m.changedTouches?m.changedTouches[0]:m,this),L=k.invert(D),V=k.k*(m.shiftKey?.5:2),H=n(z(M(k,V),D,L),t.apply(this,C),s);Dr(m),a>0?gt(this).transition().duration(a).call(T,H,D,m):gt(this).call(x.transform,H,D,m)}}function P(m,...C){if(e.apply(this,arguments)){var k=m.touches,D=k.length,L=O(this,C,m.changedTouches.length===D).event(m),V,H,Y,Z;for(Co(m),H=0;H<D;++H)Y=k[H],Z=Et(Y,this),Z=[Z,this.__zoom.invert(Z),Y.identifier],L.touch0?!L.touch1&&L.touch0[2]!==Z[2]&&(L.touch1=Z,L.taps=0):(L.touch0=Z,V=!0,L.taps=1+!!f);f&&(f=clearTimeout(f)),V&&(L.taps<2&&(d=Z[0],f=setTimeout(function(){f=null},v)),zi(this),L.start())}}function b(m,...C){if(this.__zooming){var k=O(this,C).event(m),D=m.changedTouches,L=D.length,V,H,Y,Z;for(Dr(m),V=0;V<L;++V)H=D[V],Y=Et(H,this),k.touch0&&k.touch0[2]===H.identifier?k.touch0[0]=Y:k.touch1&&k.touch1[2]===H.identifier&&(k.touch1[0]=Y);if(H=k.that.__zoom,k.touch1){var W=k.touch0[0],B=k.touch0[1],ee=k.touch1[0],G=k.touch1[1],U=(U=ee[0]-W[0])*U+(U=ee[1]-W[1])*U,Q=(Q=G[0]-B[0])*Q+(Q=G[1]-B[1])*Q;H=M(H,Math.sqrt(U/Q)),Y=[(W[0]+ee[0])/2,(W[1]+ee[1])/2],Z=[(B[0]+G[0])/2,(B[1]+G[1])/2]}else if(k.touch0)Y=k.touch0[0],Z=k.touch0[1];else return;k.zoom("touch",n(z(H,Y,Z),k.extent,s))}}function N(m,...C){if(this.__zooming){var k=O(this,C).event(m),D=m.changedTouches,L=D.length,V,H;for(Co(m),c&&clearTimeout(c),c=setTimeout(function(){c=null},v),V=0;V<L;++V)H=D[V],k.touch0&&k.touch0[2]===H.identifier?delete k.touch0:k.touch1&&k.touch1[2]===H.identifier&&delete k.touch1;if(k.touch1&&!k.touch0&&(k.touch0=k.touch1,delete k.touch1),k.touch0)k.touch0[1]=this.__zoom.invert(k.touch0[0]);else if(k.end(),k.taps===2&&(H=Et(H,this),Math.hypot(d[0]-H[0],d[1]-H[1])<p)){var Y=gt(this).on("dblclick.zoom");Y&&Y.apply(this,arguments)}}}return x.wheelDelta=function(m){return arguments.length?(r=typeof m=="function"?m:ki(+m),x):r},x.filter=function(m){return arguments.length?(e=typeof m=="function"?m:ki(!!m),x):e},x.touchable=function(m){return arguments.length?(i=typeof m=="function"?m:ki(!!m),x):i},x.extent=function(m){return arguments.length?(t=typeof m=="function"?m:ki([[+m[0][0],+m[0][1]],[+m[1][0],+m[1][1]]]),x):t},x.scaleExtent=function(m){return arguments.length?(o[0]=+m[0],o[1]=+m[1],x):[o[0],o[1]]},x.translateExtent=function(m){return arguments.length?(s[0][0]=+m[0][0],s[1][0]=+m[1][0],s[0][1]=+m[0][1],s[1][1]=+m[1][1],x):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},x.constrain=function(m){return arguments.length?(n=m,x):n},x.duration=function(m){return arguments.length?(a=+m,x):a},x.interpolate=function(m){return arguments.length?(l=m,x):l},x.on=function(){var m=u.on.apply(u,arguments);return m===u?x:m},x.clickDistance=function(m){return arguments.length?(_=(m=+m)*m,x):Math.sqrt(_)},x.tapDistance=function(m){return arguments.length?(p=+m,x):p},x}const qr={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},ss=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Lu=["Enter"," ","Escape"],Bv={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var lr;(function(e){e.Strict="strict",e.Loose="loose"})(lr||(lr={}));var Xn;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Xn||(Xn={}));var Xi;(function(e){e.Partial="partial",e.Full="full"})(Xi||(Xi={}));const as={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var en;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(en||(en={}));var Wi;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Wi||(Wi={}));var $;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})($||($={}));const Oa={[$.Left]:$.Right,[$.Right]:$.Left,[$.Top]:$.Bottom,[$.Bottom]:$.Top};function Yv(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}function Da(e,t,n){if(!n)return;const r=[];e.forEach((i,o)=>{t!=null&&t.has(o)||r.push(i)}),r.length&&n(r)}function Xv(e){return e===null?null:e?"valid":"invalid"}const Hu=e=>"id"in e&&"source"in e&&"target"in e,Wv=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Ks=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),gi=(e,t=[0,0])=>{const{width:n,height:r}=Hn(e),i=e.origin??t,o=n*i[0],s=r*i[1];return{x:e.position.x-o,y:e.position.y-s}},qv=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const o=typeof i=="string";let s=!t.nodeLookup&&!o?i:void 0;t.nodeLookup&&(s=o?t.nodeLookup.get(i):Ks(i)?i:t.nodeLookup.get(i.id));const a=s?qi(s,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return ho(r,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return go(n)},fo=(e,t={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},r=!1;return e.forEach(i=>{(t.filter===void 0||t.filter(i))&&(n=ho(n,qi(i)),r=!0)}),r?go(n):{x:0,y:0,width:0,height:0}},Fs=(e,t,[n,r,i]=[0,0,1],o=!1,s=!1)=>{const a={...yi(t,[n,r,i]),width:t.width/i,height:t.height/i},l=[];for(const u of e.values()){const{measured:f,selectable:d=!0,hidden:c=!1}=u;if(s&&!d||c)continue;const v=f.width??u.width??u.initialWidth??null,y=f.height??u.height??u.initialHeight??null,_=Zr(a,cr(u)),p=(v??0)*(y??0),x=o&&_>0;(!u.internals.handleBounds||x||_>=p||u.dragging)&&l.push(u)}return l},Zv=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function Gv(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(i=>i.id)):null;return e.forEach(i=>{i.measured.width&&i.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function Uv({nodes:e,width:t,height:n,panZoom:r,minZoom:i,maxZoom:o},s){if(e.size===0)return Promise.resolve(!0);const a=Gv(e,s),l=fo(a),u=Bs(l,t,n,(s==null?void 0:s.minZoom)??i,(s==null?void 0:s.maxZoom)??o,(s==null?void 0:s.padding)??.1);return await r.setViewport(u,{duration:s==null?void 0:s.duration,ease:s==null?void 0:s.ease,interpolate:s==null?void 0:s.interpolate}),Promise.resolve(!0)}function Vu({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:o}){const s=n.get(e),a=s.parentId?n.get(s.parentId):void 0,{x:l,y:u}=a?a.internals.positionAbsolute:{x:0,y:0},f=s.origin??r;let d=s.extent||i;if(s.extent==="parent"&&!s.expandParent)if(!a)o==null||o("005",qr.error005());else{const v=a.measured.width,y=a.measured.height;v&&y&&(d=[[l,u],[l+v,u+y]])}else a&&fr(s.extent)&&(d=[[s.extent[0][0]+l,s.extent[0][1]+u],[s.extent[1][0]+l,s.extent[1][1]+u]]);const c=fr(d)?In(t,d,s.measured):t;return(s.measured.width===void 0||s.measured.height===void 0)&&(o==null||o("015",qr.error015())),{position:{x:c.x-l+(s.measured.width??0)*f[0],y:c.y-u+(s.measured.height??0)*f[1]},positionAbsolute:c}}async function Qv({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:i}){const o=new Set(e.map(c=>c.id)),s=[];for(const c of n){if(c.deletable===!1)continue;const v=o.has(c.id),y=!v&&c.parentId&&s.find(_=>_.id===c.parentId);(v||y)&&s.push(c)}const a=new Set(t.map(c=>c.id)),l=r.filter(c=>c.deletable!==!1),f=Zv(s,l);for(const c of l)a.has(c.id)&&!f.find(y=>y.id===c.id)&&f.push(c);if(!i)return{edges:f,nodes:s};const d=await i({nodes:s,edges:f});return typeof d=="boolean"?d?{edges:f,nodes:s}:{edges:[],nodes:[]}:d}const ur=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),In=(e={x:0,y:0},t,n)=>({x:ur(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:ur(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function Ku(e,t,n){const{width:r,height:i}=Hn(n),{x:o,y:s}=n.internals.positionAbsolute;return In(e,[[o,s],[o+r,s+i]],t)}const za=(e,t,n)=>e<t?ur(Math.abs(e-t),1,t)/t:e>n?-ur(Math.abs(e-n),1,t)/t:0,Fu=(e,t,n=15,r=40)=>{const i=za(e.x,r,t.width-r)*n,o=za(e.y,r,t.height-r)*n;return[i,o]},ho=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),ls=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),go=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),cr=(e,t=[0,0])=>{var i,o;const{x:n,y:r}=Ks(e)?e.internals.positionAbsolute:gi(e,t);return{x:n,y:r,width:((i=e.measured)==null?void 0:i.width)??e.width??e.initialWidth??0,height:((o=e.measured)==null?void 0:o.height)??e.height??e.initialHeight??0}},qi=(e,t=[0,0])=>{var i,o;const{x:n,y:r}=Ks(e)?e.internals.positionAbsolute:gi(e,t);return{x:n,y:r,x2:n+(((i=e.measured)==null?void 0:i.width)??e.width??e.initialWidth??0),y2:r+(((o=e.measured)==null?void 0:o.height)??e.height??e.initialHeight??0)}},jv=(e,t)=>go(ho(ls(e),ls(t))),Zr=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Ra=e=>Xt(e.width)&&Xt(e.height)&&Xt(e.x)&&Xt(e.y),Xt=e=>!isNaN(e)&&isFinite(e),Jv=(e,t)=>{},vi=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),yi=({x:e,y:t},[n,r,i],o=!1,s=[1,1])=>{const a={x:(e-n)/i,y:(t-r)/i};return o?vi(a,s):a},Zi=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r});function Vn(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function $v(e,t,n){if(typeof e=="string"||typeof e=="number"){const r=Vn(e,n),i=Vn(e,t);return{top:r,right:i,bottom:r,left:i,x:i*2,y:r*2}}if(typeof e=="object"){const r=Vn(e.top??e.y??0,n),i=Vn(e.bottom??e.y??0,n),o=Vn(e.left??e.x??0,t),s=Vn(e.right??e.x??0,t);return{top:r,right:s,bottom:i,left:o,x:o+s,y:r+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function e0(e,t,n,r,i,o){const{x:s,y:a}=Zi(e,[t,n,r]),{x:l,y:u}=Zi({x:e.x+e.width,y:e.y+e.height},[t,n,r]),f=i-l,d=o-u;return{left:Math.floor(s),top:Math.floor(a),right:Math.floor(f),bottom:Math.floor(d)}}const Bs=(e,t,n,r,i,o)=>{const s=$v(o,t,n),a=(t-s.x)/e.width,l=(n-s.y)/e.height,u=Math.min(a,l),f=ur(u,r,i),d=e.x+e.width/2,c=e.y+e.height/2,v=t/2-d*f,y=n/2-c*f,_=e0(e,v,y,f,t,n),p={left:Math.min(_.left-s.left,0),top:Math.min(_.top-s.top,0),right:Math.min(_.right-s.right,0),bottom:Math.min(_.bottom-s.bottom,0)};return{x:v-p.left+p.right,y:y-p.top+p.bottom,zoom:f}},Gi=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function fr(e){return e!=null&&e!=="parent"}function Hn(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function t0(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function n0(e,t={width:0,height:0},n,r,i){const o={...e},s=r.get(n);if(s){const a=s.origin||i;o.x+=s.internals.positionAbsolute.x-(t.width??0)*a[0],o.y+=s.internals.positionAbsolute.y-(t.height??0)*a[1]}return o}function r0(e){return{...Bv,...e||{}}}function No(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){const{x:o,y:s}=pt(e),a=yi({x:o-((i==null?void 0:i.left)??0),y:s-((i==null?void 0:i.top)??0)},r),{x:l,y:u}=n?vi(a,t):a;return{xSnapped:l,ySnapped:u,...a}}const Bu=e=>({width:e.offsetWidth,height:e.offsetHeight}),Yu=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},i0=["INPUT","SELECT","TEXTAREA"];function Xu(e){var r,i;const t=((i=(r=e.composedPath)==null?void 0:r.call(e))==null?void 0:i[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:i0.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const Wu=e=>"clientX"in e,pt=(e,t)=>{var o,s;const n=Wu(e),r=n?e.clientX:(o=e.touches)==null?void 0:o[0].clientX,i=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}},La=(e,t,n,r,i)=>{const o=t.querySelectorAll(`.${e}`);return!o||!o.length?null:Array.from(o).map(s=>{const a=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:i,position:s.getAttribute("data-handlepos"),x:(a.left-n.left)/r,y:(a.top-n.top)/r,...Bu(s)}})};function o0({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:o,targetControlX:s,targetControlY:a}){const l=e*.125+i*.375+s*.375+n*.125,u=t*.125+o*.375+a*.375+r*.125,f=Math.abs(l-e),d=Math.abs(u-t);return[l,u,f,d]}function Ci(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Ha({pos:e,x1:t,y1:n,x2:r,y2:i,c:o}){switch(e){case $.Left:return[t-Ci(t-r,o),n];case $.Right:return[t+Ci(r-t,o),n];case $.Top:return[t,n-Ci(n-i,o)];case $.Bottom:return[t,n+Ci(i-n,o)]}}function qu({sourceX:e,sourceY:t,sourcePosition:n=$.Bottom,targetX:r,targetY:i,targetPosition:o=$.Top,curvature:s=.25}){const[a,l]=Ha({pos:n,x1:e,y1:t,x2:r,y2:i,c:s}),[u,f]=Ha({pos:o,x1:r,y1:i,x2:e,y2:t,c:s}),[d,c,v,y]=o0({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:u,targetControlY:f});return[`M${e},${t} C${a},${l} ${u},${f} ${r},${i}`,d,c,v,y]}function Zu({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,o=n<e?n+i:n-i,s=Math.abs(r-t)/2,a=r<t?r+s:r-s;return[o,a,i,s]}function s0({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:i=!1,zIndexMode:o="basic"}){if(o==="manual")return r;const s=i&&n?r+1e3:r,a=Math.max(e.parentId||i&&e.selected?e.internals.z:0,t.parentId||i&&t.selected?t.internals.z:0);return s+a}function a0({sourceNode:e,targetNode:t,width:n,height:r,transform:i}){const o=ho(qi(e),qi(t));o.x===o.x2&&(o.x2+=1),o.y===o.y2&&(o.y2+=1);const s={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return Zr(s,go(o))>0}const l0=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,u0=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),c0=(e,t,n={})=>{if(!e.source||!e.target)return t;const r=n.getEdgeId||l0;let i;return Hu(e)?i={...e}:i={...e,id:r(e)},u0(i,t)?t:(i.sourceHandle===null&&delete i.sourceHandle,i.targetHandle===null&&delete i.targetHandle,t.concat(i))};function Gu({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,o,s,a]=Zu({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,o,s,a]}const Va={[$.Left]:{x:-1,y:0},[$.Right]:{x:1,y:0},[$.Top]:{x:0,y:-1},[$.Bottom]:{x:0,y:1}},f0=({source:e,sourcePosition:t=$.Bottom,target:n})=>t===$.Left||t===$.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Ka=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function d0({source:e,sourcePosition:t=$.Bottom,target:n,targetPosition:r=$.Top,center:i,offset:o,stepPosition:s}){const a=Va[t],l=Va[r],u={x:e.x+a.x*o,y:e.y+a.y*o},f={x:n.x+l.x*o,y:n.y+l.y*o},d=f0({source:u,sourcePosition:t,target:f}),c=d.x!==0?"x":"y",v=d[c];let y=[],_,p;const x={x:0,y:0},M={x:0,y:0},[,,z,w]=Zu({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[c]*l[c]===-1){c==="x"?(_=i.x??u.x+(f.x-u.x)*s,p=i.y??(u.y+f.y)/2):(_=i.x??(u.x+f.x)/2,p=i.y??u.y+(f.y-u.y)*s);const O=[{x:_,y:u.y},{x:_,y:f.y}],F=[{x:u.x,y:p},{x:f.x,y:p}];a[c]===v?y=c==="x"?O:F:y=c==="x"?F:O}else{const O=[{x:u.x,y:f.y}],F=[{x:f.x,y:u.y}];if(c==="x"?y=a.x===v?F:O:y=a.y===v?O:F,t===r){const b=Math.abs(e[c]-n[c]);if(b<=o){const N=Math.min(o-1,o-b);a[c]===v?x[c]=(u[c]>e[c]?-1:1)*N:M[c]=(f[c]>n[c]?-1:1)*N}}if(t!==r){const b=c==="x"?"y":"x",N=a[c]===l[b],m=u[b]>f[b],C=u[b]<f[b];(a[c]===1&&(!N&&m||N&&C)||a[c]!==1&&(!N&&C||N&&m))&&(y=c==="x"?O:F)}const A={x:u.x+x.x,y:u.y+x.y},R={x:f.x+M.x,y:f.y+M.y},q=Math.max(Math.abs(A.x-y[0].x),Math.abs(R.x-y[0].x)),P=Math.max(Math.abs(A.y-y[0].y),Math.abs(R.y-y[0].y));q>=P?(_=(A.x+R.x)/2,p=y[0].y):(_=y[0].x,p=(A.y+R.y)/2)}return[[e,{x:u.x+x.x,y:u.y+x.y},...y,{x:f.x+M.x,y:f.y+M.y},n],_,p,z,w]}function h0(e,t,n,r){const i=Math.min(Ka(e,t)/2,Ka(t,n)/2,r),{x:o,y:s}=t;if(e.x===o&&o===n.x||e.y===s&&s===n.y)return`L${o} ${s}`;if(e.y===s){const u=e.x<n.x?-1:1,f=e.y<n.y?1:-1;return`L ${o+i*u},${s}Q ${o},${s} ${o},${s+i*f}`}const a=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${o},${s+i*l}Q ${o},${s} ${o+i*a},${s}`}function Ys({sourceX:e,sourceY:t,sourcePosition:n=$.Bottom,targetX:r,targetY:i,targetPosition:o=$.Top,borderRadius:s=5,centerX:a,centerY:l,offset:u=20,stepPosition:f=.5}){const[d,c,v,y,_]=d0({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:o,center:{x:a,y:l},offset:u,stepPosition:f});return[d.reduce((x,M,z)=>{let w="";return z>0&&z<d.length-1?w=h0(d[z-1],M,d[z+1],s):w=`${z===0?"M":"L"}${M.x} ${M.y}`,x+=w,x},""),c,v,y,_]}function Fa(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function g0(e){var d;const{sourceNode:t,targetNode:n}=e;if(!Fa(t)||!Fa(n))return null;const r=t.internals.handleBounds||Ba(t.handles),i=n.internals.handleBounds||Ba(n.handles),o=Ya((r==null?void 0:r.source)??[],e.sourceHandle),s=Ya(e.connectionMode===lr.Strict?(i==null?void 0:i.target)??[]:((i==null?void 0:i.target)??[]).concat((i==null?void 0:i.source)??[]),e.targetHandle);if(!o||!s)return(d=e.onError)==null||d.call(e,"008",qr.error008(o?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=(o==null?void 0:o.position)||$.Bottom,l=(s==null?void 0:s.position)||$.Top,u=On(t,o,a),f=On(n,s,l);return{sourceX:u.x,sourceY:u.y,targetX:f.x,targetY:f.y,sourcePosition:a,targetPosition:l}}function Ba(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function On(e,t,n=$.Left,r=!1){const i=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,o=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:s,height:a}=t??Hn(e);if(r)return{x:i+s/2,y:o+a/2};switch((t==null?void 0:t.position)??n){case $.Top:return{x:i+s/2,y:o};case $.Right:return{x:i+s,y:o+a/2};case $.Bottom:return{x:i+s/2,y:o+a};case $.Left:return{x:i,y:o+a/2}}}function Ya(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function us(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function v0(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const o=new Set;return e.reduce((s,a)=>([a.markerStart||r,a.markerEnd||i].forEach(l=>{if(l&&typeof l=="object"){const u=us(l,t);o.has(u)||(s.push({id:u,color:l.color||n,...l}),o.add(u))}}),s),[]).sort((s,a)=>s.id.localeCompare(a.id))}const Uu=1e3,y0=10,Xs={nodeOrigin:[0,0],nodeExtent:ss,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},m0={...Xs,checkEquality:!0};function Ws(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function p0(e,t,n){const r=Ws(Xs,n);for(const i of e.values())if(i.parentId)Zs(i,e,t,r);else{const o=gi(i,r.nodeOrigin),s=fr(i.extent)?i.extent:r.nodeExtent,a=In(o,s,Hn(i));i.internals.positionAbsolute=a}}function _0(e,t){if(!e.handles)return e.measured?t==null?void 0:t.internals.handleBounds:void 0;const n=[],r=[];for(const i of e.handles){const o={id:i.id,width:i.width??1,height:i.height??1,nodeId:e.id,x:i.x,y:i.y,position:i.position,type:i.type};i.type==="source"?n.push(o):i.type==="target"&&r.push(o)}return{source:n,target:r}}function qs(e){return e==="manual"}function w0(e,t,n,r={}){var u,f;const i=Ws(m0,r),o={i:0},s=new Map(t),a=i!=null&&i.elevateNodesOnSelect&&!qs(i.zIndexMode)?Uu:0;let l=e.length>0;t.clear(),n.clear();for(const d of e){let c=s.get(d.id);if(i.checkEquality&&d===(c==null?void 0:c.internals.userNode))t.set(d.id,c);else{const v=gi(d,i.nodeOrigin),y=fr(d.extent)?d.extent:i.nodeExtent,_=In(v,y,Hn(d));c={...i.defaults,...d,measured:{width:(u=d.measured)==null?void 0:u.width,height:(f=d.measured)==null?void 0:f.height},internals:{positionAbsolute:_,handleBounds:_0(d,c),z:Qu(d,a,i.zIndexMode),userNode:d}},t.set(d.id,c)}(c.measured===void 0||c.measured.width===void 0||c.measured.height===void 0)&&!c.hidden&&(l=!1),d.parentId&&Zs(c,t,n,r,o)}return l}function x0(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function Zs(e,t,n,r,i){const{elevateNodesOnSelect:o,nodeOrigin:s,nodeExtent:a,zIndexMode:l}=Ws(Xs,r),u=e.parentId,f=t.get(u);if(!f){console.warn(`Parent node ${u} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}x0(e,n),i&&!f.parentId&&f.internals.rootParentIndex===void 0&&l==="auto"&&(f.internals.rootParentIndex=++i.i,f.internals.z=f.internals.z+i.i*y0),i&&f.internals.rootParentIndex!==void 0&&(i.i=f.internals.rootParentIndex);const d=o&&!qs(l)?Uu:0,{x:c,y:v,z:y}=b0(e,f,s,a,d,l),{positionAbsolute:_}=e.internals,p=c!==_.x||v!==_.y;(p||y!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:p?{x:c,y:v}:_,z:y}})}function Qu(e,t,n){const r=Xt(e.zIndex)?e.zIndex:0;return qs(n)?r:r+(e.selected?t:0)}function b0(e,t,n,r,i,o){const{x:s,y:a}=t.internals.positionAbsolute,l=Hn(e),u=gi(e,n),f=fr(e.extent)?In(u,e.extent,l):u;let d=In({x:s+f.x,y:a+f.y},r,l);e.extent==="parent"&&(d=Ku(d,l,t));const c=Qu(e,i,o),v=t.internals.z??0;return{x:d.x,y:d.y,z:v>=c?v+1:c}}function E0(e,t,n,r=[0,0]){var s;const i=[],o=new Map;for(const a of e){const l=t.get(a.parentId);if(!l)continue;const u=((s=o.get(a.parentId))==null?void 0:s.expandedRect)??cr(l),f=jv(u,a.rect);o.set(a.parentId,{expandedRect:f,parent:l})}return o.size>0&&o.forEach(({expandedRect:a,parent:l},u)=>{var z;const f=l.internals.positionAbsolute,d=Hn(l),c=l.origin??r,v=a.x<f.x?Math.round(Math.abs(f.x-a.x)):0,y=a.y<f.y?Math.round(Math.abs(f.y-a.y)):0,_=Math.max(d.width,Math.round(a.width)),p=Math.max(d.height,Math.round(a.height)),x=(_-d.width)*c[0],M=(p-d.height)*c[1];(v>0||y>0||x||M)&&(i.push({id:u,type:"position",position:{x:l.position.x-v+x,y:l.position.y-y+M}}),(z=n.get(u))==null||z.forEach(w=>{e.some(T=>T.id===w.id)||i.push({id:w.id,type:"position",position:{x:w.position.x+v,y:w.position.y+y}})})),(d.width<a.width||d.height<a.height||v||y)&&i.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:_+(v?c[0]*v-x:0),height:p+(y?c[1]*y-M:0)}})}),i}function S0(e,t,n,r,i,o,s){const a=r==null?void 0:r.querySelector(".xyflow__viewport");let l=!1;if(!a)return{changes:[],updatedInternals:l};const u=[],f=window.getComputedStyle(a),{m22:d}=new window.DOMMatrixReadOnly(f.transform),c=[];for(const v of e.values()){const y=t.get(v.id);if(!y)continue;if(y.hidden){t.set(y.id,{...y,internals:{...y.internals,handleBounds:void 0}}),l=!0;continue}const _=Bu(v.nodeElement),p=y.measured.width!==_.width||y.measured.height!==_.height;if(!!(_.width&&_.height&&(p||!y.internals.handleBounds||v.force))){const M=v.nodeElement.getBoundingClientRect(),z=fr(y.extent)?y.extent:o;let{positionAbsolute:w}=y.internals;y.parentId&&y.extent==="parent"?w=Ku(w,_,t.get(y.parentId)):z&&(w=In(w,z,_));const T={...y,measured:_,internals:{...y.internals,positionAbsolute:w,handleBounds:{source:La("source",v.nodeElement,M,d,y.id),target:La("target",v.nodeElement,M,d,y.id)}}};t.set(y.id,T),y.parentId&&Zs(T,t,n,{nodeOrigin:i,zIndexMode:s}),l=!0,p&&(u.push({id:y.id,type:"dimensions",dimensions:_}),y.expandParent&&y.parentId&&c.push({id:y.id,parentId:y.parentId,rect:cr(T,i)}))}}if(c.length>0){const v=E0(c,t,n,i);u.push(...v)}return{changes:u,updatedInternals:l}}async function k0({delta:e,panZoom:t,transform:n,translateExtent:r,width:i,height:o}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const s=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[i,o]],r),a=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(a)}function Xa(e,t,n,r,i,o){let s=i;const a=r.get(s)||new Map;r.set(s,a.set(n,t)),s=`${i}-${e}`;const l=r.get(s)||new Map;if(r.set(s,l.set(n,t)),o){s=`${i}-${e}-${o}`;const u=r.get(s)||new Map;r.set(s,u.set(n,t))}}function C0(e,t,n){e.clear(),t.clear();for(const r of n){const{source:i,target:o,sourceHandle:s=null,targetHandle:a=null}=r,l={edgeId:r.id,source:i,target:o,sourceHandle:s,targetHandle:a},u=`${i}-${s}--${o}-${a}`,f=`${o}-${a}--${i}-${s}`;Xa("source",l,f,e,i,s),Xa("target",l,u,e,o,a),t.set(r.id,r)}}function ju(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:ju(n,t):!1}function Wa(e,t,n){var i;let r=e;do{if((i=r==null?void 0:r.matches)!=null&&i.call(r,t))return!0;if(r===n)return!1;r=r==null?void 0:r.parentElement}while(r);return!1}function N0(e,t,n,r){const i=new Map;for(const[o,s]of e)if((s.selected||s.id===r)&&(!s.parentId||!ju(s,e))&&(s.draggable||t&&typeof s.draggable>"u")){const a=e.get(o);a&&i.set(o,{id:o,position:a.position||{x:0,y:0},distance:{x:n.x-a.internals.positionAbsolute.x,y:n.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return i}function Mo({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var s,a,l;const i=[];for(const[u,f]of t){const d=(s=n.get(u))==null?void 0:s.internals.userNode;d&&i.push({...d,position:f.position,dragging:r})}if(!e)return[i[0],i];const o=(a=n.get(e))==null?void 0:a.internals.userNode;return[o?{...o,position:((l=t.get(e))==null?void 0:l.position)||o.position,dragging:r}:i[0],i]}function M0({dragItems:e,snapGrid:t,x:n,y:r}){const i=e.values().next().value;if(!i)return null;const o={x:n-i.distance.x,y:r-i.distance.y},s=vi(o,t);return{x:s.x-o.x,y:s.y-o.y}}function P0({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:i}){let o={x:null,y:null},s=0,a=new Map,l=!1,u={x:0,y:0},f=null,d=!1,c=null,v=!1,y=!1,_=null;function p({noDragClassName:M,handleSelector:z,domNode:w,isSelectable:T,nodeId:O,nodeClickDistance:F=0}){c=gt(w);function A({x:b,y:N}){const{nodeLookup:m,nodeExtent:C,snapGrid:k,snapToGrid:D,nodeOrigin:L,onNodeDrag:V,onSelectionDrag:H,onError:Y,updateNodePositions:Z}=t();o={x:b,y:N};let W=!1;const B=a.size>1,ee=B&&C?ls(fo(a)):null,G=B&&D?M0({dragItems:a,snapGrid:k,x:b,y:N}):null;for(const[U,Q]of a){if(!m.has(U))continue;let ue={x:b-Q.distance.x,y:N-Q.distance.y};D&&(ue=G?{x:Math.round(ue.x+G.x),y:Math.round(ue.y+G.y)}:vi(ue,k));let _e=null;if(B&&C&&!Q.extent&&ee){const{positionAbsolute:de}=Q.internals,Me=de.x-ee.x+C[0][0],Ue=de.x+Q.measured.width-ee.x2+C[1][0],Qe=de.y-ee.y+C[0][1],ut=de.y+Q.measured.height-ee.y2+C[1][1];_e=[[Me,Qe],[Ue,ut]]}const{position:ne,positionAbsolute:be}=Vu({nodeId:U,nextPosition:ue,nodeLookup:m,nodeExtent:_e||C,nodeOrigin:L,onError:Y});W=W||Q.position.x!==ne.x||Q.position.y!==ne.y,Q.position=ne,Q.internals.positionAbsolute=be}if(y=y||W,!!W&&(Z(a,!0),_&&(r||V||!O&&H))){const[U,Q]=Mo({nodeId:O,dragItems:a,nodeLookup:m});r==null||r(_,a,U,Q),V==null||V(_,U,Q),O||H==null||H(_,Q)}}async function R(){if(!f)return;const{transform:b,panBy:N,autoPanSpeed:m,autoPanOnNodeDrag:C}=t();if(!C){l=!1,cancelAnimationFrame(s);return}const[k,D]=Fu(u,f,m);(k!==0||D!==0)&&(o.x=(o.x??0)-k/b[2],o.y=(o.y??0)-D/b[2],await N({x:k,y:D})&&A(o)),s=requestAnimationFrame(R)}function q(b){var B;const{nodeLookup:N,multiSelectionActive:m,nodesDraggable:C,transform:k,snapGrid:D,snapToGrid:L,selectNodesOnDrag:V,onNodeDragStart:H,onSelectionDragStart:Y,unselectNodesAndEdges:Z}=t();d=!0,(!V||!T)&&!m&&O&&((B=N.get(O))!=null&&B.selected||Z()),T&&V&&O&&(e==null||e(O));const W=No(b.sourceEvent,{transform:k,snapGrid:D,snapToGrid:L,containerBounds:f});if(o=W,a=N0(N,C,W,O),a.size>0&&(n||H||!O&&Y)){const[ee,G]=Mo({nodeId:O,dragItems:a,nodeLookup:N});n==null||n(b.sourceEvent,a,ee,G),H==null||H(b.sourceEvent,ee,G),O||Y==null||Y(b.sourceEvent,G)}}const P=Gh().clickDistance(F).on("start",b=>{const{domNode:N,nodeDragThreshold:m,transform:C,snapGrid:k,snapToGrid:D}=t();f=(N==null?void 0:N.getBoundingClientRect())||null,v=!1,y=!1,_=b.sourceEvent,m===0&&q(b),o=No(b.sourceEvent,{transform:C,snapGrid:k,snapToGrid:D,containerBounds:f}),u=pt(b.sourceEvent,f)}).on("drag",b=>{const{autoPanOnNodeDrag:N,transform:m,snapGrid:C,snapToGrid:k,nodeDragThreshold:D,nodeLookup:L}=t(),V=No(b.sourceEvent,{transform:m,snapGrid:C,snapToGrid:k,containerBounds:f});if(_=b.sourceEvent,(b.sourceEvent.type==="touchmove"&&b.sourceEvent.touches.length>1||O&&!L.has(O))&&(v=!0),!v){if(!l&&N&&d&&(l=!0,R()),!d){const H=pt(b.sourceEvent,f),Y=H.x-u.x,Z=H.y-u.y;Math.sqrt(Y*Y+Z*Z)>D&&q(b)}(o.x!==V.xSnapped||o.y!==V.ySnapped)&&a&&d&&(u=pt(b.sourceEvent,f),A(V))}}).on("end",b=>{if(!(!d||v)&&(l=!1,d=!1,cancelAnimationFrame(s),a.size>0)){const{nodeLookup:N,updateNodePositions:m,onNodeDragStop:C,onSelectionDragStop:k}=t();if(y&&(m(a,!1),y=!1),i||C||!O&&k){const[D,L]=Mo({nodeId:O,dragItems:a,nodeLookup:N,dragging:!1});i==null||i(b.sourceEvent,a,D,L),C==null||C(b.sourceEvent,D,L),O||k==null||k(b.sourceEvent,L)}}}).filter(b=>{const N=b.target;return!b.button&&(!M||!Wa(N,`.${M}`,w))&&(!z||Wa(N,z,w))});c.call(P)}function x(){c==null||c.on(".drag",null)}return{update:p,destroy:x}}function A0(e,t,n){const r=[],i={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const o of t.values())Zr(i,cr(o))>0&&r.push(o);return r}const T0=250;function I0(e,t,n,r){var a,l;let i=[],o=1/0;const s=A0(e,n,t+T0);for(const u of s){const f=[...((a=u.internals.handleBounds)==null?void 0:a.source)??[],...((l=u.internals.handleBounds)==null?void 0:l.target)??[]];for(const d of f){if(r.nodeId===d.nodeId&&r.type===d.type&&r.id===d.id)continue;const{x:c,y:v}=On(u,d,d.position,!0),y=Math.sqrt(Math.pow(c-e.x,2)+Math.pow(v-e.y,2));y>t||(y<o?(i=[{...d,x:c,y:v}],o=y):y===o&&i.push({...d,x:c,y:v}))}}if(!i.length)return null;if(i.length>1){const u=r.type==="source"?"target":"source";return i.find(f=>f.type===u)??i[0]}return i[0]}function Ju(e,t,n,r,i,o=!1){var u,f,d;const s=r.get(e);if(!s)return null;const a=i==="strict"?(u=s.internals.handleBounds)==null?void 0:u[t]:[...((f=s.internals.handleBounds)==null?void 0:f.source)??[],...((d=s.internals.handleBounds)==null?void 0:d.target)??[]],l=(n?a==null?void 0:a.find(c=>c.id===n):a==null?void 0:a[0])??null;return l&&o?{...l,...On(s,l,l.position,!0)}:l}function $u(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function O0(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const ec=()=>!0;function D0(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:o,isTarget:s,domNode:a,nodeLookup:l,lib:u,autoPanOnConnect:f,flowId:d,panBy:c,cancelConnection:v,onConnectStart:y,onConnect:_,onConnectEnd:p,isValidConnection:x=ec,onReconnectEnd:M,updateConnection:z,getTransform:w,getFromHandle:T,autoPanSpeed:O,dragThreshold:F=1,handleDomNode:A}){const R=Yu(e.target);let q=0,P;const{x:b,y:N}=pt(e),m=$u(o,A),C=a==null?void 0:a.getBoundingClientRect();let k=!1;if(!C||!m)return;const D=Ju(i,m,r,l,t);if(!D)return;let L=pt(e,C),V=!1,H=null,Y=!1,Z=null;function W(){if(!f||!C)return;const[ne,be]=Fu(L,C,O);c({x:ne,y:be}),q=requestAnimationFrame(W)}const B={...D,nodeId:i,type:m,position:D.position},ee=l.get(i);let U={inProgress:!0,isValid:null,from:On(ee,B,$.Left,!0),fromHandle:B,fromPosition:B.position,fromNode:ee,to:L,toHandle:null,toPosition:Oa[B.position],toNode:null,pointer:L};function Q(){k=!0,z(U),y==null||y(e,{nodeId:i,handleId:r,handleType:m})}F===0&&Q();function ue(ne){if(!k){const{x:ut,y:re}=pt(ne),ye=ut-b,De=re-N;if(!(ye*ye+De*De>F*F))return;Q()}if(!T()||!B){_e(ne);return}const be=w();L=pt(ne,C),P=I0(yi(L,be,!1,[1,1]),n,l,B),V||(W(),V=!0);const de=tc(ne,{handle:P,connectionMode:t,fromNodeId:i,fromHandleId:r,fromType:s?"target":"source",isValidConnection:x,doc:R,lib:u,flowId:d,nodeLookup:l});Z=de.handleDomNode,H=de.connection,Y=O0(!!P,de.isValid);const Me=l.get(i),Ue=Me?On(Me,B,$.Left,!0):U.from,Qe={...U,from:Ue,isValid:Y,to:de.toHandle&&Y?Zi({x:de.toHandle.x,y:de.toHandle.y},be):L,toHandle:de.toHandle,toPosition:Y&&de.toHandle?de.toHandle.position:Oa[B.position],toNode:de.toHandle?l.get(de.toHandle.nodeId):null,pointer:L};z(Qe),U=Qe}function _e(ne){if(!("touches"in ne&&ne.touches.length>0)){if(k){(P||Z)&&H&&Y&&(_==null||_(H));const{inProgress:be,...de}=U,Me={...de,toPosition:U.toHandle?U.toPosition:null};p==null||p(ne,Me),o&&(M==null||M(ne,Me))}v(),cancelAnimationFrame(q),V=!1,Y=!1,H=null,Z=null,R.removeEventListener("mousemove",ue),R.removeEventListener("mouseup",_e),R.removeEventListener("touchmove",ue),R.removeEventListener("touchend",_e)}}R.addEventListener("mousemove",ue),R.addEventListener("mouseup",_e),R.addEventListener("touchmove",ue),R.addEventListener("touchend",_e)}function tc(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:o,doc:s,lib:a,flowId:l,isValidConnection:u=ec,nodeLookup:f}){const d=o==="target",c=t?s.querySelector(`.${a}-flow__handle[data-id="${l}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:v,y}=pt(e),_=s.elementFromPoint(v,y),p=_!=null&&_.classList.contains(`${a}-flow__handle`)?_:c,x={handleDomNode:p,isValid:!1,connection:null,toHandle:null};if(p){const M=$u(void 0,p),z=p.getAttribute("data-nodeid"),w=p.getAttribute("data-handleid"),T=p.classList.contains("connectable"),O=p.classList.contains("connectableend");if(!z||!M)return x;const F={source:d?z:r,sourceHandle:d?w:i,target:d?r:z,targetHandle:d?i:w};x.connection=F;const R=T&&O&&(n===lr.Strict?d&&M==="source"||!d&&M==="target":z!==r||w!==i);x.isValid=R&&u(F),x.toHandle=Ju(z,M,w,f,n,!0)}return x}const qa={onPointerDown:D0,isValid:tc},vo=e=>({x:e.x,y:e.y,zoom:e.k}),Po=({x:e,y:t,zoom:n})=>co.translate(e,t).scale(n),Fn=(e,t)=>e.target.closest(`.${t}`),nc=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),z0=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,Ao=(e,t=0,n=z0,r=()=>{})=>{const i=typeof t=="number"&&t>0;return i||r(),i?e.transition().duration(t).ease(n).on("end",r):e},rc=e=>{const t=e.ctrlKey&&Gi()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function R0({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:o,zoomOnPinch:s,onPanZoomStart:a,onPanZoom:l,onPanZoomEnd:u}){return f=>{if(Fn(f,t))return f.ctrlKey&&f.preventDefault(),!1;f.preventDefault(),f.stopImmediatePropagation();const d=n.property("__zoom").k||1;if(f.ctrlKey&&s){const p=Et(f),x=rc(f),M=d*Math.pow(2,x);r.scaleTo(n,M,p,f);return}const c=f.deltaMode===1?20:1;let v=i===Xn.Vertical?0:f.deltaX*c,y=i===Xn.Horizontal?0:f.deltaY*c;!Gi()&&f.shiftKey&&i!==Xn.Vertical&&(v=f.deltaY*c,y=0),r.translateBy(n,-(v/d)*o,-(y/d)*o,{internal:!0});const _=vo(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(l==null||l(f,_),e.panScrollTimeout=setTimeout(()=>{u==null||u(f,_),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,a==null||a(f,_))}}function L0({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,i){const o=r.type==="wheel",s=!t&&o&&!r.ctrlKey,a=Fn(r,e);if(r.ctrlKey&&o&&a&&r.preventDefault(),s||a)return null;r.preventDefault(),n.call(this,r,i)}}function H0({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var o,s,a;if((o=r.sourceEvent)!=null&&o.internal)return;const i=vo(r.transform);e.mouseButton=((s=r.sourceEvent)==null?void 0:s.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=i,((a=r.sourceEvent)==null?void 0:a.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,i))}}function V0({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return o=>{var s,a;e.usedRightMouseButton=!!(n&&nc(t,e.mouseButton??0)),(s=o.sourceEvent)!=null&&s.sync||r([o.transform.x,o.transform.y,o.transform.k]),i&&!((a=o.sourceEvent)!=null&&a.internal)&&(i==null||i(o.sourceEvent,vo(o.transform)))}}function K0({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:o}){return s=>{var a;if(!((a=s.sourceEvent)!=null&&a.internal)&&(e.isZoomingOrPanning=!1,o&&nc(t,e.mouseButton??0)&&!e.usedRightMouseButton&&s.sourceEvent&&o(s.sourceEvent),e.usedRightMouseButton=!1,r(!1),i)){const l=vo(s.transform);e.prevViewport=l,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{i==null||i(s.sourceEvent,l)},n?150:0)}}}function F0({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:o,userSelectionActive:s,noWheelClassName:a,noPanClassName:l,lib:u,connectionInProgress:f}){return d=>{var p;const c=e||t,v=n&&d.ctrlKey,y=d.type==="wheel";if(d.button===1&&d.type==="mousedown"&&(Fn(d,`${u}-flow__node`)||Fn(d,`${u}-flow__edge`)))return!0;if(!r&&!c&&!i&&!o&&!n||s||f&&!y||Fn(d,a)&&y||Fn(d,l)&&(!y||i&&y&&!e)||!n&&d.ctrlKey&&y)return!1;if(!n&&d.type==="touchstart"&&((p=d.touches)==null?void 0:p.length)>1)return d.preventDefault(),!1;if(!c&&!i&&!v&&y||!r&&(d.type==="mousedown"||d.type==="touchstart")||Array.isArray(r)&&!r.includes(d.button)&&d.type==="mousedown")return!1;const _=Array.isArray(r)&&r.includes(d.button)||!d.button||d.button<=1;return(!d.ctrlKey||y)&&_}}function B0({domNode:e,minZoom:t,maxZoom:n,translateExtent:r,viewport:i,onPanZoom:o,onPanZoomStart:s,onPanZoomEnd:a,onDraggingChange:l}){const u={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},f=e.getBoundingClientRect(),d=Fv().scaleExtent([t,n]).translateExtent(r),c=gt(e).call(d);M({x:i.x,y:i.y,zoom:ur(i.zoom,t,n)},[[0,0],[f.width,f.height]],r);const v=c.on("wheel.zoom"),y=c.on("dblclick.zoom");d.wheelDelta(rc);function _(P,b){return c?new Promise(N=>{d==null||d.interpolate((b==null?void 0:b.interpolate)==="linear"?Vr:Ii).transform(Ao(c,b==null?void 0:b.duration,b==null?void 0:b.ease,()=>N(!0)),P)}):Promise.resolve(!1)}function p({noWheelClassName:P,noPanClassName:b,onPaneContextMenu:N,userSelectionActive:m,panOnScroll:C,panOnDrag:k,panOnScrollMode:D,panOnScrollSpeed:L,preventScrolling:V,zoomOnPinch:H,zoomOnScroll:Y,zoomOnDoubleClick:Z,zoomActivationKeyPressed:W,lib:B,onTransformChange:ee,connectionInProgress:G,paneClickDistance:U,selectionOnDrag:Q}){m&&!u.isZoomingOrPanning&&x();const ue=C&&!W&&!m;d.clickDistance(Q?1/0:!Xt(U)||U<0?0:U);const _e=ue?R0({zoomPanValues:u,noWheelClassName:P,d3Selection:c,d3Zoom:d,panOnScrollMode:D,panOnScrollSpeed:L,zoomOnPinch:H,onPanZoomStart:s,onPanZoom:o,onPanZoomEnd:a}):L0({noWheelClassName:P,preventScrolling:V,d3ZoomHandler:v});if(c.on("wheel.zoom",_e,{passive:!1}),!m){const be=H0({zoomPanValues:u,onDraggingChange:l,onPanZoomStart:s});d.on("start",be);const de=V0({zoomPanValues:u,panOnDrag:k,onPaneContextMenu:!!N,onPanZoom:o,onTransformChange:ee});d.on("zoom",de);const Me=K0({zoomPanValues:u,panOnDrag:k,panOnScroll:C,onPaneContextMenu:N,onPanZoomEnd:a,onDraggingChange:l});d.on("end",Me)}const ne=F0({zoomActivationKeyPressed:W,panOnDrag:k,zoomOnScroll:Y,panOnScroll:C,zoomOnDoubleClick:Z,zoomOnPinch:H,userSelectionActive:m,noPanClassName:b,noWheelClassName:P,lib:B,connectionInProgress:G});d.filter(ne),Z?c.on("dblclick.zoom",y):c.on("dblclick.zoom",null)}function x(){d.on("zoom",null)}async function M(P,b,N){const m=Po(P),C=d==null?void 0:d.constrain()(m,b,N);return C&&await _(C),new Promise(k=>k(C))}async function z(P,b){const N=Po(P);return await _(N,b),new Promise(m=>m(N))}function w(P){if(c){const b=Po(P),N=c.property("__zoom");(N.k!==P.zoom||N.x!==P.x||N.y!==P.y)&&(d==null||d.transform(c,b,null,{sync:!0}))}}function T(){const P=c?Ru(c.node()):{x:0,y:0,k:1};return{x:P.x,y:P.y,zoom:P.k}}function O(P,b){return c?new Promise(N=>{d==null||d.interpolate((b==null?void 0:b.interpolate)==="linear"?Vr:Ii).scaleTo(Ao(c,b==null?void 0:b.duration,b==null?void 0:b.ease,()=>N(!0)),P)}):Promise.resolve(!1)}function F(P,b){return c?new Promise(N=>{d==null||d.interpolate((b==null?void 0:b.interpolate)==="linear"?Vr:Ii).scaleBy(Ao(c,b==null?void 0:b.duration,b==null?void 0:b.ease,()=>N(!0)),P)}):Promise.resolve(!1)}function A(P){d==null||d.scaleExtent(P)}function R(P){d==null||d.translateExtent(P)}function q(P){const b=!Xt(P)||P<0?0:P;d==null||d.clickDistance(b)}return{update:p,destroy:x,setViewport:z,setViewportConstrained:M,getViewport:T,scaleTo:O,scaleBy:F,setScaleExtent:A,setTranslateExtent:R,syncViewport:w,setClickDistance:q}}var Za;(function(e){e.Line="line",e.Handle="handle"})(Za||(Za={}));function Gs(){const e={};return[t=>{if(t&&!Jc(e))throw new Error(t);return gs(e)},t=>vs(e,t)]}const[Y0,X0]=Gs(),[W0,q0]=Gs(),[Z0,G0]=Gs();var U0=pe("<div><!></div>");function Ui(e,t){oe(t,!0);let n=X(t,"id",3,null),r=X(t,"type",3,"source"),i=X(t,"position",19,()=>$.Top),o=X(t,"isConnectableStart",3,!0),s=X(t,"isConnectableEnd",3,!0),a=fi(t,["$$slots","$$events","$$legacy","id","type","position","style","class","isConnectable","isConnectableStart","isConnectableEnd","isValidConnection","onconnect","ondisconnect","children"]);const l=Y0("Handle must be used within a Custom Node component"),u=W0("Handle must be used within a Custom Node component");let f=E(()=>r()==="target"),d=E(()=>t.isConnectable!==void 0?t.isConnectable:u.value),c=hr(),v=E(()=>c.ariaLabelConfig),y=null;Hl(()=>{if(t.onconnect||t.ondisconnect){c.edges;let b=c.connectionLookup.get(`${l}-${r()}${n()?`-${n()}`:""}`);if(y&&!Yv(b,y)){const N=b??new Map;Da(y,N,t.ondisconnect),Da(N,y,t.onconnect)}y=new Map(b)}});let _=E(()=>{if(!c.connection.inProgress)return[!1,!1,!1,!1,null];const{fromHandle:b,toHandle:N,isValid:m}=c.connection,C=b&&b.nodeId===l&&b.type===r()&&b.id===n(),k=N&&N.nodeId===l&&N.type===r()&&N.id===n(),D=c.connectionMode===lr.Strict?(b==null?void 0:b.type)!==r():l!==(b==null?void 0:b.nodeId)||n()!==(b==null?void 0:b.id);return[!0,C,k,D,k&&m]}),p=E(()=>ti(h(_),5)),x=E(()=>h(p)[0]),M=E(()=>h(p)[1]),z=E(()=>h(p)[2]),w=E(()=>h(p)[3]),T=E(()=>h(p)[4]);function O(b){var m;const N=c.onbeforeconnect?c.onbeforeconnect(b):b;N&&(c.addEdge(N),(m=c.onconnect)==null||m.call(c,b))}function F(b){const N=Wu(b);b.currentTarget&&(N&&b.button===0||!N)&&qa.onPointerDown(b,{handleId:n(),nodeId:l,isTarget:h(f),connectionRadius:c.connectionRadius,domNode:c.domNode,nodeLookup:c.nodeLookup,connectionMode:c.connectionMode,lib:"svelte",autoPanOnConnect:c.autoPanOnConnect,autoPanSpeed:c.autoPanSpeed,flowId:c.flowId,isValidConnection:t.isValidConnection??c.isValidConnection,updateConnection:c.updateConnection,cancelConnection:c.cancelConnection,panBy:c.panBy,onConnect:O,onConnectStart:(m,C)=>{var k;(k=c.onconnectstart)==null||k.call(c,m,{nodeId:C.nodeId,handleId:C.handleId,handleType:C.handleType})},onConnectEnd:(m,C)=>{var k;(k=c.onconnectend)==null||k.call(c,m,C)},getTransform:()=>[c.viewport.x,c.viewport.y,c.viewport.zoom],getFromHandle:()=>c.connection.fromHandle,dragThreshold:c.connectionDragThreshold,handleDomNode:b.currentTarget})}function A(b){var Z,W;if(!l||!c.clickConnectStartHandle&&!o())return;if(!c.clickConnectStartHandle){(Z=c.onclickconnectstart)==null||Z.call(c,b,{nodeId:l,handleId:n(),handleType:r()}),c.clickConnectStartHandle={nodeId:l,type:r(),id:n()};return}const N=Yu(b.target),m=t.isValidConnection??c.isValidConnection,{connectionMode:C,clickConnectStartHandle:k,flowId:D,nodeLookup:L}=c,{connection:V,isValid:H}=qa.isValid(b,{handle:{nodeId:l,id:n(),type:r()},connectionMode:C,fromNodeId:k.nodeId,fromHandleId:k.id??null,fromType:k.type,isValidConnection:m,flowId:D,doc:N,lib:"svelte",nodeLookup:L});H&&V&&O(V);const Y=structuredClone(pl(c.connection));delete Y.inProgress,Y.toPosition=Y.toHandle?Y.toHandle.position:null,(W=c.onclickconnectend)==null||W.call(c,b,Y),c.clickConnectStartHandle=null}var R=U0(),q=()=>{};Ln(R,()=>({"data-handleid":n(),"data-nodeid":l,"data-handlepos":i(),"data-id":`${c.flowId??""}-${l??""}-${n()??"null"??""}-${r()??""}`,class:["svelte-flow__handle",`svelte-flow__handle-${i()}`,c.noDragClass,c.noPanClass,i(),t.class],onmousedown:F,ontouchstart:F,onclick:c.clickConnect?A:void 0,onkeypress:q,style:t.style,role:"button","aria-label":h(v)["handle.ariaLabel"],tabindex:"-1",...a,[Jt]:{valid:h(T),connectingto:h(z),connectingfrom:h(M),source:!h(f),target:h(f),connectablestart:o(),connectableend:s(),connectable:h(d),connectionindicator:h(d)&&(!h(x)||h(w))&&(h(x)||c.clickConnectStartHandle?s():o())}}));var P=me(R);Qt(P,()=>t.children??Dn),j(e,R),se()}var Q0=pe("<!> <!>",1);function ic(e,t){oe(t,!0);let n=X(t,"targetPosition",19,()=>$.Top),r=X(t,"sourcePosition",19,()=>$.Bottom);var i=Q0(),o=Oe(i);Ui(o,{type:"target",get position(){return n()}});var s=Ee(o),a=Ee(s);Ui(a,{type:"source",get position(){return r()}}),xe(()=>{var l;return Cn(s,` ${((l=t.data)==null?void 0:l.label)??""} `)}),j(e,i),se()}var j0=pe(" <!>",1);function J0(e,t){oe(t,!0);let n=X(t,"data",19,()=>({label:"Node"})),r=X(t,"sourcePosition",19,()=>$.Bottom);var i=j0(),o=Oe(i),s=Ee(o);Ui(s,{type:"source",get position(){return r()}}),xe(()=>{var a;return Cn(o,`${((a=n())==null?void 0:a.label)??""} `)}),j(e,i),se()}var $0=pe(" <!>",1);function ey(e,t){oe(t,!0);let n=X(t,"data",19,()=>({label:"Node"})),r=X(t,"targetPosition",19,()=>$.Top);var i=$0(),o=Oe(i),s=Ee(o);Ui(s,{type:"target",get position(){return r()}}),xe(()=>{var a;return Cn(o,`${((a=n())==null?void 0:a.label)??""} `)}),j(e,i),se()}function ty(e,t){}function To(e,t,n){if(!n||!t)return;const r=n==="root"?t:t.querySelector(`.svelte-flow__${n}`);r&&r.appendChild(e)}function Io(e,t){const n=E(hr),r=E(()=>h(n).domNode);let i;return h(r)?To(e,h(r),t):i=Vl(()=>{It(()=>{To(e,h(r),t),i==null||i()})}),{async update(o){To(e,h(r),o)},destroy(){e.parentNode&&e.parentNode.removeChild(e),i==null||i()}}}function ny(){let e=ce(typeof window>"u");if(h(e)){const t=Vl(()=>{It(()=>{K(e,!1),t==null||t()})})}return{get value(){return h(e)}}}const Ga=e=>Wv(e),ry=e=>Hu(e);function Dt(e){return e===void 0?void 0:`${e}px`}const Qi={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var iy=pe("<div><!></div>");function oy(e,t){oe(t,!0);let n=X(t,"x",3,0),r=X(t,"y",3,0),i=X(t,"selectEdgeOnClick",3,!1),o=X(t,"transparent",3,!1),s=fi(t,["$$slots","$$events","$$legacy","x","y","width","height","selectEdgeOnClick","transparent","class","children"]);const a=hr(),l=Z0("EdgeLabel must be used within a Custom Edge component");let u=E(()=>{var v;return(v=a.visible.edges.get(l))==null?void 0:v.zIndex});var f=iy(),d=()=>{i()&&l&&a.handleEdgeSelection(l)};Ln(f,v=>({class:["svelte-flow__edge-label",{transparent:o()},t.class],tabindex:"-1",onclick:d,...s,[$t]:v}),[()=>({display:ny().value?"none":void 0,cursor:i()?"pointer":void 0,transform:`translate(-50%, -50%) translate(${n()??""}px,${r()??""}px)`,"pointer-events":"all",width:Dt(t.width),height:Dt(t.height),"z-index":h(u)})],void 0,void 0,"svelte-1g6l770");var c=me(f);Qt(c,()=>t.children??Dn),Ke(f,(v,y)=>Io==null?void 0:Io(v,y),()=>"edge-labels"),j(e,f),se()}var sy=lt("<path></path>"),ay=lt('<path fill="none"></path><!><!>',1);function yo(e,t){let n=X(t,"interactionWidth",3,20),r=fi(t,["$$slots","$$events","$$legacy","id","path","label","labelX","labelY","labelStyle","markerStart","markerEnd","style","interactionWidth","class"]);var i=ay(),o=Oe(i),s=Ee(o);{var a=f=>{var d=sy();Ln(d,()=>({d:t.path,"stroke-opacity":0,"stroke-width":n(),fill:"none",class:"svelte-flow__edge-interaction",...r})),j(f,d)};st(s,f=>{n()>0&&f(a)})}var l=Ee(s);{var u=f=>{oy(f,{get x(){return t.labelX},get y(){return t.labelY},get style(){return t.labelStyle},selectEdgeOnClick:!0,children:(d,c)=>{var v=Hf();xe(()=>Cn(v,t.label)),j(d,v)},$$slots:{default:!0}})};st(l,f=>{t.label&&f(u)})}xe(()=>{ie(o,"id",t.id),ie(o,"d",t.path),gn(o,0,Rn(["svelte-flow__edge-path",t.class])),ie(o,"marker-start",t.markerStart),ie(o,"marker-end",t.markerEnd),wt(o,t.style)}),j(e,i)}function oc(e,t){oe(t,!0);let n=E(()=>{var a;return qu({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition,curvature:(a=t.pathOptions)==null?void 0:a.curvature})}),r=E(()=>ti(h(n),3)),i=E(()=>h(r)[0]),o=E(()=>h(r)[1]),s=E(()=>h(r)[2]);yo(e,{get id(){return t.id},get path(){return h(i)},get labelX(){return h(o)},get labelY(){return h(s)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),se()}function ly(e,t){oe(t,!0);let n=E(()=>Ys({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition})),r=E(()=>ti(h(n),3)),i=E(()=>h(r)[0]),o=E(()=>h(r)[1]),s=E(()=>h(r)[2]);yo(e,{get path(){return h(i)},get labelX(){return h(o)},get labelY(){return h(s)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),se()}function uy(e,t){oe(t,!0);let n=E(()=>Gu({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY})),r=E(()=>ti(h(n),3)),i=E(()=>h(r)[0]),o=E(()=>h(r)[1]),s=E(()=>h(r)[2]);yo(e,{get path(){return h(i)},get labelX(){return h(o)},get labelY(){return h(s)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),se()}function cy(e,t){oe(t,!0);let n=E(()=>Ys({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition,borderRadius:0})),r=E(()=>ti(h(n),3)),i=E(()=>h(r)[0]),o=E(()=>h(r)[1]),s=E(()=>h(r)[2]);yo(e,{get path(){return h(i)},get labelX(){return h(o)},get labelY(){return h(s)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),se()}var $r,ei;class fy{constructor(t,n){I(this,$r);I(this,ei);J(this,$r,t),J(this,ei,Cl(n))}get current(){return g(this,ei).call(this),g(this,$r).call(this)}}$r=new WeakMap,ei=new WeakMap;const dy=/\(.+\)/,hy=new Set(["all","print","screen","and","or","not","only"]);class gy extends fy{constructor(t,n){let r=dy.test(t)||t.split(/[\s,]+/).some(o=>hy.has(o.trim()))?t:`(${t})`;const i=window.matchMedia(r);super(()=>i.matches,o=>Zo(i,"change",o))}}function vy(e,t,n,r){const i=new Map;return Fs(e,{x:0,y:0,width:n,height:r},t,!0).forEach(o=>{i.set(o.id,o)}),i}function Ua(e){const{edges:t,defaultEdgeOptions:n,nodeLookup:r,previousEdges:i,connectionMode:o,onerror:s,onlyRenderVisible:a,elevateEdgesOnSelect:l,zIndexMode:u}=e,f=new Map;for(const d of t){const c=r.get(d.source),v=r.get(d.target);if(!c||!v)continue;if(a){const{visibleNodes:p,transform:x,width:M,height:z}=e;if(a0({sourceNode:c,targetNode:v,width:M,height:z,transform:x}))p.set(c.id,c),p.set(v.id,v);else continue}const y=i.get(d.id);if(y&&d===y.edge&&c==y.sourceNode&&v==y.targetNode){f.set(d.id,y);continue}const _=g0({id:d.id,sourceNode:c,targetNode:v,sourceHandle:d.sourceHandle||null,targetHandle:d.targetHandle||null,connectionMode:o,onError:s});_&&f.set(d.id,{...n,...d,..._,zIndex:s0({selected:d.selected,zIndex:d.zIndex??n.zIndex,sourceNode:c,targetNode:v,elevateOnSelect:l,zIndexMode:u}),sourceNode:c,targetNode:v,edge:d})}return f}const sc={input:J0,output:ey,default:ic,group:ty},ac={straight:uy,smoothstep:ly,default:oc,step:cy};function yy(e,t,n,r,i,o){if(t&&!n&&r&&i){const s=fo(o,{filter:a=>!!((a.width||a.initialWidth)&&(a.height||a.initialHeight))});return Bs(s,r,i,.5,2,.1)}else return n??{x:0,y:0,zoom:1}}function my(e){var n,r,i,o,s,a,l,u,f,d,c,v,y,_,p,x,M,z,w,T,O,F,A,R,q,P,b,N,m,C,k,D,L,V,H,Y,Z,W,B,ee,G,U,Q,ue,_e,ne,be,de,Me,Ue,Qe,ut,re,ye,De,he,ze,ct,ft,Le,gr,vr,yr,mr,pr,_r,wr,xr,br,Er,Sr,kr,Cr,Nr,Mr,Pr;class t{constructor(){I(this,n,E(()=>e.props.id??"1"));I(this,r,ce(null));I(this,i,ce(null));I(this,o,ce(e.width??0));I(this,s,ce(e.height??0));I(this,a,ce(e.props.zIndexMode??"basic"));I(this,l,E(()=>{var je;const S=w0(e.nodes,this.nodeLookup,this.parentLookup,{nodeExtent:this.nodeExtent,nodeOrigin:this.nodeOrigin,elevateNodesOnSelect:e.props.elevateNodesOnSelect??!0,checkEquality:!0,zIndexMode:this.zIndexMode});return this.fitViewQueued&&S&&((je=this.fitViewOptions)!=null&&je.duration?this.resolveFitView():queueMicrotask(()=>{this.resolveFitView()})),S}));I(this,u,E(()=>this.panZoom!==null));I(this,f,E(()=>(C0(this.connectionLookup,this.edgeLookup,e.edges),e.edges)));ve(this,"_prevSelectedNodes",[]);ve(this,"_prevSelectedNodeIds",new Set);I(this,d,E(()=>{const S=this._prevSelectedNodeIds.size,je=new Set,Ar=this.nodes.filter(Je=>(Je.selected&&(je.add(Je.id),this._prevSelectedNodeIds.delete(Je.id)),Je.selected));return(S!==je.size||this._prevSelectedNodeIds.size>0)&&(this._prevSelectedNodes=Ar),this._prevSelectedNodeIds=je,this._prevSelectedNodes}));ve(this,"_prevSelectedEdges",[]);ve(this,"_prevSelectedEdgeIds",new Set);I(this,c,E(()=>{const S=this._prevSelectedEdgeIds.size,je=new Set,Ar=this.edges.filter(Je=>(Je.selected&&(je.add(Je.id),this._prevSelectedEdgeIds.delete(Je.id)),Je.selected));return(S!==je.size||this._prevSelectedEdgeIds.size>0)&&(this._prevSelectedEdges=Ar),this._prevSelectedEdgeIds=je,this._prevSelectedEdges}));ve(this,"selectionChangeHandlers",new Map);ve(this,"nodeLookup",new Map);ve(this,"parentLookup",new Map);ve(this,"connectionLookup",new Map);ve(this,"edgeLookup",new Map);ve(this,"_prevVisibleEdges",new Map);I(this,v,E(()=>{const{nodes:S,_edges:je,_prevVisibleEdges:Ar,nodeLookup:Je,connectionMode:hc,onerror:gc,onlyRenderVisibleElements:vc,defaultEdgeOptions:yc,zIndexMode:mc}=this;let mi,mo;const Qs={edges:je,defaultEdgeOptions:yc,previousEdges:Ar,nodeLookup:Je,connectionMode:hc,elevateEdgesOnSelect:e.props.elevateEdgesOnSelect??!0,zIndexMode:mc,onerror:gc};if(vc){const{viewport:po,width:js,height:Js}=this,$s=[po.x,po.y,po.zoom];mi=vy(Je,$s,js,Js),mo=Ua({...Qs,onlyRenderVisible:!0,visibleNodes:mi,transform:$s,width:js,height:Js})}else mi=this.nodeLookup,mo=Ua(Qs);return{nodes:mi,edges:mo}}));I(this,y,E(()=>e.props.nodesDraggable??!0));I(this,_,E(()=>e.props.nodesConnectable??!0));I(this,p,E(()=>e.props.elementsSelectable??!0));I(this,x,E(()=>e.props.nodesFocusable??!0));I(this,M,E(()=>e.props.edgesFocusable??!0));I(this,z,E(()=>e.props.disableKeyboardA11y??!1));I(this,w,E(()=>e.props.minZoom??.5));I(this,T,E(()=>e.props.maxZoom??2));I(this,O,E(()=>e.props.nodeOrigin??[0,0]));I(this,F,E(()=>e.props.nodeExtent??ss));I(this,A,E(()=>e.props.translateExtent??ss));I(this,R,E(()=>e.props.defaultEdgeOptions??{}));I(this,q,E(()=>e.props.nodeDragThreshold??1));I(this,P,E(()=>e.props.autoPanOnNodeDrag??!0));I(this,b,E(()=>e.props.autoPanOnConnect??!0));I(this,N,E(()=>e.props.autoPanOnNodeFocus??!0));I(this,m,E(()=>e.props.autoPanSpeed??15));I(this,C,E(()=>e.props.connectionDragThreshold??1));ve(this,"fitViewQueued",e.props.fitView??!1);ve(this,"fitViewOptions",e.props.fitViewOptions);ve(this,"fitViewResolver",null);I(this,k,E(()=>e.props.snapGrid??null));I(this,D,ce(!1));I(this,L,ce(null));I(this,V,ce(!1));I(this,H,ce(!1));I(this,Y,ce(!1));I(this,Z,ce(!1));I(this,W,ce(!1));I(this,B,ce(null));I(this,ee,ce(""));I(this,G,E(()=>e.props.selectionMode??Xi.Partial));I(this,U,E(()=>({...sc,...e.props.nodeTypes})));I(this,Q,E(()=>({...ac,...e.props.edgeTypes})));I(this,ue,E(()=>e.props.noPanClass??"nopan"));I(this,_e,E(()=>e.props.noDragClass??"nodrag"));I(this,ne,E(()=>e.props.noWheelClass??"nowheel"));I(this,be,E(()=>r0(e.props.ariaLabelConfig)));I(this,de,ce(yy(this.nodesInitialized,e.props.fitView,e.props.initialViewport,this.width,this.height,this.nodeLookup)));I(this,Me,ce(as));I(this,Ue,E(()=>this._connection.inProgress?{...this._connection,to:yi(this._connection.to,[this.viewport.x,this.viewport.y,this.viewport.zoom])}:this._connection));I(this,Qe,E(()=>e.props.connectionMode??lr.Strict));I(this,ut,E(()=>e.props.connectionRadius??20));I(this,re,E(()=>e.props.isValidConnection??(()=>!0)));I(this,ye,E(()=>e.props.selectNodesOnDrag??!0));I(this,De,E(()=>e.props.defaultMarkerColor===void 0?"#b1b1b7":e.props.defaultMarkerColor));I(this,he,E(()=>v0(e.edges,{defaultColor:this.defaultMarkerColor,id:this.flowId,defaultMarkerStart:this.defaultEdgeOptions.markerStart,defaultMarkerEnd:this.defaultEdgeOptions.markerEnd})));I(this,ze,E(()=>e.props.onlyRenderVisibleElements??!1));I(this,ct,E(()=>e.props.onflowerror??Jv));I(this,ft,E(()=>e.props.ondelete));I(this,Le,E(()=>e.props.onbeforedelete));I(this,gr,E(()=>e.props.onbeforeconnect));I(this,vr,E(()=>e.props.onconnect));I(this,yr,E(()=>e.props.onconnectstart));I(this,mr,E(()=>e.props.onconnectend));I(this,pr,E(()=>e.props.onbeforereconnect));I(this,_r,E(()=>e.props.onreconnect));I(this,wr,E(()=>e.props.onreconnectstart));I(this,xr,E(()=>e.props.onreconnectend));I(this,br,E(()=>e.props.clickConnect??!0));I(this,Er,E(()=>e.props.onclickconnectstart));I(this,Sr,E(()=>e.props.onclickconnectend));I(this,kr,ce(null));I(this,Cr,E(()=>e.props.onselectiondrag));I(this,Nr,E(()=>e.props.onselectiondragstart));I(this,Mr,E(()=>e.props.onselectiondragstop));ve(this,"resolveFitView",async()=>{var S;this.panZoom&&(await Uv({nodes:this.nodeLookup,width:this.width,height:this.height,panZoom:this.panZoom,minZoom:this.minZoom,maxZoom:this.maxZoom},this.fitViewOptions),(S=this.fitViewResolver)==null||S.resolve(!0),this.fitViewQueued=!1,this.fitViewOptions=void 0,this.fitViewResolver=null)});ve(this,"_prefersDark",new gy("(prefers-color-scheme: dark)",e.props.colorModeSSR==="dark"));I(this,Pr,E(()=>e.props.colorMode==="system"?this._prefersDark.current?"dark":"light":e.props.colorMode??"light"))}get flowId(){return h(g(this,n))}set flowId(S){K(g(this,n),S)}get domNode(){return h(g(this,r))}set domNode(S){K(g(this,r),S)}get panZoom(){return h(g(this,i))}set panZoom(S){K(g(this,i),S)}get width(){return h(g(this,o))}set width(S){K(g(this,o),S)}get height(){return h(g(this,s))}set height(S){K(g(this,s),S)}get zIndexMode(){return h(g(this,a))}set zIndexMode(S){K(g(this,a),S)}get nodesInitialized(){return h(g(this,l))}set nodesInitialized(S){K(g(this,l),S)}get viewportInitialized(){return h(g(this,u))}set viewportInitialized(S){K(g(this,u),S)}get _edges(){return h(g(this,f))}set _edges(S){K(g(this,f),S)}get nodes(){return this.nodesInitialized,e.nodes}set nodes(S){e.nodes=S}get edges(){return this._edges}set edges(S){e.edges=S}get selectedNodes(){return h(g(this,d))}set selectedNodes(S){K(g(this,d),S)}get selectedEdges(){return h(g(this,c))}set selectedEdges(S){K(g(this,c),S)}get visible(){return h(g(this,v))}set visible(S){K(g(this,v),S)}get nodesDraggable(){return h(g(this,y))}set nodesDraggable(S){K(g(this,y),S)}get nodesConnectable(){return h(g(this,_))}set nodesConnectable(S){K(g(this,_),S)}get elementsSelectable(){return h(g(this,p))}set elementsSelectable(S){K(g(this,p),S)}get nodesFocusable(){return h(g(this,x))}set nodesFocusable(S){K(g(this,x),S)}get edgesFocusable(){return h(g(this,M))}set edgesFocusable(S){K(g(this,M),S)}get disableKeyboardA11y(){return h(g(this,z))}set disableKeyboardA11y(S){K(g(this,z),S)}get minZoom(){return h(g(this,w))}set minZoom(S){K(g(this,w),S)}get maxZoom(){return h(g(this,T))}set maxZoom(S){K(g(this,T),S)}get nodeOrigin(){return h(g(this,O))}set nodeOrigin(S){K(g(this,O),S)}get nodeExtent(){return h(g(this,F))}set nodeExtent(S){K(g(this,F),S)}get translateExtent(){return h(g(this,A))}set translateExtent(S){K(g(this,A),S)}get defaultEdgeOptions(){return h(g(this,R))}set defaultEdgeOptions(S){K(g(this,R),S)}get nodeDragThreshold(){return h(g(this,q))}set nodeDragThreshold(S){K(g(this,q),S)}get autoPanOnNodeDrag(){return h(g(this,P))}set autoPanOnNodeDrag(S){K(g(this,P),S)}get autoPanOnConnect(){return h(g(this,b))}set autoPanOnConnect(S){K(g(this,b),S)}get autoPanOnNodeFocus(){return h(g(this,N))}set autoPanOnNodeFocus(S){K(g(this,N),S)}get autoPanSpeed(){return h(g(this,m))}set autoPanSpeed(S){K(g(this,m),S)}get connectionDragThreshold(){return h(g(this,C))}set connectionDragThreshold(S){K(g(this,C),S)}get snapGrid(){return h(g(this,k))}set snapGrid(S){K(g(this,k),S)}get dragging(){return h(g(this,D))}set dragging(S){K(g(this,D),S)}get selectionRect(){return h(g(this,L))}set selectionRect(S){K(g(this,L),S)}get selectionKeyPressed(){return h(g(this,V))}set selectionKeyPressed(S){K(g(this,V),S)}get multiselectionKeyPressed(){return h(g(this,H))}set multiselectionKeyPressed(S){K(g(this,H),S)}get deleteKeyPressed(){return h(g(this,Y))}set deleteKeyPressed(S){K(g(this,Y),S)}get panActivationKeyPressed(){return h(g(this,Z))}set panActivationKeyPressed(S){K(g(this,Z),S)}get zoomActivationKeyPressed(){return h(g(this,W))}set zoomActivationKeyPressed(S){K(g(this,W),S)}get selectionRectMode(){return h(g(this,B))}set selectionRectMode(S){K(g(this,B),S)}get ariaLiveMessage(){return h(g(this,ee))}set ariaLiveMessage(S){K(g(this,ee),S)}get selectionMode(){return h(g(this,G))}set selectionMode(S){K(g(this,G),S)}get nodeTypes(){return h(g(this,U))}set nodeTypes(S){K(g(this,U),S)}get edgeTypes(){return h(g(this,Q))}set edgeTypes(S){K(g(this,Q),S)}get noPanClass(){return h(g(this,ue))}set noPanClass(S){K(g(this,ue),S)}get noDragClass(){return h(g(this,_e))}set noDragClass(S){K(g(this,_e),S)}get noWheelClass(){return h(g(this,ne))}set noWheelClass(S){K(g(this,ne),S)}get ariaLabelConfig(){return h(g(this,be))}set ariaLabelConfig(S){K(g(this,be),S)}get _viewport(){return h(g(this,de))}set _viewport(S){K(g(this,de),S)}get viewport(){return e.viewport??this._viewport}set viewport(S){e.viewport&&(e.viewport=S),this._viewport=S}get _connection(){return h(g(this,Me))}set _connection(S){K(g(this,Me),S)}get connection(){return h(g(this,Ue))}set connection(S){K(g(this,Ue),S)}get connectionMode(){return h(g(this,Qe))}set connectionMode(S){K(g(this,Qe),S)}get connectionRadius(){return h(g(this,ut))}set connectionRadius(S){K(g(this,ut),S)}get isValidConnection(){return h(g(this,re))}set isValidConnection(S){K(g(this,re),S)}get selectNodesOnDrag(){return h(g(this,ye))}set selectNodesOnDrag(S){K(g(this,ye),S)}get defaultMarkerColor(){return h(g(this,De))}set defaultMarkerColor(S){K(g(this,De),S)}get markers(){return h(g(this,he))}set markers(S){K(g(this,he),S)}get onlyRenderVisibleElements(){return h(g(this,ze))}set onlyRenderVisibleElements(S){K(g(this,ze),S)}get onerror(){return h(g(this,ct))}set onerror(S){K(g(this,ct),S)}get ondelete(){return h(g(this,ft))}set ondelete(S){K(g(this,ft),S)}get onbeforedelete(){return h(g(this,Le))}set onbeforedelete(S){K(g(this,Le),S)}get onbeforeconnect(){return h(g(this,gr))}set onbeforeconnect(S){K(g(this,gr),S)}get onconnect(){return h(g(this,vr))}set onconnect(S){K(g(this,vr),S)}get onconnectstart(){return h(g(this,yr))}set onconnectstart(S){K(g(this,yr),S)}get onconnectend(){return h(g(this,mr))}set onconnectend(S){K(g(this,mr),S)}get onbeforereconnect(){return h(g(this,pr))}set onbeforereconnect(S){K(g(this,pr),S)}get onreconnect(){return h(g(this,_r))}set onreconnect(S){K(g(this,_r),S)}get onreconnectstart(){return h(g(this,wr))}set onreconnectstart(S){K(g(this,wr),S)}get onreconnectend(){return h(g(this,xr))}set onreconnectend(S){K(g(this,xr),S)}get clickConnect(){return h(g(this,br))}set clickConnect(S){K(g(this,br),S)}get onclickconnectstart(){return h(g(this,Er))}set onclickconnectstart(S){K(g(this,Er),S)}get onclickconnectend(){return h(g(this,Sr))}set onclickconnectend(S){K(g(this,Sr),S)}get clickConnectStartHandle(){return h(g(this,kr))}set clickConnectStartHandle(S){K(g(this,kr),S)}get onselectiondrag(){return h(g(this,Cr))}set onselectiondrag(S){K(g(this,Cr),S)}get onselectiondragstart(){return h(g(this,Nr))}set onselectiondragstart(S){K(g(this,Nr),S)}get onselectiondragstop(){return h(g(this,Mr))}set onselectiondragstop(S){K(g(this,Mr),S)}get colorMode(){return h(g(this,Pr))}set colorMode(S){K(g(this,Pr),S)}resetStoreValues(){this.dragging=!1,this.selectionRect=null,this.selectionRectMode=null,this.selectionKeyPressed=!1,this.multiselectionKeyPressed=!1,this.deleteKeyPressed=!1,this.panActivationKeyPressed=!1,this.zoomActivationKeyPressed=!1,this._connection=as,this.clickConnectStartHandle=null,this.viewport=e.props.initialViewport??{x:0,y:0,zoom:1},this.ariaLiveMessage=""}}return n=new WeakMap,r=new WeakMap,i=new WeakMap,o=new WeakMap,s=new WeakMap,a=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,d=new WeakMap,c=new WeakMap,v=new WeakMap,y=new WeakMap,_=new WeakMap,p=new WeakMap,x=new WeakMap,M=new WeakMap,z=new WeakMap,w=new WeakMap,T=new WeakMap,O=new WeakMap,F=new WeakMap,A=new WeakMap,R=new WeakMap,q=new WeakMap,P=new WeakMap,b=new WeakMap,N=new WeakMap,m=new WeakMap,C=new WeakMap,k=new WeakMap,D=new WeakMap,L=new WeakMap,V=new WeakMap,H=new WeakMap,Y=new WeakMap,Z=new WeakMap,W=new WeakMap,B=new WeakMap,ee=new WeakMap,G=new WeakMap,U=new WeakMap,Q=new WeakMap,ue=new WeakMap,_e=new WeakMap,ne=new WeakMap,be=new WeakMap,de=new WeakMap,Me=new WeakMap,Ue=new WeakMap,Qe=new WeakMap,ut=new WeakMap,re=new WeakMap,ye=new WeakMap,De=new WeakMap,he=new WeakMap,ze=new WeakMap,ct=new WeakMap,ft=new WeakMap,Le=new WeakMap,gr=new WeakMap,vr=new WeakMap,yr=new WeakMap,mr=new WeakMap,pr=new WeakMap,_r=new WeakMap,wr=new WeakMap,xr=new WeakMap,br=new WeakMap,Er=new WeakMap,Sr=new WeakMap,kr=new WeakMap,Cr=new WeakMap,Nr=new WeakMap,Mr=new WeakMap,Pr=new WeakMap,new t}function hr(){const e=gs(ji);if(!e)throw new Error("To call useStore outside of <SvelteFlow /> you need to wrap your component in a <SvelteFlowProvider />");return e.getStore()}const ji=Symbol();function lc(e){const t=my(e);function n(P){t.nodeTypes={...sc,...P}}function r(P){t.edgeTypes={...ac,...P}}function i(P){t.edges=c0(P,t.edges)}const o=(P,b=!1)=>{t.nodes=t.nodes.map(N=>{if(t.connection.inProgress&&t.connection.fromNode.id===N.id){const C=t.nodeLookup.get(N.id);C&&(t.connection={...t.connection,from:On(C,t.connection.fromHandle,$.Left,!0)})}const m=P.get(N.id);return m?{...N,position:m.position,dragging:b}:N})};function s(P){var C,k,D;const{changes:b,updatedInternals:N}=S0(P,t.nodeLookup,t.parentLookup,t.domNode,t.nodeOrigin,t.nodeExtent,t.zIndexMode);if(!N)return;p0(t.nodeLookup,t.parentLookup,{nodeOrigin:t.nodeOrigin,nodeExtent:t.nodeExtent,zIndexMode:t.zIndexMode}),t.fitViewQueued&&t.resolveFitView();const m=new Map;for(const L of b){const V=(C=t.nodeLookup.get(L.id))==null?void 0:C.internals.userNode;if(!V)continue;const H={...V};switch(L.type){case"dimensions":{const Y={...H.measured,...L.dimensions};L.setAttributes&&(H.width=((k=L.dimensions)==null?void 0:k.width)??H.width,H.height=((D=L.dimensions)==null?void 0:D.height)??H.height),H.measured=Y;break}case"position":H.position=L.position??H.position;break}m.set(L.id,H)}t.nodes=t.nodes.map(L=>m.get(L.id)??L)}function a(P){const b=t.fitViewResolver??Promise.withResolvers();return t.fitViewQueued=!0,t.fitViewOptions=P,t.fitViewResolver=b,t.nodes=[...t.nodes],b.promise}async function l(P,b,N){const m=typeof(N==null?void 0:N.zoom)<"u"?N.zoom:t.maxZoom,C=t.panZoom;return C?(await C.setViewport({x:t.width/2-P*m,y:t.height/2-b*m,zoom:m},{duration:N==null?void 0:N.duration,ease:N==null?void 0:N.ease,interpolate:N==null?void 0:N.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)}function u(P,b){const N=t.panZoom;return N?N.scaleBy(P,b):Promise.resolve(!1)}function f(P){return u(1.2,P)}function d(P){return u(1/1.2,P)}function c(P){const b=t.panZoom;b&&(b.setScaleExtent([P,t.maxZoom]),t.minZoom=P)}function v(P){const b=t.panZoom;b&&(b.setScaleExtent([t.minZoom,P]),t.maxZoom=P)}function y(P){const b=t.panZoom;b&&(b.setTranslateExtent(P),t.translateExtent=P)}function _(P,b=null){let N=!1;const m=P.map(C=>(b?b.has(C.id):!0)&&C.selected?(N=!0,{...C,selected:!1}):C);return[N,m]}function p(P){const b=P!=null&&P.nodes?new Set(P.nodes.map(L=>L.id)):null,[N,m]=_(t.nodes,b);N&&(t.nodes=m);const C=P!=null&&P.edges?new Set(P.edges.map(L=>L.id)):null,[k,D]=_(t.edges,C);k&&(t.edges=D)}function x(P){const b=t.multiselectionKeyPressed;t.nodes=t.nodes.map(N=>{const m=P.includes(N.id),C=b&&N.selected||m;return!!N.selected!==C?{...N,selected:C}:N}),b||p({nodes:[]})}function M(P){const b=t.multiselectionKeyPressed;t.edges=t.edges.map(N=>{const m=P.includes(N.id),C=b&&N.selected||m;return!!N.selected!==C?{...N,selected:C}:N}),b||p({edges:[]})}function z(P,b,N){const m=t.nodeLookup.get(P);if(!m){console.warn("012",qr.error012(P));return}t.selectionRect=null,t.selectionRectMode=null,m.selected?(b||m.selected&&t.multiselectionKeyPressed)&&(p({nodes:[m],edges:[]}),requestAnimationFrame(()=>N==null?void 0:N.blur())):x([P])}function w(P){const b=t.edgeLookup.get(P);if(!b){console.warn("012",qr.error012(P));return}(b.selectable||t.elementsSelectable&&typeof b.selectable>"u")&&(t.selectionRect=null,t.selectionRectMode=null,b.selected?b.selected&&t.multiselectionKeyPressed&&p({nodes:[],edges:[b]}):M([P]))}function T(P,b){const{nodeExtent:N,snapGrid:m,nodeOrigin:C,nodeLookup:k,nodesDraggable:D,onerror:L}=t,V=new Map,H=(m==null?void 0:m[0])??5,Y=(m==null?void 0:m[1])??5,Z=P.x*H*b,W=P.y*Y*b;for(const B of k.values()){if(!(B.selected&&(B.draggable||D&&typeof B.draggable>"u")))continue;let G={x:B.internals.positionAbsolute.x+Z,y:B.internals.positionAbsolute.y+W};m&&(G=vi(G,m));const{position:U,positionAbsolute:Q}=Vu({nodeId:B.id,nextPosition:G,nodeLookup:k,nodeExtent:N,nodeOrigin:C,onError:L});B.position=U,B.internals.positionAbsolute=Q,V.set(B.id,B)}o(V)}function O(P){return k0({delta:P,panZoom:t.panZoom,transform:[t.viewport.x,t.viewport.y,t.viewport.zoom],translateExtent:t.translateExtent,width:t.width,height:t.height})}const F=P=>{t._connection={...P}};function A(){t._connection=as}function R(){t.resetStoreValues(),p()}return Object.assign(t,{setNodeTypes:n,setEdgeTypes:r,addEdge:i,updateNodePositions:o,updateNodeInternals:s,zoomIn:f,zoomOut:d,fitView:a,setCenter:l,setMinZoom:c,setMaxZoom:v,setTranslateExtent:y,unselectNodesAndEdges:p,addSelectedNodes:x,addSelectedEdges:M,handleNodeSelection:z,handleEdgeSelection:w,moveSelectedNodes:T,panBy:O,updateConnection:F,cancelConnection:A,reset:R})}function Oo(e,t){const{minZoom:n,maxZoom:r,initialViewport:i,onPanZoomStart:o,onPanZoom:s,onPanZoomEnd:a,translateExtent:l,setPanZoomInstance:u,onDraggingChange:f,onTransformChange:d}=t,c=B0({domNode:e,minZoom:n,maxZoom:r,translateExtent:l,viewport:i,onPanZoom:s,onPanZoomStart:o,onPanZoomEnd:a,onDraggingChange:f}),v=c.getViewport();return(i.x!==v.x||i.y!==v.y||i.zoom!==v.zoom)&&d([v.x,v.y,v.zoom]),u(c),c.update(t),{update(y){c.update(y)}}}var py=pe('<div class="svelte-flow__zoom svelte-flow__container"><!></div>');function _y(e,t){oe(t,!0);let n=X(t,"store",15),r=E(()=>n().panActivationKeyPressed||t.panOnDrag),i=E(()=>n().panActivationKeyPressed||t.panOnScroll);const{viewport:o}=n();let s=!1;It(()=>{var u;!s&&n().viewportInitialized&&((u=t.oninit)==null||u.call(t),s=!0)});var a=py(),l=me(a);Qt(l,()=>t.children),Ke(a,(u,f)=>Oo==null?void 0:Oo(u,f),()=>({viewport:n().viewport,minZoom:n().minZoom,maxZoom:n().maxZoom,initialViewport:o,onDraggingChange:u=>{n(n().dragging=u,!0)},setPanZoomInstance:u=>{n(n().panZoom=u,!0)},onPanZoomStart:t.onmovestart,onPanZoom:t.onmove,onPanZoomEnd:t.onmoveend,zoomOnScroll:t.zoomOnScroll,zoomOnDoubleClick:t.zoomOnDoubleClick,zoomOnPinch:t.zoomOnPinch,panOnScroll:h(i),panOnDrag:h(r),panOnScrollSpeed:t.panOnScrollSpeed,panOnScrollMode:t.panOnScrollMode,zoomActivationKeyPressed:n().zoomActivationKeyPressed,preventScrolling:typeof t.preventScrolling=="boolean"?t.preventScrolling:!0,noPanClassName:n().noPanClass,noWheelClassName:n().noWheelClass,userSelectionActive:!!n().selectionRect,translateExtent:n().translateExtent,lib:"svelte",paneClickDistance:t.paneClickDistance,selectionOnDrag:t.selectionOnDrag,onTransformChange:u=>{n(n().viewport={x:u[0],y:u[1],zoom:u[2]},!0)},connectionInProgress:n().connection.inProgress})),j(e,a),se()}function Qa(e,t){return n=>{n.target===t&&(e==null||e(n))}}function ja(e){return t=>{const n=e.has(t.id);return!!t.selected!==n?{...t,selected:n}:t}}function Ja(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}var wy=pe("<div><!></div>");function xy(e,t){oe(t,!0);let n=X(t,"store",15),r=X(t,"panOnDrag",3,!0),i=X(t,"paneClickDistance",3,1),o,s=null,a=new Set,l=new Set,u=E(()=>n().panActivationKeyPressed||r()),f=E(()=>n().selectionKeyPressed||!!n().selectionRect||t.selectionOnDrag&&h(u)!==!0),d=E(()=>n().elementsSelectable&&(h(f)||n().selectionRectMode==="user")),c=!1;function v(A){var m,C;if(s=o==null?void 0:o.getBoundingClientRect(),!s)return;const R=A.target===o,q=!R&&!!A.target.closest(".nokey"),P=t.selectionOnDrag&&R||n().selectionKeyPressed;if(q||!h(f)||!P||A.button!==0||!A.isPrimary)return;(C=(m=A.target)==null?void 0:m.setPointerCapture)==null||C.call(m,A.pointerId),c=!1;const{x:b,y:N}=pt(A,s);n(n().selectionRect={width:0,height:0,startX:b,startY:N,x:b,y:N},!0),R||(A.stopPropagation(),A.preventDefault())}function y(A){var k;if(!h(f)||!s||!n().selectionRect)return;const R=pt(A,s),{startX:q=0,startY:P=0}=n().selectionRect;if(!c){const D=n().selectionKeyPressed?0:i();if(Math.hypot(R.x-q,R.y-P)<=D)return;n().unselectNodesAndEdges(),(k=t.onselectionstart)==null||k.call(t,A)}c=!0;const b={...n().selectionRect,x:R.x<q?R.x:q,y:R.y<P?R.y:P,width:Math.abs(R.x-q),height:Math.abs(R.y-P)},N=a,m=l;a=new Set(Fs(n().nodeLookup,b,[n().viewport.x,n().viewport.y,n().viewport.zoom],n().selectionMode===Xi.Partial,!0).map(D=>D.id));const C=n().defaultEdgeOptions.selectable??!0;l=new Set;for(const D of a){const L=n().connectionLookup.get(D);if(L)for(const{edgeId:V}of L.values()){const H=n().edgeLookup.get(V);H&&(H.selectable??C)&&l.add(V)}}Ja(N,a)||n(n().nodes=n().nodes.map(ja(a)),!0),Ja(m,l)||n(n().edges=n().edges.map(ja(l)),!0),n(n().selectionRectMode="user",!0),n(n().selectionRect=b,!0)}function _(A){var R,q,P;A.button===0&&((q=(R=A.target)==null?void 0:R.releasePointerCapture)==null||q.call(R,A.pointerId),!c&&A.target===o&&(M==null||M(A)),n(n().selectionRect=null,!0),c&&n(n().selectionRectMode=a.size>0?"nodes":null,!0),c&&((P=t.onselectionend)==null||P.call(t,A)))}const p=A=>{var R;if(Array.isArray(h(u))&&h(u).includes(2)){A.preventDefault();return}(R=t.onpanecontextmenu)==null||R.call(t,{event:A})},x=A=>{c&&(A.stopPropagation(),c=!1)};function M(A){var R;if(c||n().connection.inProgress){c=!1;return}(R=t.onpaneclick)==null||R.call(t,{event:A}),n().unselectNodesAndEdges(),n(n().selectionRectMode=null,!0),n(n().selectionRect=null,!0)}var z=wy();let w;var T=E(()=>h(d)?void 0:Qa(M,o));z.__click=function(...A){var R;(R=h(T))==null||R.apply(this,A)},z.__pointermove=function(...A){var R;(R=h(d)?y:void 0)==null||R.apply(this,A)},z.__pointerup=function(...A){var R;(R=h(d)?_:void 0)==null||R.apply(this,A)};var O=E(()=>Qa(p,o));z.__contextmenu=function(...A){var R;(R=h(O))==null||R.apply(this,A)};var F=me(z);Qt(F,()=>t.children),ci(z,A=>o=A,()=>o),xe(A=>w=gn(z,1,"svelte-flow__pane svelte-flow__container",null,w,A),[()=>({draggable:r()===!0||Array.isArray(r())&&r().includes(0),dragging:n().dragging,selection:h(f)})]),Ri("pointerdown",z,function(...A){var R;(R=h(d)?v:void 0)==null||R.apply(this,A)},!0),Ri("click",z,function(...A){var R;(R=h(d)?x:void 0)==null||R.apply(this,A)},!0),j(e,z),se()}Ms(["click","pointermove","pointerup","contextmenu"]);var by=pe('<div class="svelte-flow__viewport xyflow__viewport svelte-flow__container"><!></div>');function Ey(e,t){oe(t,!0);var n=by();let r;var i=me(n);Qt(i,()=>t.children),xe(()=>r=wt(n,"",r,{transform:`translate(${t.store.viewport.x??""}px, ${t.store.viewport.y??""}px) scale(${t.store.viewport.zoom??""})`})),j(e,n),se()}function Wn(e,t){const{store:n,onDrag:r,onDragStart:i,onDragStop:o,onNodeMouseDown:s}=t,a=P0({onDrag:r,onDragStart:i,onDragStop:o,onNodeMouseDown:s,getStoreItems:()=>{const{snapGrid:u,viewport:f}=n;return{nodes:n.nodes,nodeLookup:n.nodeLookup,edges:n.edges,nodeExtent:n.nodeExtent,snapGrid:u||[0,0],snapToGrid:!!u,nodeOrigin:n.nodeOrigin,multiSelectionActive:n.multiselectionKeyPressed,domNode:n.domNode,transform:[f.x,f.y,f.zoom],autoPanOnNodeDrag:n.autoPanOnNodeDrag,nodesDraggable:n.nodesDraggable,selectNodesOnDrag:n.selectNodesOnDrag,nodeDragThreshold:n.nodeDragThreshold,unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,onSelectionDrag:n.onselectiondrag,onSelectionDragStart:n.onselectiondragstart,onSelectionDragStop:n.onselectiondragstop,panBy:n.panBy}}});function l(u,f){if(f.disabled){a.destroy();return}a.update({domNode:u,noDragClassName:f.noDragClass,handleSelector:f.handleSelector,nodeId:f.nodeId,isSelectable:f.isSelectable,nodeClickDistance:f.nodeClickDistance})}return l(e,t),{update(u){l(e,u)},destroy(){a.destroy()}}}var Sy=pe('<div aria-live="assertive" aria-atomic="true" class="a11y-live-msg svelte-1l9nrps"> </div>'),ky=pe('<div class="a11y-hidden svelte-1l9nrps"> </div> <div class="a11y-hidden svelte-1l9nrps"> </div> <!>',1);function Cy(e,t){oe(t,!0);var n=ky(),r=Oe(n),i=me(r),o=Ee(r,2),s=me(o),a=Ee(o,2);{var l=u=>{var f=Sy(),d=me(f);xe(()=>{ie(f,"id",`${Ny}-${t.store.flowId}`),Cn(d,t.store.ariaLiveMessage)}),j(u,f)};st(a,u=>{t.store.disableKeyboardA11y||u(l)})}xe(()=>{ie(r,"id",`${uc}-${t.store.flowId}`),Cn(i,t.store.disableKeyboardA11y?t.store.ariaLabelConfig["node.a11yDescription.default"]:t.store.ariaLabelConfig["node.a11yDescription.keyboardDisabled"]),ie(o,"id",`${cc}-${t.store.flowId}`),Cn(s,t.store.ariaLabelConfig["edge.a11yDescription.default"])}),j(e,n),se()}const uc="svelte-flow__node-desc",cc="svelte-flow__edge-desc",Ny="svelte-flow__aria-live";var My=pe("<div><!></div>");function Py(e,t){oe(t,!0);let n=X(t,"store",15),r=E(()=>Re(t.node.data,()=>({}),!0)),i=E(()=>Re(t.node.selected,!1)),o=E(()=>t.node.draggable),s=E(()=>t.node.selectable),a=E(()=>Re(t.node.deletable,!0)),l=E(()=>t.node.connectable),u=E(()=>t.node.focusable),f=E(()=>Re(t.node.hidden,!1)),d=E(()=>Re(t.node.dragging,!1)),c=E(()=>Re(t.node.style,"")),v=E(()=>t.node.class),y=E(()=>Re(t.node.type,"default")),_=E(()=>t.node.parentId),p=E(()=>t.node.sourcePosition),x=E(()=>t.node.targetPosition),M=E(()=>Re(t.node.measured,()=>({width:0,height:0}),!0).width),z=E(()=>Re(t.node.measured,()=>({width:0,height:0}),!0).height),w=E(()=>t.node.initialWidth),T=E(()=>t.node.initialHeight),O=E(()=>t.node.width),F=E(()=>t.node.height),A=E(()=>t.node.dragHandle),R=E(()=>Re(t.node.internals.z,0)),q=E(()=>t.node.internals.positionAbsolute.x),P=E(()=>t.node.internals.positionAbsolute.y),b=E(()=>t.node.internals.userNode),{id:N}=t.node,m=E(()=>h(o)??n().nodesDraggable),C=E(()=>h(s)??n().elementsSelectable),k=E(()=>h(l)??n().nodesConnectable),D=E(()=>t0(t.node)),L=E(()=>!!t.node.internals.handleBounds),V=E(()=>h(D)&&h(L)),H=E(()=>h(u)??n().nodesFocusable);function Y(re){return n().parentLookup.has(re)}let Z=E(()=>Y(N)),W=ce(null),B=null,ee=h(y),G=h(p),U=h(x),Q=E(()=>n().nodeTypes[h(y)]??ic),ue=E(()=>n().ariaLabelConfig),_e={get value(){return h(k)}};X0(N),q0(_e);let ne=E(()=>{const re=h(M)===void 0?h(O)??h(w):h(O),ye=h(z)===void 0?h(F)??h(T):h(F);if(!(re===void 0&&ye===void 0&&h(c)===void 0))return`${h(c)};${re?`width:${Dt(re)};`:""}${ye?`height:${Dt(ye)};`:""}`});It(()=>{(h(y)!==ee||h(p)!==G||h(x)!==U)&&h(W)!==null&&requestAnimationFrame(()=>{h(W)!==null&&n().updateNodeInternals(new Map([[N,{id:N,nodeElement:h(W),force:!0}]]))}),ee=h(y),G=h(p),U=h(x)}),It(()=>{t.resizeObserver&&(!h(V)||h(W)!==B)&&(B&&t.resizeObserver.unobserve(B),h(W)&&t.resizeObserver.observe(h(W)),B=h(W))}),oo(()=>{var re;B&&((re=t.resizeObserver)==null||re.unobserve(B))});function be(re){var ye;h(C)&&(!n().selectNodesOnDrag||!h(m)||n().nodeDragThreshold>0)&&n().handleNodeSelection(N),(ye=t.onnodeclick)==null||ye.call(t,{node:h(b),event:re})}function de(re){if(!(Xu(re)||n().disableKeyboardA11y))if(Lu.includes(re.key)&&h(C)){const ye=re.key==="Escape";n().handleNodeSelection(N,ye,h(W))}else h(m)&&t.node.selected&&Object.prototype.hasOwnProperty.call(Qi,re.key)&&(re.preventDefault(),n(n().ariaLiveMessage=h(ue)["node.a11yDescription.ariaLiveMessage"]({direction:re.key.replace("Arrow","").toLowerCase(),x:~~t.node.internals.positionAbsolute.x,y:~~t.node.internals.positionAbsolute.y}),!0),n().moveSelectedNodes(Qi[re.key],re.shiftKey?4:1))}const Me=()=>{var ze;if(n().disableKeyboardA11y||!n().autoPanOnNodeFocus||!((ze=h(W))!=null&&ze.matches(":focus-visible")))return;const{width:re,height:ye,viewport:De}=n();Fs(new Map([[N,t.node]]),{x:0,y:0,width:re,height:ye},[De.x,De.y,De.zoom],!0).length>0||n().setCenter(t.node.position.x+(t.node.measured.width??0)/2,t.node.position.y+(t.node.measured.height??0)/2,{zoom:De.zoom})};var Ue=dn(),Qe=Oe(Ue);{var ut=re=>{var ye=My();Ln(ye,()=>({"data-id":N,class:["svelte-flow__node",`svelte-flow__node-${h(y)}`,h(v)],style:h(ne),onclick:be,onpointerenter:t.onnodepointerenter?he=>t.onnodepointerenter({node:h(b),event:he}):void 0,onpointerleave:t.onnodepointerleave?he=>t.onnodepointerleave({node:h(b),event:he}):void 0,onpointermove:t.onnodepointermove?he=>t.onnodepointermove({node:h(b),event:he}):void 0,oncontextmenu:t.onnodecontextmenu?he=>t.onnodecontextmenu({node:h(b),event:he}):void 0,onkeydown:h(H)?de:void 0,onfocus:h(H)?Me:void 0,tabIndex:h(H)?0:void 0,role:t.node.ariaRole??(h(H)?"group":void 0),"aria-roledescription":"node","aria-describedby":n().disableKeyboardA11y?void 0:`${uc}-${n().flowId}`,...t.node.domAttributes,[Jt]:{dragging:h(d),selected:h(i),draggable:h(m),connectable:h(k),selectable:h(C),nopan:h(m),parent:h(Z)},[$t]:{"z-index":h(R),transform:`translate(${h(q)??""}px, ${h(P)??""}px)`,visibility:h(D)?"visible":"hidden"}}));var De=me(ye);Ts(De,()=>h(Q),(he,ze)=>{ze(he,{get data(){return h(r)},get id(){return N},get selected(){return h(i)},get selectable(){return h(C)},get deletable(){return h(a)},get sourcePosition(){return h(p)},get targetPosition(){return h(x)},get zIndex(){return h(R)},get dragging(){return h(d)},get draggable(){return h(m)},get dragHandle(){return h(A)},get parentId(){return h(_)},get type(){return h(y)},get isConnectable(){return h(k)},get positionAbsoluteX(){return h(q)},get positionAbsoluteY(){return h(P)},get width(){return h(O)},get height(){return h(F)}})}),Ke(ye,(he,ze)=>Wn==null?void 0:Wn(he,ze),()=>({nodeId:N,isSelectable:h(C),disabled:!h(m),handleSelector:h(A),noDragClass:n().noDragClass,nodeClickDistance:t.nodeClickDistance,onNodeMouseDown:n().handleNodeSelection,onDrag:(he,ze,ct,ft)=>{var Le;(Le=t.onnodedrag)==null||Le.call(t,{event:he,targetNode:ct,nodes:ft})},onDragStart:(he,ze,ct,ft)=>{var Le;(Le=t.onnodedragstart)==null||Le.call(t,{event:he,targetNode:ct,nodes:ft})},onDragStop:(he,ze,ct,ft)=>{var Le;(Le=t.onnodedragstop)==null||Le.call(t,{event:he,targetNode:ct,nodes:ft})},store:n()})),ci(ye,he=>K(W,he),()=>h(W)),j(re,ye)};st(Qe,re=>{h(f)||re(ut)})}j(e,Ue),se()}var Ay=pe('<div class="svelte-flow__nodes"></div>');function Ty(e,t){oe(t,!0);let n=X(t,"store",15);const r=typeof ResizeObserver>"u"?null:new ResizeObserver(o=>{const s=new Map;o.forEach(a=>{const l=a.target.getAttribute("data-id");s.set(l,{id:l,nodeElement:a.target,force:!0})}),n().updateNodeInternals(s)});oo(()=>{r==null||r.disconnect()});var i=Ay();As(i,21,()=>n().visible.nodes.values(),o=>o.id,(o,s)=>{Py(o,{get node(){return h(s)},get resizeObserver(){return r},get nodeClickDistance(){return t.nodeClickDistance},get onnodeclick(){return t.onnodeclick},get onnodepointerenter(){return t.onnodepointerenter},get onnodepointermove(){return t.onnodepointermove},get onnodepointerleave(){return t.onnodepointerleave},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get onnodecontextmenu(){return t.onnodecontextmenu},get store(){return n()},set store(a){n(a)}})}),j(e,i),se()}var Iy=lt('<svg class="svelte-flow__edge-wrapper"><g><!></g></svg>');function Oy(e,t){oe(t,!0);let n=E(()=>t.edge.id),r=E(()=>t.edge.source),i=E(()=>t.edge.target),o=E(()=>t.edge.sourceX),s=E(()=>t.edge.sourceY),a=E(()=>t.edge.targetX),l=E(()=>t.edge.targetY),u=E(()=>t.edge.sourcePosition),f=E(()=>t.edge.targetPosition),d=E(()=>Re(t.edge.animated,!1)),c=E(()=>Re(t.edge.selected,!1)),v=E(()=>t.edge.label),y=E(()=>t.edge.labelStyle),_=E(()=>Re(t.edge.data,()=>({}),!0)),p=E(()=>t.edge.style),x=E(()=>t.edge.interactionWidth),M=E(()=>Re(t.edge.type,"default")),z=E(()=>t.edge.sourceHandle),w=E(()=>t.edge.targetHandle),T=E(()=>t.edge.markerStart),O=E(()=>t.edge.markerEnd),F=E(()=>t.edge.selectable),A=E(()=>t.edge.focusable),R=E(()=>Re(t.edge.deletable,!0)),q=E(()=>t.edge.hidden),P=E(()=>t.edge.zIndex),b=E(()=>t.edge.class),N=E(()=>t.edge.ariaLabel);G0(h(n));let m=null,C=E(()=>h(F)??t.store.elementsSelectable),k=E(()=>h(A)??t.store.edgesFocusable),D=E(()=>t.store.edgeTypes[h(M)]??oc),L=E(()=>h(T)?`url('#${us(h(T),t.store.flowId)}')`:void 0),V=E(()=>h(O)?`url('#${us(h(O),t.store.flowId)}')`:void 0);function H(G){var Q;const U=t.store.edgeLookup.get(h(n));U&&(h(C)&&t.store.handleEdgeSelection(h(n)),(Q=t.onedgeclick)==null||Q.call(t,{event:G,edge:U}))}function Y(G,U){const Q=t.store.edgeLookup.get(h(n));Q&&U({event:G,edge:Q})}function Z(G){if(!t.store.disableKeyboardA11y&&Lu.includes(G.key)&&h(C)){const{unselectNodesAndEdges:U,addSelectedEdges:Q}=t.store;G.key==="Escape"?(m==null||m.blur(),U({edges:[t.edge]})):Q([h(n)])}}var W=dn(),B=Oe(W);{var ee=G=>{var U=Iy();let Q;var ue=me(U);Ln(ue,()=>({class:["svelte-flow__edge",h(b)],"data-id":h(n),onclick:H,oncontextmenu:t.onedgecontextmenu?ne=>{Y(ne,t.onedgecontextmenu)}:void 0,onpointerenter:t.onedgepointerenter?ne=>{Y(ne,t.onedgepointerenter)}:void 0,onpointerleave:t.onedgepointerleave?ne=>{Y(ne,t.onedgepointerleave)}:void 0,"aria-label":h(N)===null?void 0:h(N)?h(N):`Edge from ${h(r)} to ${h(i)}`,"aria-describedby":h(k)?`${cc}-${t.store.flowId}`:void 0,role:t.edge.ariaRole??(h(k)?"group":"img"),"aria-roledescription":"edge",onkeydown:h(k)?Z:void 0,tabindex:h(k)?0:void 0,...t.edge.domAttributes,[Jt]:{animated:h(d),selected:h(c),selectable:h(C)}}));var _e=me(ue);Ts(_e,()=>h(D),(ne,be)=>{be(ne,{get id(){return h(n)},get source(){return h(r)},get target(){return h(i)},get sourceX(){return h(o)},get sourceY(){return h(s)},get targetX(){return h(a)},get targetY(){return h(l)},get sourcePosition(){return h(u)},get targetPosition(){return h(f)},get animated(){return h(d)},get selected(){return h(c)},get label(){return h(v)},get labelStyle(){return h(y)},get data(){return h(_)},get style(){return h(p)},get interactionWidth(){return h(x)},get selectable(){return h(C)},get deletable(){return h(R)},get type(){return h(M)},get sourceHandleId(){return h(z)},get targetHandleId(){return h(w)},get markerStart(){return h(L)},get markerEnd(){return h(V)}})}),ci(ue,ne=>m=ne,()=>m),xe(()=>Q=wt(U,"",Q,{"z-index":h(P)})),j(G,U)};st(B,G=>{h(q)||G(ee)})}j(e,W),se()}var Dy=lt("<defs></defs>");function zy(e,t){oe(t,!1);const n=hr();Is();var r=Dy();As(r,5,()=>n.markers,i=>i.id,(i,o)=>{Vy(i,id(()=>h(o)))}),j(e,r),se()}var Ry=lt('<polyline class="arrow" fill="none" stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4"></polyline>'),Ly=lt('<polyline class="arrowclosed" stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4 -5,-4"></polyline>'),Hy=lt('<marker class="svelte-flow__arrowhead" viewBox="-10 -10 20 20" refX="0" refY="0"><!></marker>');function Vy(e,t){oe(t,!0);let n=X(t,"width",3,12.5),r=X(t,"height",3,12.5),i=X(t,"markerUnits",3,"strokeWidth"),o=X(t,"orient",3,"auto-start-reverse"),s=X(t,"color",3,"none");var a=Hy(),l=me(a);{var u=d=>{var c=Ry();let v;xe(()=>{ie(c,"stroke-width",t.strokeWidth),v=wt(c,"",v,{stroke:s()})}),j(d,c)},f=d=>{var c=Ly();let v;xe(()=>{ie(c,"stroke-width",t.strokeWidth),v=wt(c,"",v,{stroke:s(),fill:s()})}),j(d,c)};st(l,d=>{t.type===Wi.Arrow?d(u):t.type===Wi.ArrowClosed&&d(f,1)})}xe(()=>{ie(a,"id",t.id),ie(a,"markerWidth",`${n()}`),ie(a,"markerHeight",`${r()}`),ie(a,"markerUnits",i()),ie(a,"orient",o())}),j(e,a),se()}var Ky=pe('<div class="svelte-flow__edges"><svg class="svelte-flow__marker"><!></svg> <!></div>');function Fy(e,t){oe(t,!0);let n=X(t,"store",15);var r=Ky(),i=me(r),o=me(i);zy(o,{});var s=Ee(i,2);As(s,17,()=>n().visible.edges.values(),a=>a.id,(a,l)=>{Oy(a,{get edge(){return h(l)},get onedgeclick(){return t.onedgeclick},get onedgecontextmenu(){return t.onedgecontextmenu},get onedgepointerenter(){return t.onedgepointerenter},get onedgepointerleave(){return t.onedgepointerleave},get store(){return n()},set store(u){n(u)}})}),j(e,r),se()}var By=pe('<div class="svelte-flow__selection svelte-1f9lbg4"></div>');function fc(e,t){oe(t,!0);let n=X(t,"x",3,0),r=X(t,"y",3,0),i=X(t,"width",3,0),o=X(t,"height",3,0),s=X(t,"isVisible",3,!0);var a=dn(),l=Oe(a);{var u=f=>{var d=By();let c;xe(v=>c=wt(d,"",c,v),[()=>({width:typeof i()=="string"?i():Dt(i()),height:typeof o()=="string"?o():Dt(o()),transform:`translate(${n()}px, ${r()}px)`})]),j(f,d)};st(l,f=>{s()&&f(u)})}j(e,a),se()}var Yy=pe("<div><!></div>");function Xy(e,t){oe(t,!0);let n=ce(void 0);It(()=>{var d;t.store.disableKeyboardA11y||(d=h(n))==null||d.focus({preventScroll:!0})});let r=E(()=>{if(t.store.selectionRectMode==="nodes"){t.store.nodes;const d=fo(t.store.nodeLookup,{filter:c=>!!c.selected});if(d.width>0&&d.height>0)return d}return null});function i(d){var v;const c=t.store.nodes.filter(y=>y.selected);(v=t.onselectioncontextmenu)==null||v.call(t,{nodes:c,event:d})}function o(d){var v;const c=t.store.nodes.filter(y=>y.selected);(v=t.onselectionclick)==null||v.call(t,{nodes:c,event:d})}function s(d){Object.prototype.hasOwnProperty.call(Qi,d.key)&&(d.preventDefault(),t.store.moveSelectedNodes(Qi[d.key],d.shiftKey?4:1))}var a=dn(),l=Oe(a);{var u=d=>{var c=Yy();c.__contextmenu=i,c.__click=o,c.__keydown=function(..._){var p;(p=t.store.disableKeyboardA11y?void 0:s)==null||p.apply(this,_)};let v;var y=me(c);fc(y,{width:"100%",height:"100%",x:0,y:0}),Ke(c,(_,p)=>Wn==null?void 0:Wn(_,p),()=>({disabled:!1,store:t.store,onDrag:(_,p,x,M)=>{var z;(z=t.onnodedrag)==null||z.call(t,{event:_,targetNode:null,nodes:M})},onDragStart:(_,p,x,M)=>{var z;(z=t.onnodedragstart)==null||z.call(t,{event:_,targetNode:null,nodes:M})},onDragStop:(_,p,x,M)=>{var z;(z=t.onnodedragstop)==null||z.call(t,{event:_,targetNode:null,nodes:M})}})),ci(c,_=>K(n,_),()=>h(n)),xe(_=>{gn(c,1,Rn(["svelte-flow__selection-wrapper",t.store.noPanClass]),"svelte-5rnsv4"),ie(c,"role",t.store.disableKeyboardA11y?void 0:"button"),ie(c,"tabindex",t.store.disableKeyboardA11y?void 0:-1),v=wt(c,"",v,_)},[()=>({width:Dt(h(r).width),height:Dt(h(r).height),transform:`translate(${h(r).x??""}px, ${h(r).y??""}px)`})]),j(d,c)},f=E(()=>t.store.selectionRectMode==="nodes"&&h(r)&&Xt(h(r).x)&&Xt(h(r).y));st(l,d=>{h(f)&&d(u)})}j(e,a),se()}Ms(["contextmenu","click","keydown"]);function Wy(e){switch(e){case"ctrl":return 8;case"shift":return 4;case"alt":return 2;case"meta":return 1}}function ae(e,t){let{enabled:n=!0,trigger:r,type:i="keydown"}=t;function o(a){var f;const l=Array.isArray(r)?r:[r],u=[a.metaKey,a.altKey,a.shiftKey,a.ctrlKey].reduce((d,c,v)=>c?d|1<<v:d,0);for(const d of l){const c={preventDefault:!1,enabled:!0,...d},{modifier:v,key:y,callback:_,preventDefault:p,enabled:x}=c;if(x){if(a.key!==y)continue;if(v===null||v===!1){if(u!==0)continue}else if(v!==void 0&&((f=v==null?void 0:v[0])==null?void 0:f.length)>0){const z=Array.isArray(v)?v:[v];let w=!1;for(const T of z)if((Array.isArray(T)?T:[T]).reduce((F,A)=>F|Wy(A),0)===u){w=!0;break}if(!w)continue}p&&a.preventDefault();const M={node:e,trigger:c,originalEvent:a};e.dispatchEvent(new CustomEvent("shortcut",{detail:M})),_==null||_(M)}}}let s;return n&&(s=Zo(e,i,o)),{update:a=>{const{enabled:l=!0,type:u="keydown"}=a;n&&(!l||i!==u)?s==null||s():!n&&l&&(s=Zo(e,u,o)),n=l,i=u,r=a.trigger},destroy:()=>{s==null||s()}}}function dc(){const e=E(hr),t=o=>{var u,f;const s=Ga(o)?o:h(e).nodeLookup.get(o.id),a=s.parentId?n0(s.position,s.measured,s.parentId,h(e).nodeLookup,h(e).nodeOrigin):s.position,l={...s,position:a,width:((u=s.measured)==null?void 0:u.width)??s.width,height:((f=s.measured)==null?void 0:f.height)??s.height};return cr(l)};function n(o,s,a={replace:!1}){h(e).nodes=qe(()=>h(e).nodes).map(l=>{if(l.id===o){const u=typeof s=="function"?s(l):s;return a!=null&&a.replace&&Ga(u)?u:{...l,...u}}return l})}function r(o,s,a={replace:!1}){h(e).edges=qe(()=>h(e).edges).map(l=>{if(l.id===o){const u=typeof s=="function"?s(l):s;return a.replace&&ry(u)?u:{...l,...u}}return l})}const i=o=>h(e).nodeLookup.get(o);return{zoomIn:h(e).zoomIn,zoomOut:h(e).zoomOut,getInternalNode:i,getNode:o=>{var s;return(s=i(o))==null?void 0:s.internals.userNode},getNodes:o=>o===void 0?h(e).nodes:$a(h(e).nodeLookup,o),getEdge:o=>h(e).edgeLookup.get(o),getEdges:o=>o===void 0?h(e).edges:$a(h(e).edgeLookup,o),setZoom:(o,s)=>{const a=h(e).panZoom;return a?a.scaleTo(o,{duration:s==null?void 0:s.duration}):Promise.resolve(!1)},getZoom:()=>h(e).viewport.zoom,setViewport:async(o,s)=>{const a=h(e).viewport;return h(e).panZoom?(await h(e).panZoom.setViewport({x:o.x??a.x,y:o.y??a.y,zoom:o.zoom??a.zoom},s),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>pl(h(e).viewport),setCenter:async(o,s,a)=>h(e).setCenter(o,s,a),fitView:o=>h(e).fitView(o),fitBounds:async(o,s)=>{if(!h(e).panZoom)return Promise.resolve(!1);const a=Bs(o,h(e).width,h(e).height,h(e).minZoom,h(e).maxZoom,(s==null?void 0:s.padding)??.1);return await h(e).panZoom.setViewport(a,{duration:s==null?void 0:s.duration,ease:s==null?void 0:s.ease,interpolate:s==null?void 0:s.interpolate}),Promise.resolve(!0)},getIntersectingNodes:(o,s=!0,a)=>{const l=Ra(o),u=l?o:t(o);return u?(a||h(e).nodes).filter(f=>{const d=h(e).nodeLookup.get(f.id);if(!d||!l&&f.id===o.id)return!1;const c=cr(d),v=Zr(c,u);return s&&v>0||v>=c.width*c.height||v>=u.width*u.height}):[]},isNodeIntersecting:(o,s,a=!0)=>{const u=Ra(o)?o:t(o);if(!u)return!1;const f=Zr(u,s);return a&&f>0||f>=s.width*s.height||f>=u.width*u.height},deleteElements:async({nodes:o=[],edges:s=[]})=>{var u,f;const{nodes:a,edges:l}=await Qv({nodesToRemove:o,edgesToRemove:s,nodes:h(e).nodes,edges:h(e).edges,onBeforeDelete:h(e).onbeforedelete});return a&&(h(e).nodes=qe(()=>h(e).nodes).filter(d=>!a.some(({id:c})=>c===d.id))),l&&(h(e).edges=qe(()=>h(e).edges).filter(d=>!l.some(({id:c})=>c===d.id))),(a.length>0||l.length>0)&&((f=(u=h(e)).ondelete)==null||f.call(u,{nodes:a,edges:l})),{deletedNodes:a,deletedEdges:l}},screenToFlowPosition:(o,s={snapToGrid:!0})=>{if(!h(e).domNode)return o;const a=s.snapToGrid?h(e).snapGrid:!1,{x:l,y:u,zoom:f}=h(e).viewport,{x:d,y:c}=h(e).domNode.getBoundingClientRect(),v={x:o.x-d,y:o.y-c};return yi(v,[l,u,f],a!==null,a||[1,1])},flowToScreenPosition:o=>{if(!h(e).domNode)return o;const{x:s,y:a,zoom:l}=h(e).viewport,{x:u,y:f}=h(e).domNode.getBoundingClientRect(),d=Zi(o,[s,a,l]);return{x:d.x+u,y:d.y+f}},toObject:()=>structuredClone({nodes:[...h(e).nodes],edges:[...h(e).edges],viewport:{...h(e).viewport}}),updateNode:n,updateNodeData:(o,s,a)=>{var f;const l=(f=h(e).nodeLookup.get(o))==null?void 0:f.internals.userNode;if(!l)return;const u=typeof s=="function"?s(l):s;n(o,d=>({...d,data:a!=null&&a.replace?u:{...d.data,...u}}))},updateEdge:r,getNodesBounds:o=>qv(o,{nodeLookup:h(e).nodeLookup,nodeOrigin:h(e).nodeOrigin}),getHandleConnections:({type:o,id:s,nodeId:a})=>{var l;return Array.from(((l=h(e).connectionLookup.get(`${a}-${o}-${s??null}`))==null?void 0:l.values())??[])}}}function $a(e,t){var r;const n=[];for(const i of t){const o=e.get(i);if(o){const s="internals"in o?(r=o.internals)==null?void 0:r.userNode:o;n.push(s)}}return n}function qy(e,t){oe(t,!0);let n=X(t,"store",15),r=X(t,"selectionKey",3,"Shift"),i=X(t,"multiSelectionKey",19,()=>Gi()?"Meta":"Control"),o=X(t,"deleteKey",3,"Backspace"),s=X(t,"panActivationKey",3," "),a=X(t,"zoomActivationKey",19,()=>Gi()?"Meta":"Control"),{deleteElements:l}=dc();function u(_){return _!==null&&typeof _=="object"}function f(_){return u(_)?_.modifier||[]:[]}function d(_){return _==null?"":u(_)?_.key:_}function c(_,p){return(Array.isArray(_)?_:[_]).map(M=>{const z=d(M);return{key:z,modifier:f(M),enabled:z!==null,callback:p}})}function v(){n(n().selectionRect=null,!0),n(n().selectionKeyPressed=!1,!0),n(n().multiselectionKeyPressed=!1,!0),n(n().deleteKeyPressed=!1,!0),n(n().panActivationKeyPressed=!1,!0),n(n().zoomActivationKeyPressed=!1,!0)}function y(){const _=n().nodes.filter(x=>x.selected),p=n().edges.filter(x=>x.selected);l({nodes:_,edges:p})}Ri("blur",He,v),Ri("contextmenu",He,v),Ke(He,(_,p)=>ae==null?void 0:ae(_,p),()=>({trigger:c(r(),()=>n(n().selectionKeyPressed=!0,!0)),type:"keydown"})),Ke(He,(_,p)=>ae==null?void 0:ae(_,p),()=>({trigger:c(r(),()=>n(n().selectionKeyPressed=!1,!0)),type:"keyup"})),Ke(He,(_,p)=>ae==null?void 0:ae(_,p),()=>({trigger:c(i(),()=>{n(n().multiselectionKeyPressed=!0,!0)}),type:"keydown"})),Ke(He,(_,p)=>ae==null?void 0:ae(_,p),()=>({trigger:c(i(),()=>n(n().multiselectionKeyPressed=!1,!0)),type:"keyup"})),Ke(He,(_,p)=>ae==null?void 0:ae(_,p),()=>({trigger:c(o(),_=>{!(_.originalEvent.ctrlKey||_.originalEvent.metaKey||_.originalEvent.shiftKey)&&!Xu(_.originalEvent)&&(n(n().deleteKeyPressed=!0,!0),y())}),type:"keydown"})),Ke(He,(_,p)=>ae==null?void 0:ae(_,p),()=>({trigger:c(o(),()=>n(n().deleteKeyPressed=!1,!0)),type:"keyup"})),Ke(He,(_,p)=>ae==null?void 0:ae(_,p),()=>({trigger:c(s(),()=>n(n().panActivationKeyPressed=!0,!0)),type:"keydown"})),Ke(He,(_,p)=>ae==null?void 0:ae(_,p),()=>({trigger:c(s(),()=>n(n().panActivationKeyPressed=!1,!0)),type:"keyup"})),Ke(He,(_,p)=>ae==null?void 0:ae(_,p),()=>({trigger:c(a(),()=>n(n().zoomActivationKeyPressed=!0,!0)),type:"keydown"})),Ke(He,(_,p)=>ae==null?void 0:ae(_,p),()=>({trigger:c(a(),()=>n(n().zoomActivationKeyPressed=!1,!0)),type:"keyup"})),se()}var Zy=lt('<path fill="none" class="svelte-flow__connection-path"></path>'),Gy=lt('<svg class="svelte-flow__connectionline"><g><!></g></svg>');function Uy(e,t){oe(t,!0);let n=E(()=>{if(!t.store.connection.inProgress)return"";const s={sourceX:t.store.connection.from.x,sourceY:t.store.connection.from.y,sourcePosition:t.store.connection.fromPosition,targetX:t.store.connection.to.x,targetY:t.store.connection.to.y,targetPosition:t.store.connection.toPosition};switch(t.type){case en.Bezier:{const[a]=qu(s);return a}case en.Straight:{const[a]=Gu(s);return a}case en.Step:case en.SmoothStep:{const[a]=Ys({...s,borderRadius:t.type===en.Step?0:void 0});return a}}});var r=dn(),i=Oe(r);{var o=s=>{var a=Gy(),l=me(a),u=me(l);{var f=c=>{var v=dn(),y=Oe(v);Ts(y,()=>t.LineComponent,(_,p)=>{p(_,{})}),j(c,v)},d=c=>{var v=Zy();xe(()=>{ie(v,"d",h(n)),wt(v,t.style)}),j(c,v)};st(u,c=>{t.LineComponent?c(f):c(d,!1)})}xe(c=>{ie(a,"width",t.store.width),ie(a,"height",t.store.height),wt(a,t.containerStyle),gn(l,0,c)},[()=>Rn(["svelte-flow__connection",Xv(t.store.connection.isValid)])]),j(s,a)};st(i,s=>{t.store.connection.inProgress&&s(o)})}j(e,r),se()}var Qy=pe("<div><!></div>");function jy(e,t){oe(t,!0);let n=X(t,"position",3,"top-right"),r=fi(t,["$$slots","$$events","$$legacy","position","style","class","children"]),i=E(()=>`${n()}`.split("-"));var o=Qy();Ln(o,a=>({class:a,style:t.style,...r}),[()=>["svelte-flow__panel",t.class,...h(i)]]);var s=me(o);Qt(s,()=>t.children??Dn),j(e,o),se()}var Jy=pe('<a href="https://svelteflow.dev" target="_blank" rel="noopener noreferrer" aria-label="Svelte Flow attribution">Svelte Flow</a>');function $y(e,t){oe(t,!0);let n=X(t,"position",3,"bottom-right");var r=dn(),i=Oe(r);{var o=s=>{jy(s,{get position(){return n()},class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",children:(a,l)=>{var u=Jy();j(a,u)},$$slots:{default:!0}})};st(i,s=>{var a;(a=t.proOptions)!=null&&a.hideAttribution||s(o)})}j(e,r),se()}var em=pe("<div><!></div>");function tm(e,t){oe(t,!0);let n=X(t,"domNode",15),r=X(t,"clientWidth",15),i=X(t,"clientHeight",15),o=E(()=>t.rest.class),s=E(()=>Mf(t.rest,["id","class","nodeTypes","edgeTypes","colorMode","isValidConnection","onmove","onmovestart","onmoveend","onflowerror","ondelete","onbeforedelete","onbeforeconnect","onconnect","onconnectstart","onconnectend","onbeforereconnect","onreconnect","onreconnectstart","onreconnectend","onclickconnectstart","onclickconnectend","oninit","onselectionchange","onselectiondragstart","onselectiondrag","onselectiondragstop","onselectionstart","onselectionend","clickConnect","fitView","fitViewOptions","nodeOrigin","nodeDragThreshold","connectionDragThreshold","minZoom","maxZoom","initialViewport","connectionRadius","connectionMode","selectionMode","selectNodesOnDrag","snapGrid","defaultMarkerColor","translateExtent","nodeExtent","onlyRenderVisibleElements","autoPanOnConnect","autoPanOnNodeDrag","colorModeSSR","defaultEdgeOptions","elevateNodesOnSelect","elevateEdgesOnSelect","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","elementsSelectable","nodesFocusable","edgesFocusable","disableKeyboardA11y","noDragClass","noPanClass","noWheelClass","ariaLabelConfig","autoPanSpeed","panOnScrollSpeed","zIndexMode"]));function a(f){f.currentTarget.scrollTo({top:0,left:0,behavior:"auto"}),t.rest.onscroll&&t.rest.onscroll(f)}var l=em();Ln(l,f=>({class:["svelte-flow","svelte-flow__container",h(o),t.colorMode],"data-testid":"svelte-flow__wrapper",role:"application",onscroll:a,...h(s),[$t]:f}),[()=>({width:Dt(t.width),height:Dt(t.height)})],void 0,void 0,"svelte-rhpwh");var u=me(l);Qt(u,()=>t.children??Dn),ci(l,f=>n(f),()=>n()),ha(l,"clientHeight",i),ha(l,"clientWidth",r),j(e,l),se()}var nm=pe('<div class="svelte-flow__viewport-back svelte-flow__container"></div> <!> <div class="svelte-flow__edge-labels svelte-flow__container"></div> <!> <!> <!> <div class="svelte-flow__viewport-front svelte-flow__container"></div>',1),rm=pe("<!> <!>",1),im=pe("<!> <!> <!> <!> <!>",1);function om(e,t){oe(t,!0);let n=X(t,"paneClickDistance",3,1),r=X(t,"nodeClickDistance",3,1),i=X(t,"panOnScrollMode",19,()=>Xn.Free),o=X(t,"preventScrolling",3,!0),s=X(t,"zoomOnScroll",3,!0),a=X(t,"zoomOnDoubleClick",3,!0),l=X(t,"zoomOnPinch",3,!0),u=X(t,"panOnScroll",3,!1),f=X(t,"panOnScrollSpeed",3,.5),d=X(t,"panOnDrag",3,!0),c=X(t,"selectionOnDrag",3,!1),v=X(t,"connectionLineType",19,()=>en.Bezier),y=X(t,"nodes",31,()=>on([])),_=X(t,"edges",31,()=>on([])),p=X(t,"viewport",15,void 0),x=fi(t,["$$slots","$$events","$$legacy","width","height","proOptions","selectionKey","deleteKey","panActivationKey","multiSelectionKey","zoomActivationKey","paneClickDistance","nodeClickDistance","onmovestart","onmoveend","onmove","oninit","onnodeclick","onnodecontextmenu","onnodedrag","onnodedragstart","onnodedragstop","onnodepointerenter","onnodepointermove","onnodepointerleave","onselectionclick","onselectioncontextmenu","onselectionstart","onselectionend","onedgeclick","onedgecontextmenu","onedgepointerenter","onedgepointerleave","onpaneclick","onpanecontextmenu","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnDrag","selectionOnDrag","connectionLineComponent","connectionLineStyle","connectionLineContainerStyle","connectionLineType","attributionPosition","children","nodes","edges","viewport"]),M=lc({props:x,width:t.width,height:t.height,get nodes(){return y()},set nodes(w){y(w)},get edges(){return _()},set edges(w){_(w)},get viewport(){return p()},set viewport(w){p(w)}});const z=gs(ji);z&&z.setStore&&z.setStore(M),vs(ji,{provider:!1,getStore(){return M}}),It(()=>{var T;const w={nodes:M.selectedNodes,edges:M.selectedEdges};(T=qe(()=>t.onselectionchange))==null||T(w);for(const O of M.selectionChangeHandlers.values())O(w)}),oo(()=>{M.reset()}),tm(e,{get colorMode(){return M.colorMode},get width(){return t.width},get height(){return t.height},get rest(){return x},get domNode(){return M.domNode},set domNode(w){M.domNode=w},get clientWidth(){return M.width},set clientWidth(w){M.width=w},get clientHeight(){return M.height},set clientHeight(w){M.height=w},children:(w,T)=>{var O=im(),F=Oe(O);qy(F,{get selectionKey(){return t.selectionKey},get deleteKey(){return t.deleteKey},get panActivationKey(){return t.panActivationKey},get multiSelectionKey(){return t.multiSelectionKey},get zoomActivationKey(){return t.zoomActivationKey},get store(){return M},set store(b){M=b}});var A=Ee(F,2);_y(A,{get panOnScrollMode(){return i()},get preventScrolling(){return o()},get zoomOnScroll(){return s()},get zoomOnDoubleClick(){return a()},get zoomOnPinch(){return l()},get panOnScroll(){return u()},get panOnScrollSpeed(){return f()},get panOnDrag(){return d()},get paneClickDistance(){return n()},get selectionOnDrag(){return c()},get onmovestart(){return t.onmovestart},get onmove(){return t.onmove},get onmoveend(){return t.onmoveend},get oninit(){return t.oninit},get store(){return M},set store(b){M=b},children:(b,N)=>{xy(b,{get onpaneclick(){return t.onpaneclick},get onpanecontextmenu(){return t.onpanecontextmenu},get onselectionstart(){return t.onselectionstart},get onselectionend(){return t.onselectionend},get panOnDrag(){return d()},get paneClickDistance(){return n()},get selectionOnDrag(){return c()},get store(){return M},set store(m){M=m},children:(m,C)=>{var k=rm(),D=Oe(k);Ey(D,{get store(){return M},set store(V){M=V},children:(V,H)=>{var Y=nm(),Z=Ee(Oe(Y),2);Fy(Z,{get onedgeclick(){return t.onedgeclick},get onedgecontextmenu(){return t.onedgecontextmenu},get onedgepointerenter(){return t.onedgepointerenter},get onedgepointerleave(){return t.onedgepointerleave},get store(){return M},set store(G){M=G}});var W=Ee(Z,4);Uy(W,{get type(){return v()},get LineComponent(){return t.connectionLineComponent},get containerStyle(){return t.connectionLineContainerStyle},get style(){return t.connectionLineStyle},get store(){return M},set store(G){M=G}});var B=Ee(W,2);Ty(B,{get nodeClickDistance(){return r()},get onnodeclick(){return t.onnodeclick},get onnodecontextmenu(){return t.onnodecontextmenu},get onnodepointerenter(){return t.onnodepointerenter},get onnodepointermove(){return t.onnodepointermove},get onnodepointerleave(){return t.onnodepointerleave},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get store(){return M},set store(G){M=G}});var ee=Ee(B,2);Xy(ee,{get onselectionclick(){return t.onselectionclick},get onselectioncontextmenu(){return t.onselectioncontextmenu},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get store(){return M},set store(G){M=G}}),j(V,Y)},$$slots:{default:!0}});var L=Ee(D,2);{let V=E(()=>!!(M.selectionRect&&M.selectionRectMode==="user")),H=E(()=>{var B;return(B=M.selectionRect)==null?void 0:B.width}),Y=E(()=>{var B;return(B=M.selectionRect)==null?void 0:B.height}),Z=E(()=>{var B;return(B=M.selectionRect)==null?void 0:B.x}),W=E(()=>{var B;return(B=M.selectionRect)==null?void 0:B.y});fc(L,{get isVisible(){return h(V)},get width(){return h(H)},get height(){return h(Y)},get x(){return h(Z)},get y(){return h(W)}})}j(m,k)},$$slots:{default:!0}})},$$slots:{default:!0}});var R=Ee(A,2);$y(R,{get proOptions(){return t.proOptions},get position(){return t.attributionPosition}});var q=Ee(R,2);Cy(q,{get store(){return M}});var P=Ee(q,2);Qt(P,()=>t.children??Dn),j(w,O)},$$slots:{default:!0}}),se()}function sm(e,t){oe(t,!0);let n=ce(lc({props:{},nodes:[],edges:[]}));vs(ji,{provider:!0,getStore(){return h(n)},setStore:o=>{K(n,o)}}),oo(()=>{h(n).reset()});var r=dn(),i=Oe(r);Qt(i,()=>t.children??Dn),j(e,r),se()}var un;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(un||(un={}));var am=lt("<circle></circle>");function lm(e,t){var n=am();xe(()=>{ie(n,"cx",t.radius),ie(n,"cy",t.radius),ie(n,"r",t.radius),gn(n,0,Rn(["svelte-flow__background-pattern","dots",t.class]))}),j(e,n)}var um=lt("<path></path>");function cm(e,t){oe(t,!0);var n=um();xe(()=>{ie(n,"stroke-width",t.lineWidth),ie(n,"d",`M${t.dimensions[0]/2} 0 V${t.dimensions[1]} M0 ${t.dimensions[1]/2} H${t.dimensions[0]}`),gn(n,0,Rn(["svelte-flow__background-pattern",t.variant,t.class]))}),j(e,n),se()}const fm={[un.Dots]:1,[un.Lines]:1,[un.Cross]:6};var dm=lt('<svg data-testid="svelte-flow__background"><pattern patternUnits="userSpaceOnUse"><!></pattern><rect x="0" y="0" width="100%" height="100%"></rect></svg>');function hm(e,t){oe(t,!0);let n=X(t,"variant",19,()=>un.Dots),r=X(t,"gap",3,20),i=X(t,"lineWidth",3,1),o=E(hr),s=E(()=>n()===un.Dots),a=E(()=>n()===un.Cross),l=E(()=>Array.isArray(r())?r():[r(),r()]),u=E(()=>`background-pattern-${h(o).flowId}-${t.id??""}`),f=E(()=>[h(l)[0]*h(o).viewport.zoom||1,h(l)[1]*h(o).viewport.zoom||1]),d=E(()=>(t.size??fm[n()])*h(o).viewport.zoom),c=E(()=>h(a)?[h(d),h(d)]:h(f)),v=E(()=>h(s)?[h(d)/2,h(d)/2]:[h(c)[0]/2,h(c)[1]/2]);var y=dm();let _;var p=me(y),x=me(p);{var M=T=>{{let O=E(()=>h(d)/2);lm(T,{get radius(){return h(O)},get class(){return t.patternClass}})}},z=T=>{cm(T,{get dimensions(){return h(c)},get variant(){return n()},get lineWidth(){return i()},get class(){return t.patternClass}})};st(x,T=>{h(s)?T(M):T(z,!1)})}var w=Ee(p);xe(()=>{gn(y,0,Rn(["svelte-flow__background","svelte-flow__container",t.class])),_=wt(y,"",_,{"--xy-background-color-props":t.bgColor,"--xy-background-pattern-color-props":t.patternColor}),ie(p,"id",h(u)),ie(p,"x",h(o).viewport.x%h(f)[0]),ie(p,"y",h(o).viewport.y%h(f)[1]),ie(p,"width",h(f)[0]),ie(p,"height",h(f)[1]),ie(p,"patternTransform",`translate(-${h(v)[0]},-${h(v)[1]})`),ie(w,"fill",`url(#${h(u)})`)}),j(e,y),se()}var gm=pe('<div class="h-full w-full"><!></div>');function vm(e,t){oe(t,!1);let r=Xo([{id:"0",type:"input",data:{label:"Node"},position:{x:0,y:50}}]),i=Xo([]),o=1;const s=()=>`${o++}`,{screenToFlowPosition:a}=dc(),l=(d,c)=>{var M;if(c.isValid)return;const v=((M=c.fromNode)==null?void 0:M.id)??"1",y=s(),{clientX:_,clientY:p}="changedTouches"in d?d.changedTouches[0]:d,x={id:y,data:{label:`Node ${y}`},position:a({x:_,y:p}),origin:[.5,0]};K(r,[...h(r),x]),K(i,[...h(i),{source:v,target:y,id:`${v}--${y}`}])};Is();var u=gm(),f=me(u);om(f,{fitView:!0,onconnectend:l,get nodes(){return h(r)},set nodes(d){K(r,d)},get edges(){return h(i)},set edges(d){K(i,d)},children:(d,c)=>{hm(d,{})},$$slots:{default:!0},$$legacy:!0}),j(e,u),se()}var ym=pe('<main class="flex flex-col h-screen min-h-0 p-3"><!></main>');function mm(e,t){oe(t,!1);let n=X(t,"vscode",8),r=-1;function i(a){const l=a.data;if(!(!l||typeof l.type!="string")){if(l.type==="update"){typeof l.text=="string"&&l.text,r=typeof l.version=="number"?l.version:r;return}l.type==="error"&&typeof l.message=="string"&&l.message}}lu(()=>(window.addEventListener("message",i),n().postMessage({type:"ready"}),()=>{window.removeEventListener("message",i)})),Is();var o=ym(),s=me(o);sm(s,{children:(a,l)=>{vm(a,{})},$$slots:{default:!0}}),j(e,o),se()}const pm=acquireVsCodeApi();Vf(mm,{target:document.getElementById("app"),props:{vscode:pm}});
//# sourceMappingURL=main.js.map
