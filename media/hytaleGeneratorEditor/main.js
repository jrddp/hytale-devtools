var bc=Object.defineProperty;var na=e=>{throw TypeError(e)};var Ec=(e,t,n)=>t in e?bc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ne=(e,t,n)=>Ec(e,typeof t!="symbol"?t+"":t,n),So=(e,t,n)=>t.has(e)||na("Cannot "+n);var g=(e,t,n)=>(So(e,t,"read from private field"),n?n.call(e):t.get(e)),R=(e,t,n)=>t.has(e)?na("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),oe=(e,t,n,r)=>(So(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),He=(e,t,n)=>(So(e,t,"access private method"),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const Vo=!1;var ii=Array.isArray,Sc=Array.prototype.indexOf,dr=Array.prototype.includes,so=Array.from,Nc=Object.defineProperty,vn=Object.getOwnPropertyDescriptor,sl=Object.getOwnPropertyDescriptors,al=Object.prototype,kc=Array.prototype,ao=Object.getPrototypeOf,ra=Object.isExtensible;function Or(e){return typeof e=="function"}const qn=()=>{};function Cc(e){return e()}function Ho(e){for(var t=0;t<e.length;t++)e[t]()}function ll(){var e,t,n=new Promise((r,i)=>{e=r,t=i});return{promise:n,resolve:e,reject:t}}function We(e,t,n=!1){return e===void 0?n?t():t:e}function oi(e,t){if(Array.isArray(e))return e;if(t===void 0||!(Symbol.iterator in e))return Array.from(e);const n=[];for(const r of e)if(n.push(r),n.length===t)break;return n}const Ke=2,Yr=4,si=8,ys=1<<24,rn=16,Ct=32,Sn=64,ul=128,ht=512,ze=1024,Ye=2048,yt=4096,ot=8192,$t=16384,ai=32768,xn=65536,ia=1<<17,cl=1<<18,Zn=1<<19,fl=1<<20,jt=1<<25,Vn=65536,Bo=1<<21,vs=1<<22,mn=1<<23,Rt=Symbol("$state"),dl=Symbol("legacy props"),Ic=Symbol(""),kn=new class extends Error{constructor(){super(...arguments);Ne(this,"name","StaleReactionError");Ne(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};var nl;const hl=((nl=globalThis.document)==null?void 0:nl.contentType.includes("xml"))??!1;function lo(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Ac(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Mc(e,t,n){throw new Error("https://svelte.dev/e/each_key_duplicate")}function Pc(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Tc(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Oc(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Dc(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function zc(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Rc(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Lc(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Fc(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Vc(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Hc=1,Bc=2,gl=4,Kc=8,Yc=16,Xc=1,Wc=2,qc=4,Zc=8,Gc=16,yl=1,Uc=2,Re=Symbol(),vl="http://www.w3.org/1999/xhtml",jc="@attach";function Qc(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function Jc(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function ml(e){return e===this.v}function pl(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function _l(e){return!pl(e,this.v)}let Er=!1,$c=!1;function ef(){Er=!0}const tf=[];function wl(e,t=!1,n=!1){return Pi(e,new Map,"",tf,null,n)}function Pi(e,t,n,r,i=null,o=!1){if(typeof e=="object"&&e!==null){var s=t.get(e);if(s!==void 0)return s;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(ii(e)){var a=Array(e.length);t.set(e,a),i!==null&&t.set(i,a);for(var l=0;l<e.length;l+=1){var u=e[l];l in e&&(a[l]=Pi(u,t,n,r,null,o))}return a}if(ao(e)===al){a={},t.set(e,a),i!==null&&t.set(i,a);for(var f in e)a[f]=Pi(e[f],t,n,r,null,o);return a}if(e instanceof Date)return structuredClone(e);if(typeof e.toJSON=="function"&&!o)return Pi(e.toJSON(),t,n,r,e)}if(e instanceof EventTarget)return e;try{return structuredClone(e)}catch{return e}}let _e=null;function hr(e){_e=e}function ms(e){return _s().get(e)}function ps(e,t){return _s().set(e,t),t}function nf(e){return _s().has(e)}function he(e,t=!1,n){_e={p:_e,i:!1,c:null,e:null,s:e,x:null,l:Er&&!t?{s:null,u:null,$:[]}:null}}function ge(e){var t=_e,n=t.e;if(n!==null){t.e=null;for(var r of n)Bl(r)}return t.i=!0,_e=t.p,{}}function li(){return!Er||_e!==null&&_e.l===null}function _s(e){return _e===null&&lo(),_e.c??(_e.c=new Map(rf(_e)||void 0))}function rf(e){let t=e.p;for(;t!==null;){const n=t.c;if(n!==null)return n;t=t.p}return null}let Cn=[];function xl(){var e=Cn;Cn=[],Ho(e)}function Lt(e){if(Cn.length===0&&!Hr){var t=Cn;queueMicrotask(()=>{t===Cn&&xl()})}Cn.push(e)}function of(){for(;Cn.length>0;)xl()}function bl(e){var t=we;if(t===null)return ce.f|=mn,e;if(!(t.f&ai)&&!(t.f&Yr))throw e;gr(e,t)}function gr(e,t){for(;t!==null;){if(t.f&ul){if(!(t.f&ai))throw e;try{t.b.error(e);return}catch(n){e=n}}t=t.parent}throw e}const sf=-7169;function Pe(e,t){e.f=e.f&sf|t}function ws(e){e.f&ht||e.deps===null?Pe(e,ze):Pe(e,yt)}function El(e){if(e!==null)for(const t of e)!(t.f&Ke)||!(t.f&Vn)||(t.f^=Vn,El(t.deps))}function Sl(e,t,n){e.f&Ye?t.add(e):e.f&yt&&n.add(e),El(e.deps),Pe(e,ze)}const bi=new Set;let me=null,Be=null,Ue=[],uo=null,Ko=!1,Hr=!1;var ir,or,Mn,sr,Qr,Jr,Pn,qt,ar,Kt,Yo,Xo,Nl;const Qs=class Qs{constructor(){R(this,Kt);Ne(this,"committed",!1);Ne(this,"current",new Map);Ne(this,"previous",new Map);R(this,ir,new Set);R(this,or,new Set);R(this,Mn,0);R(this,sr,0);R(this,Qr,null);R(this,Jr,new Set);R(this,Pn,new Set);R(this,qt,new Map);Ne(this,"is_fork",!1);R(this,ar,!1)}is_deferred(){return this.is_fork||g(this,sr)>0}skip_effect(t){g(this,qt).has(t)||g(this,qt).set(t,{d:[],m:[]})}unskip_effect(t){var n=g(this,qt).get(t);if(n){g(this,qt).delete(t);for(var r of n.d)Pe(r,Ye),Et(r);for(r of n.m)Pe(r,yt),Et(r)}}process(t){var i;Ue=[],this.apply();var n=[],r=[];for(const o of t)He(this,Kt,Yo).call(this,o,n,r);if(this.is_deferred()){He(this,Kt,Xo).call(this,r),He(this,Kt,Xo).call(this,n);for(const[o,s]of g(this,qt))Al(o,s)}else{for(const o of g(this,ir))o();g(this,ir).clear(),g(this,Mn)===0&&He(this,Kt,Nl).call(this),me=null,oa(r),oa(n),(i=g(this,Qr))==null||i.resolve()}Be=null}capture(t,n){n!==Re&&!this.previous.has(t)&&this.previous.set(t,n),t.f&mn||(this.current.set(t,t.v),Be==null||Be.set(t,t.v))}activate(){me=this,this.apply()}deactivate(){me===this&&(me=null,Be=null)}flush(){if(this.activate(),Ue.length>0){if(kl(),me!==null&&me!==this)return}else g(this,Mn)===0&&this.process([]);this.deactivate()}discard(){for(const t of g(this,or))t(this);g(this,or).clear()}increment(t){oe(this,Mn,g(this,Mn)+1),t&&oe(this,sr,g(this,sr)+1)}decrement(t){oe(this,Mn,g(this,Mn)-1),t&&oe(this,sr,g(this,sr)-1),!g(this,ar)&&(oe(this,ar,!0),Lt(()=>{oe(this,ar,!1),this.is_deferred()?Ue.length>0&&this.flush():this.revive()}))}revive(){for(const t of g(this,Jr))g(this,Pn).delete(t),Pe(t,Ye),Et(t);for(const t of g(this,Pn))Pe(t,yt),Et(t);this.flush()}oncommit(t){g(this,ir).add(t)}ondiscard(t){g(this,or).add(t)}settled(){return(g(this,Qr)??oe(this,Qr,ll())).promise}static ensure(){if(me===null){const t=me=new Qs;bi.add(me),Hr||Lt(()=>{me===t&&t.flush()})}return me}apply(){}};ir=new WeakMap,or=new WeakMap,Mn=new WeakMap,sr=new WeakMap,Qr=new WeakMap,Jr=new WeakMap,Pn=new WeakMap,qt=new WeakMap,ar=new WeakMap,Kt=new WeakSet,Yo=function(t,n,r){t.f^=ze;for(var i=t.first,o=null;i!==null;){var s=i.f,a=(s&(Ct|Sn))!==0,l=a&&(s&ze)!==0,u=l||(s&ot)!==0||g(this,qt).has(i);if(!u&&i.fn!==null){a?i.f^=ze:o!==null&&s&(Yr|si|ys)?o.b.defer_effect(i):s&Yr?n.push(i):Sr(i)&&(s&rn&&g(this,Pn).add(i),Bn(i));var f=i.first;if(f!==null){i=f;continue}}var d=i.parent;for(i=i.next;i===null&&d!==null;)d===o&&(o=null),i=d.next,d=d.parent}},Xo=function(t){for(var n=0;n<t.length;n+=1)Sl(t[n],g(this,Jr),g(this,Pn))},Nl=function(){var i;if(bi.size>1){this.previous.clear();var t=Be,n=!0;for(const o of bi){if(o===this){n=!1;continue}const s=[];for(const[l,u]of this.current){if(o.current.has(l))if(n&&u!==o.current.get(l))o.current.set(l,u);else continue;s.push(l)}if(s.length===0)continue;const a=[...o.current.keys()].filter(l=>!this.current.has(l));if(a.length>0){var r=Ue;Ue=[];const l=new Set,u=new Map;for(const f of s)Cl(f,a,l,u);if(Ue.length>0){me=o,o.apply();for(const f of Ue)He(i=o,Kt,Yo).call(i,f,[],[]);o.deactivate()}Ue=r}}me=null,Be=t}this.committed=!0,bi.delete(this)};let en=Qs;function af(e){var t=Hr;Hr=!0;try{for(var n;;){if(of(),Ue.length===0&&(me==null||me.flush(),Ue.length===0))return uo=null,n;kl()}}finally{Hr=t}}function kl(){Ko=!0;var e=null;try{for(var t=0;Ue.length>0;){var n=en.ensure();if(t++>1e3){var r,i;lf()}n.process(Ue),pn.clear()}}finally{Ue=[],Ko=!1,uo=null}}function lf(){try{Dc()}catch(e){gr(e,uo)}}let _t=null;function oa(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if(!(r.f&($t|ot))&&Sr(r)&&(_t=new Set,Bn(r),r.deps===null&&r.first===null&&r.nodes===null&&r.teardown===null&&r.ac===null&&ql(r),(_t==null?void 0:_t.size)>0)){pn.clear();for(const i of _t){if(i.f&($t|ot))continue;const o=[i];let s=i.parent;for(;s!==null;)_t.has(s)&&(_t.delete(s),o.push(s)),s=s.parent;for(let a=o.length-1;a>=0;a--){const l=o[a];l.f&($t|ot)||Bn(l)}}_t.clear()}}_t=null}}function Cl(e,t,n,r){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const i of e.reactions){const o=i.f;o&Ke?Cl(i,t,n,r):o&(vs|rn)&&!(o&Ye)&&Il(i,t,r)&&(Pe(i,Ye),Et(i))}}function Il(e,t,n){const r=n.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const i of e.deps){if(dr.call(t,i))return!0;if(i.f&Ke&&Il(i,t,n))return n.set(i,!0),!0}return n.set(e,!1),!1}function Et(e){for(var t=uo=e;t.parent!==null;){t=t.parent;var n=t.f;if(Ko&&t===we&&n&rn&&!(n&cl))return;if(n&(Sn|Ct)){if(!(n&ze))return;t.f^=ze}}Ue.push(t)}function Al(e,t){if(!(e.f&Ct&&e.f&ze)){e.f&Ye?t.d.push(e):e.f&yt&&t.m.push(e),Pe(e,ze);for(var n=e.first;n!==null;)Al(n,t),n=n.next}}function Ml(e){let t=0,n=Hn(0),r;return()=>{Ss()&&(h(n),di(()=>(t===0&&(r=Je(()=>e(()=>Br(n)))),t+=1,()=>{Lt(()=>{t-=1,t===0&&(r==null||r(),r=void 0,Br(n))})})))}}var uf=xn|Zn|ul;function cf(e,t,n){new ff(e,t,n)}var ft,gs,Pt,Tn,Tt,dt,Ze,Ot,Zt,dn,On,hn,lr,Dn,ur,cr,Gt,no,Fe,df,hf,Wo,Ti,Oi,qo;class ff{constructor(t,n,r){R(this,Fe);Ne(this,"parent");Ne(this,"is_pending",!1);R(this,ft);R(this,gs,null);R(this,Pt);R(this,Tn);R(this,Tt);R(this,dt,null);R(this,Ze,null);R(this,Ot,null);R(this,Zt,null);R(this,dn,null);R(this,On,0);R(this,hn,0);R(this,lr,!1);R(this,Dn,!1);R(this,ur,new Set);R(this,cr,new Set);R(this,Gt,null);R(this,no,Ml(()=>(oe(this,Gt,Hn(g(this,On))),()=>{oe(this,Gt,null)})));oe(this,ft,t),oe(this,Pt,n),oe(this,Tn,r),this.parent=we.b,this.is_pending=!!g(this,Pt).pending,oe(this,Tt,hi(()=>{we.b=this;{var i=He(this,Fe,Wo).call(this);try{oe(this,dt,Qe(()=>r(i)))}catch(o){this.error(o)}g(this,hn)>0?He(this,Fe,Oi).call(this):this.is_pending=!1}return()=>{var o;(o=g(this,dn))==null||o.remove()}},uf))}defer_effect(t){Sl(t,g(this,ur),g(this,cr))}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!g(this,Pt).pending}update_pending_count(t){He(this,Fe,qo).call(this,t),oe(this,On,g(this,On)+t),!(!g(this,Gt)||g(this,lr))&&(oe(this,lr,!0),Lt(()=>{oe(this,lr,!1),g(this,Gt)&&yr(g(this,Gt),g(this,On))}))}get_effect_pending(){return g(this,no).call(this),h(g(this,Gt))}error(t){var n=g(this,Pt).onerror;let r=g(this,Pt).failed;if(g(this,Dn)||!n&&!r)throw t;g(this,dt)&&(Le(g(this,dt)),oe(this,dt,null)),g(this,Ze)&&(Le(g(this,Ze)),oe(this,Ze,null)),g(this,Ot)&&(Le(g(this,Ot)),oe(this,Ot,null));var i=!1,o=!1;const s=()=>{if(i){Jc();return}i=!0,o&&Vc(),en.ensure(),oe(this,On,0),g(this,Ot)!==null&&Rn(g(this,Ot),()=>{oe(this,Ot,null)}),this.is_pending=this.has_pending_snippet(),oe(this,dt,He(this,Fe,Ti).call(this,()=>(oe(this,Dn,!1),Qe(()=>g(this,Tn).call(this,g(this,ft)))))),g(this,hn)>0?He(this,Fe,Oi).call(this):this.is_pending=!1};Lt(()=>{try{o=!0,n==null||n(t,s),o=!1}catch(a){gr(a,g(this,Tt)&&g(this,Tt).parent)}r&&oe(this,Ot,He(this,Fe,Ti).call(this,()=>{en.ensure(),oe(this,Dn,!0);try{return Qe(()=>{r(g(this,ft),()=>t,()=>s)})}catch(a){return gr(a,g(this,Tt).parent),null}finally{oe(this,Dn,!1)}}))})}}ft=new WeakMap,gs=new WeakMap,Pt=new WeakMap,Tn=new WeakMap,Tt=new WeakMap,dt=new WeakMap,Ze=new WeakMap,Ot=new WeakMap,Zt=new WeakMap,dn=new WeakMap,On=new WeakMap,hn=new WeakMap,lr=new WeakMap,Dn=new WeakMap,ur=new WeakMap,cr=new WeakMap,Gt=new WeakMap,no=new WeakMap,Fe=new WeakSet,df=function(){try{oe(this,dt,Qe(()=>g(this,Tn).call(this,g(this,ft))))}catch(t){this.error(t)}},hf=function(){const t=g(this,Pt).pending;t&&(oe(this,Ze,Qe(()=>t(g(this,ft)))),Lt(()=>{var n=He(this,Fe,Wo).call(this);oe(this,dt,He(this,Fe,Ti).call(this,()=>(en.ensure(),Qe(()=>g(this,Tn).call(this,n))))),g(this,hn)>0?He(this,Fe,Oi).call(this):(Rn(g(this,Ze),()=>{oe(this,Ze,null)}),this.is_pending=!1)}))},Wo=function(){var t=g(this,ft);return this.is_pending&&(oe(this,dn,tn()),g(this,ft).before(g(this,dn)),t=g(this,dn)),t},Ti=function(t){var n=we,r=ce,i=_e;Ht(g(this,Tt)),vt(g(this,Tt)),hr(g(this,Tt).ctx);try{return t()}catch(o){return bl(o),null}finally{Ht(n),vt(r),hr(i)}},Oi=function(){const t=g(this,Pt).pending;g(this,dt)!==null&&(oe(this,Zt,document.createDocumentFragment()),g(this,Zt).append(g(this,dn)),Ul(g(this,dt),g(this,Zt))),g(this,Ze)===null&&oe(this,Ze,Qe(()=>t(g(this,ft))))},qo=function(t){var n;if(!this.has_pending_snippet()){this.parent&&He(n=this.parent,Fe,qo).call(n,t);return}if(oe(this,hn,g(this,hn)+t),g(this,hn)===0){this.is_pending=!1;for(const r of g(this,ur))Pe(r,Ye),Et(r);for(const r of g(this,cr))Pe(r,yt),Et(r);g(this,ur).clear(),g(this,cr).clear(),g(this,Ze)&&Rn(g(this,Ze),()=>{oe(this,Ze,null)}),g(this,Zt)&&(g(this,ft).before(g(this,Zt)),oe(this,Zt,null))}};function Pl(e,t,n,r){const i=li()?ui:xs;var o=e.filter(c=>!c.settled);if(n.length===0&&o.length===0){r(t.map(i));return}var s=me,a=we,l=gf(),u=o.length===1?o[0].promise:o.length>1?Promise.all(o.map(c=>c.promise)):null;function f(c){l();try{r(c)}catch(y){a.f&$t||gr(y,a)}s==null||s.deactivate(),Zo()}if(n.length===0){u.then(()=>f(t.map(i)));return}function d(){l(),Promise.all(n.map(c=>yf(c))).then(c=>f([...t.map(i),...c])).catch(c=>gr(c,a))}u?u.then(d):d()}function gf(){var e=we,t=ce,n=_e,r=me;return function(o=!0){Ht(e),vt(t),hr(n),o&&(r==null||r.activate())}}function Zo(){Ht(null),vt(null),hr(null)}function ui(e){var t=Ke|Ye,n=ce!==null&&ce.f&Ke?ce:null;return we!==null&&(we.f|=Zn),{ctx:_e,deps:null,effects:null,equals:ml,f:t,fn:e,reactions:null,rv:0,v:Re,wv:0,parent:n??we,ac:null}}function yf(e,t,n){let r=we;r===null&&Ac();var i=r.b,o=void 0,s=Hn(Re),a=!ce,l=new Map;return Af(()=>{var y;var u=ll();o=u.promise;try{Promise.resolve(e()).then(u.resolve,u.reject).then(()=>{f===me&&f.committed&&f.deactivate(),Zo()})}catch(v){u.reject(v),Zo()}var f=me;if(a){var d=i.is_rendered();i.update_pending_count(1),f.increment(d),(y=l.get(f))==null||y.reject(kn),l.delete(f),l.set(f,u)}const c=(v,_=void 0)=>{if(f.activate(),_)_!==kn&&(s.f|=mn,yr(s,_));else{s.f&mn&&(s.f^=mn),yr(s,v);for(const[p,b]of l){if(l.delete(p),p===f)break;b.reject(kn)}}a&&(i.update_pending_count(-1),f.decrement(d))};u.promise.then(c,v=>c(null,v||"unknown"))}),Ns(()=>{for(const u of l.values())u.reject(kn)}),new Promise(u=>{function f(d){function c(){d===o?u(s):f(o)}d.then(c,c)}f(o)})}function S(e){const t=ui(e);return jl(t),t}function xs(e){const t=ui(e);return t.equals=_l,t}function vf(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)Le(t[n])}}function mf(e){for(var t=e.parent;t!==null;){if(!(t.f&Ke))return t.f&$t?null:t;t=t.parent}return null}function bs(e){var t,n=we;Ht(mf(e));try{e.f&=~Vn,vf(e),t=eu(e)}finally{Ht(n)}return t}function Tl(e){var t=bs(e);if(!e.equals(t)&&(e.wv=Jl(),(!(me!=null&&me.is_fork)||e.deps===null)&&(e.v=t,e.deps===null))){Pe(e,ze);return}bn||(Be!==null?(Ss()||me!=null&&me.is_fork)&&Be.set(e,t):ws(e))}function pf(e){var t,n;if(e.effects!==null)for(const r of e.effects)(r.teardown||r.ac)&&((t=r.teardown)==null||t.call(r),(n=r.ac)==null||n.abort(kn),r.teardown=qn,r.ac=null,Xr(r,0),ks(r))}function Ol(e){if(e.effects!==null)for(const t of e.effects)t.teardown&&Bn(t)}let Go=new Set;const pn=new Map;let Dl=!1;function Hn(e,t){var n={f:0,v:e,reactions:null,equals:ml,rv:0,wv:0};return n}function be(e,t){const n=Hn(e);return jl(n),n}function Jn(e,t=!1,n=!0){var i;const r=Hn(e);return t||(r.equals=_l),Er&&n&&_e!==null&&_e.l!==null&&((i=_e.l).s??(i.s=[])).push(r),r}function Y(e,t,n=!1){ce!==null&&(!St||ce.f&ia)&&li()&&ce.f&(Ke|rn|vs|ia)&&(gt===null||!dr.call(gt,e))&&Fc();let r=n?yn(t):t;return yr(e,r)}function yr(e,t){if(!e.equals(t)){var n=e.v;bn?pn.set(e,t):pn.set(e,n),e.v=t;var r=en.ensure();if(r.capture(e,n),e.f&Ke){const i=e;e.f&Ye&&bs(i),ws(i)}e.wv=Jl(),zl(e,Ye),li()&&we!==null&&we.f&ze&&!(we.f&(Ct|Sn))&&(ct===null?Tf([e]):ct.push(e)),!r.is_fork&&Go.size>0&&!Dl&&_f()}return t}function _f(){Dl=!1;for(const e of Go)e.f&ze&&Pe(e,yt),Sr(e)&&Bn(e);Go.clear()}function Br(e){Y(e,e.v+1)}function zl(e,t){var n=e.reactions;if(n!==null)for(var r=li(),i=n.length,o=0;o<i;o++){var s=n[o],a=s.f;if(!(!r&&s===we)){var l=(a&Ye)===0;if(l&&Pe(s,t),a&Ke){var u=s;Be==null||Be.delete(u),a&Vn||(a&ht&&(s.f|=Vn),zl(u,yt))}else l&&(a&rn&&_t!==null&&_t.add(s),Et(s))}}}function yn(e){if(typeof e!="object"||e===null||Rt in e)return e;const t=ao(e);if(t!==al&&t!==kc)return e;var n=new Map,r=ii(e),i=be(0),o=Ln,s=a=>{if(Ln===o)return a();var l=ce,u=Ln;vt(null),la(o);var f=a();return vt(l),la(u),f};return r&&n.set("length",be(e.length)),new Proxy(e,{defineProperty(a,l,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&Rc();var f=n.get(l);return f===void 0?s(()=>{var d=be(u.value);return n.set(l,d),d}):Y(f,u.value,!0),!0},deleteProperty(a,l){var u=n.get(l);if(u===void 0){if(l in a){const f=s(()=>be(Re));n.set(l,f),Br(i)}}else Y(u,Re),Br(i);return!0},get(a,l,u){var y;if(l===Rt)return e;var f=n.get(l),d=l in a;if(f===void 0&&(!d||(y=vn(a,l))!=null&&y.writable)&&(f=s(()=>{var v=yn(d?a[l]:Re),_=be(v);return _}),n.set(l,f)),f!==void 0){var c=h(f);return c===Re?void 0:c}return Reflect.get(a,l,u)},getOwnPropertyDescriptor(a,l){var u=Reflect.getOwnPropertyDescriptor(a,l);if(u&&"value"in u){var f=n.get(l);f&&(u.value=h(f))}else if(u===void 0){var d=n.get(l),c=d==null?void 0:d.v;if(d!==void 0&&c!==Re)return{enumerable:!0,configurable:!0,value:c,writable:!0}}return u},has(a,l){var c;if(l===Rt)return!0;var u=n.get(l),f=u!==void 0&&u.v!==Re||Reflect.has(a,l);if(u!==void 0||we!==null&&(!f||(c=vn(a,l))!=null&&c.writable)){u===void 0&&(u=s(()=>{var y=f?yn(a[l]):Re,v=be(y);return v}),n.set(l,u));var d=h(u);if(d===Re)return!1}return f},set(a,l,u,f){var P;var d=n.get(l),c=l in a;if(r&&l==="length")for(var y=u;y<d.v;y+=1){var v=n.get(y+"");v!==void 0?Y(v,Re):y in a&&(v=s(()=>be(Re)),n.set(y+"",v))}if(d===void 0)(!c||(P=vn(a,l))!=null&&P.writable)&&(d=s(()=>be(void 0)),Y(d,yn(u)),n.set(l,d));else{c=d.v!==Re;var _=s(()=>yn(u));Y(d,_)}var p=Reflect.getOwnPropertyDescriptor(a,l);if(p!=null&&p.set&&p.set.call(f,u),!c){if(r&&typeof l=="string"){var b=n.get("length"),A=Number(l);Number.isInteger(A)&&A>=b.v&&Y(b,A+1)}Br(i)}return!0},ownKeys(a){h(i);var l=Reflect.ownKeys(a).filter(d=>{var c=n.get(d);return c===void 0||c.v!==Re});for(var[u,f]of n)f.v!==Re&&!(u in a)&&l.push(u);return l},setPrototypeOf(){Lc()}})}function sa(e){try{if(e!==null&&typeof e=="object"&&Rt in e)return e[Rt]}catch{}return e}function wf(e,t){return Object.is(sa(e),sa(t))}var qe,Rl,Ll,Fl;function xf(){if(qe===void 0){qe=window,Rl=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;Ll=vn(t,"firstChild").get,Fl=vn(t,"nextSibling").get,ra(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),ra(n)&&(n.__t=void 0)}}function tn(e=""){return document.createTextNode(e)}function Ut(e){return Ll.call(e)}function ci(e){return Fl.call(e)}function Ce(e,t){return Ut(e)}function Xe(e,t=!1){{var n=Ut(e);return n instanceof Comment&&n.data===""?ci(n):n}}function Oe(e,t=1,n=!1){let r=e;for(;t--;)r=ci(r);return r}function bf(e){e.textContent=""}function Vl(){return!1}function Ef(e,t,n){return document.createElementNS(vl,e,void 0)}function Sf(e,t){if(t){const n=document.body;e.autofocus=!0,Lt(()=>{document.activeElement===n&&e.focus()})}}function Es(e){var t=ce,n=we;vt(null),Ht(null);try{return e()}finally{vt(t),Ht(n)}}function Hl(e){we===null&&(ce===null&&Oc(),Tc()),bn&&Pc()}function Nf(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function mt(e,t,n){var r=we;r!==null&&r.f&ot&&(e|=ot);var i={ctx:_e,deps:null,nodes:null,f:e|Ye|ht,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(n)try{Bn(i)}catch(a){throw Le(i),a}else t!==null&&Et(i);var o=i;if(n&&o.deps===null&&o.teardown===null&&o.nodes===null&&o.first===o.last&&!(o.f&Zn)&&(o=o.first,e&rn&&e&xn&&o!==null&&(o.f|=xn)),o!==null&&(o.parent=r,r!==null&&Nf(o,r),ce!==null&&ce.f&Ke&&!(e&Sn))){var s=ce;(s.effects??(s.effects=[])).push(o)}return i}function Ss(){return ce!==null&&!St}function Ns(e){const t=mt(si,null,!1);return Pe(t,ze),t.teardown=e,t}function Vt(e){Hl();var t=we.f,n=!ce&&(t&Ct)!==0&&(t&ai)===0;if(n){var r=_e;(r.e??(r.e=[])).push(e)}else return Bl(e)}function Bl(e){return mt(Yr|fl,e,!1)}function Kl(e){return Hl(),mt(si|fl,e,!0)}function Yl(e){en.ensure();const t=mt(Sn|Zn,e,!0);return()=>{Le(t)}}function kf(e){en.ensure();const t=mt(Sn|Zn,e,!0);return(n={})=>new Promise(r=>{n.outro?Rn(t,()=>{Le(t),r(void 0)}):(Le(t),r(void 0))})}function fi(e){return mt(Yr,e,!1)}function Cf(e,t){var n=_e,r={effect:null,ran:!1,deps:e};n.l.$.push(r),r.effect=di(()=>{e(),!r.ran&&(r.ran=!0,Je(t))})}function If(){var e=_e;di(()=>{for(var t of e.l.$){t.deps();var n=t.effect;n.f&ze&&n.deps!==null&&Pe(n,yt),Sr(n)&&Bn(n),t.ran=!1}})}function Af(e){return mt(vs|Zn,e,!0)}function di(e,t=0){return mt(si|t,e,!0)}function Te(e,t=[],n=[],r=[]){Pl(r,t,n,i=>{mt(si,()=>e(...i.map(h)),!0)})}function hi(e,t=0){var n=mt(rn|t,e,!0);return n}function Xl(e,t=0){var n=mt(ys|t,e,!0);return n}function Qe(e){return mt(Ct|Zn,e,!0)}function Wl(e){var t=e.teardown;if(t!==null){const n=bn,r=ce;aa(!0),vt(null);try{t.call(null)}finally{aa(n),vt(r)}}}function ks(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const i=n.ac;i!==null&&Es(()=>{i.abort(kn)});var r=n.next;n.f&Sn?n.parent=null:Le(n,t),n=r}}function Mf(e){for(var t=e.first;t!==null;){var n=t.next;t.f&Ct||Le(t),t=n}}function Le(e,t=!0){var n=!1;(t||e.f&cl)&&e.nodes!==null&&e.nodes.end!==null&&(Pf(e.nodes.start,e.nodes.end),n=!0),ks(e,t&&!n),Xr(e,0),Pe(e,$t);var r=e.nodes&&e.nodes.t;if(r!==null)for(const o of r)o.stop();Wl(e);var i=e.parent;i!==null&&i.first!==null&&ql(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function Pf(e,t){for(;e!==null;){var n=e===t?null:ci(e);e.remove(),e=n}}function ql(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function Rn(e,t,n=!0){var r=[];Zl(e,r,!0);var i=()=>{n&&Le(e),t&&t()},o=r.length;if(o>0){var s=()=>--o||i();for(var a of r)a.out(s)}else i()}function Zl(e,t,n){if(!(e.f&ot)){e.f^=ot;var r=e.nodes&&e.nodes.t;if(r!==null)for(const a of r)(a.is_global||n)&&t.push(a);for(var i=e.first;i!==null;){var o=i.next,s=(i.f&xn)!==0||(i.f&Ct)!==0&&(e.f&rn)!==0;Zl(i,t,s?n:!1),i=o}}}function Cs(e){Gl(e,!0)}function Gl(e,t){if(e.f&ot){e.f^=ot,e.f&ze||(Pe(e,Ye),Et(e));for(var n=e.first;n!==null;){var r=n.next,i=(n.f&xn)!==0||(n.f&Ct)!==0;Gl(n,i?t:!1),n=r}var o=e.nodes&&e.nodes.t;if(o!==null)for(const s of o)(s.is_global||t)&&s.in()}}function Ul(e,t){if(e.nodes)for(var n=e.nodes.start,r=e.nodes.end;n!==null;){var i=n===r?null:ci(n);t.append(n),n=i}}let Di=!1,bn=!1;function aa(e){bn=e}let ce=null,St=!1;function vt(e){ce=e}let we=null;function Ht(e){we=e}let gt=null;function jl(e){ce!==null&&(gt===null?gt=[e]:gt.push(e))}let je=null,rt=0,ct=null;function Tf(e){ct=e}let Ql=1,In=0,Ln=In;function la(e){Ln=e}function Jl(){return++Ql}function Sr(e){var t=e.f;if(t&Ye)return!0;if(t&Ke&&(e.f&=~Vn),t&yt){for(var n=e.deps,r=n.length,i=0;i<r;i++){var o=n[i];if(Sr(o)&&Tl(o),o.wv>e.wv)return!0}t&ht&&Be===null&&Pe(e,ze)}return!1}function $l(e,t,n=!0){var r=e.reactions;if(r!==null&&!(gt!==null&&dr.call(gt,e)))for(var i=0;i<r.length;i++){var o=r[i];o.f&Ke?$l(o,t,!1):t===o&&(n?Pe(o,Ye):o.f&ze&&Pe(o,yt),Et(o))}}function eu(e){var _;var t=je,n=rt,r=ct,i=ce,o=gt,s=_e,a=St,l=Ln,u=e.f;je=null,rt=0,ct=null,ce=u&(Ct|Sn)?null:e,gt=null,hr(e.ctx),St=!1,Ln=++In,e.ac!==null&&(Es(()=>{e.ac.abort(kn)}),e.ac=null);try{e.f|=Bo;var f=e.fn,d=f();e.f|=ai;var c=e.deps,y=me==null?void 0:me.is_fork;if(je!==null){var v;if(y||Xr(e,rt),c!==null&&rt>0)for(c.length=rt+je.length,v=0;v<je.length;v++)c[rt+v]=je[v];else e.deps=c=je;if(Ss()&&e.f&ht)for(v=rt;v<c.length;v++)((_=c[v]).reactions??(_.reactions=[])).push(e)}else!y&&c!==null&&rt<c.length&&(Xr(e,rt),c.length=rt);if(li()&&ct!==null&&!St&&c!==null&&!(e.f&(Ke|yt|Ye)))for(v=0;v<ct.length;v++)$l(ct[v],e);if(i!==null&&i!==e){if(In++,i.deps!==null)for(let p=0;p<n;p+=1)i.deps[p].rv=In;if(t!==null)for(const p of t)p.rv=In;ct!==null&&(r===null?r=ct:r.push(...ct))}return e.f&mn&&(e.f^=mn),d}catch(p){return bl(p)}finally{e.f^=Bo,je=t,rt=n,ct=r,ce=i,gt=o,hr(s),St=a,Ln=l}}function Of(e,t){let n=t.reactions;if(n!==null){var r=Sc.call(n,e);if(r!==-1){var i=n.length-1;i===0?n=t.reactions=null:(n[r]=n[i],n.pop())}}if(n===null&&t.f&Ke&&(je===null||!dr.call(je,t))){var o=t;o.f&ht&&(o.f^=ht,o.f&=~Vn),ws(o),pf(o),Xr(o,0)}}function Xr(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)Of(e,n[r])}function Bn(e){var t=e.f;if(!(t&$t)){Pe(e,ze);var n=we,r=Di;we=e,Di=!0;try{t&(rn|ys)?Mf(e):ks(e),Wl(e);var i=eu(e);e.teardown=typeof i=="function"?i:null,e.wv=Ql;var o;Vo&&$c&&e.f&Ye&&e.deps}finally{Di=r,we=n}}}async function Df(){await Promise.resolve(),af()}function h(e){var t=e.f,n=(t&Ke)!==0;if(ce!==null&&!St){var r=we!==null&&(we.f&$t)!==0;if(!r&&(gt===null||!dr.call(gt,e))){var i=ce.deps;if(ce.f&Bo)e.rv<In&&(e.rv=In,je===null&&i!==null&&i[rt]===e?rt++:je===null?je=[e]:je.push(e));else{(ce.deps??(ce.deps=[])).push(e);var o=e.reactions;o===null?e.reactions=[ce]:dr.call(o,ce)||o.push(ce)}}}if(bn&&pn.has(e))return pn.get(e);if(n){var s=e;if(bn){var a=s.v;return(!(s.f&ze)&&s.reactions!==null||nu(s))&&(a=bs(s)),pn.set(s,a),a}var l=(s.f&ht)===0&&!St&&ce!==null&&(Di||(ce.f&ht)!==0),u=(s.f&ai)===0;Sr(s)&&(l&&(s.f|=ht),Tl(s)),l&&!u&&(Ol(s),tu(s))}if(Be!=null&&Be.has(e))return Be.get(e);if(e.f&mn)throw e.v;return e.v}function tu(e){if(e.f|=ht,e.deps!==null)for(const t of e.deps)(t.reactions??(t.reactions=[])).push(e),t.f&Ke&&!(t.f&ht)&&(Ol(t),tu(t))}function nu(e){if(e.v===Re)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(pn.has(t)||t.f&Ke&&nu(t))return!0;return!1}function Je(e){var t=St;try{return St=!0,e()}finally{St=t}}function zf(e,t){var n={};for(var r in e)t.includes(r)||(n[r]=e[r]);for(var i of Object.getOwnPropertySymbols(e))Object.propertyIsEnumerable.call(e,i)&&!t.includes(i)&&(n[i]=e[i]);return n}function Is(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Rt in e)Uo(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&Rt in n&&Uo(n)}}}function Uo(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{Uo(e[r],t)}catch{}const n=ao(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=sl(n);for(let i in r){const o=r[i].get;if(o)try{o.call(e)}catch{}}}}}function Rf(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const Lf=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function Ff(e){return Lf.includes(e)}const Vf={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function Hf(e){return e=e.toLowerCase(),Vf[e]??e}const Bf=["touchstart","touchmove"];function Kf(e){return Bf.includes(e)}const ru=new Set,jo=new Set;function As(e,t,n,r={}){function i(o){if(r.capture||Jo.call(t,o),!o.cancelBubble)return Es(()=>n==null?void 0:n.call(this,o))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Lt(()=>{t.addEventListener(e,i,r)}):t.addEventListener(e,i,r),i}function Qo(e,t,n,r={}){var i=As(t,e,n,r);return()=>{e.removeEventListener(t,i,r)}}function Hi(e,t,n,r,i){var o={capture:r,passive:i},s=As(e,t,n,o);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Ns(()=>{t.removeEventListener(e,s,o)})}function Ms(e){for(var t=0;t<e.length;t++)ru.add(e[t]);for(var n of jo)n(e)}let ua=null;function Jo(e){var p;var t=this,n=t.ownerDocument,r=e.type,i=((p=e.composedPath)==null?void 0:p.call(e))||[],o=i[0]||e.target;ua=e;var s=0,a=ua===e&&e.__root;if(a){var l=i.indexOf(a);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var u=i.indexOf(t);if(u===-1)return;l<=u&&(s=l)}if(o=i[s]||e.target,o!==t){Nc(e,"currentTarget",{configurable:!0,get(){return o||n}});var f=ce,d=we;vt(null),Ht(null);try{for(var c,y=[];o!==null;){var v=o.assignedSlot||o.parentNode||o.host||null;try{var _=o["__"+r];_!=null&&(!o.disabled||e.target===o)&&_.call(o,e)}catch(b){c?y.push(b):c=b}if(e.cancelBubble||v===t||v===null)break;o=v}if(c){for(let b of y)queueMicrotask(()=>{throw b});throw c}}finally{e.__root=t,delete e.currentTarget,vt(f),Ht(d)}}}var rl,il;const No=(il=(rl=globalThis==null?void 0:globalThis.window)==null?void 0:rl.trustedTypes)==null?void 0:il.createPolicy("svelte-trusted-html",{createHTML:e=>e});function Yf(e){return(No==null?void 0:No.createHTML(e))??e}function iu(e,t=!1){var n=Ef("template");return e=e.replaceAll("<!>","<!---->"),n.innerHTML=t?Yf(e):e,n.content}function vr(e,t){var n=we;n.nodes===null&&(n.nodes={start:e,end:t,a:null,t:null})}function Ie(e,t){var n=(t&yl)!==0,r=(t&Uc)!==0,i,o=!e.startsWith("<!>");return()=>{i===void 0&&(i=iu(o?e:"<!>"+e,!0),n||(i=Ut(i)));var s=r||Rl?document.importNode(i,!0):i.cloneNode(!0);if(n){var a=Ut(s),l=s.lastChild;vr(a,l)}else vr(s,s);return s}}function Xf(e,t,n="svg"){var r=!e.startsWith("<!>"),i=(t&yl)!==0,o=`<${n}>${r?e:"<!>"+e}</${n}>`,s;return()=>{if(!s){var a=iu(o,!0),l=Ut(a);if(i)for(s=document.createDocumentFragment();Ut(l);)s.appendChild(Ut(l));else s=Ut(l)}var u=s.cloneNode(!0);if(i){var f=Ut(u),d=u.lastChild;vr(f,d)}else vr(u,u);return u}}function pt(e,t){return Xf(e,t,"svg")}function Wf(e=""){{var t=tn(e+"");return vr(t,t),t}}function En(){var e=document.createDocumentFragment(),t=document.createComment(""),n=tn();return e.append(t,n),vr(t,n),e}function ie(e,t){e!==null&&e.before(t)}function _n(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n+"")}function qf(e,t){return Zf(e,t)}const Ei=new Map;function Zf(e,{target:t,anchor:n,props:r={},events:i,context:o,intro:s=!0}){xf();var a=new Set,l=d=>{for(var c=0;c<d.length;c++){var y=d[c];if(!a.has(y)){a.add(y);var v=Kf(y);for(const b of[t,document]){var _=Ei.get(b);_===void 0&&(_=new Map,Ei.set(b,_));var p=_.get(y);p===void 0?(b.addEventListener(y,Jo,{passive:v}),_.set(y,1)):_.set(y,p+1)}}}};l(so(ru)),jo.add(l);var u=void 0,f=kf(()=>{var d=n??t.appendChild(tn());return cf(d,{pending:()=>{}},c=>{he({});var y=_e;o&&(y.c=o),i&&(r.$$events=i),u=e(c,r)||{},ge()}),()=>{var _;for(var c of a)for(const p of[t,document]){var y=Ei.get(p),v=y.get(c);--v==0?(p.removeEventListener(c,Jo),y.delete(c),y.size===0&&Ei.delete(p)):y.set(c,v)}jo.delete(l),d!==n&&((_=d.parentNode)==null||_.removeChild(d))}});return Gf.set(u,f),u}let Gf=new WeakMap;var wt,Dt,it,zn,$r,ei,ro;class Ps{constructor(t,n=!0){Ne(this,"anchor");R(this,wt,new Map);R(this,Dt,new Map);R(this,it,new Map);R(this,zn,new Set);R(this,$r,!0);R(this,ei,()=>{var t=me;if(g(this,wt).has(t)){var n=g(this,wt).get(t),r=g(this,Dt).get(n);if(r)Cs(r),g(this,zn).delete(n);else{var i=g(this,it).get(n);i&&(g(this,Dt).set(n,i.effect),g(this,it).delete(n),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),r=i.effect)}for(const[o,s]of g(this,wt)){if(g(this,wt).delete(o),o===t)break;const a=g(this,it).get(s);a&&(Le(a.effect),g(this,it).delete(s))}for(const[o,s]of g(this,Dt)){if(o===n||g(this,zn).has(o))continue;const a=()=>{if(Array.from(g(this,wt).values()).includes(o)){var u=document.createDocumentFragment();Ul(s,u),u.append(tn()),g(this,it).set(o,{effect:s,fragment:u})}else Le(s);g(this,zn).delete(o),g(this,Dt).delete(o)};g(this,$r)||!r?(g(this,zn).add(o),Rn(s,a,!1)):a()}}});R(this,ro,t=>{g(this,wt).delete(t);const n=Array.from(g(this,wt).values());for(const[r,i]of g(this,it))n.includes(r)||(Le(i.effect),g(this,it).delete(r))});this.anchor=t,oe(this,$r,n)}ensure(t,n){var r=me,i=Vl();if(n&&!g(this,Dt).has(t)&&!g(this,it).has(t))if(i){var o=document.createDocumentFragment(),s=tn();o.append(s),g(this,it).set(t,{effect:Qe(()=>n(s)),fragment:o})}else g(this,Dt).set(t,Qe(()=>n(this.anchor)));if(g(this,wt).set(r,t),i){for(const[a,l]of g(this,Dt))a===t?r.unskip_effect(l):r.skip_effect(l);for(const[a,l]of g(this,it))a===t?r.unskip_effect(l.effect):r.skip_effect(l.effect);r.oncommit(g(this,ei)),r.ondiscard(g(this,ro))}else g(this,ei).call(this)}}wt=new WeakMap,Dt=new WeakMap,it=new WeakMap,zn=new WeakMap,$r=new WeakMap,ei=new WeakMap,ro=new WeakMap;function st(e,t,n=!1){var r=new Ps(e),i=n?xn:0;function o(s,a){r.ensure(s,a)}hi(()=>{var s=!1;t((a,l=0)=>{s=!0,o(l,a)}),s||o(!1,null)},i)}function Uf(e,t,n){for(var r=[],i=t.length,o,s=t.length,a=0;a<i;a++){let d=t[a];Rn(d,()=>{if(o){if(o.pending.delete(d),o.done.add(d),o.pending.size===0){var c=e.outrogroups;$o(so(o.done)),c.delete(o),c.size===0&&(e.outrogroups=null)}}else s-=1},!1)}if(s===0){var l=r.length===0&&n!==null;if(l){var u=n,f=u.parentNode;bf(f),f.append(u),e.items.clear()}$o(t,!l)}else o={pending:new Set(t),done:new Set},(e.outrogroups??(e.outrogroups=new Set)).add(o)}function $o(e,t=!0){for(var n=0;n<e.length;n++)Le(e[n],t)}var ca;function Ts(e,t,n,r,i,o=null){var s=e,a=new Map,l=(t&gl)!==0;if(l){var u=e;s=u.appendChild(tn())}var f=null,d=xs(()=>{var b=n();return ii(b)?b:b==null?[]:so(b)}),c,y=!0;function v(){p.fallback=f,jf(p,c,s,t,r),f!==null&&(c.length===0?f.f&jt?(f.f^=jt,Lr(f,null,s)):Cs(f):Rn(f,()=>{f=null}))}var _=hi(()=>{c=h(d);for(var b=c.length,A=new Set,P=me,w=Vl(),O=0;O<b;O+=1){var L=c[O],W=r(L,O),T=y?null:a.get(W);T?(T.v&&yr(T.v,L),T.i&&yr(T.i,O),w&&P.unskip_effect(T.e)):(T=Qf(a,y?s:ca??(ca=tn()),L,W,O,i,t,n),y||(T.e.f|=jt),a.set(W,T)),A.add(W)}if(b===0&&o&&!f&&(y?f=Qe(()=>o(s)):(f=Qe(()=>o(ca??(ca=tn()))),f.f|=jt)),b>A.size&&Mc(),!y)if(w){for(const[H,J]of a)A.has(H)||P.skip_effect(J.e);P.oncommit(v),P.ondiscard(()=>{})}else v();h(d)}),p={effect:_,items:a,outrogroups:null,fallback:f};y=!1}function Dr(e){for(;e!==null&&!(e.f&Ct);)e=e.next;return e}function jf(e,t,n,r,i){var J,M,x,I,m,C,N,F,B;var o=(r&Kc)!==0,s=t.length,a=e.items,l=Dr(e.effect.first),u,f=null,d,c=[],y=[],v,_,p,b;if(o)for(b=0;b<s;b+=1)v=t[b],_=i(v,b),p=a.get(_).e,p.f&jt||((M=(J=p.nodes)==null?void 0:J.a)==null||M.measure(),(d??(d=new Set)).add(p));for(b=0;b<s;b+=1){if(v=t[b],_=i(v,b),p=a.get(_).e,e.outrogroups!==null)for(const X of e.outrogroups)X.pending.delete(p),X.done.delete(p);if(p.f&jt)if(p.f^=jt,p===l)Lr(p,null,n);else{var A=f?f.next:l;p===e.effect.last&&(e.effect.last=p.prev),p.prev&&(p.prev.next=p.next),p.next&&(p.next.prev=p.prev),ln(e,f,p),ln(e,p,A),Lr(p,A,n),f=p,c=[],y=[],l=Dr(f.next);continue}if(p.f&ot&&(Cs(p),o&&((I=(x=p.nodes)==null?void 0:x.a)==null||I.unfix(),(d??(d=new Set)).delete(p))),p!==l){if(u!==void 0&&u.has(p)){if(c.length<y.length){var P=y[0],w;f=P.prev;var O=c[0],L=c[c.length-1];for(w=0;w<c.length;w+=1)Lr(c[w],P,n);for(w=0;w<y.length;w+=1)u.delete(y[w]);ln(e,O.prev,L.next),ln(e,f,O),ln(e,L,P),l=P,f=L,b-=1,c=[],y=[]}else u.delete(p),Lr(p,l,n),ln(e,p.prev,p.next),ln(e,p,f===null?e.effect.first:f.next),ln(e,f,p),f=p;continue}for(c=[],y=[];l!==null&&l!==p;)(u??(u=new Set)).add(l),y.push(l),l=Dr(l.next);if(l===null)continue}p.f&jt||c.push(p),f=p,l=Dr(p.next)}if(e.outrogroups!==null){for(const X of e.outrogroups)X.pending.size===0&&($o(so(X.done)),(m=e.outrogroups)==null||m.delete(X));e.outrogroups.size===0&&(e.outrogroups=null)}if(l!==null||u!==void 0){var W=[];if(u!==void 0)for(p of u)p.f&ot||W.push(p);for(;l!==null;)!(l.f&ot)&&l!==e.fallback&&W.push(l),l=Dr(l.next);var T=W.length;if(T>0){var H=r&gl&&s===0?n:null;if(o){for(b=0;b<T;b+=1)(N=(C=W[b].nodes)==null?void 0:C.a)==null||N.measure();for(b=0;b<T;b+=1)(B=(F=W[b].nodes)==null?void 0:F.a)==null||B.fix()}Uf(e,W,H)}}o&&Lt(()=>{var X,K;if(d!==void 0)for(p of d)(K=(X=p.nodes)==null?void 0:X.a)==null||K.apply()})}function Qf(e,t,n,r,i,o,s,a){var l=s&Hc?s&Yc?Hn(n):Jn(n,!1,!1):null,u=s&Bc?Hn(i):null;return{v:l,i:u,e:Qe(()=>(o(t,l??n,u??i,a),()=>{e.delete(r)}))}}function Lr(e,t,n){if(e.nodes)for(var r=e.nodes.start,i=e.nodes.end,o=t&&!(t.f&jt)?t.nodes.start:n;r!==null;){var s=ci(r);if(o.before(r),r===i)return;r=s}}function ln(e,t,n){t===null?e.effect.first=n:t.next=n,n===null?e.effect.last=t:n.prev=t}function on(e,t,...n){var r=new Ps(e);hi(()=>{const i=t()??null;r.ensure(i,i&&(o=>i(o,...n)))},xn)}function Os(e,t,n){var r=new Ps(e);hi(()=>{var i=t()??null;r.ensure(i,i&&(o=>n(o,i)))},xn)}function Ge(e,t,n){fi(()=>{var r=Je(()=>t(e,n==null?void 0:n())||{});if(n&&(r!=null&&r.update)){var i=!1,o={};di(()=>{var s=n();Is(s),i&&pl(o,s)&&(o=s,r.update(s))}),i=!0}if(r!=null&&r.destroy)return()=>r.destroy()})}function Jf(e,t){var n=void 0,r;Xl(()=>{n!==(n=t())&&(r&&(Le(r),r=null),n&&(r=Qe(()=>{fi(()=>n(e))})))})}function ou(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=ou(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function $f(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=ou(e))&&(r&&(r+=" "),r+=t);return r}function Gn(e){return typeof e=="object"?$f(e):e??""}const fa=[...` 	
\r\fÂ \v\uFEFF`];function ed(e,t,n){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),n){for(var i in n)if(n[i])r=r?r+" "+i:i;else if(r.length)for(var o=i.length,s=0;(s=r.indexOf(i,s))>=0;){var a=s+o;(s===0||fa.includes(r[s-1]))&&(a===r.length||fa.includes(r[a]))?r=(s===0?"":r.substring(0,s))+r.substring(a+1):s=a}}return r===""?null:r}function da(e,t=!1){var n=t?" !important;":";",r="";for(var i in e){var o=e[i];o!=null&&o!==""&&(r+=" "+i+": "+o+n)}return r}function ko(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function td(e,t){if(t){var n="",r,i;if(Array.isArray(t)?(r=t[0],i=t[1]):r=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var o=!1,s=0,a=!1,l=[];r&&l.push(...Object.keys(r).map(ko)),i&&l.push(...Object.keys(i).map(ko));var u=0,f=-1;const _=e.length;for(var d=0;d<_;d++){var c=e[d];if(a?c==="/"&&e[d-1]==="*"&&(a=!1):o?o===c&&(o=!1):c==="/"&&e[d+1]==="*"?a=!0:c==='"'||c==="'"?o=c:c==="("?s++:c===")"&&s--,!a&&o===!1&&s===0){if(c===":"&&f===-1)f=d;else if(c===";"||d===_-1){if(f!==-1){var y=ko(e.substring(u,f).trim());if(!l.includes(y)){c!==";"&&d++;var v=e.substring(u,d).trim();n+=" "+v+";"}}u=d+1,f=-1}}}}return r&&(n+=da(r)),i&&(n+=da(i,!0)),n=n.trim(),n===""?null:n}return e==null?null:String(e)}function Nn(e,t,n,r,i,o){var s=e.__className;if(s!==n||s===void 0){var a=ed(n,r,o);a==null?e.removeAttribute("class"):t?e.className=a:e.setAttribute("class",a),e.__className=n}else if(o&&i!==o)for(var l in o){var u=!!o[l];(i==null||u!==!!i[l])&&e.classList.toggle(l,u)}return o}function Co(e,t={},n,r){for(var i in n){var o=n[i];t[i]!==o&&(n[i]==null?e.style.removeProperty(i):e.style.setProperty(i,o,r))}}function kt(e,t,n,r){var i=e.__style;if(i!==t){var o=td(t,r);o==null?e.removeAttribute("style"):e.style.cssText=o,e.__style=t}else r&&(Array.isArray(r)?(Co(e,n==null?void 0:n[0],r[0]),Co(e,n==null?void 0:n[1],r[1],"important")):Co(e,n,r));return r}function es(e,t,n=!1){if(e.multiple){if(t==null)return;if(!ii(t))return Qc();for(var r of e.options)r.selected=t.includes(ha(r));return}for(r of e.options){var i=ha(r);if(wf(i,t)){r.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function nd(e){var t=new MutationObserver(()=>{es(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Ns(()=>{t.disconnect()})}function ha(e){return"__value"in e?e.__value:e.value}const un=Symbol("class"),cn=Symbol("style"),su=Symbol("is custom element"),au=Symbol("is html"),rd=hl?"option":"OPTION",id=hl?"select":"SELECT";function od(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function de(e,t,n,r){var i=lu(e);i[t]!==(i[t]=n)&&(t==="loading"&&(e[Ic]=n),n==null?e.removeAttribute(t):typeof n!="string"&&uu(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function sd(e,t,n,r,i=!1,o=!1){var s=lu(e),a=s[su],l=!s[au],u=t||{},f=e.nodeName===rd;for(var d in t)d in n||(n[d]=null);n.class?n.class=Gn(n.class):(r||n[un])&&(n.class=null),n[cn]&&(n.style??(n.style=null));var c=uu(e);for(const w in n){let O=n[w];if(f&&w==="value"&&O==null){e.value=e.__value="",u[w]=O;continue}if(w==="class"){var y=e.namespaceURI==="http://www.w3.org/1999/xhtml";Nn(e,y,O,r,t==null?void 0:t[un],n[un]),u[w]=O,u[un]=n[un];continue}if(w==="style"){kt(e,O,t==null?void 0:t[cn],n[cn]),u[w]=O,u[cn]=n[cn];continue}var v=u[w];if(!(O===v&&!(O===void 0&&e.hasAttribute(w)))){u[w]=O;var _=w[0]+w[1];if(_!=="$$")if(_==="on"){const L={},W="$$"+w;let T=w.slice(2);var p=Ff(T);if(Rf(T)&&(T=T.slice(0,-7),L.capture=!0),!p&&v){if(O!=null)continue;e.removeEventListener(T,u[W],L),u[W]=null}if(O!=null)if(p)e[`__${T}`]=O,Ms([T]);else{let H=function(J){u[w].call(this,J)};var P=H;u[W]=As(T,e,H,L)}else p&&(e[`__${T}`]=void 0)}else if(w==="style")de(e,w,O);else if(w==="autofocus")Sf(e,!!O);else if(!a&&(w==="__value"||w==="value"&&O!=null))e.value=e.__value=O;else if(w==="selected"&&f)od(e,O);else{var b=w;l||(b=Hf(b));var A=b==="defaultValue"||b==="defaultChecked";if(O==null&&!a&&!A)if(s[w]=null,b==="value"||b==="checked"){let L=e;const W=t===void 0;if(b==="value"){let T=L.defaultValue;L.removeAttribute(b),L.defaultValue=T,L.value=L.__value=W?T:null}else{let T=L.defaultChecked;L.removeAttribute(b),L.defaultChecked=T,L.checked=W?T:!1}}else e.removeAttribute(w);else A||c.includes(b)&&(a||typeof O!="string")?(e[b]=O,b in s&&(s[b]=Re)):typeof O!="function"&&de(e,b,O)}}}return u}function Un(e,t,n=[],r=[],i=[],o,s=!1,a=!1){Pl(i,n,r,l=>{var u=void 0,f={},d=e.nodeName===id,c=!1;if(Xl(()=>{var v=t(...l.map(h)),_=sd(e,u,v,o,s,a);c&&d&&"value"in v&&es(e,v.value);for(let b of Object.getOwnPropertySymbols(f))v[b]||Le(f[b]);for(let b of Object.getOwnPropertySymbols(v)){var p=v[b];b.description===jc&&(!u||p!==u[b])&&(f[b]&&Le(f[b]),f[b]=Qe(()=>Jf(e,()=>p))),_[b]=p}u=_}),d){var y=e;fi(()=>{es(y,u.value,!0),nd(y)})}c=!0})}function lu(e){return e.__attributes??(e.__attributes={[su]:e.nodeName.includes("-"),[au]:e.namespaceURI===vl})}var ga=new Map;function uu(e){var t=e.getAttribute("is")||e.nodeName,n=ga.get(t);if(n)return n;ga.set(t,n=[]);for(var r,i=e,o=Element.prototype;o!==i;){r=sl(i);for(var s in r)r[s].set&&n.push(s);i=ao(i)}return n}var gn,fr,ti,io,cu;const oo=class oo{constructor(t){R(this,io);R(this,gn,new WeakMap);R(this,fr);R(this,ti);oe(this,ti,t)}observe(t,n){var r=g(this,gn).get(t)||new Set;return r.add(n),g(this,gn).set(t,r),He(this,io,cu).call(this).observe(t,g(this,ti)),()=>{var i=g(this,gn).get(t);i.delete(n),i.size===0&&(g(this,gn).delete(t),g(this,fr).unobserve(t))}}};gn=new WeakMap,fr=new WeakMap,ti=new WeakMap,io=new WeakSet,cu=function(){return g(this,fr)??oe(this,fr,new ResizeObserver(t=>{for(var n of t){oo.entries.set(n.target,n);for(var r of g(this,gn).get(n.target)||[])r(n)}}))},Ne(oo,"entries",new WeakMap);let ts=oo;var ad=new ts({box:"border-box"});function ya(e,t,n){var r=ad.observe(e,()=>n(e[t]));fi(()=>(Je(()=>n(e[t])),r))}function va(e,t){return e===t||(e==null?void 0:e[Rt])===t}function gi(e={},t,n,r){return fi(()=>{var i,o;return di(()=>{i=o,o=[],Je(()=>{e!==n(...o)&&(t(e,...o),i&&va(n(...i),e)&&t(null,...i))})}),()=>{Lt(()=>{o&&va(n(...o),e)&&t(null,...o)})}}),e}function Ds(e=!1){const t=_e,n=t.l.u;if(!n)return;let r=()=>Is(t.s);if(e){let i=0,o={};const s=ui(()=>{let a=!1;const l=t.s;for(const u in l)l[u]!==o[u]&&(o[u]=l[u],a=!0);return a&&i++,i});r=()=>h(s)}n.b.length&&Kl(()=>{ma(t,r),Ho(n.b)}),Vt(()=>{const i=Je(()=>n.m.map(Cc));return()=>{for(const o of i)typeof o=="function"&&o()}}),n.a.length&&Vt(()=>{ma(t,r),Ho(n.a)})}function ma(e,t){if(e.l.s)for(const n of e.l.s)h(n);t()}let Si=!1;function ld(e){var t=Si;try{return Si=!1,[e(),Si]}finally{Si=t}}const ud={get(e,t){if(!e.exclude.includes(t))return e.props[t]},set(e,t){return!1},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function yi(e,t,n){return new Proxy({props:e,exclude:t},ud)}const cd={get(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(Or(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r)return r[t]}},set(e,t,n){let r=e.props.length;for(;r--;){let i=e.props[r];Or(i)&&(i=i());const o=vn(i,t);if(o&&o.set)return o.set(n),!0}return!1},getOwnPropertyDescriptor(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(Or(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r){const i=vn(r,t);return i&&!i.configurable&&(i.configurable=!0),i}}},has(e,t){if(t===Rt||t===dl)return!1;for(let n of e.props)if(Or(n)&&(n=n()),n!=null&&t in n)return!0;return!1},ownKeys(e){const t=[];for(let n of e.props)if(Or(n)&&(n=n()),!!n){for(const r in n)t.includes(r)||t.push(r);for(const r of Object.getOwnPropertySymbols(n))t.includes(r)||t.push(r)}return t}};function fd(...e){return new Proxy({props:e},cd)}function Q(e,t,n,r){var P;var i=!Er||(n&Wc)!==0,o=(n&Zc)!==0,s=(n&Gc)!==0,a=r,l=!0,u=()=>(l&&(l=!1,a=s?Je(r):r),a),f;if(o){var d=Rt in e||dl in e;f=((P=vn(e,t))==null?void 0:P.set)??(d&&t in e?w=>e[t]=w:void 0)}var c,y=!1;o?[c,y]=ld(()=>e[t]):c=e[t],c===void 0&&r!==void 0&&(c=u(),f&&(i&&zc(),f(c)));var v;if(i?v=()=>{var w=e[t];return w===void 0?u():(l=!0,w)}:v=()=>{var w=e[t];return w!==void 0&&(a=void 0),w===void 0?a:w},i&&!(n&qc))return v;if(f){var _=e.$$legacy;return function(w,O){return arguments.length>0?((!i||!O||_||y)&&f(O?v():w),w):v()}}var p=!1,b=(n&Xc?ui:xs)(()=>(p=!1,v()));o&&h(b);var A=we;return function(w,O){if(arguments.length>0){const L=O?h(b):i&&o?yn(w):w;return Y(b,L),p=!0,a!==void 0&&(a=L),w}return bn&&p||A.f&$t?b.v:h(b)}}function fu(e){_e===null&&lo(),Er&&_e.l!==null?gd(_e).m.push(e):Vt(()=>{const t=Je(e);if(typeof t=="function")return t})}function co(e){_e===null&&lo(),fu(()=>()=>Je(e))}function dd(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}function hd(){const e=_e;return e===null&&lo(),(t,n,r)=>{var o;const i=(o=e.s.$$events)==null?void 0:o[t];if(i){const s=ii(i)?i.slice():[i],a=dd(t,n,r);for(const l of s)l.call(e.x,a);return!a.defaultPrevented}return!0}}function gd(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const yd="5";var ol;typeof window<"u"&&((ol=window.__svelte??(window.__svelte={})).v??(ol.v=new Set)).add(yd);ef();var vd={value:()=>{}};function fo(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new zi(n)}function zi(e){this._=e}function md(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}zi.prototype=fo.prototype={constructor:zi,on:function(e,t){var n=this._,r=md(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=pd(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=pa(n[i],e.name,t);else if(t==null)for(i in n)n[i]=pa(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new zi(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function pd(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function pa(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=vd,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var ns="http://www.w3.org/1999/xhtml";const _a={svg:"http://www.w3.org/2000/svg",xhtml:ns,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ho(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),_a.hasOwnProperty(t)?{space:_a[t],local:e}:e}function _d(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ns&&t.documentElement.namespaceURI===ns?t.createElement(e):t.createElementNS(n,e)}}function wd(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function du(e){var t=ho(e);return(t.local?wd:_d)(t)}function xd(){}function zs(e){return e==null?xd:function(){return this.querySelector(e)}}function bd(e){typeof e!="function"&&(e=zs(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=new Array(s),l,u,f=0;f<s;++f)(l=o[f])&&(u=e.call(l,l.__data__,f,o))&&("__data__"in l&&(u.__data__=l.__data__),a[f]=u);return new at(r,this._parents)}function Ed(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Sd(){return[]}function hu(e){return e==null?Sd:function(){return this.querySelectorAll(e)}}function Nd(e){return function(){return Ed(e.apply(this,arguments))}}function kd(e){typeof e=="function"?e=Nd(e):e=hu(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var s=t[o],a=s.length,l,u=0;u<a;++u)(l=s[u])&&(r.push(e.call(l,l.__data__,u,s)),i.push(l));return new at(r,i)}function gu(e){return function(){return this.matches(e)}}function yu(e){return function(t){return t.matches(e)}}var Cd=Array.prototype.find;function Id(e){return function(){return Cd.call(this.children,e)}}function Ad(){return this.firstElementChild}function Md(e){return this.select(e==null?Ad:Id(typeof e=="function"?e:yu(e)))}var Pd=Array.prototype.filter;function Td(){return Array.from(this.children)}function Od(e){return function(){return Pd.call(this.children,e)}}function Dd(e){return this.selectAll(e==null?Td:Od(typeof e=="function"?e:yu(e)))}function zd(e){typeof e!="function"&&(e=gu(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],l,u=0;u<s;++u)(l=o[u])&&e.call(l,l.__data__,u,o)&&a.push(l);return new at(r,this._parents)}function vu(e){return new Array(e.length)}function Rd(){return new at(this._enter||this._groups.map(vu),this._parents)}function Bi(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Bi.prototype={constructor:Bi,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Ld(e){return function(){return e}}function Fd(e,t,n,r,i,o){for(var s=0,a,l=t.length,u=o.length;s<u;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new Bi(e,o[s]);for(;s<l;++s)(a=t[s])&&(i[s]=a)}function Vd(e,t,n,r,i,o,s){var a,l,u=new Map,f=t.length,d=o.length,c=new Array(f),y;for(a=0;a<f;++a)(l=t[a])&&(c[a]=y=s.call(l,l.__data__,a,t)+"",u.has(y)?i[a]=l:u.set(y,l));for(a=0;a<d;++a)y=s.call(e,o[a],a,o)+"",(l=u.get(y))?(r[a]=l,l.__data__=o[a],u.delete(y)):n[a]=new Bi(e,o[a]);for(a=0;a<f;++a)(l=t[a])&&u.get(c[a])===l&&(i[a]=l)}function Hd(e){return e.__data__}function Bd(e,t){if(!arguments.length)return Array.from(this,Hd);var n=t?Vd:Fd,r=this._parents,i=this._groups;typeof e!="function"&&(e=Ld(e));for(var o=i.length,s=new Array(o),a=new Array(o),l=new Array(o),u=0;u<o;++u){var f=r[u],d=i[u],c=d.length,y=Kd(e.call(f,f&&f.__data__,u,r)),v=y.length,_=a[u]=new Array(v),p=s[u]=new Array(v),b=l[u]=new Array(c);n(f,d,_,p,b,y,t);for(var A=0,P=0,w,O;A<v;++A)if(w=_[A]){for(A>=P&&(P=A+1);!(O=p[P])&&++P<v;);w._next=O||null}}return s=new at(s,r),s._enter=a,s._exit=l,s}function Kd(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Yd(){return new at(this._exit||this._groups.map(vu),this._parents)}function Xd(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Wd(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),l=0;l<s;++l)for(var u=n[l],f=r[l],d=u.length,c=a[l]=new Array(d),y,v=0;v<d;++v)(y=u[v]||f[v])&&(c[v]=y);for(;l<i;++l)a[l]=n[l];return new at(a,this._parents)}function qd(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function Zd(e){e||(e=Gd);function t(d,c){return d&&c?e(d.__data__,c.__data__):!d-!c}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,l=i[o]=new Array(a),u,f=0;f<a;++f)(u=s[f])&&(l[f]=u);l.sort(t)}return new at(i,this._parents).order()}function Gd(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Ud(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function jd(){return Array.from(this)}function Qd(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function Jd(){let e=0;for(const t of this)++e;return e}function $d(){return!this.node()}function eh(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this}function th(e){return function(){this.removeAttribute(e)}}function nh(e){return function(){this.removeAttributeNS(e.space,e.local)}}function rh(e,t){return function(){this.setAttribute(e,t)}}function ih(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function oh(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function sh(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function ah(e,t){var n=ho(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?nh:th:typeof t=="function"?n.local?sh:oh:n.local?ih:rh)(n,t))}function mu(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function lh(e){return function(){this.style.removeProperty(e)}}function uh(e,t,n){return function(){this.style.setProperty(e,t,n)}}function ch(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function fh(e,t,n){return arguments.length>1?this.each((t==null?lh:typeof t=="function"?ch:uh)(e,t,n??"")):mr(this.node(),e)}function mr(e,t){return e.style.getPropertyValue(t)||mu(e).getComputedStyle(e,null).getPropertyValue(t)}function dh(e){return function(){delete this[e]}}function hh(e,t){return function(){this[e]=t}}function gh(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function yh(e,t){return arguments.length>1?this.each((t==null?dh:typeof t=="function"?gh:hh)(e,t)):this.node()[e]}function pu(e){return e.trim().split(/^|\s+/)}function Rs(e){return e.classList||new _u(e)}function _u(e){this._node=e,this._names=pu(e.getAttribute("class")||"")}_u.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function wu(e,t){for(var n=Rs(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function xu(e,t){for(var n=Rs(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function vh(e){return function(){wu(this,e)}}function mh(e){return function(){xu(this,e)}}function ph(e,t){return function(){(t.apply(this,arguments)?wu:xu)(this,e)}}function _h(e,t){var n=pu(e+"");if(arguments.length<2){for(var r=Rs(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?ph:t?vh:mh)(n,t))}function wh(){this.textContent=""}function xh(e){return function(){this.textContent=e}}function bh(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Eh(e){return arguments.length?this.each(e==null?wh:(typeof e=="function"?bh:xh)(e)):this.node().textContent}function Sh(){this.innerHTML=""}function Nh(e){return function(){this.innerHTML=e}}function kh(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Ch(e){return arguments.length?this.each(e==null?Sh:(typeof e=="function"?kh:Nh)(e)):this.node().innerHTML}function Ih(){this.nextSibling&&this.parentNode.appendChild(this)}function Ah(){return this.each(Ih)}function Mh(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ph(){return this.each(Mh)}function Th(e){var t=typeof e=="function"?e:du(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Oh(){return null}function Dh(e,t){var n=typeof e=="function"?e:du(e),r=t==null?Oh:typeof t=="function"?t:zs(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function zh(){var e=this.parentNode;e&&e.removeChild(this)}function Rh(){return this.each(zh)}function Lh(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Fh(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Vh(e){return this.select(e?Fh:Lh)}function Hh(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Bh(e){return function(t){e.call(this,t,this.__data__)}}function Kh(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Yh(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function Xh(e,t,n){return function(){var r=this.__on,i,o=Bh(t);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Wh(e,t,n){var r=Kh(e+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,f;l<u;++l)for(i=0,f=a[l];i<o;++i)if((s=r[i]).type===f.type&&s.name===f.name)return f.value}return}for(a=t?Xh:Yh,i=0;i<o;++i)this.each(a(r[i],t,n));return this}function bu(e,t,n){var r=mu(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function qh(e,t){return function(){return bu(this,e,t)}}function Zh(e,t){return function(){return bu(this,e,t.apply(this,arguments))}}function Gh(e,t){return this.each((typeof t=="function"?Zh:qh)(e,t))}function*Uh(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var Eu=[null];function at(e,t){this._groups=e,this._parents=t}function vi(){return new at([[document.documentElement]],Eu)}function jh(){return this}at.prototype=vi.prototype={constructor:at,select:bd,selectAll:kd,selectChild:Md,selectChildren:Dd,filter:zd,data:Bd,enter:Rd,exit:Yd,join:Xd,merge:Wd,selection:jh,order:qd,sort:Zd,call:Ud,nodes:jd,node:Qd,size:Jd,empty:$d,each:eh,attr:ah,style:fh,property:yh,classed:_h,text:Eh,html:Ch,raise:Ah,lower:Ph,append:Th,insert:Dh,remove:Rh,clone:Vh,datum:Hh,on:Wh,dispatch:Gh,[Symbol.iterator]:Uh};function xt(e){return typeof e=="string"?new at([[document.querySelector(e)]],[document.documentElement]):new at([[e]],Eu)}function Qh(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Mt(e,t){if(e=Qh(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Jh={passive:!1},Wr={capture:!0,passive:!1};function Io(e){e.stopImmediatePropagation()}function er(e){e.preventDefault(),e.stopImmediatePropagation()}function Su(e){var t=e.document.documentElement,n=xt(e).on("dragstart.drag",er,Wr);"onselectstart"in t?n.on("selectstart.drag",er,Wr):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Nu(e,t){var n=e.document.documentElement,r=xt(e).on("dragstart.drag",null);t&&(r.on("click.drag",er,Wr),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Ni=e=>()=>e;function rs(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:o,x:s,y:a,dx:l,dy:u,dispatch:f}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:f}})}rs.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function $h(e){return!e.ctrlKey&&!e.button}function eg(){return this.parentNode}function tg(e,t){return t??{x:e.x,y:e.y}}function ng(){return navigator.maxTouchPoints||"ontouchstart"in this}function rg(){var e=$h,t=eg,n=tg,r=ng,i={},o=fo("start","drag","end"),s=0,a,l,u,f,d=0;function c(w){w.on("mousedown.drag",y).filter(r).on("touchstart.drag",p).on("touchmove.drag",b,Jh).on("touchend.drag touchcancel.drag",A).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(w,O){if(!(f||!e.call(this,w,O))){var L=P(this,t.call(this,w,O),w,O,"mouse");L&&(xt(w.view).on("mousemove.drag",v,Wr).on("mouseup.drag",_,Wr),Su(w.view),Io(w),u=!1,a=w.clientX,l=w.clientY,L("start",w))}}function v(w){if(er(w),!u){var O=w.clientX-a,L=w.clientY-l;u=O*O+L*L>d}i.mouse("drag",w)}function _(w){xt(w.view).on("mousemove.drag mouseup.drag",null),Nu(w.view,u),er(w),i.mouse("end",w)}function p(w,O){if(e.call(this,w,O)){var L=w.changedTouches,W=t.call(this,w,O),T=L.length,H,J;for(H=0;H<T;++H)(J=P(this,W,w,O,L[H].identifier,L[H]))&&(Io(w),J("start",w,L[H]))}}function b(w){var O=w.changedTouches,L=O.length,W,T;for(W=0;W<L;++W)(T=i[O[W].identifier])&&(er(w),T("drag",w,O[W]))}function A(w){var O=w.changedTouches,L=O.length,W,T;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),W=0;W<L;++W)(T=i[O[W].identifier])&&(Io(w),T("end",w,O[W]))}function P(w,O,L,W,T,H){var J=o.copy(),M=Mt(H||L,O),x,I,m;if((m=n.call(w,new rs("beforestart",{sourceEvent:L,target:c,identifier:T,active:s,x:M[0],y:M[1],dx:0,dy:0,dispatch:J}),W))!=null)return x=m.x-M[0]||0,I=m.y-M[1]||0,function C(N,F,B){var X=M,K;switch(N){case"start":i[T]=C,K=s++;break;case"end":delete i[T],--s;case"drag":M=Mt(B||F,O),K=s;break}J.call(N,w,new rs(N,{sourceEvent:F,subject:m,target:c,identifier:T,active:K,x:M[0]+x,y:M[1]+I,dx:M[0]-X[0],dy:M[1]-X[1],dispatch:J}),W)}}return c.filter=function(w){return arguments.length?(e=typeof w=="function"?w:Ni(!!w),c):e},c.container=function(w){return arguments.length?(t=typeof w=="function"?w:Ni(w),c):t},c.subject=function(w){return arguments.length?(n=typeof w=="function"?w:Ni(w),c):n},c.touchable=function(w){return arguments.length?(r=typeof w=="function"?w:Ni(!!w),c):r},c.on=function(){var w=o.on.apply(o,arguments);return w===o?c:w},c.clickDistance=function(w){return arguments.length?(d=(w=+w)*w,c):Math.sqrt(d)},c}function Ls(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ku(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function mi(){}var qr=.7,Ki=1/qr,tr="\\s*([+-]?\\d+)\\s*",Zr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ft="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ig=/^#([0-9a-f]{3,8})$/,og=new RegExp(`^rgb\\(${tr},${tr},${tr}\\)$`),sg=new RegExp(`^rgb\\(${Ft},${Ft},${Ft}\\)$`),ag=new RegExp(`^rgba\\(${tr},${tr},${tr},${Zr}\\)$`),lg=new RegExp(`^rgba\\(${Ft},${Ft},${Ft},${Zr}\\)$`),ug=new RegExp(`^hsl\\(${Zr},${Ft},${Ft}\\)$`),cg=new RegExp(`^hsla\\(${Zr},${Ft},${Ft},${Zr}\\)$`),wa={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ls(mi,Kn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:xa,formatHex:xa,formatHex8:fg,formatHsl:dg,formatRgb:ba,toString:ba});function xa(){return this.rgb().formatHex()}function fg(){return this.rgb().formatHex8()}function dg(){return Cu(this).formatHsl()}function ba(){return this.rgb().formatRgb()}function Kn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ig.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Ea(t):n===3?new $e(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?ki(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?ki(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=og.exec(e))?new $e(t[1],t[2],t[3],1):(t=sg.exec(e))?new $e(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ag.exec(e))?ki(t[1],t[2],t[3],t[4]):(t=lg.exec(e))?ki(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ug.exec(e))?ka(t[1],t[2]/100,t[3]/100,1):(t=cg.exec(e))?ka(t[1],t[2]/100,t[3]/100,t[4]):wa.hasOwnProperty(e)?Ea(wa[e]):e==="transparent"?new $e(NaN,NaN,NaN,0):null}function Ea(e){return new $e(e>>16&255,e>>8&255,e&255,1)}function ki(e,t,n,r){return r<=0&&(e=t=n=NaN),new $e(e,t,n,r)}function hg(e){return e instanceof mi||(e=Kn(e)),e?(e=e.rgb(),new $e(e.r,e.g,e.b,e.opacity)):new $e}function is(e,t,n,r){return arguments.length===1?hg(e):new $e(e,t,n,r??1)}function $e(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Ls($e,is,ku(mi,{brighter(e){return e=e==null?Ki:Math.pow(Ki,e),new $e(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?qr:Math.pow(qr,e),new $e(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new $e(Fn(this.r),Fn(this.g),Fn(this.b),Yi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Sa,formatHex:Sa,formatHex8:gg,formatRgb:Na,toString:Na}));function Sa(){return`#${An(this.r)}${An(this.g)}${An(this.b)}`}function gg(){return`#${An(this.r)}${An(this.g)}${An(this.b)}${An((isNaN(this.opacity)?1:this.opacity)*255)}`}function Na(){const e=Yi(this.opacity);return`${e===1?"rgb(":"rgba("}${Fn(this.r)}, ${Fn(this.g)}, ${Fn(this.b)}${e===1?")":`, ${e})`}`}function Yi(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Fn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function An(e){return e=Fn(e),(e<16?"0":"")+e.toString(16)}function ka(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new bt(e,t,n,r)}function Cu(e){if(e instanceof bt)return new bt(e.h,e.s,e.l,e.opacity);if(e instanceof mi||(e=Kn(e)),!e)return new bt;if(e instanceof bt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(t===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-t)/a+2:s=(t-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new bt(s,a,l,e.opacity)}function yg(e,t,n,r){return arguments.length===1?Cu(e):new bt(e,t,n,r??1)}function bt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Ls(bt,yg,ku(mi,{brighter(e){return e=e==null?Ki:Math.pow(Ki,e),new bt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?qr:Math.pow(qr,e),new bt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new $e(Ao(e>=240?e-240:e+120,i,r),Ao(e,i,r),Ao(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new bt(Ca(this.h),Ci(this.s),Ci(this.l),Yi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Yi(this.opacity);return`${e===1?"hsl(":"hsla("}${Ca(this.h)}, ${Ci(this.s)*100}%, ${Ci(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Ca(e){return e=(e||0)%360,e<0?e+360:e}function Ci(e){return Math.max(0,Math.min(1,e||0))}function Ao(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Fs=e=>()=>e;function vg(e,t){return function(n){return e+n*t}}function mg(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function pg(e){return(e=+e)==1?Iu:function(t,n){return n-t?mg(t,n,e):Fs(isNaN(t)?n:t)}}function Iu(e,t){var n=t-e;return n?vg(e,n):Fs(isNaN(e)?t:e)}const Xi=function e(t){var n=pg(t);function r(i,o){var s=n((i=is(i)).r,(o=is(o)).r),a=n(i.g,o.g),l=n(i.b,o.b),u=Iu(i.opacity,o.opacity);return function(f){return i.r=s(f),i.g=a(f),i.b=l(f),i.opacity=u(f),i+""}}return r.gamma=e,r}(1);function _g(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function wg(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function xg(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=Kr(e[s],t[s]);for(;s<n;++s)o[s]=t[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function bg(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function zt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Eg(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Kr(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var os=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Mo=new RegExp(os.source,"g");function Sg(e){return function(){return e}}function Ng(e){return function(t){return e(t)+""}}function Au(e,t){var n=os.lastIndex=Mo.lastIndex=0,r,i,o,s=-1,a=[],l=[];for(e=e+"",t=t+"";(r=os.exec(e))&&(i=Mo.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:zt(r,i)})),n=Mo.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?Ng(l[0].x):Sg(t):(t=l.length,function(u){for(var f=0,d;f<t;++f)a[(d=l[f]).i]=d.x(u);return a.join("")})}function Kr(e,t){var n=typeof t,r;return t==null||n==="boolean"?Fs(t):(n==="number"?zt:n==="string"?(r=Kn(t))?(t=r,Xi):Au:t instanceof Kn?Xi:t instanceof Date?bg:wg(t)?_g:Array.isArray(t)?xg:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Eg:zt)(e,t)}var Ia=180/Math.PI,ss={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Mu(e,t,n,r,i,o){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*Ia,skewX:Math.atan(l)*Ia,scaleX:s,scaleY:a}}var Ii;function kg(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?ss:Mu(t.a,t.b,t.c,t.d,t.e,t.f)}function Cg(e){return e==null||(Ii||(Ii=document.createElementNS("http://www.w3.org/2000/svg","g")),Ii.setAttribute("transform",e),!(e=Ii.transform.baseVal.consolidate()))?ss:(e=e.matrix,Mu(e.a,e.b,e.c,e.d,e.e,e.f))}function Pu(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,f,d,c,y,v){if(u!==d||f!==c){var _=y.push("translate(",null,t,null,n);v.push({i:_-4,x:zt(u,d)},{i:_-2,x:zt(f,c)})}else(d||c)&&y.push("translate("+d+t+c+n)}function s(u,f,d,c){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),c.push({i:d.push(i(d)+"rotate(",null,r)-2,x:zt(u,f)})):f&&d.push(i(d)+"rotate("+f+r)}function a(u,f,d,c){u!==f?c.push({i:d.push(i(d)+"skewX(",null,r)-2,x:zt(u,f)}):f&&d.push(i(d)+"skewX("+f+r)}function l(u,f,d,c,y,v){if(u!==d||f!==c){var _=y.push(i(y)+"scale(",null,",",null,")");v.push({i:_-4,x:zt(u,d)},{i:_-2,x:zt(f,c)})}else(d!==1||c!==1)&&y.push(i(y)+"scale("+d+","+c+")")}return function(u,f){var d=[],c=[];return u=e(u),f=e(f),o(u.translateX,u.translateY,f.translateX,f.translateY,d,c),s(u.rotate,f.rotate,d,c),a(u.skewX,f.skewX,d,c),l(u.scaleX,u.scaleY,f.scaleX,f.scaleY,d,c),u=f=null,function(y){for(var v=-1,_=c.length,p;++v<_;)d[(p=c[v]).i]=p.x(y);return d.join("")}}}var Ig=Pu(kg,"px, ","px)","deg)"),Ag=Pu(Cg,", ",")",")"),Mg=1e-12;function Aa(e){return((e=Math.exp(e))+1/e)/2}function Pg(e){return((e=Math.exp(e))-1/e)/2}function Tg(e){return((e=Math.exp(2*e))-1)/(e+1)}const Ri=function e(t,n,r){function i(o,s){var a=o[0],l=o[1],u=o[2],f=s[0],d=s[1],c=s[2],y=f-a,v=d-l,_=y*y+v*v,p,b;if(_<Mg)b=Math.log(c/u)/t,p=function(W){return[a+W*y,l+W*v,u*Math.exp(t*W*b)]};else{var A=Math.sqrt(_),P=(c*c-u*u+r*_)/(2*u*n*A),w=(c*c-u*u-r*_)/(2*c*n*A),O=Math.log(Math.sqrt(P*P+1)-P),L=Math.log(Math.sqrt(w*w+1)-w);b=(L-O)/t,p=function(W){var T=W*b,H=Aa(O),J=u/(n*A)*(H*Tg(t*T+O)-Pg(O));return[a+J*y,l+J*v,u*H/Aa(t*T+O)]}}return p.duration=b*1e3*t/Math.SQRT2,p}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,l=a*a;return e(s,a,l)},i}(Math.SQRT2,2,4);var pr=0,Fr=0,zr=0,Tu=1e3,Wi,Vr,qi=0,Yn=0,go=0,Gr=typeof performance=="object"&&performance.now?performance:Date,Ou=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Vs(){return Yn||(Ou(Og),Yn=Gr.now()+go)}function Og(){Yn=0}function Zi(){this._call=this._time=this._next=null}Zi.prototype=Du.prototype={constructor:Zi,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Vs():+n)+(t==null?0:+t),!this._next&&Vr!==this&&(Vr?Vr._next=this:Wi=this,Vr=this),this._call=e,this._time=n,as()},stop:function(){this._call&&(this._call=null,this._time=1/0,as())}};function Du(e,t,n){var r=new Zi;return r.restart(e,t,n),r}function Dg(){Vs(),++pr;for(var e=Wi,t;e;)(t=Yn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--pr}function Ma(){Yn=(qi=Gr.now())+go,pr=Fr=0;try{Dg()}finally{pr=0,Rg(),Yn=0}}function zg(){var e=Gr.now(),t=e-qi;t>Tu&&(go-=t,qi=e)}function Rg(){for(var e,t=Wi,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Wi=n);Vr=e,as(r)}function as(e){if(!pr){Fr&&(Fr=clearTimeout(Fr));var t=e-Yn;t>24?(e<1/0&&(Fr=setTimeout(Ma,e-Gr.now()-go)),zr&&(zr=clearInterval(zr))):(zr||(qi=Gr.now(),zr=setInterval(zg,Tu)),pr=1,Ou(Ma))}}function Pa(e,t,n){var r=new Zi;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Lg=fo("start","end","cancel","interrupt"),Fg=[],zu=0,Ta=1,ls=2,Li=3,Oa=4,us=5,Fi=6;function yo(e,t,n,r,i,o){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;Vg(e,n,{name:t,index:r,group:i,on:Lg,tween:Fg,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:zu})}function Hs(e,t){var n=It(e,t);if(n.state>zu)throw new Error("too late; already scheduled");return n}function Yt(e,t){var n=It(e,t);if(n.state>Li)throw new Error("too late; already running");return n}function It(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Vg(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Du(o,0,n.time);function o(u){n.state=Ta,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var f,d,c,y;if(n.state!==Ta)return l();for(f in r)if(y=r[f],y.name===n.name){if(y.state===Li)return Pa(s);y.state===Oa?(y.state=Fi,y.timer.stop(),y.on.call("interrupt",e,e.__data__,y.index,y.group),delete r[f]):+f<t&&(y.state=Fi,y.timer.stop(),y.on.call("cancel",e,e.__data__,y.index,y.group),delete r[f])}if(Pa(function(){n.state===Li&&(n.state=Oa,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=ls,n.on.call("start",e,e.__data__,n.index,n.group),n.state===ls){for(n.state=Li,i=new Array(c=n.tween.length),f=0,d=-1;f<c;++f)(y=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=y);i.length=d+1}}function a(u){for(var f=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=us,1),d=-1,c=i.length;++d<c;)i[d].call(e,f);n.state===us&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Fi,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function Vi(e,t){var n=e.__transition,r,i,o=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){o=!1;continue}i=r.state>ls&&r.state<us,r.state=Fi,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}o&&delete e.__transition}}function Hg(e){return this.each(function(){Vi(this,e)})}function Bg(e,t){var n,r;return function(){var i=Yt(this,e),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function Kg(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=Yt(this,e),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=a;break}l===u&&i.push(a)}o.tween=i}}function Yg(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=It(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===e)return s.value;return null}return this.each((t==null?Bg:Kg)(n,e,t))}function Bs(e,t,n){var r=e._id;return e.each(function(){var i=Yt(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return It(i,r).value[t]}}function Ru(e,t){var n;return(typeof t=="number"?zt:t instanceof Kn?Xi:(n=Kn(t))?(t=n,Xi):Au)(e,t)}function Xg(e){return function(){this.removeAttribute(e)}}function Wg(e){return function(){this.removeAttributeNS(e.space,e.local)}}function qg(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttribute(e);return s===i?null:s===r?o:o=t(r=s,n)}}function Zg(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===r?o:o=t(r=s,n)}}function Gg(e,t,n){var r,i,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),l=a+"",s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a)))}}function Ug(e,t,n){var r,i,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),l=a+"",s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a)))}}function jg(e,t){var n=ho(e),r=n==="transform"?Ag:Ru;return this.attrTween(e,typeof t=="function"?(n.local?Ug:Gg)(n,r,Bs(this,"attr."+e,t)):t==null?(n.local?Wg:Xg)(n):(n.local?Zg:qg)(n,r,t))}function Qg(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Jg(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function $g(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&Jg(e,o)),n}return i._value=t,i}function ey(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&Qg(e,o)),n}return i._value=t,i}function ty(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=ho(e);return this.tween(n,(r.local?$g:ey)(r,t))}function ny(e,t){return function(){Hs(this,e).delay=+t.apply(this,arguments)}}function ry(e,t){return t=+t,function(){Hs(this,e).delay=t}}function iy(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ny:ry)(t,e)):It(this.node(),t).delay}function oy(e,t){return function(){Yt(this,e).duration=+t.apply(this,arguments)}}function sy(e,t){return t=+t,function(){Yt(this,e).duration=t}}function ay(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?oy:sy)(t,e)):It(this.node(),t).duration}function ly(e,t){if(typeof t!="function")throw new Error;return function(){Yt(this,e).ease=t}}function uy(e){var t=this._id;return arguments.length?this.each(ly(t,e)):It(this.node(),t).ease}function cy(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Yt(this,e).ease=n}}function fy(e){if(typeof e!="function")throw new Error;return this.each(cy(this._id,e))}function dy(e){typeof e!="function"&&(e=gu(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],l,u=0;u<s;++u)(l=o[u])&&e.call(l,l.__data__,u,o)&&a.push(l);return new nn(r,this._parents,this._name,this._id)}function hy(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var l=t[a],u=n[a],f=l.length,d=s[a]=new Array(f),c,y=0;y<f;++y)(c=l[y]||u[y])&&(d[y]=c);for(;a<r;++a)s[a]=t[a];return new nn(s,this._parents,this._name,this._id)}function gy(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function yy(e,t,n){var r,i,o=gy(t)?Hs:Yt;return function(){var s=o(this,e),a=s.on;a!==r&&(i=(r=a).copy()).on(t,n),s.on=i}}function vy(e,t){var n=this._id;return arguments.length<2?It(this.node(),n).on.on(e):this.each(yy(n,e,t))}function my(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function py(){return this.on("end.remove",my(this._id))}function _y(e){var t=this._name,n=this._id;typeof e!="function"&&(e=zs(e));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],l=a.length,u=o[s]=new Array(l),f,d,c=0;c<l;++c)(f=a[c])&&(d=e.call(f,f.__data__,c,a))&&("__data__"in f&&(d.__data__=f.__data__),u[c]=d,yo(u[c],t,n,c,u,It(f,n)));return new nn(o,this._parents,t,n)}function wy(e){var t=this._name,n=this._id;typeof e!="function"&&(e=hu(e));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var l=r[a],u=l.length,f,d=0;d<u;++d)if(f=l[d]){for(var c=e.call(f,f.__data__,d,l),y,v=It(f,n),_=0,p=c.length;_<p;++_)(y=c[_])&&yo(y,t,n,_,c,v);o.push(c),s.push(f)}return new nn(o,s,t,n)}var xy=vi.prototype.constructor;function by(){return new xy(this._groups,this._parents)}function Ey(e,t){var n,r,i;return function(){var o=mr(this,e),s=(this.style.removeProperty(e),mr(this,e));return o===s?null:o===n&&s===r?i:i=t(n=o,r=s)}}function Lu(e){return function(){this.style.removeProperty(e)}}function Sy(e,t,n){var r,i=n+"",o;return function(){var s=mr(this,e);return s===i?null:s===r?o:o=t(r=s,n)}}function Ny(e,t,n){var r,i,o;return function(){var s=mr(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),mr(this,e))),s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a))}}function ky(e,t){var n,r,i,o="style."+t,s="end."+o,a;return function(){var l=Yt(this,e),u=l.on,f=l.value[o]==null?a||(a=Lu(t)):void 0;(u!==n||i!==f)&&(r=(n=u).copy()).on(s,i=f),l.on=r}}function Cy(e,t,n){var r=(e+="")=="transform"?Ig:Ru;return t==null?this.styleTween(e,Ey(e,r)).on("end.style."+e,Lu(e)):typeof t=="function"?this.styleTween(e,Ny(e,r,Bs(this,"style."+e,t))).each(ky(this._id,e)):this.styleTween(e,Sy(e,r,t),n).on("end.style."+e,null)}function Iy(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Ay(e,t,n){var r,i;function o(){var s=t.apply(this,arguments);return s!==i&&(r=(i=s)&&Iy(e,s,n)),r}return o._value=t,o}function My(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Ay(e,t,n??""))}function Py(e){return function(){this.textContent=e}}function Ty(e){return function(){var t=e(this);this.textContent=t??""}}function Oy(e){return this.tween("text",typeof e=="function"?Ty(Bs(this,"text",e)):Py(e==null?"":e+""))}function Dy(e){return function(t){this.textContent=e.call(this,t)}}function zy(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Dy(i)),t}return r._value=e,r}function Ry(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,zy(e))}function Ly(){for(var e=this._name,t=this._id,n=Fu(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,l,u=0;u<a;++u)if(l=s[u]){var f=It(l,t);yo(l,e,n,u,s,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new nn(r,this._parents,e,n)}function Fy(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},l={value:function(){--i===0&&o()}};n.each(function(){var u=Yt(this,r),f=u.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),u.on=t}),i===0&&o()})}var Vy=0;function nn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Fu(){return++Vy}var Wt=vi.prototype;nn.prototype={constructor:nn,select:_y,selectAll:wy,selectChild:Wt.selectChild,selectChildren:Wt.selectChildren,filter:dy,merge:hy,selection:by,transition:Ly,call:Wt.call,nodes:Wt.nodes,node:Wt.node,size:Wt.size,empty:Wt.empty,each:Wt.each,on:vy,attr:jg,attrTween:ty,style:Cy,styleTween:My,text:Oy,textTween:Ry,remove:py,tween:Yg,delay:iy,duration:ay,ease:uy,easeVarying:fy,end:Fy,[Symbol.iterator]:Wt[Symbol.iterator]};function Hy(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var By={time:null,delay:0,duration:250,ease:Hy};function Ky(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Yy(e){var t,n;e instanceof nn?(t=e._id,e=e._name):(t=Fu(),(n=By).time=Vs(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,l,u=0;u<a;++u)(l=s[u])&&yo(l,e,t,u,s,n||Ky(l,t));return new nn(r,this._parents,e,t)}vi.prototype.interrupt=Hg;vi.prototype.transition=Yy;const Ai=e=>()=>e;function Xy(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Qt(e,t,n){this.k=e,this.x=t,this.y=n}Qt.prototype={constructor:Qt,scale:function(e){return e===1?this:new Qt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Qt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var vo=new Qt(1,0,0);Vu.prototype=Qt.prototype;function Vu(e){for(;!e.__zoom;)if(!(e=e.parentNode))return vo;return e.__zoom}function Po(e){e.stopImmediatePropagation()}function Rr(e){e.preventDefault(),e.stopImmediatePropagation()}function Wy(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function qy(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Da(){return this.__zoom||vo}function Zy(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Gy(){return navigator.maxTouchPoints||"ontouchstart"in this}function Uy(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function jy(){var e=Wy,t=qy,n=Uy,r=Zy,i=Gy,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,l=Ri,u=fo("start","zoom","end"),f,d,c,y=500,v=150,_=0,p=10;function b(m){m.property("__zoom",Da).on("wheel.zoom",T,{passive:!1}).on("mousedown.zoom",H).on("dblclick.zoom",J).filter(i).on("touchstart.zoom",M).on("touchmove.zoom",x).on("touchend.zoom touchcancel.zoom",I).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(m,C,N,F){var B=m.selection?m.selection():m;B.property("__zoom",Da),m!==B?O(m,C,N,F):B.interrupt().each(function(){L(this,arguments).event(F).start().zoom(null,typeof C=="function"?C.apply(this,arguments):C).end()})},b.scaleBy=function(m,C,N,F){b.scaleTo(m,function(){var B=this.__zoom.k,X=typeof C=="function"?C.apply(this,arguments):C;return B*X},N,F)},b.scaleTo=function(m,C,N,F){b.transform(m,function(){var B=t.apply(this,arguments),X=this.__zoom,K=N==null?w(B):typeof N=="function"?N.apply(this,arguments):N,G=X.invert(K),ee=typeof C=="function"?C.apply(this,arguments):C;return n(P(A(X,ee),K,G),B,s)},N,F)},b.translateBy=function(m,C,N,F){b.transform(m,function(){return n(this.__zoom.translate(typeof C=="function"?C.apply(this,arguments):C,typeof N=="function"?N.apply(this,arguments):N),t.apply(this,arguments),s)},null,F)},b.translateTo=function(m,C,N,F,B){b.transform(m,function(){var X=t.apply(this,arguments),K=this.__zoom,G=F==null?w(X):typeof F=="function"?F.apply(this,arguments):F;return n(vo.translate(G[0],G[1]).scale(K.k).translate(typeof C=="function"?-C.apply(this,arguments):-C,typeof N=="function"?-N.apply(this,arguments):-N),X,s)},F,B)};function A(m,C){return C=Math.max(o[0],Math.min(o[1],C)),C===m.k?m:new Qt(C,m.x,m.y)}function P(m,C,N){var F=C[0]-N[0]*m.k,B=C[1]-N[1]*m.k;return F===m.x&&B===m.y?m:new Qt(m.k,F,B)}function w(m){return[(+m[0][0]+ +m[1][0])/2,(+m[0][1]+ +m[1][1])/2]}function O(m,C,N,F){m.on("start.zoom",function(){L(this,arguments).event(F).start()}).on("interrupt.zoom end.zoom",function(){L(this,arguments).event(F).end()}).tween("zoom",function(){var B=this,X=arguments,K=L(B,X).event(F),G=t.apply(B,X),ee=N==null?w(G):typeof N=="function"?N.apply(B,X):N,$=Math.max(G[1][0]-G[0][0],G[1][1]-G[0][1]),E=B.__zoom,D=typeof C=="function"?C.apply(B,X):C,V=l(E.invert(ee).concat($/E.k),D.invert(ee).concat($/D.k));return function(z){if(z===1)z=D;else{var q=V(z),U=$/q[2];z=new Qt(U,ee[0]-q[0]*U,ee[1]-q[1]*U)}K.zoom(null,z)}})}function L(m,C,N){return!N&&m.__zooming||new W(m,C)}function W(m,C){this.that=m,this.args=C,this.active=0,this.sourceEvent=null,this.extent=t.apply(m,C),this.taps=0}W.prototype={event:function(m){return m&&(this.sourceEvent=m),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(m,C){return this.mouse&&m!=="mouse"&&(this.mouse[1]=C.invert(this.mouse[0])),this.touch0&&m!=="touch"&&(this.touch0[1]=C.invert(this.touch0[0])),this.touch1&&m!=="touch"&&(this.touch1[1]=C.invert(this.touch1[0])),this.that.__zoom=C,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(m){var C=xt(this.that).datum();u.call(m,this.that,new Xy(m,{sourceEvent:this.sourceEvent,target:b,transform:this.that.__zoom,dispatch:u}),C)}};function T(m,...C){if(!e.apply(this,arguments))return;var N=L(this,C).event(m),F=this.__zoom,B=Math.max(o[0],Math.min(o[1],F.k*Math.pow(2,r.apply(this,arguments)))),X=Mt(m);if(N.wheel)(N.mouse[0][0]!==X[0]||N.mouse[0][1]!==X[1])&&(N.mouse[1]=F.invert(N.mouse[0]=X)),clearTimeout(N.wheel);else{if(F.k===B)return;N.mouse=[X,F.invert(X)],Vi(this),N.start()}Rr(m),N.wheel=setTimeout(K,v),N.zoom("mouse",n(P(A(F,B),N.mouse[0],N.mouse[1]),N.extent,s));function K(){N.wheel=null,N.end()}}function H(m,...C){if(c||!e.apply(this,arguments))return;var N=m.currentTarget,F=L(this,C,!0).event(m),B=xt(m.view).on("mousemove.zoom",ee,!0).on("mouseup.zoom",$,!0),X=Mt(m,N),K=m.clientX,G=m.clientY;Su(m.view),Po(m),F.mouse=[X,this.__zoom.invert(X)],Vi(this),F.start();function ee(E){if(Rr(E),!F.moved){var D=E.clientX-K,V=E.clientY-G;F.moved=D*D+V*V>_}F.event(E).zoom("mouse",n(P(F.that.__zoom,F.mouse[0]=Mt(E,N),F.mouse[1]),F.extent,s))}function $(E){B.on("mousemove.zoom mouseup.zoom",null),Nu(E.view,F.moved),Rr(E),F.event(E).end()}}function J(m,...C){if(e.apply(this,arguments)){var N=this.__zoom,F=Mt(m.changedTouches?m.changedTouches[0]:m,this),B=N.invert(F),X=N.k*(m.shiftKey?.5:2),K=n(P(A(N,X),F,B),t.apply(this,C),s);Rr(m),a>0?xt(this).transition().duration(a).call(O,K,F,m):xt(this).call(b.transform,K,F,m)}}function M(m,...C){if(e.apply(this,arguments)){var N=m.touches,F=N.length,B=L(this,C,m.changedTouches.length===F).event(m),X,K,G,ee;for(Po(m),K=0;K<F;++K)G=N[K],ee=Mt(G,this),ee=[ee,this.__zoom.invert(ee),G.identifier],B.touch0?!B.touch1&&B.touch0[2]!==ee[2]&&(B.touch1=ee,B.taps=0):(B.touch0=ee,X=!0,B.taps=1+!!f);f&&(f=clearTimeout(f)),X&&(B.taps<2&&(d=ee[0],f=setTimeout(function(){f=null},y)),Vi(this),B.start())}}function x(m,...C){if(this.__zooming){var N=L(this,C).event(m),F=m.changedTouches,B=F.length,X,K,G,ee;for(Rr(m),X=0;X<B;++X)K=F[X],G=Mt(K,this),N.touch0&&N.touch0[2]===K.identifier?N.touch0[0]=G:N.touch1&&N.touch1[2]===K.identifier&&(N.touch1[0]=G);if(K=N.that.__zoom,N.touch1){var $=N.touch0[0],E=N.touch0[1],D=N.touch1[0],V=N.touch1[1],z=(z=D[0]-$[0])*z+(z=D[1]-$[1])*z,q=(q=V[0]-E[0])*q+(q=V[1]-E[1])*q;K=A(K,Math.sqrt(z/q)),G=[($[0]+D[0])/2,($[1]+D[1])/2],ee=[(E[0]+V[0])/2,(E[1]+V[1])/2]}else if(N.touch0)G=N.touch0[0],ee=N.touch0[1];else return;N.zoom("touch",n(P(K,G,ee),N.extent,s))}}function I(m,...C){if(this.__zooming){var N=L(this,C).event(m),F=m.changedTouches,B=F.length,X,K;for(Po(m),c&&clearTimeout(c),c=setTimeout(function(){c=null},y),X=0;X<B;++X)K=F[X],N.touch0&&N.touch0[2]===K.identifier?delete N.touch0:N.touch1&&N.touch1[2]===K.identifier&&delete N.touch1;if(N.touch1&&!N.touch0&&(N.touch0=N.touch1,delete N.touch1),N.touch0)N.touch0[1]=this.__zoom.invert(N.touch0[0]);else if(N.end(),N.taps===2&&(K=Mt(K,this),Math.hypot(d[0]-K[0],d[1]-K[1])<p)){var G=xt(this).on("dblclick.zoom");G&&G.apply(this,arguments)}}}return b.wheelDelta=function(m){return arguments.length?(r=typeof m=="function"?m:Ai(+m),b):r},b.filter=function(m){return arguments.length?(e=typeof m=="function"?m:Ai(!!m),b):e},b.touchable=function(m){return arguments.length?(i=typeof m=="function"?m:Ai(!!m),b):i},b.extent=function(m){return arguments.length?(t=typeof m=="function"?m:Ai([[+m[0][0],+m[0][1]],[+m[1][0],+m[1][1]]]),b):t},b.scaleExtent=function(m){return arguments.length?(o[0]=+m[0],o[1]=+m[1],b):[o[0],o[1]]},b.translateExtent=function(m){return arguments.length?(s[0][0]=+m[0][0],s[1][0]=+m[1][0],s[0][1]=+m[0][1],s[1][1]=+m[1][1],b):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},b.constrain=function(m){return arguments.length?(n=m,b):n},b.duration=function(m){return arguments.length?(a=+m,b):a},b.interpolate=function(m){return arguments.length?(l=m,b):l},b.on=function(){var m=u.on.apply(u,arguments);return m===u?b:m},b.clickDistance=function(m){return arguments.length?(_=(m=+m)*m,b):Math.sqrt(_)},b.tapDistance=function(m){return arguments.length?(p=+m,b):p},b}const Ur={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},cs=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Hu=["Enter"," ","Escape"],Qy={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var _r;(function(e){e.Strict="strict",e.Loose="loose"})(_r||(_r={}));var nr;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(nr||(nr={}));var Gi;(function(e){e.Partial="partial",e.Full="full"})(Gi||(Gi={}));const fs={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var fn;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(fn||(fn={}));var Ui;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Ui||(Ui={}));var se;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(se||(se={}));const za={[se.Left]:se.Right,[se.Right]:se.Left,[se.Top]:se.Bottom,[se.Bottom]:se.Top};function Jy(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}function Ra(e,t,n){if(!n)return;const r=[];e.forEach((i,o)=>{t!=null&&t.has(o)||r.push(i)}),r.length&&n(r)}function $y(e){return e===null?null:e?"valid":"invalid"}const Bu=e=>"id"in e&&"source"in e&&"target"in e,e0=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Ks=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),pi=(e,t=[0,0])=>{const{width:n,height:r}=jn(e),i=e.origin??t,o=n*i[0],s=r*i[1];return{x:e.position.x-o,y:e.position.y-s}},t0=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const o=typeof i=="string";let s=!t.nodeLookup&&!o?i:void 0;t.nodeLookup&&(s=o?t.nodeLookup.get(i):Ks(i)?i:t.nodeLookup.get(i.id));const a=s?ji(s,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return po(r,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return _o(n)},mo=(e,t={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},r=!1;return e.forEach(i=>{(t.filter===void 0||t.filter(i))&&(n=po(n,ji(i)),r=!0)}),r?_o(n):{x:0,y:0,width:0,height:0}},Ys=(e,t,[n,r,i]=[0,0,1],o=!1,s=!1)=>{const a={...wi(t,[n,r,i]),width:t.width/i,height:t.height/i},l=[];for(const u of e.values()){const{measured:f,selectable:d=!0,hidden:c=!1}=u;if(s&&!d||c)continue;const y=f.width??u.width??u.initialWidth??null,v=f.height??u.height??u.initialHeight??null,_=jr(a,xr(u)),p=(y??0)*(v??0),b=o&&_>0;(!u.internals.handleBounds||b||_>=p||u.dragging)&&l.push(u)}return l},n0=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function r0(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(i=>i.id)):null;return e.forEach(i=>{i.measured.width&&i.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function i0({nodes:e,width:t,height:n,panZoom:r,minZoom:i,maxZoom:o},s){if(e.size===0)return Promise.resolve(!0);const a=r0(e,s),l=mo(a),u=Xs(l,t,n,(s==null?void 0:s.minZoom)??i,(s==null?void 0:s.maxZoom)??o,(s==null?void 0:s.padding)??.1);return await r.setViewport(u,{duration:s==null?void 0:s.duration,ease:s==null?void 0:s.ease,interpolate:s==null?void 0:s.interpolate}),Promise.resolve(!0)}function Ku({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:o}){const s=n.get(e),a=s.parentId?n.get(s.parentId):void 0,{x:l,y:u}=a?a.internals.positionAbsolute:{x:0,y:0},f=s.origin??r;let d=s.extent||i;if(s.extent==="parent"&&!s.expandParent)if(!a)o==null||o("005",Ur.error005());else{const y=a.measured.width,v=a.measured.height;y&&v&&(d=[[l,u],[l+y,u+v]])}else a&&br(s.extent)&&(d=[[s.extent[0][0]+l,s.extent[0][1]+u],[s.extent[1][0]+l,s.extent[1][1]+u]]);const c=br(d)?Xn(t,d,s.measured):t;return(s.measured.width===void 0||s.measured.height===void 0)&&(o==null||o("015",Ur.error015())),{position:{x:c.x-l+(s.measured.width??0)*f[0],y:c.y-u+(s.measured.height??0)*f[1]},positionAbsolute:c}}async function o0({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:i}){const o=new Set(e.map(c=>c.id)),s=[];for(const c of n){if(c.deletable===!1)continue;const y=o.has(c.id),v=!y&&c.parentId&&s.find(_=>_.id===c.parentId);(y||v)&&s.push(c)}const a=new Set(t.map(c=>c.id)),l=r.filter(c=>c.deletable!==!1),f=n0(s,l);for(const c of l)a.has(c.id)&&!f.find(v=>v.id===c.id)&&f.push(c);if(!i)return{edges:f,nodes:s};const d=await i({nodes:s,edges:f});return typeof d=="boolean"?d?{edges:f,nodes:s}:{edges:[],nodes:[]}:d}const wr=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Xn=(e={x:0,y:0},t,n)=>({x:wr(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:wr(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function Yu(e,t,n){const{width:r,height:i}=jn(n),{x:o,y:s}=n.internals.positionAbsolute;return Xn(e,[[o,s],[o+r,s+i]],t)}const La=(e,t,n)=>e<t?wr(Math.abs(e-t),1,t)/t:e>n?-wr(Math.abs(e-n),1,t)/t:0,Xu=(e,t,n=15,r=40)=>{const i=La(e.x,r,t.width-r)*n,o=La(e.y,r,t.height-r)*n;return[i,o]},po=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),ds=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),_o=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),xr=(e,t=[0,0])=>{var i,o;const{x:n,y:r}=Ks(e)?e.internals.positionAbsolute:pi(e,t);return{x:n,y:r,width:((i=e.measured)==null?void 0:i.width)??e.width??e.initialWidth??0,height:((o=e.measured)==null?void 0:o.height)??e.height??e.initialHeight??0}},ji=(e,t=[0,0])=>{var i,o;const{x:n,y:r}=Ks(e)?e.internals.positionAbsolute:pi(e,t);return{x:n,y:r,x2:n+(((i=e.measured)==null?void 0:i.width)??e.width??e.initialWidth??0),y2:r+(((o=e.measured)==null?void 0:o.height)??e.height??e.initialHeight??0)}},s0=(e,t)=>_o(po(ds(e),ds(t))),jr=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Fa=e=>Jt(e.width)&&Jt(e.height)&&Jt(e.x)&&Jt(e.y),Jt=e=>!isNaN(e)&&isFinite(e),a0=(e,t)=>{},_i=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),wi=({x:e,y:t},[n,r,i],o=!1,s=[1,1])=>{const a={x:(e-n)/i,y:(t-r)/i};return o?_i(a,s):a},Qi=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r});function Qn(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function l0(e,t,n){if(typeof e=="string"||typeof e=="number"){const r=Qn(e,n),i=Qn(e,t);return{top:r,right:i,bottom:r,left:i,x:i*2,y:r*2}}if(typeof e=="object"){const r=Qn(e.top??e.y??0,n),i=Qn(e.bottom??e.y??0,n),o=Qn(e.left??e.x??0,t),s=Qn(e.right??e.x??0,t);return{top:r,right:s,bottom:i,left:o,x:o+s,y:r+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function u0(e,t,n,r,i,o){const{x:s,y:a}=Qi(e,[t,n,r]),{x:l,y:u}=Qi({x:e.x+e.width,y:e.y+e.height},[t,n,r]),f=i-l,d=o-u;return{left:Math.floor(s),top:Math.floor(a),right:Math.floor(f),bottom:Math.floor(d)}}const Xs=(e,t,n,r,i,o)=>{const s=l0(o,t,n),a=(t-s.x)/e.width,l=(n-s.y)/e.height,u=Math.min(a,l),f=wr(u,r,i),d=e.x+e.width/2,c=e.y+e.height/2,y=t/2-d*f,v=n/2-c*f,_=u0(e,y,v,f,t,n),p={left:Math.min(_.left-s.left,0),top:Math.min(_.top-s.top,0),right:Math.min(_.right-s.right,0),bottom:Math.min(_.bottom-s.bottom,0)};return{x:y-p.left+p.right,y:v-p.top+p.bottom,zoom:f}},Ji=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function br(e){return e!=null&&e!=="parent"}function jn(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function c0(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function f0(e,t={width:0,height:0},n,r,i){const o={...e},s=r.get(n);if(s){const a=s.origin||i;o.x+=s.internals.positionAbsolute.x-(t.width??0)*a[0],o.y+=s.internals.positionAbsolute.y-(t.height??0)*a[1]}return o}function d0(e){return{...Qy,...e||{}}}function To(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){const{x:o,y:s}=Nt(e),a=wi({x:o-((i==null?void 0:i.left)??0),y:s-((i==null?void 0:i.top)??0)},r),{x:l,y:u}=n?_i(a,t):a;return{xSnapped:l,ySnapped:u,...a}}const Wu=e=>({width:e.offsetWidth,height:e.offsetHeight}),qu=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},h0=["INPUT","SELECT","TEXTAREA"];function Zu(e){var r,i;const t=((i=(r=e.composedPath)==null?void 0:r.call(e))==null?void 0:i[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:h0.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const Gu=e=>"clientX"in e,Nt=(e,t)=>{var o,s;const n=Gu(e),r=n?e.clientX:(o=e.touches)==null?void 0:o[0].clientX,i=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}},Va=(e,t,n,r,i)=>{const o=t.querySelectorAll(`.${e}`);return!o||!o.length?null:Array.from(o).map(s=>{const a=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:i,position:s.getAttribute("data-handlepos"),x:(a.left-n.left)/r,y:(a.top-n.top)/r,...Wu(s)}})};function g0({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:o,targetControlX:s,targetControlY:a}){const l=e*.125+i*.375+s*.375+n*.125,u=t*.125+o*.375+a*.375+r*.125,f=Math.abs(l-e),d=Math.abs(u-t);return[l,u,f,d]}function Mi(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Ha({pos:e,x1:t,y1:n,x2:r,y2:i,c:o}){switch(e){case se.Left:return[t-Mi(t-r,o),n];case se.Right:return[t+Mi(r-t,o),n];case se.Top:return[t,n-Mi(n-i,o)];case se.Bottom:return[t,n+Mi(i-n,o)]}}function Uu({sourceX:e,sourceY:t,sourcePosition:n=se.Bottom,targetX:r,targetY:i,targetPosition:o=se.Top,curvature:s=.25}){const[a,l]=Ha({pos:n,x1:e,y1:t,x2:r,y2:i,c:s}),[u,f]=Ha({pos:o,x1:r,y1:i,x2:e,y2:t,c:s}),[d,c,y,v]=g0({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:u,targetControlY:f});return[`M${e},${t} C${a},${l} ${u},${f} ${r},${i}`,d,c,y,v]}function ju({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,o=n<e?n+i:n-i,s=Math.abs(r-t)/2,a=r<t?r+s:r-s;return[o,a,i,s]}function y0({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:i=!1,zIndexMode:o="basic"}){if(o==="manual")return r;const s=i&&n?r+1e3:r,a=Math.max(e.parentId||i&&e.selected?e.internals.z:0,t.parentId||i&&t.selected?t.internals.z:0);return s+a}function v0({sourceNode:e,targetNode:t,width:n,height:r,transform:i}){const o=po(ji(e),ji(t));o.x===o.x2&&(o.x2+=1),o.y===o.y2&&(o.y2+=1);const s={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return jr(s,_o(o))>0}const m0=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,p0=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Qu=(e,t,n={})=>{if(!e.source||!e.target)return t;const r=n.getEdgeId||m0;let i;return Bu(e)?i={...e}:i={...e,id:r(e)},p0(i,t)?t:(i.sourceHandle===null&&delete i.sourceHandle,i.targetHandle===null&&delete i.targetHandle,t.concat(i))};function Ju({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,o,s,a]=ju({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,o,s,a]}const Ba={[se.Left]:{x:-1,y:0},[se.Right]:{x:1,y:0},[se.Top]:{x:0,y:-1},[se.Bottom]:{x:0,y:1}},_0=({source:e,sourcePosition:t=se.Bottom,target:n})=>t===se.Left||t===se.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Ka=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function w0({source:e,sourcePosition:t=se.Bottom,target:n,targetPosition:r=se.Top,center:i,offset:o,stepPosition:s}){const a=Ba[t],l=Ba[r],u={x:e.x+a.x*o,y:e.y+a.y*o},f={x:n.x+l.x*o,y:n.y+l.y*o},d=_0({source:u,sourcePosition:t,target:f}),c=d.x!==0?"x":"y",y=d[c];let v=[],_,p;const b={x:0,y:0},A={x:0,y:0},[,,P,w]=ju({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[c]*l[c]===-1){c==="x"?(_=i.x??u.x+(f.x-u.x)*s,p=i.y??(u.y+f.y)/2):(_=i.x??(u.x+f.x)/2,p=i.y??u.y+(f.y-u.y)*s);const L=[{x:_,y:u.y},{x:_,y:f.y}],W=[{x:u.x,y:p},{x:f.x,y:p}];a[c]===y?v=c==="x"?L:W:v=c==="x"?W:L}else{const L=[{x:u.x,y:f.y}],W=[{x:f.x,y:u.y}];if(c==="x"?v=a.x===y?W:L:v=a.y===y?L:W,t===r){const x=Math.abs(e[c]-n[c]);if(x<=o){const I=Math.min(o-1,o-x);a[c]===y?b[c]=(u[c]>e[c]?-1:1)*I:A[c]=(f[c]>n[c]?-1:1)*I}}if(t!==r){const x=c==="x"?"y":"x",I=a[c]===l[x],m=u[x]>f[x],C=u[x]<f[x];(a[c]===1&&(!I&&m||I&&C)||a[c]!==1&&(!I&&C||I&&m))&&(v=c==="x"?L:W)}const T={x:u.x+b.x,y:u.y+b.y},H={x:f.x+A.x,y:f.y+A.y},J=Math.max(Math.abs(T.x-v[0].x),Math.abs(H.x-v[0].x)),M=Math.max(Math.abs(T.y-v[0].y),Math.abs(H.y-v[0].y));J>=M?(_=(T.x+H.x)/2,p=v[0].y):(_=v[0].x,p=(T.y+H.y)/2)}return[[e,{x:u.x+b.x,y:u.y+b.y},...v,{x:f.x+A.x,y:f.y+A.y},n],_,p,P,w]}function x0(e,t,n,r){const i=Math.min(Ka(e,t)/2,Ka(t,n)/2,r),{x:o,y:s}=t;if(e.x===o&&o===n.x||e.y===s&&s===n.y)return`L${o} ${s}`;if(e.y===s){const u=e.x<n.x?-1:1,f=e.y<n.y?1:-1;return`L ${o+i*u},${s}Q ${o},${s} ${o},${s+i*f}`}const a=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${o},${s+i*l}Q ${o},${s} ${o+i*a},${s}`}function Ws({sourceX:e,sourceY:t,sourcePosition:n=se.Bottom,targetX:r,targetY:i,targetPosition:o=se.Top,borderRadius:s=5,centerX:a,centerY:l,offset:u=20,stepPosition:f=.5}){const[d,c,y,v,_]=w0({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:o,center:{x:a,y:l},offset:u,stepPosition:f});return[d.reduce((b,A,P)=>{let w="";return P>0&&P<d.length-1?w=x0(d[P-1],A,d[P+1],s):w=`${P===0?"M":"L"}${A.x} ${A.y}`,b+=w,b},""),c,y,v,_]}function Ya(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function b0(e){var d;const{sourceNode:t,targetNode:n}=e;if(!Ya(t)||!Ya(n))return null;const r=t.internals.handleBounds||Xa(t.handles),i=n.internals.handleBounds||Xa(n.handles),o=Wa((r==null?void 0:r.source)??[],e.sourceHandle),s=Wa(e.connectionMode===_r.Strict?(i==null?void 0:i.target)??[]:((i==null?void 0:i.target)??[]).concat((i==null?void 0:i.source)??[]),e.targetHandle);if(!o||!s)return(d=e.onError)==null||d.call(e,"008",Ur.error008(o?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=(o==null?void 0:o.position)||se.Bottom,l=(s==null?void 0:s.position)||se.Top,u=Wn(t,o,a),f=Wn(n,s,l);return{sourceX:u.x,sourceY:u.y,targetX:f.x,targetY:f.y,sourcePosition:a,targetPosition:l}}function Xa(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function Wn(e,t,n=se.Left,r=!1){const i=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,o=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:s,height:a}=t??jn(e);if(r)return{x:i+s/2,y:o+a/2};switch((t==null?void 0:t.position)??n){case se.Top:return{x:i+s/2,y:o};case se.Right:return{x:i+s,y:o+a/2};case se.Bottom:return{x:i+s/2,y:o+a};case se.Left:return{x:i,y:o+a/2}}}function Wa(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function hs(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function E0(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const o=new Set;return e.reduce((s,a)=>([a.markerStart||r,a.markerEnd||i].forEach(l=>{if(l&&typeof l=="object"){const u=hs(l,t);o.has(u)||(s.push({id:u,color:l.color||n,...l}),o.add(u))}}),s),[]).sort((s,a)=>s.id.localeCompare(a.id))}const $u=1e3,S0=10,qs={nodeOrigin:[0,0],nodeExtent:cs,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},N0={...qs,checkEquality:!0};function Zs(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function k0(e,t,n){const r=Zs(qs,n);for(const i of e.values())if(i.parentId)Us(i,e,t,r);else{const o=pi(i,r.nodeOrigin),s=br(i.extent)?i.extent:r.nodeExtent,a=Xn(o,s,jn(i));i.internals.positionAbsolute=a}}function C0(e,t){if(!e.handles)return e.measured?t==null?void 0:t.internals.handleBounds:void 0;const n=[],r=[];for(const i of e.handles){const o={id:i.id,width:i.width??1,height:i.height??1,nodeId:e.id,x:i.x,y:i.y,position:i.position,type:i.type};i.type==="source"?n.push(o):i.type==="target"&&r.push(o)}return{source:n,target:r}}function Gs(e){return e==="manual"}function I0(e,t,n,r={}){var u,f;const i=Zs(N0,r),o={i:0},s=new Map(t),a=i!=null&&i.elevateNodesOnSelect&&!Gs(i.zIndexMode)?$u:0;let l=e.length>0;t.clear(),n.clear();for(const d of e){let c=s.get(d.id);if(i.checkEquality&&d===(c==null?void 0:c.internals.userNode))t.set(d.id,c);else{const y=pi(d,i.nodeOrigin),v=br(d.extent)?d.extent:i.nodeExtent,_=Xn(y,v,jn(d));c={...i.defaults,...d,measured:{width:(u=d.measured)==null?void 0:u.width,height:(f=d.measured)==null?void 0:f.height},internals:{positionAbsolute:_,handleBounds:C0(d,c),z:ec(d,a,i.zIndexMode),userNode:d}},t.set(d.id,c)}(c.measured===void 0||c.measured.width===void 0||c.measured.height===void 0)&&!c.hidden&&(l=!1),d.parentId&&Us(c,t,n,r,o)}return l}function A0(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function Us(e,t,n,r,i){const{elevateNodesOnSelect:o,nodeOrigin:s,nodeExtent:a,zIndexMode:l}=Zs(qs,r),u=e.parentId,f=t.get(u);if(!f){console.warn(`Parent node ${u} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}A0(e,n),i&&!f.parentId&&f.internals.rootParentIndex===void 0&&l==="auto"&&(f.internals.rootParentIndex=++i.i,f.internals.z=f.internals.z+i.i*S0),i&&f.internals.rootParentIndex!==void 0&&(i.i=f.internals.rootParentIndex);const d=o&&!Gs(l)?$u:0,{x:c,y,z:v}=M0(e,f,s,a,d,l),{positionAbsolute:_}=e.internals,p=c!==_.x||y!==_.y;(p||v!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:p?{x:c,y}:_,z:v}})}function ec(e,t,n){const r=Jt(e.zIndex)?e.zIndex:0;return Gs(n)?r:r+(e.selected?t:0)}function M0(e,t,n,r,i,o){const{x:s,y:a}=t.internals.positionAbsolute,l=jn(e),u=pi(e,n),f=br(e.extent)?Xn(u,e.extent,l):u;let d=Xn({x:s+f.x,y:a+f.y},r,l);e.extent==="parent"&&(d=Yu(d,l,t));const c=ec(e,i,o),y=t.internals.z??0;return{x:d.x,y:d.y,z:y>=c?y+1:c}}function P0(e,t,n,r=[0,0]){var s;const i=[],o=new Map;for(const a of e){const l=t.get(a.parentId);if(!l)continue;const u=((s=o.get(a.parentId))==null?void 0:s.expandedRect)??xr(l),f=s0(u,a.rect);o.set(a.parentId,{expandedRect:f,parent:l})}return o.size>0&&o.forEach(({expandedRect:a,parent:l},u)=>{var P;const f=l.internals.positionAbsolute,d=jn(l),c=l.origin??r,y=a.x<f.x?Math.round(Math.abs(f.x-a.x)):0,v=a.y<f.y?Math.round(Math.abs(f.y-a.y)):0,_=Math.max(d.width,Math.round(a.width)),p=Math.max(d.height,Math.round(a.height)),b=(_-d.width)*c[0],A=(p-d.height)*c[1];(y>0||v>0||b||A)&&(i.push({id:u,type:"position",position:{x:l.position.x-y+b,y:l.position.y-v+A}}),(P=n.get(u))==null||P.forEach(w=>{e.some(O=>O.id===w.id)||i.push({id:w.id,type:"position",position:{x:w.position.x+y,y:w.position.y+v}})})),(d.width<a.width||d.height<a.height||y||v)&&i.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:_+(y?c[0]*y-b:0),height:p+(v?c[1]*v-A:0)}})}),i}function T0(e,t,n,r,i,o,s){const a=r==null?void 0:r.querySelector(".xyflow__viewport");let l=!1;if(!a)return{changes:[],updatedInternals:l};const u=[],f=window.getComputedStyle(a),{m22:d}=new window.DOMMatrixReadOnly(f.transform),c=[];for(const y of e.values()){const v=t.get(y.id);if(!v)continue;if(v.hidden){t.set(v.id,{...v,internals:{...v.internals,handleBounds:void 0}}),l=!0;continue}const _=Wu(y.nodeElement),p=v.measured.width!==_.width||v.measured.height!==_.height;if(!!(_.width&&_.height&&(p||!v.internals.handleBounds||y.force))){const A=y.nodeElement.getBoundingClientRect(),P=br(v.extent)?v.extent:o;let{positionAbsolute:w}=v.internals;v.parentId&&v.extent==="parent"?w=Yu(w,_,t.get(v.parentId)):P&&(w=Xn(w,P,_));const O={...v,measured:_,internals:{...v.internals,positionAbsolute:w,handleBounds:{source:Va("source",y.nodeElement,A,d,v.id),target:Va("target",y.nodeElement,A,d,v.id)}}};t.set(v.id,O),v.parentId&&Us(O,t,n,{nodeOrigin:i,zIndexMode:s}),l=!0,p&&(u.push({id:v.id,type:"dimensions",dimensions:_}),v.expandParent&&v.parentId&&c.push({id:v.id,parentId:v.parentId,rect:xr(O,i)}))}}if(c.length>0){const y=P0(c,t,n,i);u.push(...y)}return{changes:u,updatedInternals:l}}async function O0({delta:e,panZoom:t,transform:n,translateExtent:r,width:i,height:o}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const s=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[i,o]],r),a=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(a)}function qa(e,t,n,r,i,o){let s=i;const a=r.get(s)||new Map;r.set(s,a.set(n,t)),s=`${i}-${e}`;const l=r.get(s)||new Map;if(r.set(s,l.set(n,t)),o){s=`${i}-${e}-${o}`;const u=r.get(s)||new Map;r.set(s,u.set(n,t))}}function D0(e,t,n){e.clear(),t.clear();for(const r of n){const{source:i,target:o,sourceHandle:s=null,targetHandle:a=null}=r,l={edgeId:r.id,source:i,target:o,sourceHandle:s,targetHandle:a},u=`${i}-${s}--${o}-${a}`,f=`${o}-${a}--${i}-${s}`;qa("source",l,f,e,i,s),qa("target",l,u,e,o,a),t.set(r.id,r)}}function tc(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:tc(n,t):!1}function Za(e,t,n){var i;let r=e;do{if((i=r==null?void 0:r.matches)!=null&&i.call(r,t))return!0;if(r===n)return!1;r=r==null?void 0:r.parentElement}while(r);return!1}function z0(e,t,n,r){const i=new Map;for(const[o,s]of e)if((s.selected||s.id===r)&&(!s.parentId||!tc(s,e))&&(s.draggable||t&&typeof s.draggable>"u")){const a=e.get(o);a&&i.set(o,{id:o,position:a.position||{x:0,y:0},distance:{x:n.x-a.internals.positionAbsolute.x,y:n.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return i}function Oo({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var s,a,l;const i=[];for(const[u,f]of t){const d=(s=n.get(u))==null?void 0:s.internals.userNode;d&&i.push({...d,position:f.position,dragging:r})}if(!e)return[i[0],i];const o=(a=n.get(e))==null?void 0:a.internals.userNode;return[o?{...o,position:((l=t.get(e))==null?void 0:l.position)||o.position,dragging:r}:i[0],i]}function R0({dragItems:e,snapGrid:t,x:n,y:r}){const i=e.values().next().value;if(!i)return null;const o={x:n-i.distance.x,y:r-i.distance.y},s=_i(o,t);return{x:s.x-o.x,y:s.y-o.y}}function L0({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:i}){let o={x:null,y:null},s=0,a=new Map,l=!1,u={x:0,y:0},f=null,d=!1,c=null,y=!1,v=!1,_=null;function p({noDragClassName:A,handleSelector:P,domNode:w,isSelectable:O,nodeId:L,nodeClickDistance:W=0}){c=xt(w);function T({x,y:I}){const{nodeLookup:m,nodeExtent:C,snapGrid:N,snapToGrid:F,nodeOrigin:B,onNodeDrag:X,onSelectionDrag:K,onError:G,updateNodePositions:ee}=t();o={x,y:I};let $=!1;const E=a.size>1,D=E&&C?ds(mo(a)):null,V=E&&F?R0({dragItems:a,snapGrid:N,x,y:I}):null;for(const[z,q]of a){if(!m.has(z))continue;let U={x:x-q.distance.x,y:I-q.distance.y};F&&(U=V?{x:Math.round(U.x+V.x),y:Math.round(U.y+V.y)}:_i(U,N));let Z=null;if(E&&C&&!q.extent&&D){const{positionAbsolute:ue}=q.internals,Se=ue.x-D.x+C[0][0],Me=ue.x+q.measured.width-D.x2+C[1][0],ve=ue.y-D.y+C[0][1],ne=ue.y+q.measured.height-D.y2+C[1][1];Z=[[Se,ve],[Me,ne]]}const{position:j,positionAbsolute:ye}=Ku({nodeId:z,nextPosition:U,nodeLookup:m,nodeExtent:Z||C,nodeOrigin:B,onError:G});$=$||q.position.x!==j.x||q.position.y!==j.y,q.position=j,q.internals.positionAbsolute=ye}if(v=v||$,!!$&&(ee(a,!0),_&&(r||X||!L&&K))){const[z,q]=Oo({nodeId:L,dragItems:a,nodeLookup:m});r==null||r(_,a,z,q),X==null||X(_,z,q),L||K==null||K(_,q)}}async function H(){if(!f)return;const{transform:x,panBy:I,autoPanSpeed:m,autoPanOnNodeDrag:C}=t();if(!C){l=!1,cancelAnimationFrame(s);return}const[N,F]=Xu(u,f,m);(N!==0||F!==0)&&(o.x=(o.x??0)-N/x[2],o.y=(o.y??0)-F/x[2],await I({x:N,y:F})&&T(o)),s=requestAnimationFrame(H)}function J(x){var E;const{nodeLookup:I,multiSelectionActive:m,nodesDraggable:C,transform:N,snapGrid:F,snapToGrid:B,selectNodesOnDrag:X,onNodeDragStart:K,onSelectionDragStart:G,unselectNodesAndEdges:ee}=t();d=!0,(!X||!O)&&!m&&L&&((E=I.get(L))!=null&&E.selected||ee()),O&&X&&L&&(e==null||e(L));const $=To(x.sourceEvent,{transform:N,snapGrid:F,snapToGrid:B,containerBounds:f});if(o=$,a=z0(I,C,$,L),a.size>0&&(n||K||!L&&G)){const[D,V]=Oo({nodeId:L,dragItems:a,nodeLookup:I});n==null||n(x.sourceEvent,a,D,V),K==null||K(x.sourceEvent,D,V),L||G==null||G(x.sourceEvent,V)}}const M=rg().clickDistance(W).on("start",x=>{const{domNode:I,nodeDragThreshold:m,transform:C,snapGrid:N,snapToGrid:F}=t();f=(I==null?void 0:I.getBoundingClientRect())||null,y=!1,v=!1,_=x.sourceEvent,m===0&&J(x),o=To(x.sourceEvent,{transform:C,snapGrid:N,snapToGrid:F,containerBounds:f}),u=Nt(x.sourceEvent,f)}).on("drag",x=>{const{autoPanOnNodeDrag:I,transform:m,snapGrid:C,snapToGrid:N,nodeDragThreshold:F,nodeLookup:B}=t(),X=To(x.sourceEvent,{transform:m,snapGrid:C,snapToGrid:N,containerBounds:f});if(_=x.sourceEvent,(x.sourceEvent.type==="touchmove"&&x.sourceEvent.touches.length>1||L&&!B.has(L))&&(y=!0),!y){if(!l&&I&&d&&(l=!0,H()),!d){const K=Nt(x.sourceEvent,f),G=K.x-u.x,ee=K.y-u.y;Math.sqrt(G*G+ee*ee)>F&&J(x)}(o.x!==X.xSnapped||o.y!==X.ySnapped)&&a&&d&&(u=Nt(x.sourceEvent,f),T(X))}}).on("end",x=>{if(!(!d||y)&&(l=!1,d=!1,cancelAnimationFrame(s),a.size>0)){const{nodeLookup:I,updateNodePositions:m,onNodeDragStop:C,onSelectionDragStop:N}=t();if(v&&(m(a,!1),v=!1),i||C||!L&&N){const[F,B]=Oo({nodeId:L,dragItems:a,nodeLookup:I,dragging:!1});i==null||i(x.sourceEvent,a,F,B),C==null||C(x.sourceEvent,F,B),L||N==null||N(x.sourceEvent,B)}}}).filter(x=>{const I=x.target;return!x.button&&(!A||!Za(I,`.${A}`,w))&&(!P||Za(I,P,w))});c.call(M)}function b(){c==null||c.on(".drag",null)}return{update:p,destroy:b}}function F0(e,t,n){const r=[],i={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const o of t.values())jr(i,xr(o))>0&&r.push(o);return r}const V0=250;function H0(e,t,n,r){var a,l;let i=[],o=1/0;const s=F0(e,n,t+V0);for(const u of s){const f=[...((a=u.internals.handleBounds)==null?void 0:a.source)??[],...((l=u.internals.handleBounds)==null?void 0:l.target)??[]];for(const d of f){if(r.nodeId===d.nodeId&&r.type===d.type&&r.id===d.id)continue;const{x:c,y}=Wn(u,d,d.position,!0),v=Math.sqrt(Math.pow(c-e.x,2)+Math.pow(y-e.y,2));v>t||(v<o?(i=[{...d,x:c,y}],o=v):v===o&&i.push({...d,x:c,y}))}}if(!i.length)return null;if(i.length>1){const u=r.type==="source"?"target":"source";return i.find(f=>f.type===u)??i[0]}return i[0]}function nc(e,t,n,r,i,o=!1){var u,f,d;const s=r.get(e);if(!s)return null;const a=i==="strict"?(u=s.internals.handleBounds)==null?void 0:u[t]:[...((f=s.internals.handleBounds)==null?void 0:f.source)??[],...((d=s.internals.handleBounds)==null?void 0:d.target)??[]],l=(n?a==null?void 0:a.find(c=>c.id===n):a==null?void 0:a[0])??null;return l&&o?{...l,...Wn(s,l,l.position,!0)}:l}function rc(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function B0(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const ic=()=>!0;function K0(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:o,isTarget:s,domNode:a,nodeLookup:l,lib:u,autoPanOnConnect:f,flowId:d,panBy:c,cancelConnection:y,onConnectStart:v,onConnect:_,onConnectEnd:p,isValidConnection:b=ic,onReconnectEnd:A,updateConnection:P,getTransform:w,getFromHandle:O,autoPanSpeed:L,dragThreshold:W=1,handleDomNode:T}){const H=qu(e.target);let J=0,M;const{x,y:I}=Nt(e),m=rc(o,T),C=a==null?void 0:a.getBoundingClientRect();let N=!1;if(!C||!m)return;const F=nc(i,m,r,l,t);if(!F)return;let B=Nt(e,C),X=!1,K=null,G=!1,ee=null;function $(){if(!f||!C)return;const[j,ye]=Xu(B,C,L);c({x:j,y:ye}),J=requestAnimationFrame($)}const E={...F,nodeId:i,type:m,position:F.position},D=l.get(i);let z={inProgress:!0,isValid:null,from:Wn(D,E,se.Left,!0),fromHandle:E,fromPosition:E.position,fromNode:D,to:B,toHandle:null,toPosition:za[E.position],toNode:null,pointer:B};function q(){N=!0,P(z),v==null||v(e,{nodeId:i,handleId:r,handleType:m})}W===0&&q();function U(j){if(!N){const{x:ne,y:te}=Nt(j),ae=ne-x,ke=te-I;if(!(ae*ae+ke*ke>W*W))return;q()}if(!O()||!E){Z(j);return}const ye=w();B=Nt(j,C),M=H0(wi(B,ye,!1,[1,1]),n,l,E),X||($(),X=!0);const ue=oc(j,{handle:M,connectionMode:t,fromNodeId:i,fromHandleId:r,fromType:s?"target":"source",isValidConnection:b,doc:H,lib:u,flowId:d,nodeLookup:l});ee=ue.handleDomNode,K=ue.connection,G=B0(!!M,ue.isValid);const Se=l.get(i),Me=Se?Wn(Se,E,se.Left,!0):z.from,ve={...z,from:Me,isValid:G,to:ue.toHandle&&G?Qi({x:ue.toHandle.x,y:ue.toHandle.y},ye):B,toHandle:ue.toHandle,toPosition:G&&ue.toHandle?ue.toHandle.position:za[E.position],toNode:ue.toHandle?l.get(ue.toHandle.nodeId):null,pointer:B};P(ve),z=ve}function Z(j){if(!("touches"in j&&j.touches.length>0)){if(N){(M||ee)&&K&&G&&(_==null||_(K));const{inProgress:ye,...ue}=z,Se={...ue,toPosition:z.toHandle?z.toPosition:null};p==null||p(j,Se),o&&(A==null||A(j,Se))}y(),cancelAnimationFrame(J),X=!1,G=!1,K=null,ee=null,H.removeEventListener("mousemove",U),H.removeEventListener("mouseup",Z),H.removeEventListener("touchmove",U),H.removeEventListener("touchend",Z)}}H.addEventListener("mousemove",U),H.addEventListener("mouseup",Z),H.addEventListener("touchmove",U),H.addEventListener("touchend",Z)}function oc(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:o,doc:s,lib:a,flowId:l,isValidConnection:u=ic,nodeLookup:f}){const d=o==="target",c=t?s.querySelector(`.${a}-flow__handle[data-id="${l}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:y,y:v}=Nt(e),_=s.elementFromPoint(y,v),p=_!=null&&_.classList.contains(`${a}-flow__handle`)?_:c,b={handleDomNode:p,isValid:!1,connection:null,toHandle:null};if(p){const A=rc(void 0,p),P=p.getAttribute("data-nodeid"),w=p.getAttribute("data-handleid"),O=p.classList.contains("connectable"),L=p.classList.contains("connectableend");if(!P||!A)return b;const W={source:d?P:r,sourceHandle:d?w:i,target:d?r:P,targetHandle:d?i:w};b.connection=W;const H=O&&L&&(n===_r.Strict?d&&A==="source"||!d&&A==="target":P!==r||w!==i);b.isValid=H&&u(W),b.toHandle=nc(P,A,w,f,n,!0)}return b}const Ga={onPointerDown:K0,isValid:oc},wo=e=>({x:e.x,y:e.y,zoom:e.k}),Do=({x:e,y:t,zoom:n})=>vo.translate(e,t).scale(n),$n=(e,t)=>e.target.closest(`.${t}`),sc=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Y0=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,zo=(e,t=0,n=Y0,r=()=>{})=>{const i=typeof t=="number"&&t>0;return i||r(),i?e.transition().duration(t).ease(n).on("end",r):e},ac=e=>{const t=e.ctrlKey&&Ji()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function X0({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:o,zoomOnPinch:s,onPanZoomStart:a,onPanZoom:l,onPanZoomEnd:u}){return f=>{if($n(f,t))return f.ctrlKey&&f.preventDefault(),!1;f.preventDefault(),f.stopImmediatePropagation();const d=n.property("__zoom").k||1;if(f.ctrlKey&&s){const p=Mt(f),b=ac(f),A=d*Math.pow(2,b);r.scaleTo(n,A,p,f);return}const c=f.deltaMode===1?20:1;let y=i===nr.Vertical?0:f.deltaX*c,v=i===nr.Horizontal?0:f.deltaY*c;!Ji()&&f.shiftKey&&i!==nr.Vertical&&(y=f.deltaY*c,v=0),r.translateBy(n,-(y/d)*o,-(v/d)*o,{internal:!0});const _=wo(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(l==null||l(f,_),e.panScrollTimeout=setTimeout(()=>{u==null||u(f,_),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,a==null||a(f,_))}}function W0({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,i){const o=r.type==="wheel",s=!t&&o&&!r.ctrlKey,a=$n(r,e);if(r.ctrlKey&&o&&a&&r.preventDefault(),s||a)return null;r.preventDefault(),n.call(this,r,i)}}function q0({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var o,s,a;if((o=r.sourceEvent)!=null&&o.internal)return;const i=wo(r.transform);e.mouseButton=((s=r.sourceEvent)==null?void 0:s.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=i,((a=r.sourceEvent)==null?void 0:a.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,i))}}function Z0({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return o=>{var s,a;e.usedRightMouseButton=!!(n&&sc(t,e.mouseButton??0)),(s=o.sourceEvent)!=null&&s.sync||r([o.transform.x,o.transform.y,o.transform.k]),i&&!((a=o.sourceEvent)!=null&&a.internal)&&(i==null||i(o.sourceEvent,wo(o.transform)))}}function G0({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:o}){return s=>{var a;if(!((a=s.sourceEvent)!=null&&a.internal)&&(e.isZoomingOrPanning=!1,o&&sc(t,e.mouseButton??0)&&!e.usedRightMouseButton&&s.sourceEvent&&o(s.sourceEvent),e.usedRightMouseButton=!1,r(!1),i)){const l=wo(s.transform);e.prevViewport=l,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{i==null||i(s.sourceEvent,l)},n?150:0)}}}function U0({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:o,userSelectionActive:s,noWheelClassName:a,noPanClassName:l,lib:u,connectionInProgress:f}){return d=>{var p;const c=e||t,y=n&&d.ctrlKey,v=d.type==="wheel";if(d.button===1&&d.type==="mousedown"&&($n(d,`${u}-flow__node`)||$n(d,`${u}-flow__edge`)))return!0;if(!r&&!c&&!i&&!o&&!n||s||f&&!v||$n(d,a)&&v||$n(d,l)&&(!v||i&&v&&!e)||!n&&d.ctrlKey&&v)return!1;if(!n&&d.type==="touchstart"&&((p=d.touches)==null?void 0:p.length)>1)return d.preventDefault(),!1;if(!c&&!i&&!y&&v||!r&&(d.type==="mousedown"||d.type==="touchstart")||Array.isArray(r)&&!r.includes(d.button)&&d.type==="mousedown")return!1;const _=Array.isArray(r)&&r.includes(d.button)||!d.button||d.button<=1;return(!d.ctrlKey||v)&&_}}function j0({domNode:e,minZoom:t,maxZoom:n,translateExtent:r,viewport:i,onPanZoom:o,onPanZoomStart:s,onPanZoomEnd:a,onDraggingChange:l}){const u={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},f=e.getBoundingClientRect(),d=jy().scaleExtent([t,n]).translateExtent(r),c=xt(e).call(d);A({x:i.x,y:i.y,zoom:wr(i.zoom,t,n)},[[0,0],[f.width,f.height]],r);const y=c.on("wheel.zoom"),v=c.on("dblclick.zoom");d.wheelDelta(ac);function _(M,x){return c?new Promise(I=>{d==null||d.interpolate((x==null?void 0:x.interpolate)==="linear"?Kr:Ri).transform(zo(c,x==null?void 0:x.duration,x==null?void 0:x.ease,()=>I(!0)),M)}):Promise.resolve(!1)}function p({noWheelClassName:M,noPanClassName:x,onPaneContextMenu:I,userSelectionActive:m,panOnScroll:C,panOnDrag:N,panOnScrollMode:F,panOnScrollSpeed:B,preventScrolling:X,zoomOnPinch:K,zoomOnScroll:G,zoomOnDoubleClick:ee,zoomActivationKeyPressed:$,lib:E,onTransformChange:D,connectionInProgress:V,paneClickDistance:z,selectionOnDrag:q}){m&&!u.isZoomingOrPanning&&b();const U=C&&!$&&!m;d.clickDistance(q?1/0:!Jt(z)||z<0?0:z);const Z=U?X0({zoomPanValues:u,noWheelClassName:M,d3Selection:c,d3Zoom:d,panOnScrollMode:F,panOnScrollSpeed:B,zoomOnPinch:K,onPanZoomStart:s,onPanZoom:o,onPanZoomEnd:a}):W0({noWheelClassName:M,preventScrolling:X,d3ZoomHandler:y});if(c.on("wheel.zoom",Z,{passive:!1}),!m){const ye=q0({zoomPanValues:u,onDraggingChange:l,onPanZoomStart:s});d.on("start",ye);const ue=Z0({zoomPanValues:u,panOnDrag:N,onPaneContextMenu:!!I,onPanZoom:o,onTransformChange:D});d.on("zoom",ue);const Se=G0({zoomPanValues:u,panOnDrag:N,panOnScroll:C,onPaneContextMenu:I,onPanZoomEnd:a,onDraggingChange:l});d.on("end",Se)}const j=U0({zoomActivationKeyPressed:$,panOnDrag:N,zoomOnScroll:G,panOnScroll:C,zoomOnDoubleClick:ee,zoomOnPinch:K,userSelectionActive:m,noPanClassName:x,noWheelClassName:M,lib:E,connectionInProgress:V});d.filter(j),ee?c.on("dblclick.zoom",v):c.on("dblclick.zoom",null)}function b(){d.on("zoom",null)}async function A(M,x,I){const m=Do(M),C=d==null?void 0:d.constrain()(m,x,I);return C&&await _(C),new Promise(N=>N(C))}async function P(M,x){const I=Do(M);return await _(I,x),new Promise(m=>m(I))}function w(M){if(c){const x=Do(M),I=c.property("__zoom");(I.k!==M.zoom||I.x!==M.x||I.y!==M.y)&&(d==null||d.transform(c,x,null,{sync:!0}))}}function O(){const M=c?Vu(c.node()):{x:0,y:0,k:1};return{x:M.x,y:M.y,zoom:M.k}}function L(M,x){return c?new Promise(I=>{d==null||d.interpolate((x==null?void 0:x.interpolate)==="linear"?Kr:Ri).scaleTo(zo(c,x==null?void 0:x.duration,x==null?void 0:x.ease,()=>I(!0)),M)}):Promise.resolve(!1)}function W(M,x){return c?new Promise(I=>{d==null||d.interpolate((x==null?void 0:x.interpolate)==="linear"?Kr:Ri).scaleBy(zo(c,x==null?void 0:x.duration,x==null?void 0:x.ease,()=>I(!0)),M)}):Promise.resolve(!1)}function T(M){d==null||d.scaleExtent(M)}function H(M){d==null||d.translateExtent(M)}function J(M){const x=!Jt(M)||M<0?0:M;d==null||d.clickDistance(x)}return{update:p,destroy:b,setViewport:P,setViewportConstrained:A,getViewport:O,scaleTo:L,scaleBy:W,setScaleExtent:T,setTranslateExtent:H,syncViewport:w,setClickDistance:J}}var Ua;(function(e){e.Line="line",e.Handle="handle"})(Ua||(Ua={}));function js(){const e={};return[t=>{if(t&&!nf(e))throw new Error(t);return ms(e)},t=>ps(e,t)]}const[Q0,J0]=js(),[$0,ev]=js(),[tv,nv]=js();var rv=Ie("<div><!></div>");function $i(e,t){he(t,!0);let n=Q(t,"id",3,null),r=Q(t,"type",3,"source"),i=Q(t,"position",19,()=>se.Top),o=Q(t,"isConnectableStart",3,!0),s=Q(t,"isConnectableEnd",3,!0),a=yi(t,["$$slots","$$events","$$legacy","id","type","position","style","class","isConnectable","isConnectableStart","isConnectableEnd","isValidConnection","onconnect","ondisconnect","children"]);const l=Q0("Handle must be used within a Custom Node component"),u=$0("Handle must be used within a Custom Node component");let f=S(()=>r()==="target"),d=S(()=>t.isConnectable!==void 0?t.isConnectable:u.value),c=Nr(),y=S(()=>c.ariaLabelConfig),v=null;Kl(()=>{if(t.onconnect||t.ondisconnect){c.edges;let x=c.connectionLookup.get(`${l}-${r()}${n()?`-${n()}`:""}`);if(v&&!Jy(x,v)){const I=x??new Map;Ra(v,I,t.ondisconnect),Ra(I,v,t.onconnect)}v=new Map(x)}});let _=S(()=>{if(!c.connection.inProgress)return[!1,!1,!1,!1,null];const{fromHandle:x,toHandle:I,isValid:m}=c.connection,C=x&&x.nodeId===l&&x.type===r()&&x.id===n(),N=I&&I.nodeId===l&&I.type===r()&&I.id===n(),F=c.connectionMode===_r.Strict?(x==null?void 0:x.type)!==r():l!==(x==null?void 0:x.nodeId)||n()!==(x==null?void 0:x.id);return[!0,C,N,F,N&&m]}),p=S(()=>oi(h(_),5)),b=S(()=>h(p)[0]),A=S(()=>h(p)[1]),P=S(()=>h(p)[2]),w=S(()=>h(p)[3]),O=S(()=>h(p)[4]);function L(x){var m;const I=c.onbeforeconnect?c.onbeforeconnect(x):x;I&&(c.addEdge(I),(m=c.onconnect)==null||m.call(c,x))}function W(x){const I=Gu(x);x.currentTarget&&(I&&x.button===0||!I)&&Ga.onPointerDown(x,{handleId:n(),nodeId:l,isTarget:h(f),connectionRadius:c.connectionRadius,domNode:c.domNode,nodeLookup:c.nodeLookup,connectionMode:c.connectionMode,lib:"svelte",autoPanOnConnect:c.autoPanOnConnect,autoPanSpeed:c.autoPanSpeed,flowId:c.flowId,isValidConnection:t.isValidConnection??c.isValidConnection,updateConnection:c.updateConnection,cancelConnection:c.cancelConnection,panBy:c.panBy,onConnect:L,onConnectStart:(m,C)=>{var N;(N=c.onconnectstart)==null||N.call(c,m,{nodeId:C.nodeId,handleId:C.handleId,handleType:C.handleType})},onConnectEnd:(m,C)=>{var N;(N=c.onconnectend)==null||N.call(c,m,C)},getTransform:()=>[c.viewport.x,c.viewport.y,c.viewport.zoom],getFromHandle:()=>c.connection.fromHandle,dragThreshold:c.connectionDragThreshold,handleDomNode:x.currentTarget})}function T(x){var ee,$;if(!l||!c.clickConnectStartHandle&&!o())return;if(!c.clickConnectStartHandle){(ee=c.onclickconnectstart)==null||ee.call(c,x,{nodeId:l,handleId:n(),handleType:r()}),c.clickConnectStartHandle={nodeId:l,type:r(),id:n()};return}const I=qu(x.target),m=t.isValidConnection??c.isValidConnection,{connectionMode:C,clickConnectStartHandle:N,flowId:F,nodeLookup:B}=c,{connection:X,isValid:K}=Ga.isValid(x,{handle:{nodeId:l,id:n(),type:r()},connectionMode:C,fromNodeId:N.nodeId,fromHandleId:N.id??null,fromType:N.type,isValidConnection:m,flowId:F,doc:I,lib:"svelte",nodeLookup:B});K&&X&&L(X);const G=structuredClone(wl(c.connection));delete G.inProgress,G.toPosition=G.toHandle?G.toHandle.position:null,($=c.onclickconnectend)==null||$.call(c,x,G),c.clickConnectStartHandle=null}var H=rv(),J=()=>{};Un(H,()=>({"data-handleid":n(),"data-nodeid":l,"data-handlepos":i(),"data-id":`${c.flowId??""}-${l??""}-${n()??"null"??""}-${r()??""}`,class:["svelte-flow__handle",`svelte-flow__handle-${i()}`,c.noDragClass,c.noPanClass,i(),t.class],onmousedown:W,ontouchstart:W,onclick:c.clickConnect?T:void 0,onkeypress:J,style:t.style,role:"button","aria-label":h(y)["handle.ariaLabel"],tabindex:"-1",...a,[un]:{valid:h(O),connectingto:h(P),connectingfrom:h(A),source:!h(f),target:h(f),connectablestart:o(),connectableend:s(),connectable:h(d),connectionindicator:h(d)&&(!h(b)||h(w))&&(h(b)||c.clickConnectStartHandle?s():o())}}));var M=Ce(H);on(M,()=>t.children??qn),ie(e,H),ge()}var iv=Ie("<!> <!>",1);function lc(e,t){he(t,!0);let n=Q(t,"targetPosition",19,()=>se.Top),r=Q(t,"sourcePosition",19,()=>se.Bottom);var i=iv(),o=Xe(i);$i(o,{type:"target",get position(){return n()}});var s=Oe(o),a=Oe(s);$i(a,{type:"source",get position(){return r()}}),Te(()=>{var l;return _n(s,` ${((l=t.data)==null?void 0:l.label)??""} `)}),ie(e,i),ge()}var ov=Ie(" <!>",1);function sv(e,t){he(t,!0);let n=Q(t,"data",19,()=>({label:"Node"})),r=Q(t,"sourcePosition",19,()=>se.Bottom);var i=ov(),o=Xe(i),s=Oe(o);$i(s,{type:"source",get position(){return r()}}),Te(()=>{var a;return _n(o,`${((a=n())==null?void 0:a.label)??""} `)}),ie(e,i),ge()}var av=Ie(" <!>",1);function lv(e,t){he(t,!0);let n=Q(t,"data",19,()=>({label:"Node"})),r=Q(t,"targetPosition",19,()=>se.Top);var i=av(),o=Xe(i),s=Oe(o);$i(s,{type:"target",get position(){return r()}}),Te(()=>{var a;return _n(o,`${((a=n())==null?void 0:a.label)??""} `)}),ie(e,i),ge()}function uv(e,t){}function Ro(e,t,n){if(!n||!t)return;const r=n==="root"?t:t.querySelector(`.svelte-flow__${n}`);r&&r.appendChild(e)}function Lo(e,t){const n=S(Nr),r=S(()=>h(n).domNode);let i;return h(r)?Ro(e,h(r),t):i=Yl(()=>{Vt(()=>{Ro(e,h(r),t),i==null||i()})}),{async update(o){Ro(e,h(r),o)},destroy(){e.parentNode&&e.parentNode.removeChild(e),i==null||i()}}}function cv(){let e=be(typeof window>"u");if(h(e)){const t=Yl(()=>{Vt(()=>{Y(e,!1),t==null||t()})})}return{get value(){return h(e)}}}const ja=e=>e0(e),fv=e=>Bu(e);function Bt(e){return e===void 0?void 0:`${e}px`}const eo={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var dv=Ie("<div><!></div>");function hv(e,t){he(t,!0);let n=Q(t,"x",3,0),r=Q(t,"y",3,0),i=Q(t,"selectEdgeOnClick",3,!1),o=Q(t,"transparent",3,!1),s=yi(t,["$$slots","$$events","$$legacy","x","y","width","height","selectEdgeOnClick","transparent","class","children"]);const a=Nr(),l=tv("EdgeLabel must be used within a Custom Edge component");let u=S(()=>{var y;return(y=a.visible.edges.get(l))==null?void 0:y.zIndex});var f=dv(),d=()=>{i()&&l&&a.handleEdgeSelection(l)};Un(f,y=>({class:["svelte-flow__edge-label",{transparent:o()},t.class],tabindex:"-1",onclick:d,...s,[cn]:y}),[()=>({display:cv().value?"none":void 0,cursor:i()?"pointer":void 0,transform:`translate(-50%, -50%) translate(${n()??""}px,${r()??""}px)`,"pointer-events":"all",width:Bt(t.width),height:Bt(t.height),"z-index":h(u)})],void 0,void 0,"svelte-1g6l770");var c=Ce(f);on(c,()=>t.children??qn),Ge(f,(y,v)=>Lo==null?void 0:Lo(y,v),()=>"edge-labels"),ie(e,f),ge()}var gv=pt("<path></path>"),yv=pt('<path fill="none"></path><!><!>',1);function xo(e,t){let n=Q(t,"interactionWidth",3,20),r=yi(t,["$$slots","$$events","$$legacy","id","path","label","labelX","labelY","labelStyle","markerStart","markerEnd","style","interactionWidth","class"]);var i=yv(),o=Xe(i),s=Oe(o);{var a=f=>{var d=gv();Un(d,()=>({d:t.path,"stroke-opacity":0,"stroke-width":n(),fill:"none",class:"svelte-flow__edge-interaction",...r})),ie(f,d)};st(s,f=>{n()>0&&f(a)})}var l=Oe(s);{var u=f=>{hv(f,{get x(){return t.labelX},get y(){return t.labelY},get style(){return t.labelStyle},selectEdgeOnClick:!0,children:(d,c)=>{var y=Wf();Te(()=>_n(y,t.label)),ie(d,y)},$$slots:{default:!0}})};st(l,f=>{t.label&&f(u)})}Te(()=>{de(o,"id",t.id),de(o,"d",t.path),Nn(o,0,Gn(["svelte-flow__edge-path",t.class])),de(o,"marker-start",t.markerStart),de(o,"marker-end",t.markerEnd),kt(o,t.style)}),ie(e,i)}function uc(e,t){he(t,!0);let n=S(()=>{var a;return Uu({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition,curvature:(a=t.pathOptions)==null?void 0:a.curvature})}),r=S(()=>oi(h(n),3)),i=S(()=>h(r)[0]),o=S(()=>h(r)[1]),s=S(()=>h(r)[2]);xo(e,{get id(){return t.id},get path(){return h(i)},get labelX(){return h(o)},get labelY(){return h(s)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),ge()}function vv(e,t){he(t,!0);let n=S(()=>Ws({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition})),r=S(()=>oi(h(n),3)),i=S(()=>h(r)[0]),o=S(()=>h(r)[1]),s=S(()=>h(r)[2]);xo(e,{get path(){return h(i)},get labelX(){return h(o)},get labelY(){return h(s)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),ge()}function mv(e,t){he(t,!0);let n=S(()=>Ju({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY})),r=S(()=>oi(h(n),3)),i=S(()=>h(r)[0]),o=S(()=>h(r)[1]),s=S(()=>h(r)[2]);xo(e,{get path(){return h(i)},get labelX(){return h(o)},get labelY(){return h(s)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),ge()}function pv(e,t){he(t,!0);let n=S(()=>Ws({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition,borderRadius:0})),r=S(()=>oi(h(n),3)),i=S(()=>h(r)[0]),o=S(()=>h(r)[1]),s=S(()=>h(r)[2]);xo(e,{get path(){return h(i)},get labelX(){return h(o)},get labelY(){return h(s)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),ge()}var ni,ri;class _v{constructor(t,n){R(this,ni);R(this,ri);oe(this,ni,t),oe(this,ri,Ml(n))}get current(){return g(this,ri).call(this),g(this,ni).call(this)}}ni=new WeakMap,ri=new WeakMap;const wv=/\(.+\)/,xv=new Set(["all","print","screen","and","or","not","only"]);class bv extends _v{constructor(t,n){let r=wv.test(t)||t.split(/[\s,]+/).some(o=>xv.has(o.trim()))?t:`(${t})`;const i=window.matchMedia(r);super(()=>i.matches,o=>Qo(i,"change",o))}}function Ev(e,t,n,r){const i=new Map;return Ys(e,{x:0,y:0,width:n,height:r},t,!0).forEach(o=>{i.set(o.id,o)}),i}function Qa(e){const{edges:t,defaultEdgeOptions:n,nodeLookup:r,previousEdges:i,connectionMode:o,onerror:s,onlyRenderVisible:a,elevateEdgesOnSelect:l,zIndexMode:u}=e,f=new Map;for(const d of t){const c=r.get(d.source),y=r.get(d.target);if(!c||!y)continue;if(a){const{visibleNodes:p,transform:b,width:A,height:P}=e;if(v0({sourceNode:c,targetNode:y,width:A,height:P,transform:b}))p.set(c.id,c),p.set(y.id,y);else continue}const v=i.get(d.id);if(v&&d===v.edge&&c==v.sourceNode&&y==v.targetNode){f.set(d.id,v);continue}const _=b0({id:d.id,sourceNode:c,targetNode:y,sourceHandle:d.sourceHandle||null,targetHandle:d.targetHandle||null,connectionMode:o,onError:s});_&&f.set(d.id,{...n,...d,..._,zIndex:y0({selected:d.selected,zIndex:d.zIndex??n.zIndex,sourceNode:c,targetNode:y,elevateOnSelect:l,zIndexMode:u}),sourceNode:c,targetNode:y,edge:d})}return f}const cc={input:sv,output:lv,default:lc,group:uv},fc={straight:mv,smoothstep:vv,default:uc,step:pv};function Sv(e,t,n,r,i,o){if(t&&!n&&r&&i){const s=mo(o,{filter:a=>!!((a.width||a.initialWidth)&&(a.height||a.initialHeight))});return Xs(s,r,i,.5,2,.1)}else return n??{x:0,y:0,zoom:1}}function Nv(e){var n,r,i,o,s,a,l,u,f,d,c,y,v,_,p,b,A,P,w,O,L,W,T,H,J,M,x,I,m,C,N,F,B,X,K,G,ee,$,E,D,V,z,q,U,Z,j,ye,ue,Se,Me,ve,ne,te,ae,ke,fe,xe,et,tt,Ve,sn,an,le,re,Ee,De,Ae,nt,Xt,At,kr,Cr,Ir,Ar,Mr,Pr;class t{constructor(){R(this,n,S(()=>e.props.id??"1"));R(this,r,be(null));R(this,i,be(null));R(this,o,be(e.width??0));R(this,s,be(e.height??0));R(this,a,be(e.props.zIndexMode??"basic"));R(this,l,S(()=>{var lt;const k=I0(e.nodes,this.nodeLookup,this.parentLookup,{nodeExtent:this.nodeExtent,nodeOrigin:this.nodeOrigin,elevateNodesOnSelect:e.props.elevateNodesOnSelect??!0,checkEquality:!0,zIndexMode:this.zIndexMode});return this.fitViewQueued&&k&&((lt=this.fitViewOptions)!=null&&lt.duration?this.resolveFitView():queueMicrotask(()=>{this.resolveFitView()})),k}));R(this,u,S(()=>this.panZoom!==null));R(this,f,S(()=>(D0(this.connectionLookup,this.edgeLookup,e.edges),e.edges)));Ne(this,"_prevSelectedNodes",[]);Ne(this,"_prevSelectedNodeIds",new Set);R(this,d,S(()=>{const k=this._prevSelectedNodeIds.size,lt=new Set,Tr=this.nodes.filter(ut=>(ut.selected&&(lt.add(ut.id),this._prevSelectedNodeIds.delete(ut.id)),ut.selected));return(k!==lt.size||this._prevSelectedNodeIds.size>0)&&(this._prevSelectedNodes=Tr),this._prevSelectedNodeIds=lt,this._prevSelectedNodes}));Ne(this,"_prevSelectedEdges",[]);Ne(this,"_prevSelectedEdgeIds",new Set);R(this,c,S(()=>{const k=this._prevSelectedEdgeIds.size,lt=new Set,Tr=this.edges.filter(ut=>(ut.selected&&(lt.add(ut.id),this._prevSelectedEdgeIds.delete(ut.id)),ut.selected));return(k!==lt.size||this._prevSelectedEdgeIds.size>0)&&(this._prevSelectedEdges=Tr),this._prevSelectedEdgeIds=lt,this._prevSelectedEdges}));Ne(this,"selectionChangeHandlers",new Map);Ne(this,"nodeLookup",new Map);Ne(this,"parentLookup",new Map);Ne(this,"connectionLookup",new Map);Ne(this,"edgeLookup",new Map);Ne(this,"_prevVisibleEdges",new Map);R(this,y,S(()=>{const{nodes:k,_edges:lt,_prevVisibleEdges:Tr,nodeLookup:ut,connectionMode:mc,onerror:pc,onlyRenderVisibleElements:_c,defaultEdgeOptions:wc,zIndexMode:xc}=this;let xi,bo;const Js={edges:lt,defaultEdgeOptions:wc,previousEdges:Tr,nodeLookup:ut,connectionMode:mc,elevateEdgesOnSelect:e.props.elevateEdgesOnSelect??!0,zIndexMode:xc,onerror:pc};if(_c){const{viewport:Eo,width:$s,height:ea}=this,ta=[Eo.x,Eo.y,Eo.zoom];xi=Ev(ut,ta,$s,ea),bo=Qa({...Js,onlyRenderVisible:!0,visibleNodes:xi,transform:ta,width:$s,height:ea})}else xi=this.nodeLookup,bo=Qa(Js);return{nodes:xi,edges:bo}}));R(this,v,S(()=>e.props.nodesDraggable??!0));R(this,_,S(()=>e.props.nodesConnectable??!0));R(this,p,S(()=>e.props.elementsSelectable??!0));R(this,b,S(()=>e.props.nodesFocusable??!0));R(this,A,S(()=>e.props.edgesFocusable??!0));R(this,P,S(()=>e.props.disableKeyboardA11y??!1));R(this,w,S(()=>e.props.minZoom??.5));R(this,O,S(()=>e.props.maxZoom??2));R(this,L,S(()=>e.props.nodeOrigin??[0,0]));R(this,W,S(()=>e.props.nodeExtent??cs));R(this,T,S(()=>e.props.translateExtent??cs));R(this,H,S(()=>e.props.defaultEdgeOptions??{}));R(this,J,S(()=>e.props.nodeDragThreshold??1));R(this,M,S(()=>e.props.autoPanOnNodeDrag??!0));R(this,x,S(()=>e.props.autoPanOnConnect??!0));R(this,I,S(()=>e.props.autoPanOnNodeFocus??!0));R(this,m,S(()=>e.props.autoPanSpeed??15));R(this,C,S(()=>e.props.connectionDragThreshold??1));Ne(this,"fitViewQueued",e.props.fitView??!1);Ne(this,"fitViewOptions",e.props.fitViewOptions);Ne(this,"fitViewResolver",null);R(this,N,S(()=>e.props.snapGrid??null));R(this,F,be(!1));R(this,B,be(null));R(this,X,be(!1));R(this,K,be(!1));R(this,G,be(!1));R(this,ee,be(!1));R(this,$,be(!1));R(this,E,be(null));R(this,D,be(""));R(this,V,S(()=>e.props.selectionMode??Gi.Partial));R(this,z,S(()=>({...cc,...e.props.nodeTypes})));R(this,q,S(()=>({...fc,...e.props.edgeTypes})));R(this,U,S(()=>e.props.noPanClass??"nopan"));R(this,Z,S(()=>e.props.noDragClass??"nodrag"));R(this,j,S(()=>e.props.noWheelClass??"nowheel"));R(this,ye,S(()=>d0(e.props.ariaLabelConfig)));R(this,ue,be(Sv(this.nodesInitialized,e.props.fitView,e.props.initialViewport,this.width,this.height,this.nodeLookup)));R(this,Se,be(fs));R(this,Me,S(()=>this._connection.inProgress?{...this._connection,to:wi(this._connection.to,[this.viewport.x,this.viewport.y,this.viewport.zoom])}:this._connection));R(this,ve,S(()=>e.props.connectionMode??_r.Strict));R(this,ne,S(()=>e.props.connectionRadius??20));R(this,te,S(()=>e.props.isValidConnection??(()=>!0)));R(this,ae,S(()=>e.props.selectNodesOnDrag??!0));R(this,ke,S(()=>e.props.defaultMarkerColor===void 0?"#b1b1b7":e.props.defaultMarkerColor));R(this,fe,S(()=>E0(e.edges,{defaultColor:this.defaultMarkerColor,id:this.flowId,defaultMarkerStart:this.defaultEdgeOptions.markerStart,defaultMarkerEnd:this.defaultEdgeOptions.markerEnd})));R(this,xe,S(()=>e.props.onlyRenderVisibleElements??!1));R(this,et,S(()=>e.props.onflowerror??a0));R(this,tt,S(()=>e.props.ondelete));R(this,Ve,S(()=>e.props.onbeforedelete));R(this,sn,S(()=>e.props.onbeforeconnect));R(this,an,S(()=>e.props.onconnect));R(this,le,S(()=>e.props.onconnectstart));R(this,re,S(()=>e.props.onconnectend));R(this,Ee,S(()=>e.props.onbeforereconnect));R(this,De,S(()=>e.props.onreconnect));R(this,Ae,S(()=>e.props.onreconnectstart));R(this,nt,S(()=>e.props.onreconnectend));R(this,Xt,S(()=>e.props.clickConnect??!0));R(this,At,S(()=>e.props.onclickconnectstart));R(this,kr,S(()=>e.props.onclickconnectend));R(this,Cr,be(null));R(this,Ir,S(()=>e.props.onselectiondrag));R(this,Ar,S(()=>e.props.onselectiondragstart));R(this,Mr,S(()=>e.props.onselectiondragstop));Ne(this,"resolveFitView",async()=>{var k;this.panZoom&&(await i0({nodes:this.nodeLookup,width:this.width,height:this.height,panZoom:this.panZoom,minZoom:this.minZoom,maxZoom:this.maxZoom},this.fitViewOptions),(k=this.fitViewResolver)==null||k.resolve(!0),this.fitViewQueued=!1,this.fitViewOptions=void 0,this.fitViewResolver=null)});Ne(this,"_prefersDark",new bv("(prefers-color-scheme: dark)",e.props.colorModeSSR==="dark"));R(this,Pr,S(()=>e.props.colorMode==="system"?this._prefersDark.current?"dark":"light":e.props.colorMode??"light"))}get flowId(){return h(g(this,n))}set flowId(k){Y(g(this,n),k)}get domNode(){return h(g(this,r))}set domNode(k){Y(g(this,r),k)}get panZoom(){return h(g(this,i))}set panZoom(k){Y(g(this,i),k)}get width(){return h(g(this,o))}set width(k){Y(g(this,o),k)}get height(){return h(g(this,s))}set height(k){Y(g(this,s),k)}get zIndexMode(){return h(g(this,a))}set zIndexMode(k){Y(g(this,a),k)}get nodesInitialized(){return h(g(this,l))}set nodesInitialized(k){Y(g(this,l),k)}get viewportInitialized(){return h(g(this,u))}set viewportInitialized(k){Y(g(this,u),k)}get _edges(){return h(g(this,f))}set _edges(k){Y(g(this,f),k)}get nodes(){return this.nodesInitialized,e.nodes}set nodes(k){e.nodes=k}get edges(){return this._edges}set edges(k){e.edges=k}get selectedNodes(){return h(g(this,d))}set selectedNodes(k){Y(g(this,d),k)}get selectedEdges(){return h(g(this,c))}set selectedEdges(k){Y(g(this,c),k)}get visible(){return h(g(this,y))}set visible(k){Y(g(this,y),k)}get nodesDraggable(){return h(g(this,v))}set nodesDraggable(k){Y(g(this,v),k)}get nodesConnectable(){return h(g(this,_))}set nodesConnectable(k){Y(g(this,_),k)}get elementsSelectable(){return h(g(this,p))}set elementsSelectable(k){Y(g(this,p),k)}get nodesFocusable(){return h(g(this,b))}set nodesFocusable(k){Y(g(this,b),k)}get edgesFocusable(){return h(g(this,A))}set edgesFocusable(k){Y(g(this,A),k)}get disableKeyboardA11y(){return h(g(this,P))}set disableKeyboardA11y(k){Y(g(this,P),k)}get minZoom(){return h(g(this,w))}set minZoom(k){Y(g(this,w),k)}get maxZoom(){return h(g(this,O))}set maxZoom(k){Y(g(this,O),k)}get nodeOrigin(){return h(g(this,L))}set nodeOrigin(k){Y(g(this,L),k)}get nodeExtent(){return h(g(this,W))}set nodeExtent(k){Y(g(this,W),k)}get translateExtent(){return h(g(this,T))}set translateExtent(k){Y(g(this,T),k)}get defaultEdgeOptions(){return h(g(this,H))}set defaultEdgeOptions(k){Y(g(this,H),k)}get nodeDragThreshold(){return h(g(this,J))}set nodeDragThreshold(k){Y(g(this,J),k)}get autoPanOnNodeDrag(){return h(g(this,M))}set autoPanOnNodeDrag(k){Y(g(this,M),k)}get autoPanOnConnect(){return h(g(this,x))}set autoPanOnConnect(k){Y(g(this,x),k)}get autoPanOnNodeFocus(){return h(g(this,I))}set autoPanOnNodeFocus(k){Y(g(this,I),k)}get autoPanSpeed(){return h(g(this,m))}set autoPanSpeed(k){Y(g(this,m),k)}get connectionDragThreshold(){return h(g(this,C))}set connectionDragThreshold(k){Y(g(this,C),k)}get snapGrid(){return h(g(this,N))}set snapGrid(k){Y(g(this,N),k)}get dragging(){return h(g(this,F))}set dragging(k){Y(g(this,F),k)}get selectionRect(){return h(g(this,B))}set selectionRect(k){Y(g(this,B),k)}get selectionKeyPressed(){return h(g(this,X))}set selectionKeyPressed(k){Y(g(this,X),k)}get multiselectionKeyPressed(){return h(g(this,K))}set multiselectionKeyPressed(k){Y(g(this,K),k)}get deleteKeyPressed(){return h(g(this,G))}set deleteKeyPressed(k){Y(g(this,G),k)}get panActivationKeyPressed(){return h(g(this,ee))}set panActivationKeyPressed(k){Y(g(this,ee),k)}get zoomActivationKeyPressed(){return h(g(this,$))}set zoomActivationKeyPressed(k){Y(g(this,$),k)}get selectionRectMode(){return h(g(this,E))}set selectionRectMode(k){Y(g(this,E),k)}get ariaLiveMessage(){return h(g(this,D))}set ariaLiveMessage(k){Y(g(this,D),k)}get selectionMode(){return h(g(this,V))}set selectionMode(k){Y(g(this,V),k)}get nodeTypes(){return h(g(this,z))}set nodeTypes(k){Y(g(this,z),k)}get edgeTypes(){return h(g(this,q))}set edgeTypes(k){Y(g(this,q),k)}get noPanClass(){return h(g(this,U))}set noPanClass(k){Y(g(this,U),k)}get noDragClass(){return h(g(this,Z))}set noDragClass(k){Y(g(this,Z),k)}get noWheelClass(){return h(g(this,j))}set noWheelClass(k){Y(g(this,j),k)}get ariaLabelConfig(){return h(g(this,ye))}set ariaLabelConfig(k){Y(g(this,ye),k)}get _viewport(){return h(g(this,ue))}set _viewport(k){Y(g(this,ue),k)}get viewport(){return e.viewport??this._viewport}set viewport(k){e.viewport&&(e.viewport=k),this._viewport=k}get _connection(){return h(g(this,Se))}set _connection(k){Y(g(this,Se),k)}get connection(){return h(g(this,Me))}set connection(k){Y(g(this,Me),k)}get connectionMode(){return h(g(this,ve))}set connectionMode(k){Y(g(this,ve),k)}get connectionRadius(){return h(g(this,ne))}set connectionRadius(k){Y(g(this,ne),k)}get isValidConnection(){return h(g(this,te))}set isValidConnection(k){Y(g(this,te),k)}get selectNodesOnDrag(){return h(g(this,ae))}set selectNodesOnDrag(k){Y(g(this,ae),k)}get defaultMarkerColor(){return h(g(this,ke))}set defaultMarkerColor(k){Y(g(this,ke),k)}get markers(){return h(g(this,fe))}set markers(k){Y(g(this,fe),k)}get onlyRenderVisibleElements(){return h(g(this,xe))}set onlyRenderVisibleElements(k){Y(g(this,xe),k)}get onerror(){return h(g(this,et))}set onerror(k){Y(g(this,et),k)}get ondelete(){return h(g(this,tt))}set ondelete(k){Y(g(this,tt),k)}get onbeforedelete(){return h(g(this,Ve))}set onbeforedelete(k){Y(g(this,Ve),k)}get onbeforeconnect(){return h(g(this,sn))}set onbeforeconnect(k){Y(g(this,sn),k)}get onconnect(){return h(g(this,an))}set onconnect(k){Y(g(this,an),k)}get onconnectstart(){return h(g(this,le))}set onconnectstart(k){Y(g(this,le),k)}get onconnectend(){return h(g(this,re))}set onconnectend(k){Y(g(this,re),k)}get onbeforereconnect(){return h(g(this,Ee))}set onbeforereconnect(k){Y(g(this,Ee),k)}get onreconnect(){return h(g(this,De))}set onreconnect(k){Y(g(this,De),k)}get onreconnectstart(){return h(g(this,Ae))}set onreconnectstart(k){Y(g(this,Ae),k)}get onreconnectend(){return h(g(this,nt))}set onreconnectend(k){Y(g(this,nt),k)}get clickConnect(){return h(g(this,Xt))}set clickConnect(k){Y(g(this,Xt),k)}get onclickconnectstart(){return h(g(this,At))}set onclickconnectstart(k){Y(g(this,At),k)}get onclickconnectend(){return h(g(this,kr))}set onclickconnectend(k){Y(g(this,kr),k)}get clickConnectStartHandle(){return h(g(this,Cr))}set clickConnectStartHandle(k){Y(g(this,Cr),k)}get onselectiondrag(){return h(g(this,Ir))}set onselectiondrag(k){Y(g(this,Ir),k)}get onselectiondragstart(){return h(g(this,Ar))}set onselectiondragstart(k){Y(g(this,Ar),k)}get onselectiondragstop(){return h(g(this,Mr))}set onselectiondragstop(k){Y(g(this,Mr),k)}get colorMode(){return h(g(this,Pr))}set colorMode(k){Y(g(this,Pr),k)}resetStoreValues(){this.dragging=!1,this.selectionRect=null,this.selectionRectMode=null,this.selectionKeyPressed=!1,this.multiselectionKeyPressed=!1,this.deleteKeyPressed=!1,this.panActivationKeyPressed=!1,this.zoomActivationKeyPressed=!1,this._connection=fs,this.clickConnectStartHandle=null,this.viewport=e.props.initialViewport??{x:0,y:0,zoom:1},this.ariaLiveMessage=""}}return n=new WeakMap,r=new WeakMap,i=new WeakMap,o=new WeakMap,s=new WeakMap,a=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,d=new WeakMap,c=new WeakMap,y=new WeakMap,v=new WeakMap,_=new WeakMap,p=new WeakMap,b=new WeakMap,A=new WeakMap,P=new WeakMap,w=new WeakMap,O=new WeakMap,L=new WeakMap,W=new WeakMap,T=new WeakMap,H=new WeakMap,J=new WeakMap,M=new WeakMap,x=new WeakMap,I=new WeakMap,m=new WeakMap,C=new WeakMap,N=new WeakMap,F=new WeakMap,B=new WeakMap,X=new WeakMap,K=new WeakMap,G=new WeakMap,ee=new WeakMap,$=new WeakMap,E=new WeakMap,D=new WeakMap,V=new WeakMap,z=new WeakMap,q=new WeakMap,U=new WeakMap,Z=new WeakMap,j=new WeakMap,ye=new WeakMap,ue=new WeakMap,Se=new WeakMap,Me=new WeakMap,ve=new WeakMap,ne=new WeakMap,te=new WeakMap,ae=new WeakMap,ke=new WeakMap,fe=new WeakMap,xe=new WeakMap,et=new WeakMap,tt=new WeakMap,Ve=new WeakMap,sn=new WeakMap,an=new WeakMap,le=new WeakMap,re=new WeakMap,Ee=new WeakMap,De=new WeakMap,Ae=new WeakMap,nt=new WeakMap,Xt=new WeakMap,At=new WeakMap,kr=new WeakMap,Cr=new WeakMap,Ir=new WeakMap,Ar=new WeakMap,Mr=new WeakMap,Pr=new WeakMap,new t}function Nr(){const e=ms(to);if(!e)throw new Error("To call useStore outside of <SvelteFlow /> you need to wrap your component in a <SvelteFlowProvider />");return e.getStore()}const to=Symbol();function dc(e){const t=Nv(e);function n(M){t.nodeTypes={...cc,...M}}function r(M){t.edgeTypes={...fc,...M}}function i(M){t.edges=Qu(M,t.edges)}const o=(M,x=!1)=>{t.nodes=t.nodes.map(I=>{if(t.connection.inProgress&&t.connection.fromNode.id===I.id){const C=t.nodeLookup.get(I.id);C&&(t.connection={...t.connection,from:Wn(C,t.connection.fromHandle,se.Left,!0)})}const m=M.get(I.id);return m?{...I,position:m.position,dragging:x}:I})};function s(M){var C,N,F;const{changes:x,updatedInternals:I}=T0(M,t.nodeLookup,t.parentLookup,t.domNode,t.nodeOrigin,t.nodeExtent,t.zIndexMode);if(!I)return;k0(t.nodeLookup,t.parentLookup,{nodeOrigin:t.nodeOrigin,nodeExtent:t.nodeExtent,zIndexMode:t.zIndexMode}),t.fitViewQueued&&t.resolveFitView();const m=new Map;for(const B of x){const X=(C=t.nodeLookup.get(B.id))==null?void 0:C.internals.userNode;if(!X)continue;const K={...X};switch(B.type){case"dimensions":{const G={...K.measured,...B.dimensions};B.setAttributes&&(K.width=((N=B.dimensions)==null?void 0:N.width)??K.width,K.height=((F=B.dimensions)==null?void 0:F.height)??K.height),K.measured=G;break}case"position":K.position=B.position??K.position;break}m.set(B.id,K)}t.nodes=t.nodes.map(B=>m.get(B.id)??B)}function a(M){const x=t.fitViewResolver??Promise.withResolvers();return t.fitViewQueued=!0,t.fitViewOptions=M,t.fitViewResolver=x,t.nodes=[...t.nodes],x.promise}async function l(M,x,I){const m=typeof(I==null?void 0:I.zoom)<"u"?I.zoom:t.maxZoom,C=t.panZoom;return C?(await C.setViewport({x:t.width/2-M*m,y:t.height/2-x*m,zoom:m},{duration:I==null?void 0:I.duration,ease:I==null?void 0:I.ease,interpolate:I==null?void 0:I.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)}function u(M,x){const I=t.panZoom;return I?I.scaleBy(M,x):Promise.resolve(!1)}function f(M){return u(1.2,M)}function d(M){return u(1/1.2,M)}function c(M){const x=t.panZoom;x&&(x.setScaleExtent([M,t.maxZoom]),t.minZoom=M)}function y(M){const x=t.panZoom;x&&(x.setScaleExtent([t.minZoom,M]),t.maxZoom=M)}function v(M){const x=t.panZoom;x&&(x.setTranslateExtent(M),t.translateExtent=M)}function _(M,x=null){let I=!1;const m=M.map(C=>(x?x.has(C.id):!0)&&C.selected?(I=!0,{...C,selected:!1}):C);return[I,m]}function p(M){const x=M!=null&&M.nodes?new Set(M.nodes.map(B=>B.id)):null,[I,m]=_(t.nodes,x);I&&(t.nodes=m);const C=M!=null&&M.edges?new Set(M.edges.map(B=>B.id)):null,[N,F]=_(t.edges,C);N&&(t.edges=F)}function b(M){const x=t.multiselectionKeyPressed;t.nodes=t.nodes.map(I=>{const m=M.includes(I.id),C=x&&I.selected||m;return!!I.selected!==C?{...I,selected:C}:I}),x||p({nodes:[]})}function A(M){const x=t.multiselectionKeyPressed;t.edges=t.edges.map(I=>{const m=M.includes(I.id),C=x&&I.selected||m;return!!I.selected!==C?{...I,selected:C}:I}),x||p({edges:[]})}function P(M,x,I){const m=t.nodeLookup.get(M);if(!m){console.warn("012",Ur.error012(M));return}t.selectionRect=null,t.selectionRectMode=null,m.selected?(x||m.selected&&t.multiselectionKeyPressed)&&(p({nodes:[m],edges:[]}),requestAnimationFrame(()=>I==null?void 0:I.blur())):b([M])}function w(M){const x=t.edgeLookup.get(M);if(!x){console.warn("012",Ur.error012(M));return}(x.selectable||t.elementsSelectable&&typeof x.selectable>"u")&&(t.selectionRect=null,t.selectionRectMode=null,x.selected?x.selected&&t.multiselectionKeyPressed&&p({nodes:[],edges:[x]}):A([M]))}function O(M,x){const{nodeExtent:I,snapGrid:m,nodeOrigin:C,nodeLookup:N,nodesDraggable:F,onerror:B}=t,X=new Map,K=(m==null?void 0:m[0])??5,G=(m==null?void 0:m[1])??5,ee=M.x*K*x,$=M.y*G*x;for(const E of N.values()){if(!(E.selected&&(E.draggable||F&&typeof E.draggable>"u")))continue;let V={x:E.internals.positionAbsolute.x+ee,y:E.internals.positionAbsolute.y+$};m&&(V=_i(V,m));const{position:z,positionAbsolute:q}=Ku({nodeId:E.id,nextPosition:V,nodeLookup:N,nodeExtent:I,nodeOrigin:C,onError:B});E.position=z,E.internals.positionAbsolute=q,X.set(E.id,E)}o(X)}function L(M){return O0({delta:M,panZoom:t.panZoom,transform:[t.viewport.x,t.viewport.y,t.viewport.zoom],translateExtent:t.translateExtent,width:t.width,height:t.height})}const W=M=>{t._connection={...M}};function T(){t._connection=fs}function H(){t.resetStoreValues(),p()}return Object.assign(t,{setNodeTypes:n,setEdgeTypes:r,addEdge:i,updateNodePositions:o,updateNodeInternals:s,zoomIn:f,zoomOut:d,fitView:a,setCenter:l,setMinZoom:c,setMaxZoom:y,setTranslateExtent:v,unselectNodesAndEdges:p,addSelectedNodes:b,addSelectedEdges:A,handleNodeSelection:P,handleEdgeSelection:w,moveSelectedNodes:O,panBy:L,updateConnection:W,cancelConnection:T,reset:H})}function Fo(e,t){const{minZoom:n,maxZoom:r,initialViewport:i,onPanZoomStart:o,onPanZoom:s,onPanZoomEnd:a,translateExtent:l,setPanZoomInstance:u,onDraggingChange:f,onTransformChange:d}=t,c=j0({domNode:e,minZoom:n,maxZoom:r,translateExtent:l,viewport:i,onPanZoom:s,onPanZoomStart:o,onPanZoomEnd:a,onDraggingChange:f}),y=c.getViewport();return(i.x!==y.x||i.y!==y.y||i.zoom!==y.zoom)&&d([y.x,y.y,y.zoom]),u(c),c.update(t),{update(v){c.update(v)}}}var kv=Ie('<div class="svelte-flow__zoom svelte-flow__container"><!></div>');function Cv(e,t){he(t,!0);let n=Q(t,"store",15),r=S(()=>n().panActivationKeyPressed||t.panOnDrag),i=S(()=>n().panActivationKeyPressed||t.panOnScroll);const{viewport:o}=n();let s=!1;Vt(()=>{var u;!s&&n().viewportInitialized&&((u=t.oninit)==null||u.call(t),s=!0)});var a=kv(),l=Ce(a);on(l,()=>t.children),Ge(a,(u,f)=>Fo==null?void 0:Fo(u,f),()=>({viewport:n().viewport,minZoom:n().minZoom,maxZoom:n().maxZoom,initialViewport:o,onDraggingChange:u=>{n(n().dragging=u,!0)},setPanZoomInstance:u=>{n(n().panZoom=u,!0)},onPanZoomStart:t.onmovestart,onPanZoom:t.onmove,onPanZoomEnd:t.onmoveend,zoomOnScroll:t.zoomOnScroll,zoomOnDoubleClick:t.zoomOnDoubleClick,zoomOnPinch:t.zoomOnPinch,panOnScroll:h(i),panOnDrag:h(r),panOnScrollSpeed:t.panOnScrollSpeed,panOnScrollMode:t.panOnScrollMode,zoomActivationKeyPressed:n().zoomActivationKeyPressed,preventScrolling:typeof t.preventScrolling=="boolean"?t.preventScrolling:!0,noPanClassName:n().noPanClass,noWheelClassName:n().noWheelClass,userSelectionActive:!!n().selectionRect,translateExtent:n().translateExtent,lib:"svelte",paneClickDistance:t.paneClickDistance,selectionOnDrag:t.selectionOnDrag,onTransformChange:u=>{n(n().viewport={x:u[0],y:u[1],zoom:u[2]},!0)},connectionInProgress:n().connection.inProgress})),ie(e,a),ge()}function Ja(e,t){return n=>{n.target===t&&(e==null||e(n))}}function $a(e){return t=>{const n=e.has(t.id);return!!t.selected!==n?{...t,selected:n}:t}}function el(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}var Iv=Ie("<div><!></div>");function Av(e,t){he(t,!0);let n=Q(t,"store",15),r=Q(t,"panOnDrag",3,!0),i=Q(t,"paneClickDistance",3,1),o,s=null,a=new Set,l=new Set,u=S(()=>n().panActivationKeyPressed||r()),f=S(()=>n().selectionKeyPressed||!!n().selectionRect||t.selectionOnDrag&&h(u)!==!0),d=S(()=>n().elementsSelectable&&(h(f)||n().selectionRectMode==="user")),c=!1;function y(T){var m,C;if(s=o==null?void 0:o.getBoundingClientRect(),!s)return;const H=T.target===o,J=!H&&!!T.target.closest(".nokey"),M=t.selectionOnDrag&&H||n().selectionKeyPressed;if(J||!h(f)||!M||T.button!==0||!T.isPrimary)return;(C=(m=T.target)==null?void 0:m.setPointerCapture)==null||C.call(m,T.pointerId),c=!1;const{x,y:I}=Nt(T,s);n(n().selectionRect={width:0,height:0,startX:x,startY:I,x,y:I},!0),H||(T.stopPropagation(),T.preventDefault())}function v(T){var N;if(!h(f)||!s||!n().selectionRect)return;const H=Nt(T,s),{startX:J=0,startY:M=0}=n().selectionRect;if(!c){const F=n().selectionKeyPressed?0:i();if(Math.hypot(H.x-J,H.y-M)<=F)return;n().unselectNodesAndEdges(),(N=t.onselectionstart)==null||N.call(t,T)}c=!0;const x={...n().selectionRect,x:H.x<J?H.x:J,y:H.y<M?H.y:M,width:Math.abs(H.x-J),height:Math.abs(H.y-M)},I=a,m=l;a=new Set(Ys(n().nodeLookup,x,[n().viewport.x,n().viewport.y,n().viewport.zoom],n().selectionMode===Gi.Partial,!0).map(F=>F.id));const C=n().defaultEdgeOptions.selectable??!0;l=new Set;for(const F of a){const B=n().connectionLookup.get(F);if(B)for(const{edgeId:X}of B.values()){const K=n().edgeLookup.get(X);K&&(K.selectable??C)&&l.add(X)}}el(I,a)||n(n().nodes=n().nodes.map($a(a)),!0),el(m,l)||n(n().edges=n().edges.map($a(l)),!0),n(n().selectionRectMode="user",!0),n(n().selectionRect=x,!0)}function _(T){var H,J,M;T.button===0&&((J=(H=T.target)==null?void 0:H.releasePointerCapture)==null||J.call(H,T.pointerId),!c&&T.target===o&&(A==null||A(T)),n(n().selectionRect=null,!0),c&&n(n().selectionRectMode=a.size>0?"nodes":null,!0),c&&((M=t.onselectionend)==null||M.call(t,T)))}const p=T=>{var H;if(Array.isArray(h(u))&&h(u).includes(2)){T.preventDefault();return}(H=t.onpanecontextmenu)==null||H.call(t,{event:T})},b=T=>{c&&(T.stopPropagation(),c=!1)};function A(T){var H;if(c||n().connection.inProgress){c=!1;return}(H=t.onpaneclick)==null||H.call(t,{event:T}),n().unselectNodesAndEdges(),n(n().selectionRectMode=null,!0),n(n().selectionRect=null,!0)}var P=Iv();let w;var O=S(()=>h(d)?void 0:Ja(A,o));P.__click=function(...T){var H;(H=h(O))==null||H.apply(this,T)},P.__pointermove=function(...T){var H;(H=h(d)?v:void 0)==null||H.apply(this,T)},P.__pointerup=function(...T){var H;(H=h(d)?_:void 0)==null||H.apply(this,T)};var L=S(()=>Ja(p,o));P.__contextmenu=function(...T){var H;(H=h(L))==null||H.apply(this,T)};var W=Ce(P);on(W,()=>t.children),gi(P,T=>o=T,()=>o),Te(T=>w=Nn(P,1,"svelte-flow__pane svelte-flow__container",null,w,T),[()=>({draggable:r()===!0||Array.isArray(r())&&r().includes(0),dragging:n().dragging,selection:h(f)})]),Hi("pointerdown",P,function(...T){var H;(H=h(d)?y:void 0)==null||H.apply(this,T)},!0),Hi("click",P,function(...T){var H;(H=h(d)?b:void 0)==null||H.apply(this,T)},!0),ie(e,P),ge()}Ms(["click","pointermove","pointerup","contextmenu"]);var Mv=Ie('<div class="svelte-flow__viewport xyflow__viewport svelte-flow__container"><!></div>');function Pv(e,t){he(t,!0);var n=Mv();let r;var i=Ce(n);on(i,()=>t.children),Te(()=>r=kt(n,"",r,{transform:`translate(${t.store.viewport.x??""}px, ${t.store.viewport.y??""}px) scale(${t.store.viewport.zoom??""})`})),ie(e,n),ge()}function rr(e,t){const{store:n,onDrag:r,onDragStart:i,onDragStop:o,onNodeMouseDown:s}=t,a=L0({onDrag:r,onDragStart:i,onDragStop:o,onNodeMouseDown:s,getStoreItems:()=>{const{snapGrid:u,viewport:f}=n;return{nodes:n.nodes,nodeLookup:n.nodeLookup,edges:n.edges,nodeExtent:n.nodeExtent,snapGrid:u||[0,0],snapToGrid:!!u,nodeOrigin:n.nodeOrigin,multiSelectionActive:n.multiselectionKeyPressed,domNode:n.domNode,transform:[f.x,f.y,f.zoom],autoPanOnNodeDrag:n.autoPanOnNodeDrag,nodesDraggable:n.nodesDraggable,selectNodesOnDrag:n.selectNodesOnDrag,nodeDragThreshold:n.nodeDragThreshold,unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,onSelectionDrag:n.onselectiondrag,onSelectionDragStart:n.onselectiondragstart,onSelectionDragStop:n.onselectiondragstop,panBy:n.panBy}}});function l(u,f){if(f.disabled){a.destroy();return}a.update({domNode:u,noDragClassName:f.noDragClass,handleSelector:f.handleSelector,nodeId:f.nodeId,isSelectable:f.isSelectable,nodeClickDistance:f.nodeClickDistance})}return l(e,t),{update(u){l(e,u)},destroy(){a.destroy()}}}var Tv=Ie('<div aria-live="assertive" aria-atomic="true" class="a11y-live-msg svelte-1l9nrps"> </div>'),Ov=Ie('<div class="a11y-hidden svelte-1l9nrps"> </div> <div class="a11y-hidden svelte-1l9nrps"> </div> <!>',1);function Dv(e,t){he(t,!0);var n=Ov(),r=Xe(n),i=Ce(r),o=Oe(r,2),s=Ce(o),a=Oe(o,2);{var l=u=>{var f=Tv(),d=Ce(f);Te(()=>{de(f,"id",`${zv}-${t.store.flowId}`),_n(d,t.store.ariaLiveMessage)}),ie(u,f)};st(a,u=>{t.store.disableKeyboardA11y||u(l)})}Te(()=>{de(r,"id",`${hc}-${t.store.flowId}`),_n(i,t.store.disableKeyboardA11y?t.store.ariaLabelConfig["node.a11yDescription.default"]:t.store.ariaLabelConfig["node.a11yDescription.keyboardDisabled"]),de(o,"id",`${gc}-${t.store.flowId}`),_n(s,t.store.ariaLabelConfig["edge.a11yDescription.default"])}),ie(e,n),ge()}const hc="svelte-flow__node-desc",gc="svelte-flow__edge-desc",zv="svelte-flow__aria-live";var Rv=Ie("<div><!></div>");function Lv(e,t){he(t,!0);let n=Q(t,"store",15),r=S(()=>We(t.node.data,()=>({}),!0)),i=S(()=>We(t.node.selected,!1)),o=S(()=>t.node.draggable),s=S(()=>t.node.selectable),a=S(()=>We(t.node.deletable,!0)),l=S(()=>t.node.connectable),u=S(()=>t.node.focusable),f=S(()=>We(t.node.hidden,!1)),d=S(()=>We(t.node.dragging,!1)),c=S(()=>We(t.node.style,"")),y=S(()=>t.node.class),v=S(()=>We(t.node.type,"default")),_=S(()=>t.node.parentId),p=S(()=>t.node.sourcePosition),b=S(()=>t.node.targetPosition),A=S(()=>We(t.node.measured,()=>({width:0,height:0}),!0).width),P=S(()=>We(t.node.measured,()=>({width:0,height:0}),!0).height),w=S(()=>t.node.initialWidth),O=S(()=>t.node.initialHeight),L=S(()=>t.node.width),W=S(()=>t.node.height),T=S(()=>t.node.dragHandle),H=S(()=>We(t.node.internals.z,0)),J=S(()=>t.node.internals.positionAbsolute.x),M=S(()=>t.node.internals.positionAbsolute.y),x=S(()=>t.node.internals.userNode),{id:I}=t.node,m=S(()=>h(o)??n().nodesDraggable),C=S(()=>h(s)??n().elementsSelectable),N=S(()=>h(l)??n().nodesConnectable),F=S(()=>c0(t.node)),B=S(()=>!!t.node.internals.handleBounds),X=S(()=>h(F)&&h(B)),K=S(()=>h(u)??n().nodesFocusable);function G(te){return n().parentLookup.has(te)}let ee=S(()=>G(I)),$=be(null),E=null,D=h(v),V=h(p),z=h(b),q=S(()=>n().nodeTypes[h(v)]??lc),U=S(()=>n().ariaLabelConfig),Z={get value(){return h(N)}};J0(I),ev(Z);let j=S(()=>{const te=h(A)===void 0?h(L)??h(w):h(L),ae=h(P)===void 0?h(W)??h(O):h(W);if(!(te===void 0&&ae===void 0&&h(c)===void 0))return`${h(c)};${te?`width:${Bt(te)};`:""}${ae?`height:${Bt(ae)};`:""}`});Vt(()=>{(h(v)!==D||h(p)!==V||h(b)!==z)&&h($)!==null&&requestAnimationFrame(()=>{h($)!==null&&n().updateNodeInternals(new Map([[I,{id:I,nodeElement:h($),force:!0}]]))}),D=h(v),V=h(p),z=h(b)}),Vt(()=>{t.resizeObserver&&(!h(X)||h($)!==E)&&(E&&t.resizeObserver.unobserve(E),h($)&&t.resizeObserver.observe(h($)),E=h($))}),co(()=>{var te;E&&((te=t.resizeObserver)==null||te.unobserve(E))});function ye(te){var ae;h(C)&&(!n().selectNodesOnDrag||!h(m)||n().nodeDragThreshold>0)&&n().handleNodeSelection(I),(ae=t.onnodeclick)==null||ae.call(t,{node:h(x),event:te})}function ue(te){if(!(Zu(te)||n().disableKeyboardA11y))if(Hu.includes(te.key)&&h(C)){const ae=te.key==="Escape";n().handleNodeSelection(I,ae,h($))}else h(m)&&t.node.selected&&Object.prototype.hasOwnProperty.call(eo,te.key)&&(te.preventDefault(),n(n().ariaLiveMessage=h(U)["node.a11yDescription.ariaLiveMessage"]({direction:te.key.replace("Arrow","").toLowerCase(),x:~~t.node.internals.positionAbsolute.x,y:~~t.node.internals.positionAbsolute.y}),!0),n().moveSelectedNodes(eo[te.key],te.shiftKey?4:1))}const Se=()=>{var xe;if(n().disableKeyboardA11y||!n().autoPanOnNodeFocus||!((xe=h($))!=null&&xe.matches(":focus-visible")))return;const{width:te,height:ae,viewport:ke}=n();Ys(new Map([[I,t.node]]),{x:0,y:0,width:te,height:ae},[ke.x,ke.y,ke.zoom],!0).length>0||n().setCenter(t.node.position.x+(t.node.measured.width??0)/2,t.node.position.y+(t.node.measured.height??0)/2,{zoom:ke.zoom})};var Me=En(),ve=Xe(Me);{var ne=te=>{var ae=Rv();Un(ae,()=>({"data-id":I,class:["svelte-flow__node",`svelte-flow__node-${h(v)}`,h(y)],style:h(j),onclick:ye,onpointerenter:t.onnodepointerenter?fe=>t.onnodepointerenter({node:h(x),event:fe}):void 0,onpointerleave:t.onnodepointerleave?fe=>t.onnodepointerleave({node:h(x),event:fe}):void 0,onpointermove:t.onnodepointermove?fe=>t.onnodepointermove({node:h(x),event:fe}):void 0,oncontextmenu:t.onnodecontextmenu?fe=>t.onnodecontextmenu({node:h(x),event:fe}):void 0,onkeydown:h(K)?ue:void 0,onfocus:h(K)?Se:void 0,tabIndex:h(K)?0:void 0,role:t.node.ariaRole??(h(K)?"group":void 0),"aria-roledescription":"node","aria-describedby":n().disableKeyboardA11y?void 0:`${hc}-${n().flowId}`,...t.node.domAttributes,[un]:{dragging:h(d),selected:h(i),draggable:h(m),connectable:h(N),selectable:h(C),nopan:h(m),parent:h(ee)},[cn]:{"z-index":h(H),transform:`translate(${h(J)??""}px, ${h(M)??""}px)`,visibility:h(F)?"visible":"hidden"}}));var ke=Ce(ae);Os(ke,()=>h(q),(fe,xe)=>{xe(fe,{get data(){return h(r)},get id(){return I},get selected(){return h(i)},get selectable(){return h(C)},get deletable(){return h(a)},get sourcePosition(){return h(p)},get targetPosition(){return h(b)},get zIndex(){return h(H)},get dragging(){return h(d)},get draggable(){return h(m)},get dragHandle(){return h(T)},get parentId(){return h(_)},get type(){return h(v)},get isConnectable(){return h(N)},get positionAbsoluteX(){return h(J)},get positionAbsoluteY(){return h(M)},get width(){return h(L)},get height(){return h(W)}})}),Ge(ae,(fe,xe)=>rr==null?void 0:rr(fe,xe),()=>({nodeId:I,isSelectable:h(C),disabled:!h(m),handleSelector:h(T),noDragClass:n().noDragClass,nodeClickDistance:t.nodeClickDistance,onNodeMouseDown:n().handleNodeSelection,onDrag:(fe,xe,et,tt)=>{var Ve;(Ve=t.onnodedrag)==null||Ve.call(t,{event:fe,targetNode:et,nodes:tt})},onDragStart:(fe,xe,et,tt)=>{var Ve;(Ve=t.onnodedragstart)==null||Ve.call(t,{event:fe,targetNode:et,nodes:tt})},onDragStop:(fe,xe,et,tt)=>{var Ve;(Ve=t.onnodedragstop)==null||Ve.call(t,{event:fe,targetNode:et,nodes:tt})},store:n()})),gi(ae,fe=>Y($,fe),()=>h($)),ie(te,ae)};st(ve,te=>{h(f)||te(ne)})}ie(e,Me),ge()}var Fv=Ie('<div class="svelte-flow__nodes"></div>');function Vv(e,t){he(t,!0);let n=Q(t,"store",15);const r=typeof ResizeObserver>"u"?null:new ResizeObserver(o=>{const s=new Map;o.forEach(a=>{const l=a.target.getAttribute("data-id");s.set(l,{id:l,nodeElement:a.target,force:!0})}),n().updateNodeInternals(s)});co(()=>{r==null||r.disconnect()});var i=Fv();Ts(i,21,()=>n().visible.nodes.values(),o=>o.id,(o,s)=>{Lv(o,{get node(){return h(s)},get resizeObserver(){return r},get nodeClickDistance(){return t.nodeClickDistance},get onnodeclick(){return t.onnodeclick},get onnodepointerenter(){return t.onnodepointerenter},get onnodepointermove(){return t.onnodepointermove},get onnodepointerleave(){return t.onnodepointerleave},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get onnodecontextmenu(){return t.onnodecontextmenu},get store(){return n()},set store(a){n(a)}})}),ie(e,i),ge()}var Hv=pt('<svg class="svelte-flow__edge-wrapper"><g><!></g></svg>');function Bv(e,t){he(t,!0);let n=S(()=>t.edge.id),r=S(()=>t.edge.source),i=S(()=>t.edge.target),o=S(()=>t.edge.sourceX),s=S(()=>t.edge.sourceY),a=S(()=>t.edge.targetX),l=S(()=>t.edge.targetY),u=S(()=>t.edge.sourcePosition),f=S(()=>t.edge.targetPosition),d=S(()=>We(t.edge.animated,!1)),c=S(()=>We(t.edge.selected,!1)),y=S(()=>t.edge.label),v=S(()=>t.edge.labelStyle),_=S(()=>We(t.edge.data,()=>({}),!0)),p=S(()=>t.edge.style),b=S(()=>t.edge.interactionWidth),A=S(()=>We(t.edge.type,"default")),P=S(()=>t.edge.sourceHandle),w=S(()=>t.edge.targetHandle),O=S(()=>t.edge.markerStart),L=S(()=>t.edge.markerEnd),W=S(()=>t.edge.selectable),T=S(()=>t.edge.focusable),H=S(()=>We(t.edge.deletable,!0)),J=S(()=>t.edge.hidden),M=S(()=>t.edge.zIndex),x=S(()=>t.edge.class),I=S(()=>t.edge.ariaLabel);nv(h(n));let m=null,C=S(()=>h(W)??t.store.elementsSelectable),N=S(()=>h(T)??t.store.edgesFocusable),F=S(()=>t.store.edgeTypes[h(A)]??uc),B=S(()=>h(O)?`url('#${hs(h(O),t.store.flowId)}')`:void 0),X=S(()=>h(L)?`url('#${hs(h(L),t.store.flowId)}')`:void 0);function K(V){var q;const z=t.store.edgeLookup.get(h(n));z&&(h(C)&&t.store.handleEdgeSelection(h(n)),(q=t.onedgeclick)==null||q.call(t,{event:V,edge:z}))}function G(V,z){const q=t.store.edgeLookup.get(h(n));q&&z({event:V,edge:q})}function ee(V){if(!t.store.disableKeyboardA11y&&Hu.includes(V.key)&&h(C)){const{unselectNodesAndEdges:z,addSelectedEdges:q}=t.store;V.key==="Escape"?(m==null||m.blur(),z({edges:[t.edge]})):q([h(n)])}}var $=En(),E=Xe($);{var D=V=>{var z=Hv();let q;var U=Ce(z);Un(U,()=>({class:["svelte-flow__edge",h(x)],"data-id":h(n),onclick:K,oncontextmenu:t.onedgecontextmenu?j=>{G(j,t.onedgecontextmenu)}:void 0,onpointerenter:t.onedgepointerenter?j=>{G(j,t.onedgepointerenter)}:void 0,onpointerleave:t.onedgepointerleave?j=>{G(j,t.onedgepointerleave)}:void 0,"aria-label":h(I)===null?void 0:h(I)?h(I):`Edge from ${h(r)} to ${h(i)}`,"aria-describedby":h(N)?`${gc}-${t.store.flowId}`:void 0,role:t.edge.ariaRole??(h(N)?"group":"img"),"aria-roledescription":"edge",onkeydown:h(N)?ee:void 0,tabindex:h(N)?0:void 0,...t.edge.domAttributes,[un]:{animated:h(d),selected:h(c),selectable:h(C)}}));var Z=Ce(U);Os(Z,()=>h(F),(j,ye)=>{ye(j,{get id(){return h(n)},get source(){return h(r)},get target(){return h(i)},get sourceX(){return h(o)},get sourceY(){return h(s)},get targetX(){return h(a)},get targetY(){return h(l)},get sourcePosition(){return h(u)},get targetPosition(){return h(f)},get animated(){return h(d)},get selected(){return h(c)},get label(){return h(y)},get labelStyle(){return h(v)},get data(){return h(_)},get style(){return h(p)},get interactionWidth(){return h(b)},get selectable(){return h(C)},get deletable(){return h(H)},get type(){return h(A)},get sourceHandleId(){return h(P)},get targetHandleId(){return h(w)},get markerStart(){return h(B)},get markerEnd(){return h(X)}})}),gi(U,j=>m=j,()=>m),Te(()=>q=kt(z,"",q,{"z-index":h(M)})),ie(V,z)};st(E,V=>{h(J)||V(D)})}ie(e,$),ge()}var Kv=pt("<defs></defs>");function Yv(e,t){he(t,!1);const n=Nr();Ds();var r=Kv();Ts(r,5,()=>n.markers,i=>i.id,(i,o)=>{Zv(i,fd(()=>h(o)))}),ie(e,r),ge()}var Xv=pt('<polyline class="arrow" fill="none" stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4"></polyline>'),Wv=pt('<polyline class="arrowclosed" stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4 -5,-4"></polyline>'),qv=pt('<marker class="svelte-flow__arrowhead" viewBox="-10 -10 20 20" refX="0" refY="0"><!></marker>');function Zv(e,t){he(t,!0);let n=Q(t,"width",3,12.5),r=Q(t,"height",3,12.5),i=Q(t,"markerUnits",3,"strokeWidth"),o=Q(t,"orient",3,"auto-start-reverse"),s=Q(t,"color",3,"none");var a=qv(),l=Ce(a);{var u=d=>{var c=Xv();let y;Te(()=>{de(c,"stroke-width",t.strokeWidth),y=kt(c,"",y,{stroke:s()})}),ie(d,c)},f=d=>{var c=Wv();let y;Te(()=>{de(c,"stroke-width",t.strokeWidth),y=kt(c,"",y,{stroke:s(),fill:s()})}),ie(d,c)};st(l,d=>{t.type===Ui.Arrow?d(u):t.type===Ui.ArrowClosed&&d(f,1)})}Te(()=>{de(a,"id",t.id),de(a,"markerWidth",`${n()}`),de(a,"markerHeight",`${r()}`),de(a,"markerUnits",i()),de(a,"orient",o())}),ie(e,a),ge()}var Gv=Ie('<div class="svelte-flow__edges"><svg class="svelte-flow__marker"><!></svg> <!></div>');function Uv(e,t){he(t,!0);let n=Q(t,"store",15);var r=Gv(),i=Ce(r),o=Ce(i);Yv(o,{});var s=Oe(i,2);Ts(s,17,()=>n().visible.edges.values(),a=>a.id,(a,l)=>{Bv(a,{get edge(){return h(l)},get onedgeclick(){return t.onedgeclick},get onedgecontextmenu(){return t.onedgecontextmenu},get onedgepointerenter(){return t.onedgepointerenter},get onedgepointerleave(){return t.onedgepointerleave},get store(){return n()},set store(u){n(u)}})}),ie(e,r),ge()}var jv=Ie('<div class="svelte-flow__selection svelte-1f9lbg4"></div>');function yc(e,t){he(t,!0);let n=Q(t,"x",3,0),r=Q(t,"y",3,0),i=Q(t,"width",3,0),o=Q(t,"height",3,0),s=Q(t,"isVisible",3,!0);var a=En(),l=Xe(a);{var u=f=>{var d=jv();let c;Te(y=>c=kt(d,"",c,y),[()=>({width:typeof i()=="string"?i():Bt(i()),height:typeof o()=="string"?o():Bt(o()),transform:`translate(${n()}px, ${r()}px)`})]),ie(f,d)};st(l,f=>{s()&&f(u)})}ie(e,a),ge()}var Qv=Ie("<div><!></div>");function Jv(e,t){he(t,!0);let n=be(void 0);Vt(()=>{var d;t.store.disableKeyboardA11y||(d=h(n))==null||d.focus({preventScroll:!0})});let r=S(()=>{if(t.store.selectionRectMode==="nodes"){t.store.nodes;const d=mo(t.store.nodeLookup,{filter:c=>!!c.selected});if(d.width>0&&d.height>0)return d}return null});function i(d){var y;const c=t.store.nodes.filter(v=>v.selected);(y=t.onselectioncontextmenu)==null||y.call(t,{nodes:c,event:d})}function o(d){var y;const c=t.store.nodes.filter(v=>v.selected);(y=t.onselectionclick)==null||y.call(t,{nodes:c,event:d})}function s(d){Object.prototype.hasOwnProperty.call(eo,d.key)&&(d.preventDefault(),t.store.moveSelectedNodes(eo[d.key],d.shiftKey?4:1))}var a=En(),l=Xe(a);{var u=d=>{var c=Qv();c.__contextmenu=i,c.__click=o,c.__keydown=function(..._){var p;(p=t.store.disableKeyboardA11y?void 0:s)==null||p.apply(this,_)};let y;var v=Ce(c);yc(v,{width:"100%",height:"100%",x:0,y:0}),Ge(c,(_,p)=>rr==null?void 0:rr(_,p),()=>({disabled:!1,store:t.store,onDrag:(_,p,b,A)=>{var P;(P=t.onnodedrag)==null||P.call(t,{event:_,targetNode:null,nodes:A})},onDragStart:(_,p,b,A)=>{var P;(P=t.onnodedragstart)==null||P.call(t,{event:_,targetNode:null,nodes:A})},onDragStop:(_,p,b,A)=>{var P;(P=t.onnodedragstop)==null||P.call(t,{event:_,targetNode:null,nodes:A})}})),gi(c,_=>Y(n,_),()=>h(n)),Te(_=>{Nn(c,1,Gn(["svelte-flow__selection-wrapper",t.store.noPanClass]),"svelte-5rnsv4"),de(c,"role",t.store.disableKeyboardA11y?void 0:"button"),de(c,"tabindex",t.store.disableKeyboardA11y?void 0:-1),y=kt(c,"",y,_)},[()=>({width:Bt(h(r).width),height:Bt(h(r).height),transform:`translate(${h(r).x??""}px, ${h(r).y??""}px)`})]),ie(d,c)},f=S(()=>t.store.selectionRectMode==="nodes"&&h(r)&&Jt(h(r).x)&&Jt(h(r).y));st(l,d=>{h(f)&&d(u)})}ie(e,a),ge()}Ms(["contextmenu","click","keydown"]);function $v(e){switch(e){case"ctrl":return 8;case"shift":return 4;case"alt":return 2;case"meta":return 1}}function pe(e,t){let{enabled:n=!0,trigger:r,type:i="keydown"}=t;function o(a){var f;const l=Array.isArray(r)?r:[r],u=[a.metaKey,a.altKey,a.shiftKey,a.ctrlKey].reduce((d,c,y)=>c?d|1<<y:d,0);for(const d of l){const c={preventDefault:!1,enabled:!0,...d},{modifier:y,key:v,callback:_,preventDefault:p,enabled:b}=c;if(b){if(a.key!==v)continue;if(y===null||y===!1){if(u!==0)continue}else if(y!==void 0&&((f=y==null?void 0:y[0])==null?void 0:f.length)>0){const P=Array.isArray(y)?y:[y];let w=!1;for(const O of P)if((Array.isArray(O)?O:[O]).reduce((W,T)=>W|$v(T),0)===u){w=!0;break}if(!w)continue}p&&a.preventDefault();const A={node:e,trigger:c,originalEvent:a};e.dispatchEvent(new CustomEvent("shortcut",{detail:A})),_==null||_(A)}}}let s;return n&&(s=Qo(e,i,o)),{update:a=>{const{enabled:l=!0,type:u="keydown"}=a;n&&(!l||i!==u)?s==null||s():!n&&l&&(s=Qo(e,u,o)),n=l,i=u,r=a.trigger},destroy:()=>{s==null||s()}}}function vc(){const e=S(Nr),t=o=>{var u,f;const s=ja(o)?o:h(e).nodeLookup.get(o.id),a=s.parentId?f0(s.position,s.measured,s.parentId,h(e).nodeLookup,h(e).nodeOrigin):s.position,l={...s,position:a,width:((u=s.measured)==null?void 0:u.width)??s.width,height:((f=s.measured)==null?void 0:f.height)??s.height};return xr(l)};function n(o,s,a={replace:!1}){h(e).nodes=Je(()=>h(e).nodes).map(l=>{if(l.id===o){const u=typeof s=="function"?s(l):s;return a!=null&&a.replace&&ja(u)?u:{...l,...u}}return l})}function r(o,s,a={replace:!1}){h(e).edges=Je(()=>h(e).edges).map(l=>{if(l.id===o){const u=typeof s=="function"?s(l):s;return a.replace&&fv(u)?u:{...l,...u}}return l})}const i=o=>h(e).nodeLookup.get(o);return{zoomIn:h(e).zoomIn,zoomOut:h(e).zoomOut,getInternalNode:i,getNode:o=>{var s;return(s=i(o))==null?void 0:s.internals.userNode},getNodes:o=>o===void 0?h(e).nodes:tl(h(e).nodeLookup,o),getEdge:o=>h(e).edgeLookup.get(o),getEdges:o=>o===void 0?h(e).edges:tl(h(e).edgeLookup,o),setZoom:(o,s)=>{const a=h(e).panZoom;return a?a.scaleTo(o,{duration:s==null?void 0:s.duration}):Promise.resolve(!1)},getZoom:()=>h(e).viewport.zoom,setViewport:async(o,s)=>{const a=h(e).viewport;return h(e).panZoom?(await h(e).panZoom.setViewport({x:o.x??a.x,y:o.y??a.y,zoom:o.zoom??a.zoom},s),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>wl(h(e).viewport),setCenter:async(o,s,a)=>h(e).setCenter(o,s,a),fitView:o=>h(e).fitView(o),fitBounds:async(o,s)=>{if(!h(e).panZoom)return Promise.resolve(!1);const a=Xs(o,h(e).width,h(e).height,h(e).minZoom,h(e).maxZoom,(s==null?void 0:s.padding)??.1);return await h(e).panZoom.setViewport(a,{duration:s==null?void 0:s.duration,ease:s==null?void 0:s.ease,interpolate:s==null?void 0:s.interpolate}),Promise.resolve(!0)},getIntersectingNodes:(o,s=!0,a)=>{const l=Fa(o),u=l?o:t(o);return u?(a||h(e).nodes).filter(f=>{const d=h(e).nodeLookup.get(f.id);if(!d||!l&&f.id===o.id)return!1;const c=xr(d),y=jr(c,u);return s&&y>0||y>=c.width*c.height||y>=u.width*u.height}):[]},isNodeIntersecting:(o,s,a=!0)=>{const u=Fa(o)?o:t(o);if(!u)return!1;const f=jr(u,s);return a&&f>0||f>=s.width*s.height||f>=u.width*u.height},deleteElements:async({nodes:o=[],edges:s=[]})=>{var u,f;const{nodes:a,edges:l}=await o0({nodesToRemove:o,edgesToRemove:s,nodes:h(e).nodes,edges:h(e).edges,onBeforeDelete:h(e).onbeforedelete});return a&&(h(e).nodes=Je(()=>h(e).nodes).filter(d=>!a.some(({id:c})=>c===d.id))),l&&(h(e).edges=Je(()=>h(e).edges).filter(d=>!l.some(({id:c})=>c===d.id))),(a.length>0||l.length>0)&&((f=(u=h(e)).ondelete)==null||f.call(u,{nodes:a,edges:l})),{deletedNodes:a,deletedEdges:l}},screenToFlowPosition:(o,s={snapToGrid:!0})=>{if(!h(e).domNode)return o;const a=s.snapToGrid?h(e).snapGrid:!1,{x:l,y:u,zoom:f}=h(e).viewport,{x:d,y:c}=h(e).domNode.getBoundingClientRect(),y={x:o.x-d,y:o.y-c};return wi(y,[l,u,f],a!==null,a||[1,1])},flowToScreenPosition:o=>{if(!h(e).domNode)return o;const{x:s,y:a,zoom:l}=h(e).viewport,{x:u,y:f}=h(e).domNode.getBoundingClientRect(),d=Qi(o,[s,a,l]);return{x:d.x+u,y:d.y+f}},toObject:()=>structuredClone({nodes:[...h(e).nodes],edges:[...h(e).edges],viewport:{...h(e).viewport}}),updateNode:n,updateNodeData:(o,s,a)=>{var f;const l=(f=h(e).nodeLookup.get(o))==null?void 0:f.internals.userNode;if(!l)return;const u=typeof s=="function"?s(l):s;n(o,d=>({...d,data:a!=null&&a.replace?u:{...d.data,...u}}))},updateEdge:r,getNodesBounds:o=>t0(o,{nodeLookup:h(e).nodeLookup,nodeOrigin:h(e).nodeOrigin}),getHandleConnections:({type:o,id:s,nodeId:a})=>{var l;return Array.from(((l=h(e).connectionLookup.get(`${a}-${o}-${s??null}`))==null?void 0:l.values())??[])}}}function tl(e,t){var r;const n=[];for(const i of t){const o=e.get(i);if(o){const s="internals"in o?(r=o.internals)==null?void 0:r.userNode:o;n.push(s)}}return n}function em(e,t){he(t,!0);let n=Q(t,"store",15),r=Q(t,"selectionKey",3,"Shift"),i=Q(t,"multiSelectionKey",19,()=>Ji()?"Meta":"Control"),o=Q(t,"deleteKey",3,"Backspace"),s=Q(t,"panActivationKey",3," "),a=Q(t,"zoomActivationKey",19,()=>Ji()?"Meta":"Control"),{deleteElements:l}=vc();function u(_){return _!==null&&typeof _=="object"}function f(_){return u(_)?_.modifier||[]:[]}function d(_){return _==null?"":u(_)?_.key:_}function c(_,p){return(Array.isArray(_)?_:[_]).map(A=>{const P=d(A);return{key:P,modifier:f(A),enabled:P!==null,callback:p}})}function y(){n(n().selectionRect=null,!0),n(n().selectionKeyPressed=!1,!0),n(n().multiselectionKeyPressed=!1,!0),n(n().deleteKeyPressed=!1,!0),n(n().panActivationKeyPressed=!1,!0),n(n().zoomActivationKeyPressed=!1,!0)}function v(){const _=n().nodes.filter(b=>b.selected),p=n().edges.filter(b=>b.selected);l({nodes:_,edges:p})}Hi("blur",qe,y),Hi("contextmenu",qe,y),Ge(qe,(_,p)=>pe==null?void 0:pe(_,p),()=>({trigger:c(r(),()=>n(n().selectionKeyPressed=!0,!0)),type:"keydown"})),Ge(qe,(_,p)=>pe==null?void 0:pe(_,p),()=>({trigger:c(r(),()=>n(n().selectionKeyPressed=!1,!0)),type:"keyup"})),Ge(qe,(_,p)=>pe==null?void 0:pe(_,p),()=>({trigger:c(i(),()=>{n(n().multiselectionKeyPressed=!0,!0)}),type:"keydown"})),Ge(qe,(_,p)=>pe==null?void 0:pe(_,p),()=>({trigger:c(i(),()=>n(n().multiselectionKeyPressed=!1,!0)),type:"keyup"})),Ge(qe,(_,p)=>pe==null?void 0:pe(_,p),()=>({trigger:c(o(),_=>{!(_.originalEvent.ctrlKey||_.originalEvent.metaKey||_.originalEvent.shiftKey)&&!Zu(_.originalEvent)&&(n(n().deleteKeyPressed=!0,!0),v())}),type:"keydown"})),Ge(qe,(_,p)=>pe==null?void 0:pe(_,p),()=>({trigger:c(o(),()=>n(n().deleteKeyPressed=!1,!0)),type:"keyup"})),Ge(qe,(_,p)=>pe==null?void 0:pe(_,p),()=>({trigger:c(s(),()=>n(n().panActivationKeyPressed=!0,!0)),type:"keydown"})),Ge(qe,(_,p)=>pe==null?void 0:pe(_,p),()=>({trigger:c(s(),()=>n(n().panActivationKeyPressed=!1,!0)),type:"keyup"})),Ge(qe,(_,p)=>pe==null?void 0:pe(_,p),()=>({trigger:c(a(),()=>n(n().zoomActivationKeyPressed=!0,!0)),type:"keydown"})),Ge(qe,(_,p)=>pe==null?void 0:pe(_,p),()=>({trigger:c(a(),()=>n(n().zoomActivationKeyPressed=!1,!0)),type:"keyup"})),ge()}var tm=pt('<path fill="none" class="svelte-flow__connection-path"></path>'),nm=pt('<svg class="svelte-flow__connectionline"><g><!></g></svg>');function rm(e,t){he(t,!0);let n=S(()=>{if(!t.store.connection.inProgress)return"";const s={sourceX:t.store.connection.from.x,sourceY:t.store.connection.from.y,sourcePosition:t.store.connection.fromPosition,targetX:t.store.connection.to.x,targetY:t.store.connection.to.y,targetPosition:t.store.connection.toPosition};switch(t.type){case fn.Bezier:{const[a]=Uu(s);return a}case fn.Straight:{const[a]=Ju(s);return a}case fn.Step:case fn.SmoothStep:{const[a]=Ws({...s,borderRadius:t.type===fn.Step?0:void 0});return a}}});var r=En(),i=Xe(r);{var o=s=>{var a=nm(),l=Ce(a),u=Ce(l);{var f=c=>{var y=En(),v=Xe(y);Os(v,()=>t.LineComponent,(_,p)=>{p(_,{})}),ie(c,y)},d=c=>{var y=tm();Te(()=>{de(y,"d",h(n)),kt(y,t.style)}),ie(c,y)};st(u,c=>{t.LineComponent?c(f):c(d,!1)})}Te(c=>{de(a,"width",t.store.width),de(a,"height",t.store.height),kt(a,t.containerStyle),Nn(l,0,c)},[()=>Gn(["svelte-flow__connection",$y(t.store.connection.isValid)])]),ie(s,a)};st(i,s=>{t.store.connection.inProgress&&s(o)})}ie(e,r),ge()}var im=Ie("<div><!></div>");function om(e,t){he(t,!0);let n=Q(t,"position",3,"top-right"),r=yi(t,["$$slots","$$events","$$legacy","position","style","class","children"]),i=S(()=>`${n()}`.split("-"));var o=im();Un(o,a=>({class:a,style:t.style,...r}),[()=>["svelte-flow__panel",t.class,...h(i)]]);var s=Ce(o);on(s,()=>t.children??qn),ie(e,o),ge()}var sm=Ie('<a href="https://svelteflow.dev" target="_blank" rel="noopener noreferrer" aria-label="Svelte Flow attribution">Svelte Flow</a>');function am(e,t){he(t,!0);let n=Q(t,"position",3,"bottom-right");var r=En(),i=Xe(r);{var o=s=>{om(s,{get position(){return n()},class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",children:(a,l)=>{var u=sm();ie(a,u)},$$slots:{default:!0}})};st(i,s=>{var a;(a=t.proOptions)!=null&&a.hideAttribution||s(o)})}ie(e,r),ge()}var lm=Ie("<div><!></div>");function um(e,t){he(t,!0);let n=Q(t,"domNode",15),r=Q(t,"clientWidth",15),i=Q(t,"clientHeight",15),o=S(()=>t.rest.class),s=S(()=>zf(t.rest,["id","class","nodeTypes","edgeTypes","colorMode","isValidConnection","onmove","onmovestart","onmoveend","onflowerror","ondelete","onbeforedelete","onbeforeconnect","onconnect","onconnectstart","onconnectend","onbeforereconnect","onreconnect","onreconnectstart","onreconnectend","onclickconnectstart","onclickconnectend","oninit","onselectionchange","onselectiondragstart","onselectiondrag","onselectiondragstop","onselectionstart","onselectionend","clickConnect","fitView","fitViewOptions","nodeOrigin","nodeDragThreshold","connectionDragThreshold","minZoom","maxZoom","initialViewport","connectionRadius","connectionMode","selectionMode","selectNodesOnDrag","snapGrid","defaultMarkerColor","translateExtent","nodeExtent","onlyRenderVisibleElements","autoPanOnConnect","autoPanOnNodeDrag","colorModeSSR","defaultEdgeOptions","elevateNodesOnSelect","elevateEdgesOnSelect","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","elementsSelectable","nodesFocusable","edgesFocusable","disableKeyboardA11y","noDragClass","noPanClass","noWheelClass","ariaLabelConfig","autoPanSpeed","panOnScrollSpeed","zIndexMode"]));function a(f){f.currentTarget.scrollTo({top:0,left:0,behavior:"auto"}),t.rest.onscroll&&t.rest.onscroll(f)}var l=lm();Un(l,f=>({class:["svelte-flow","svelte-flow__container",h(o),t.colorMode],"data-testid":"svelte-flow__wrapper",role:"application",onscroll:a,...h(s),[cn]:f}),[()=>({width:Bt(t.width),height:Bt(t.height)})],void 0,void 0,"svelte-rhpwh");var u=Ce(l);on(u,()=>t.children??qn),gi(l,f=>n(f),()=>n()),ya(l,"clientHeight",i),ya(l,"clientWidth",r),ie(e,l),ge()}var cm=Ie('<div class="svelte-flow__viewport-back svelte-flow__container"></div> <!> <div class="svelte-flow__edge-labels svelte-flow__container"></div> <!> <!> <!> <div class="svelte-flow__viewport-front svelte-flow__container"></div>',1),fm=Ie("<!> <!>",1),dm=Ie("<!> <!> <!> <!> <!>",1);function hm(e,t){he(t,!0);let n=Q(t,"paneClickDistance",3,1),r=Q(t,"nodeClickDistance",3,1),i=Q(t,"panOnScrollMode",19,()=>nr.Free),o=Q(t,"preventScrolling",3,!0),s=Q(t,"zoomOnScroll",3,!0),a=Q(t,"zoomOnDoubleClick",3,!0),l=Q(t,"zoomOnPinch",3,!0),u=Q(t,"panOnScroll",3,!1),f=Q(t,"panOnScrollSpeed",3,.5),d=Q(t,"panOnDrag",3,!0),c=Q(t,"selectionOnDrag",3,!1),y=Q(t,"connectionLineType",19,()=>fn.Bezier),v=Q(t,"nodes",31,()=>yn([])),_=Q(t,"edges",31,()=>yn([])),p=Q(t,"viewport",15,void 0),b=yi(t,["$$slots","$$events","$$legacy","width","height","proOptions","selectionKey","deleteKey","panActivationKey","multiSelectionKey","zoomActivationKey","paneClickDistance","nodeClickDistance","onmovestart","onmoveend","onmove","oninit","onnodeclick","onnodecontextmenu","onnodedrag","onnodedragstart","onnodedragstop","onnodepointerenter","onnodepointermove","onnodepointerleave","onselectionclick","onselectioncontextmenu","onselectionstart","onselectionend","onedgeclick","onedgecontextmenu","onedgepointerenter","onedgepointerleave","onpaneclick","onpanecontextmenu","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnDrag","selectionOnDrag","connectionLineComponent","connectionLineStyle","connectionLineContainerStyle","connectionLineType","attributionPosition","children","nodes","edges","viewport"]),A=dc({props:b,width:t.width,height:t.height,get nodes(){return v()},set nodes(w){v(w)},get edges(){return _()},set edges(w){_(w)},get viewport(){return p()},set viewport(w){p(w)}});const P=ms(to);P&&P.setStore&&P.setStore(A),ps(to,{provider:!1,getStore(){return A}}),Vt(()=>{var O;const w={nodes:A.selectedNodes,edges:A.selectedEdges};(O=Je(()=>t.onselectionchange))==null||O(w);for(const L of A.selectionChangeHandlers.values())L(w)}),co(()=>{A.reset()}),um(e,{get colorMode(){return A.colorMode},get width(){return t.width},get height(){return t.height},get rest(){return b},get domNode(){return A.domNode},set domNode(w){A.domNode=w},get clientWidth(){return A.width},set clientWidth(w){A.width=w},get clientHeight(){return A.height},set clientHeight(w){A.height=w},children:(w,O)=>{var L=dm(),W=Xe(L);em(W,{get selectionKey(){return t.selectionKey},get deleteKey(){return t.deleteKey},get panActivationKey(){return t.panActivationKey},get multiSelectionKey(){return t.multiSelectionKey},get zoomActivationKey(){return t.zoomActivationKey},get store(){return A},set store(x){A=x}});var T=Oe(W,2);Cv(T,{get panOnScrollMode(){return i()},get preventScrolling(){return o()},get zoomOnScroll(){return s()},get zoomOnDoubleClick(){return a()},get zoomOnPinch(){return l()},get panOnScroll(){return u()},get panOnScrollSpeed(){return f()},get panOnDrag(){return d()},get paneClickDistance(){return n()},get selectionOnDrag(){return c()},get onmovestart(){return t.onmovestart},get onmove(){return t.onmove},get onmoveend(){return t.onmoveend},get oninit(){return t.oninit},get store(){return A},set store(x){A=x},children:(x,I)=>{Av(x,{get onpaneclick(){return t.onpaneclick},get onpanecontextmenu(){return t.onpanecontextmenu},get onselectionstart(){return t.onselectionstart},get onselectionend(){return t.onselectionend},get panOnDrag(){return d()},get paneClickDistance(){return n()},get selectionOnDrag(){return c()},get store(){return A},set store(m){A=m},children:(m,C)=>{var N=fm(),F=Xe(N);Pv(F,{get store(){return A},set store(X){A=X},children:(X,K)=>{var G=cm(),ee=Oe(Xe(G),2);Uv(ee,{get onedgeclick(){return t.onedgeclick},get onedgecontextmenu(){return t.onedgecontextmenu},get onedgepointerenter(){return t.onedgepointerenter},get onedgepointerleave(){return t.onedgepointerleave},get store(){return A},set store(V){A=V}});var $=Oe(ee,4);rm($,{get type(){return y()},get LineComponent(){return t.connectionLineComponent},get containerStyle(){return t.connectionLineContainerStyle},get style(){return t.connectionLineStyle},get store(){return A},set store(V){A=V}});var E=Oe($,2);Vv(E,{get nodeClickDistance(){return r()},get onnodeclick(){return t.onnodeclick},get onnodecontextmenu(){return t.onnodecontextmenu},get onnodepointerenter(){return t.onnodepointerenter},get onnodepointermove(){return t.onnodepointermove},get onnodepointerleave(){return t.onnodepointerleave},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get store(){return A},set store(V){A=V}});var D=Oe(E,2);Jv(D,{get onselectionclick(){return t.onselectionclick},get onselectioncontextmenu(){return t.onselectioncontextmenu},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get store(){return A},set store(V){A=V}}),ie(X,G)},$$slots:{default:!0}});var B=Oe(F,2);{let X=S(()=>!!(A.selectionRect&&A.selectionRectMode==="user")),K=S(()=>{var E;return(E=A.selectionRect)==null?void 0:E.width}),G=S(()=>{var E;return(E=A.selectionRect)==null?void 0:E.height}),ee=S(()=>{var E;return(E=A.selectionRect)==null?void 0:E.x}),$=S(()=>{var E;return(E=A.selectionRect)==null?void 0:E.y});yc(B,{get isVisible(){return h(X)},get width(){return h(K)},get height(){return h(G)},get x(){return h(ee)},get y(){return h($)}})}ie(m,N)},$$slots:{default:!0}})},$$slots:{default:!0}});var H=Oe(T,2);am(H,{get proOptions(){return t.proOptions},get position(){return t.attributionPosition}});var J=Oe(H,2);Dv(J,{get store(){return A}});var M=Oe(J,2);on(M,()=>t.children??qn),ie(w,L)},$$slots:{default:!0}}),ge()}function gm(e,t){he(t,!0);let n=be(dc({props:{},nodes:[],edges:[]}));ps(to,{provider:!0,getStore(){return h(n)},setStore:o=>{Y(n,o)}}),co(()=>{h(n).reset()});var r=En(),i=Xe(r);on(i,()=>t.children??qn),ie(e,r),ge()}var wn;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(wn||(wn={}));var ym=pt("<circle></circle>");function vm(e,t){var n=ym();Te(()=>{de(n,"cx",t.radius),de(n,"cy",t.radius),de(n,"r",t.radius),Nn(n,0,Gn(["svelte-flow__background-pattern","dots",t.class]))}),ie(e,n)}var mm=pt("<path></path>");function pm(e,t){he(t,!0);var n=mm();Te(()=>{de(n,"stroke-width",t.lineWidth),de(n,"d",`M${t.dimensions[0]/2} 0 V${t.dimensions[1]} M0 ${t.dimensions[1]/2} H${t.dimensions[0]}`),Nn(n,0,Gn(["svelte-flow__background-pattern",t.variant,t.class]))}),ie(e,n),ge()}const _m={[wn.Dots]:1,[wn.Lines]:1,[wn.Cross]:6};var wm=pt('<svg data-testid="svelte-flow__background"><pattern patternUnits="userSpaceOnUse"><!></pattern><rect x="0" y="0" width="100%" height="100%"></rect></svg>');function xm(e,t){he(t,!0);let n=Q(t,"variant",19,()=>wn.Dots),r=Q(t,"gap",3,20),i=Q(t,"lineWidth",3,1),o=S(Nr),s=S(()=>n()===wn.Dots),a=S(()=>n()===wn.Cross),l=S(()=>Array.isArray(r())?r():[r(),r()]),u=S(()=>`background-pattern-${h(o).flowId}-${t.id??""}`),f=S(()=>[h(l)[0]*h(o).viewport.zoom||1,h(l)[1]*h(o).viewport.zoom||1]),d=S(()=>(t.size??_m[n()])*h(o).viewport.zoom),c=S(()=>h(a)?[h(d),h(d)]:h(f)),y=S(()=>h(s)?[h(d)/2,h(d)/2]:[h(c)[0]/2,h(c)[1]/2]);var v=wm();let _;var p=Ce(v),b=Ce(p);{var A=O=>{{let L=S(()=>h(d)/2);vm(O,{get radius(){return h(L)},get class(){return t.patternClass}})}},P=O=>{pm(O,{get dimensions(){return h(c)},get variant(){return n()},get lineWidth(){return i()},get class(){return t.patternClass}})};st(b,O=>{h(s)?O(A):O(P,!1)})}var w=Oe(p);Te(()=>{Nn(v,0,Gn(["svelte-flow__background","svelte-flow__container",t.class])),_=kt(v,"",_,{"--xy-background-color-props":t.bgColor,"--xy-background-pattern-color-props":t.patternColor}),de(p,"id",h(u)),de(p,"x",h(o).viewport.x%h(f)[0]),de(p,"y",h(o).viewport.y%h(f)[1]),de(p,"width",h(f)[0]),de(p,"height",h(f)[1]),de(p,"patternTransform",`translate(-${h(y)[0]},-${h(y)[1]})`),de(w,"fill",`url(#${h(u)})`)}),ie(e,v),ge()}var bm=Ie('<div class="h-full w-full"><!></div>');function Em(e,t){he(t,!1);let n=Q(t,"nodes",28,y),r=Q(t,"edges",28,()=>[]),i=Q(t,"loadVersion",8,0);const o=hd(),{screenToFlowPosition:s,fitView:a}=vc();let l=Jn(-1);const u=P=>{o("flowchange",{reason:P,nodes:n(),edges:r()})},f=P=>{r(Qu(P,r())),u("edge-created")},d=()=>{u("node-moved")},c=(P,w)=>{var M,x,I;if(w.isValid)return;const O=((M=w.fromNode)==null?void 0:M.id)??((x=n()[0])==null?void 0:x.id)??"Node-00000000-0000-0000-0000-000000000000",L=v((I=w.fromNode)==null?void 0:I.type),W=`${L}-${_()}`,{clientX:T,clientY:H}="changedTouches"in P?P.changedTouches[0]:P,J={id:W,data:{label:L},position:s({x:T,y:H}),origin:[.5,0]};n([...n(),J]),r([...r(),{source:O,target:W,id:`${O}--${W}`}]),u("node-created")};function y(){return[{id:"Node-00000000-0000-0000-0000-000000000000",type:"input",data:{label:"Node"},position:{x:0,y:50}}]}function v(P){if(typeof P=="string"){const w=P.trim().replace(/[^A-Za-z0-9_]/g,"");if(w)return w}return"Node"}function _(){return typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`${Date.now().toString(16)}${Math.random().toString(16).slice(2)}`}async function p(){await Df(),n().length&&a({padding:.2,duration:200})}Cf(()=>(Is(i()),h(l)),()=>{i()!==h(l)&&(Y(l,i()),p())}),If(),Ds();var b=bm(),A=Ce(b);hm(A,{fitView:!0,onconnect:f,onconnectend:c,onnodedragstop:d,get nodes(){return n()},set nodes(P){n(P)},get edges(){return r()},set edges(P){r(P)},children:(P,w)=>{xm(P,{})},$$slots:{default:!0},$$legacy:!0}),ie(e,b),ge()}var Sm=Ie('<div class="mb-2 text-sm text-[var(--vscode-errorForeground)]"> </div>'),Nm=Ie('<main class="flex flex-col h-screen min-h-0 p-3"><!> <!></main>');function km(e,t){he(t,!1);let n=Q(t,"vscode",8);const r="$NodeEditorMetadata",i=["$WorkspaceID","$Nodes","$FloatingNodes","$Links","$Groups","$Comments"],o=b("");let s=Jn(o.nodes),a=Jn(o.edges),l=o.runtimeFields,u=o.metadataContext,f=o.serializedText,d=-1,c=Jn(0),y=Jn("");function v(E){const D=E.data;if(!(!D||typeof D.type!="string")){if(D.type==="update"){d=typeof D.version=="number"?D.version:d;const V=typeof D.text=="string"?D.text:"";try{const z=b(V);Y(s,z.nodes),Y(a,z.edges),l=z.runtimeFields,u=z.metadataContext,f=z.serializedText,Y(c,h(c)+1),Y(y,"")}catch(z){Y(y,z instanceof Error?z.message:"Could not parse flow JSON.")}return}D.type==="error"&&Y(y,typeof D.message=="string"?D.message:"Unknown editor error.")}}function _(E){const D=E.detail??{};p(D.nodes,D.edges)}function p(E,D){const V=W({nodes:Array.isArray(E)?E:[],edges:Array.isArray(D)?D:[],runtimeFields:l,metadataContext:u});V.text!==f&&(Y(s,V.nodes),Y(a,V.edges),u=V.metadataContext,n().postMessage({type:"apply",text:V.text,sourceVersion:d}))}fu(()=>(window.addEventListener("message",v),n().postMessage({type:"ready"}),()=>{window.removeEventListener("message",v)}));function b(E){if(!E.trim())return A({},{});let D;try{D=JSON.parse(E)}catch{throw new Error("The underlying file is not valid JSON.")}if(!N(D))throw new Error("The flow file must be a JSON object.");if((Array.isArray(D.nodes)||Array.isArray(D.edges))&&!N(D[r]))return P(D);const V=N(D[r])?D[r]:{},z=C(D,[r]);return A(z,V)}function A(E,D){const V=F(E),z=new Set(Object.keys(V)),q=L(D,V,z);let U=O(q);U.nodes.length===0&&(U=O(w(q)));const Z=W({nodes:U.nodes,edges:U.edges,runtimeFields:E,metadataContext:q});return{nodes:Z.nodes,edges:Z.edges,runtimeFields:E,metadataContext:Z.metadataContext,serializedText:Z.text}}function P(E){var ue,Se,Me;const D=C(E,["nodes","edges",r]),V=H(),z=[],q=[],U=new Set,Z=Array.isArray(E.nodes)?E.nodes:[];for(let ve=0;ve<Z.length;ve+=1){const ne=Z[ve],te=I(ne==null?void 0:ne.id,ne==null?void 0:ne.type);if(U.has(te))continue;U.add(te);const ae=m(ne==null?void 0:ne.position,ve),ke=typeof((ue=ne==null?void 0:ne.data)==null?void 0:ue.label)=="string"&&ne.data.label.trim()?ne.data.label.trim():x(te),fe=typeof((Se=ne==null?void 0:ne.data)==null?void 0:Se.$comment)=="string"&&ne.data.$comment.trim()?ne.data.$comment.trim():void 0;V.nodeMetadataById[te]={$Position:{$x:ae.x,$y:ae.y}},ke!==x(te)&&(V.nodeMetadataById[te].$Title=ke);const xe=N((Me=ne==null?void 0:ne.data)==null?void 0:Me.$nodePayload)?{...ne.data.$nodePayload}:{};xe.$NodeId=te,fe!==void 0&&(xe.$Comment=fe),V.nodePayloadById[te]=xe,z.push({id:te,data:{label:ke,...fe!==void 0?{$comment:fe}:{}},position:ae})}const j=Array.isArray(E.edges)?E.edges:[];for(let ve=0;ve<j.length;ve+=1){const ne=j[ve],te=typeof(ne==null?void 0:ne.source)=="string"?ne.source:void 0,ae=typeof(ne==null?void 0:ne.target)=="string"?ne.target:void 0;if(!te||!ae||!U.has(te)||!U.has(ae))continue;const ke=typeof(ne==null?void 0:ne.id)=="string"&&ne.id.trim()?ne.id.trim():`${te}--${ae}`;V.linkById[ke]={$SourceNodeId:te,$TargetNodeId:ae},q.push({id:ke,source:te,target:ae})}if(z.length===0){const ve=J();z.push(ve),V.nodeMetadataById[ve.id]={$Position:{$x:ve.position.x,$y:ve.position.y}},V.nodePayloadById[ve.id]={$NodeId:ve.id}}const ye=W({nodes:z,edges:q,runtimeFields:D,metadataContext:V});return{nodes:ye.nodes,edges:ye.edges,runtimeFields:D,metadataContext:ye.metadataContext,serializedText:ye.text}}function w(E){const D={...E,nodeMetadataById:{...E.nodeMetadataById},nodePayloadById:{...E.nodePayloadById}},V=J();return D.nodeMetadataById[V.id]={$Position:{$x:V.position.x,$y:V.position.y}},D.nodePayloadById[V.id]={$NodeId:V.id},D}function O(E){const D=new Set([...Object.keys(E.nodeMetadataById),...Object.keys(E.nodePayloadById)]),V=[];for(const[U,Z]of Object.entries(E.linkById)){const j=T(U,Z);j&&(V.push(j),D.add(j.source),D.add(j.target))}const z=[],q=Array.from(D).sort();for(let U=0;U<q.length;U+=1){const Z=q[U],j=N(E.nodeMetadataById[Z])?E.nodeMetadataById[Z]:{},ye=N(E.nodePayloadById[Z])?E.nodePayloadById[Z]:{},ue=m(j==null?void 0:j.$Position,U),Se=M(Z,j,void 0,ye),Me=typeof ye.$Comment=="string"&&ye.$Comment.trim()?ye.$Comment.trim():void 0;z.push({id:Z,data:{label:Se,...Me!==void 0?{$comment:Me}:{}},position:ue})}return{nodes:z,edges:V}}function L(E,D={},V=new Set){const z=H();z.workspaceId=E.$WorkspaceID,z.groups=Array.isArray(E.$Groups)?E.$Groups:[],z.comments=Array.isArray(E.$Comments)?E.$Comments:[],z.floatingNodes=Array.isArray(E.$FloatingNodes)?E.$FloatingNodes:[],z.metadataExtraFields=C(E,i),z.nodePayloadById={...D},z.runtimeTreeNodeIds=V;const q=N(E.$Nodes)?E.$Nodes:{};for(const[Z,j]of Object.entries(q))typeof Z!="string"||!Z||!N(j)||(z.nodeMetadataById[Z]={...j});for(const Z of z.floatingNodes)!N(Z)||typeof Z.$NodeId!="string"||!Z.$NodeId||(z.nodePayloadById[Z.$NodeId]={...N(z.nodePayloadById[Z.$NodeId])?z.nodePayloadById[Z.$NodeId]:{},...Z});const U=N(E.$Links)?E.$Links:{};for(const[Z,j]of Object.entries(U))typeof Z!="string"||!Z||!N(j)||(z.linkById[Z]={...j});return z}function W(E){var Ve,sn,an;const D=E.metadataContext.nodeMetadataById,V=E.metadataContext.nodePayloadById,z=E.metadataContext.linkById,q=E.metadataContext.runtimeTreeNodeIds instanceof Set?E.metadataContext.runtimeTreeNodeIds:new Set,U=[],Z={},j={},ye=new Set,ue=Array.isArray(E.nodes)?E.nodes:[];for(let le=0;le<ue.length;le+=1){const re=ue[le],Ee=I(re==null?void 0:re.id,re==null?void 0:re.type);if(ye.has(Ee))continue;ye.add(Ee);const De=N(D[Ee])?{...D[Ee]}:{},Ae=N(V[Ee])?{...V[Ee]}:{},nt=m(re==null?void 0:re.position,le),Xt=M(Ee,De,(Ve=re==null?void 0:re.data)==null?void 0:Ve.label),At=typeof((sn=re==null?void 0:re.data)==null?void 0:sn.$comment)=="string"&&re.data.$comment.trim()?re.data.$comment.trim():void 0;De.$Position={$x:nt.x,$y:nt.y},Xt!==x(Ee)||typeof De.$Title=="string"?De.$Title=Xt:delete De.$Title,Ae.$NodeId=Ee,At!==void 0?Ae.$Comment=At:delete Ae.$Comment,Z[Ee]=De,j[Ee]=Ae,U.push({id:Ee,data:{label:Xt,...At!==void 0?{$comment:At}:{}},position:nt})}if(U.length===0){const le=J(),re={...E.metadataContext,nodeMetadataById:{...Z,[le.id]:{$Position:{$x:le.position.x,$y:le.position.y}}},nodePayloadById:{...j,[le.id]:{$NodeId:le.id}}};return W({...E,nodes:[le],metadataContext:re})}const Se=new Set(U.map(le=>le.id)),Me=[],ve=new Set,ne=Array.isArray(E.metadataContext.floatingNodes)?E.metadataContext.floatingNodes:[];for(const le of ne){if(!N(le))continue;const re=typeof le.$NodeId=="string"&&le.$NodeId.trim()?le.$NodeId.trim():void 0;!re||!Se.has(re)||(Me.push(le),B(le,ve))}for(const le of U){const re=le.id;if(q.has(re)||ve.has(re))continue;const Ee=typeof((an=le==null?void 0:le.data)==null?void 0:an.label)=="string"&&le.data.label.trim()?le.data.label.trim():x(re),Ae={...N(j[re])?j[re]:{},$NodeId:re};typeof Ae.Type!="string"&&Ee&&(Ae.Type=Ee),Me.push(Ae),B(Ae,ve),j[re]=Ae}const te=[],ae={},ke=new Set,fe=Array.isArray(E.edges)?E.edges:[];for(let le=0;le<fe.length;le+=1){const re=fe[le],Ee=typeof(re==null?void 0:re.source)=="string"?re.source:void 0,De=typeof(re==null?void 0:re.target)=="string"?re.target:void 0;if(!Ee||!De||!Se.has(Ee)||!Se.has(De))continue;const Ae=typeof(re==null?void 0:re.id)=="string"&&re.id.trim()?re.id.trim():`${Ee}--${De}`;if(ke.has(Ae))continue;ke.add(Ae);const nt=N(z[Ae])?{...z[Ae]}:{};nt.$SourceNodeId=Ee,nt.$TargetNodeId=De,ae[Ae]=nt,te.push({id:Ae,source:Ee,target:De})}const xe={workspaceId:E.metadataContext.workspaceId,groups:Array.isArray(E.metadataContext.groups)?E.metadataContext.groups:[],comments:Array.isArray(E.metadataContext.comments)?E.metadataContext.comments:[],floatingNodes:Me,runtimeTreeNodeIds:q,metadataExtraFields:N(E.metadataContext.metadataExtraFields)?E.metadataContext.metadataExtraFields:{},nodeMetadataById:Z,nodePayloadById:j,linkById:ae},et={...xe.metadataExtraFields,...xe.workspaceId!==void 0?{$WorkspaceID:xe.workspaceId}:{},$Nodes:xe.nodeMetadataById,$FloatingNodes:xe.floatingNodes,$Links:xe.linkById,$Groups:xe.groups,$Comments:xe.comments},tt={...E.runtimeFields,[r]:et};return{nodes:U,edges:te,metadataContext:xe,text:`${JSON.stringify(tt,null,2)}
`}}function T(E,D){const V=[D.$SourceNodeId,D.source,D.Source,D.from,D.From],z=[D.$TargetNodeId,D.target,D.Target,D.to,D.To];let q=V.find(Z=>typeof Z=="string"&&Z.trim()),U=z.find(Z=>typeof Z=="string"&&Z.trim());if((!q||!U)&&E.includes("--")){const[Z,j]=E.split("--");q=q??Z,U=U??j}if(!(!q||!U))return{id:E,source:q,target:U}}function H(){return{workspaceId:void 0,groups:[],comments:[],floatingNodes:[],runtimeTreeNodeIds:new Set,metadataExtraFields:{},nodeMetadataById:{},nodePayloadById:{},linkById:{}}}function J(){const E="Node-00000000-0000-0000-0000-000000000000";return{id:E,data:{label:x(E)},position:{x:0,y:50}}}function M(E,D,V,z){const q=typeof V=="string"&&V.trim()?V.trim():void 0;if(q!==void 0)return q;const U=typeof(D==null?void 0:D.$Title)=="string"&&D.$Title.trim()?D.$Title.trim():void 0;if(U!==void 0)return U;const Z=typeof(z==null?void 0:z.Type)=="string"&&z.Type.trim()?z.Type.trim():void 0;return Z!==void 0?Z:x(E)}function x(E){if(typeof E!="string"||!E.trim())return"Node";const[D,V]=E.split("-",2);return D&&V?D:E}function I(E,D,V){return typeof E=="string"&&E.trim()?E.trim():typeof E=="number"&&Number.isFinite(E)?String(E):`${(typeof D=="string"&&D.trim()?D.trim().replace(/[^A-Za-z0-9_]/g,""):"Node")||"Node"}-${X()}`}function m(E,D){const V=D*180,z=100,q=Number(E==null?void 0:E.x),U=Number(E==null?void 0:E.y),Z=Number(E==null?void 0:E.$x),j=Number(E==null?void 0:E.$y);return{x:Number.isFinite(q)?q:Number.isFinite(Z)?Z:V,y:Number.isFinite(U)?U:Number.isFinite(j)?j:z}}function C(E,D){if(!N(E))return{};const V=new Set(D);return Object.fromEntries(Object.entries(E).filter(([z])=>!V.has(z)))}function N(E){return E!==null&&typeof E=="object"&&!Array.isArray(E)}function F(E){const D={},V=z=>{if(Array.isArray(z)){for(const U of z)V(U);return}if(!N(z))return;const q=typeof z.$NodeId=="string"&&z.$NodeId.trim()?z.$NodeId.trim():void 0;q&&!N(D[q])&&(D[q]=z);for(const[U,Z]of Object.entries(z))U!==r&&V(Z)};return V(E),D}function B(E,D){const V=z=>{if(Array.isArray(z)){for(const U of z)V(U);return}if(!N(z))return;const q=typeof z.$NodeId=="string"&&z.$NodeId.trim()?z.$NodeId.trim():void 0;q&&D.add(q);for(const[U,Z]of Object.entries(z))U!==r&&V(Z)};V(E)}function X(){return typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():Math.random().toString(16).slice(2)}Ds();var K=Nm(),G=Ce(K);{var ee=E=>{var D=Sm(),V=Ce(D);Te(()=>_n(V,h(y))),ie(E,D)};st(G,E=>{h(y)&&E(ee)})}var $=Oe(G,2);gm($,{children:(E,D)=>{Em(E,{get loadVersion(){return h(c)},get nodes(){return h(s)},set nodes(V){Y(s,V)},get edges(){return h(a)},set edges(V){Y(a,V)},$$events:{flowchange:_},$$legacy:!0})},$$slots:{default:!0}}),ie(e,K),ge()}const Cm=acquireVsCodeApi();qf(km,{target:document.getElementById("app"),props:{vscode:Cm}});
//# sourceMappingURL=main.js.map
